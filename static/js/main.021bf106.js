/*! For license information please see main.021bf106.js.LICENSE.txt */
(()=>{var t={999:function(t,e,i){var r;"undefined"!=typeof self&&self,t.exports=(r=i(43),function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},r.apply(this,arguments)}function n(t){return l(t)||s(t)||a(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}function s(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function l(t){if(Array.isArray(t))return c(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HighchartsReact",(function(){return f}));var h=i(1),d=i.n(h),p="undefined"!=typeof window?h.useLayoutEffect:h.useEffect,f=Object(h.memo)(Object(h.forwardRef)((function(t,e){var i=Object(h.useRef)(),o=Object(h.useRef)(),a=Object(h.useRef)(t.constructorType),s=Object(h.useRef)(t.highcharts);return p((function(){function e(){var e=t.highcharts||"object"===("undefined"==typeof window?"undefined":u(window))&&window.Highcharts,r=t.constructorType||"chart";e?e[r]?t.options?o.current=e[r](i.current,t.options,t.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(o.current){if(!1!==t.allowChartUpdate)if(t.constructorType!==a.current||t.highcharts!==s.current)a.current=t.constructorType,s.current=t.highcharts,e();else if(!t.immutable&&o.current){var r;(r=o.current).update.apply(r,[t.options].concat(n(t.updateArgs||[!0,!0])))}else e()}else e()}),[t.options,t.allowChartUpdate,t.updateArgs,t.containerProps,t.highcharts,t.constructorType]),p((function(){return function(){o.current&&(o.current.destroy(),o.current=null)}}),[]),Object(h.useImperativeHandle)(e,(function(){return{get chart(){return o.current},container:i}}),[]),d.a.createElement("div",r({},t.containerProps,{ref:i}))})));e.default=f},function(t,e){t.exports=r}]))},488:function(t,e,i){var r,n,o;n="undefined"!=typeof window?window:this,o=function(t){"use strict";var e={};function i(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),"function"==typeof CustomEvent&&t.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}return i(e,"Core/Globals.js",[],(function(){var e,i;return(i=e||(e={})).SVG_NS="http://www.w3.org/2000/svg",i.product="Highcharts",i.version="11.4.3",i.win=void 0!==t?t:{},i.doc=i.win.document,i.svg=i.doc&&i.doc.createElementNS&&!!i.doc.createElementNS(i.SVG_NS,"svg").createSVGRect,i.userAgent=i.win.navigator&&i.win.navigator.userAgent||"",i.isChrome=-1!==i.userAgent.indexOf("Chrome"),i.isFirefox=-1!==i.userAgent.indexOf("Firefox"),i.isMS=/(edge|msie|trident)/i.test(i.userAgent)&&!i.win.opera,i.isSafari=!i.isChrome&&-1!==i.userAgent.indexOf("Safari"),i.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(i.userAgent),i.isWebKit=-1!==i.userAgent.indexOf("AppleWebKit"),i.deg2rad=2*Math.PI/360,i.hasBidiBug=i.isFirefox&&4>parseInt(i.userAgent.split("Firefox/")[1],10),i.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],i.noop=function(){},i.supportsPassiveEvents=function(){let t=!1;if(!i.isMS){let e=Object.defineProperty({},"passive",{get:function(){t=!0}});i.win.addEventListener&&i.win.removeEventListener&&(i.win.addEventListener("testPassive",i.noop,e),i.win.removeEventListener("testPassive",i.noop,e))}return t}(),i.charts=[],i.composed=[],i.dateFormats={},i.seriesTypes={},i.symbolSizes={},i.chartCount=0,e})),i(e,"Core/Utilities.js",[e["Core/Globals.js"]],(function(t){let e,{charts:i,doc:r,win:n}=t;function o(e,i,r,a){let s=i?"Highcharts error":"Highcharts warning";32===e&&(e="".concat(s,": Deprecated member"));let l=d(e),c=l?"".concat(s," #").concat(e,": www.highcharts.com/errors/").concat(e,"/"):e.toString();if(void 0!==a){let t="";l&&(c+="?"),w(a,(function(e,i){t+="\n - ".concat(i,": ").concat(e),l&&(c+=encodeURI(i)+"="+encodeURI(e))})),c+=t}k(t,"displayError",{chart:r,code:e,message:c,params:a},(function(){if(i)throw Error(c);n.console&&-1===o.messages.indexOf(c)&&console.warn(c)})),o.messages.push(c)}function a(t,e){return parseInt(t,e||10)}function s(t){return"string"==typeof t}function l(t){let e=Object.prototype.toString.call(t);return"[object Array]"===e||"[object Array Iterator]"===e}function c(t,e){return!!t&&"object"==typeof t&&(!e||!l(t))}function u(t){return c(t)&&"number"==typeof t.nodeType}function h(t){let e=t&&t.constructor;return!(!c(t,!0)||u(t)||!e||!e.name||"Object"===e.name)}function d(t){return"number"==typeof t&&!isNaN(t)&&t<1/0&&t>-1/0}function p(t){return null!=t}function f(t,e,i){let r,n=s(e)&&!p(i),o=(e,i)=>{p(e)?t.setAttribute(i,e):n?(r=t.getAttribute(i))||"class"!==i||(r=t.getAttribute(i+"Name")):t.removeAttribute(i)};return s(e)?o(i,e):w(e,o),r}function m(t){return l(t)?t:[t]}function g(t,e){let i;for(i in t||(t={}),e)t[i]=e[i];return t}function y(){let t=arguments,e=t.length;for(let i=0;i<e;i++){let e=t[i];if(null!=e)return e}}function v(t,e){g(t.style,e)}function x(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function _(t,e){return t>1e14?t:parseFloat(t.toPrecision(e||14))}(o||(o={})).messages=[],Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)};let b=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){let i,r=t.length;for(i=0;i<r;i++)if(e(t[i],i))return t[i]};function w(t,e,i){for(let r in t)Object.hasOwnProperty.call(t,r)&&e.call(i||t[r],t[r],r,t)}function S(t,e,i){function r(e,i){let r=t.removeEventListener;r&&r.call(t,e,i,!1)}function n(i){let n,o;t.nodeName&&(e?(n={})[e]=!0:n=i,w(n,(function(t,e){if(i[e])for(o=i[e].length;o--;)r(e,i[e][o].fn)})))}let o="function"==typeof t&&t.prototype||t;if(Object.hasOwnProperty.call(o,"hcEvents")){let t=o.hcEvents;if(e){let o=t[e]||[];i?(t[e]=o.filter((function(t){return i!==t.fn})),r(e,i)):(n(t),t[e]=[])}else n(t),delete o.hcEvents}}function k(e,i,n,o){if(n=n||{},r.createEvent&&(e.dispatchEvent||e.fireEvent&&e!==t)){let t=r.createEvent("Events");t.initEvent(i,!0,!0),n=g(t,n),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent(i,n)}else if(e.hcEvents){n.target||g(n,{preventDefault:function(){n.defaultPrevented=!0},target:e,type:i});let t=[],r=e,o=!1;for(;r.hcEvents;)Object.hasOwnProperty.call(r,"hcEvents")&&r.hcEvents[i]&&(t.length&&(o=!0),t.unshift.apply(t,r.hcEvents[i])),r=Object.getPrototypeOf(r);o&&t.sort(((t,e)=>t.order-e.order)),t.forEach((t=>{!1===t.fn.call(e,n)&&n.preventDefault()}))}o&&!n.defaultPrevented&&o.call(e,n)}w({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},(function(e,i){t[i]=function(t){return o(32,!1,void 0,{["Highcharts.".concat(i)]:"use Array.".concat(e)}),Array.prototype[e].apply(t,[].slice.call(arguments,1))}}));let C=function(){let t=Math.random().toString(36).substring(2,9)+"-",i=0;return function(){return"highcharts-"+(e?"":t)+i++}}();return n.jQuery&&(n.jQuery.fn.highcharts=function(){let e=[].slice.call(arguments);if(this[0])return e[0]?(new(t[s(e[0])?e.shift():"Chart"])(this[0],e[0],e[1]),this):i[f(this[0],"data-highcharts-chart")]}),{addEvent:function(e,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="function"==typeof e&&e.prototype||e;Object.hasOwnProperty.call(o,"hcEvents")||(o.hcEvents={});let a=o.hcEvents;t.Point&&e instanceof t.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);let s=e.addEventListener;s&&s.call(e,i,r,!!t.supportsPassiveEvents&&{passive:void 0===n.passive?-1!==i.indexOf("touch"):n.passive,capture:!1}),a[i]||(a[i]=[]);let l={fn:r,order:"number"==typeof n.order?n.order:1/0};return a[i].push(l),a[i].sort(((t,e)=>t.order-e.order)),function(){S(e,i,r)}},arrayMax:function(t){let e=t.length,i=t[0];for(;e--;)t[e]>i&&(i=t[e]);return i},arrayMin:function(t){let e=t.length,i=t[0];for(;e--;)t[e]<i&&(i=t[e]);return i},attr:f,clamp:function(t,e,i){return t>e?t<i?t:i:e},clearTimeout:function(t){p(t)&&clearTimeout(t)},correctFloat:_,createElement:function(t,e,i,n,o){let a=r.createElement(t);return e&&g(a,e),o&&v(a,{padding:"0",border:"none",margin:"0"}),i&&v(a,i),n&&n.appendChild(a),a},crisp:function(t){let e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)%2/2,i=(arguments.length>2?arguments[2]:void 0)?-1:1;return(Math.round(t*i-e)+e)*i},css:v,defined:p,destroyObjectProperties:function(t,e,i){w(t,(function(r,n){r!==e&&null!==r&&void 0!==r&&r.destroy&&r.destroy(),((null===r||void 0===r?void 0:r.destroy)||!i)&&delete t[n]}))},diffObjects:function(t,e,i,r){let n={};return function t(e,n,o,a){let s=i?n:e;w(e,(function(i,u){if(!a&&r&&r.indexOf(u)>-1&&n[u]){i=m(i),o[u]=[];for(let e=0;e<Math.max(i.length,n[u].length);e++)n[u][e]&&(void 0===i[e]?o[u][e]=n[u][e]:(o[u][e]={},t(i[e],n[u][e],o[u][e],a+1)))}else c(i,!0)&&!i.nodeType?(o[u]=l(i)?[]:{},t(i,n[u]||{},o[u],a+1),0!==Object.keys(o[u]).length||"colorAxis"===u&&0===a||delete o[u]):(e[u]!==n[u]||u in e&&!(u in n))&&"__proto__"!==u&&"constructor"!==u&&(o[u]=s[u])}))}(t,e,n,0),n},discardElement:function(t){t&&t.parentElement&&t.parentElement.removeChild(t)},erase:function(t,e){let i=t.length;for(;i--;)if(t[i]===e){t.splice(i,1);break}},error:o,extend:g,extendClass:function(t,e){let i=function(){};return g(i.prototype=new t,e),i},find:b,fireEvent:k,getClosestDistance:function(t,e){let i,r,n,o,a=!e;return t.forEach((t=>{if(t.length>1)for(o=r=t.length-1;o>0;o--){var s;(n=t[o]-t[o-1])<0&&!a?(null!==(s=e)&&void 0!==s&&s(),e=void 0):n&&(void 0===i||n<i)&&(i=n)}})),i},getMagnitude:x,getNestedProperty:function(t,e){let i=t.split(".");for(;i.length&&p(e);){let t=i.shift();if(void 0===t||"__proto__"===t)return;if("this"===t){var r;let t;return c(e)&&(t=e["@this"]),null!==(r=t)&&void 0!==r?r:e}let o=e[t];if(!p(o)||"function"==typeof o||"number"==typeof o.nodeType||o===n)return;e=o}return e},getStyle:function t(e,i,r){let o;if("width"===i){let i=Math.min(e.offsetWidth,e.scrollWidth),r=e.getBoundingClientRect&&e.getBoundingClientRect().width;return r<i&&r>=i-1&&(i=Math.floor(r)),Math.max(0,i-(t(e,"padding-left",!0)||0)-(t(e,"padding-right",!0)||0))}if("height"===i)return Math.max(0,Math.min(e.offsetHeight,e.scrollHeight)-(t(e,"padding-top",!0)||0)-(t(e,"padding-bottom",!0)||0));let s=n.getComputedStyle(e,void 0);return s&&(o=s.getPropertyValue(i),y(r,"opacity"!==i)&&(o=a(o))),o},inArray:function(t,e,i){return o(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),e.indexOf(t,i)},insertItem:function(t,e){let i,r=t.options.index,n=e.length;for(i=t.options.isInternal?n:0;i<n+1;i++)if(!e[i]||d(r)&&r<y(e[i].options.index,e[i]._i)||e[i].options.isInternal){e.splice(i,0,t);break}return i},isArray:l,isClass:h,isDOMElement:u,isFunction:function(t){return"function"==typeof t},isNumber:d,isObject:c,isString:s,keys:function(t){return o(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(t)},merge:function(){let t,e=arguments,i={},r=function(t,e){return"object"!=typeof t&&(t={}),w(e,(function(i,n){"__proto__"!==n&&"constructor"!==n&&(!c(i,!0)||h(i)||u(i)?t[n]=e[n]:t[n]=r(t[n]||{},i))})),t};!0===e[0]&&(i=e[1],e=Array.prototype.slice.call(e,2));let n=e.length;for(t=0;t<n;t++)i=r(i,e[t]);return i},normalizeTickInterval:function(t,e,i,r,n){let o,a=t,s=t/(i=y(i,x(t)));for(!e&&(e=n?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===r&&(1===i?e=e.filter((function(t){return t%1==0})):i<=.1&&(e=[1/i]))),o=0;o<e.length&&(a=e[o],(!n||!(a*i>=t))&&(n||!(s<=(e[o]+(e[o+1]||e[o]))/2)));o++);return _(a*i,-Math.round(Math.log(.001)/Math.LN10))},objectEach:w,offset:function(t){let e=r.documentElement,i=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:i.width,height:i.height}},pad:function(t,e,i){return Array((e||2)+1-String(t).replace("-","").length).join(i||"0")+t},pick:y,pInt:a,pushUnique:function(t,e){return 0>t.indexOf(e)&&!!t.push(e)},relativeLength:function(t,e,i){return/%$/.test(t)?e*parseFloat(t)/100+(i||0):parseFloat(t)},removeEvent:S,replaceNested:function(t){let e,i;for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];do{for(i of(e=t,n))t=t.replace(i[0],i[1])}while(t!==e);return t},splat:m,stableSort:function(t,e){let i,r,n=t.length;for(r=0;r<n;r++)t[r].safeI=r;for(t.sort((function(t,r){return 0===(i=e(t,r))?t.safeI-r.safeI:i})),r=0;r<n;r++)delete t[r].safeI},syncTimeout:function(t,e,i){return e>0?setTimeout(t,e,i):(t.call(0,i),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:C,useSerialIds:function(t){return e=y(t,e)},wrap:function(t,e,i){let r=t[e];t[e]=function(){let t=arguments,e=this;return i.apply(this,[function(){return r.apply(e,arguments.length?arguments:t)}].concat([].slice.call(arguments)))}}}})),i(e,"Core/Chart/ChartDefaults.js",[],(function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}})),i(e,"Core/Color/Palettes.js",[],(function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}})),i(e,"Core/Time.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e){let{win:i}=t,{defined:r,error:n,extend:o,isNumber:a,isObject:s,merge:l,objectEach:c,pad:u,pick:h,splat:d,timeUnits:p}=e,f=t.isSafari&&i.Intl&&i.Intl.DateTimeFormat.prototype.formatRange,m=t.isSafari&&i.Intl&&!i.Intl.DateTimeFormat.prototype.formatRange;class g{constructor(t){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=i.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(t)}get(t,e){if(this.variableTimezone||this.timezoneOffset){let i=e.getTime(),r=i-this.getTimezoneOffset(e);e.setTime(r);let n=e["getUTC"+t]();return e.setTime(i),n}return this.useUTC?e["getUTC"+t]():e["get"+t]()}set(t,e,i){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===t||"Seconds"===t||"Minutes"===t&&this.getTimezoneOffset(e)%36e5==0)return e["setUTC"+t](i);let r=this.getTimezoneOffset(e),n=e.getTime()-r;e.setTime(n),e["setUTC"+t](i);let o=this.getTimezoneOffset(e);return n=e.getTime()+o,e.setTime(n)}return this.useUTC||f&&"FullYear"===t?e["setUTC"+t](i):e["set"+t](i)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=h(t.useUTC,!0);this.options=t=l(!0,this.options,t),this.Date=t.Date||i.Date||Date,this.useUTC=e,this.timezoneOffset=e&&t.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=e&&!(!t.getTimezoneOffset&&!t.timezone)}makeTime(t,e,i,r,n,o){let a,s,l;return this.useUTC?(a=this.Date.UTC.apply(0,arguments),s=this.getTimezoneOffset(a),a+=s,s!==(l=this.getTimezoneOffset(a))?a+=l-s:s-36e5!==this.getTimezoneOffset(a-36e5)||m||(a-=36e5)):a=new this.Date(t,e,h(i,1),h(r,0),h(n,0),h(o,0)).getTime(),a}timezoneOffsetFunction(){let t=this,e=this.options,i=e.getTimezoneOffset;return this.useUTC?e.timezone?t=>{try{let i="shortOffset,".concat(e.timezone||""),[r,n,o,s,l=0]=(g.formatCache[i]=g.formatCache[i]||Intl.DateTimeFormat("en",{timeZone:e.timezone,timeZoneName:"shortOffset"})).format(t).split(/(GMT|:)/).map(Number),c=-36e5*(o+l/60);if(a(c))return c}catch(t){n(34)}return 0}:this.useUTC&&i?t=>6e4*i(t.valueOf()):()=>6e4*(t.timezoneOffset||0):t=>6e4*new Date(t.toString()).getTimezoneOffset()}dateFormat(e,i,n){if(!r(i)||isNaN(i))return t.defaultOptions.lang&&t.defaultOptions.lang.invalidDate||"";e=h(e,"%Y-%m-%d %H:%M:%S");let a=this,s=new this.Date(i),l=this.get("Hours",s),d=this.get("Day",s),p=this.get("Date",s),f=this.get("Month",s),m=this.get("FullYear",s),g=t.defaultOptions.lang,y=g&&g.weekdays,v=g&&g.shortWeekdays;return c(o({a:v?v[d]:y[d].substr(0,3),A:y[d],d:u(p),e:u(p,2," "),w:d,b:g.shortMonths[f],B:g.months[f],m:u(f+1),o:f+1,y:m.toString().substr(2,2),Y:m,H:u(l),k:l,I:u(l%12||12),l:l%12||12,M:u(this.get("Minutes",s)),p:l<12?"AM":"PM",P:l<12?"am":"pm",S:u(this.get("Seconds",s)),L:u(Math.floor(i%1e3),3)},t.dateFormats),(function(t,r){for(;-1!==e.indexOf("%"+r);)e=e.replace("%"+r,"function"==typeof t?t.call(a,i):t)})),n?e.substr(0,1).toUpperCase()+e.substr(1):e}resolveDTLFormat(t){return s(t,!0)?t:{main:(t=d(t))[0],from:t[1],to:t[2]}}getTimeTicks(t,e,i,n){let a,s,l,c,u=this,d=u.Date,f=[],m={},g=new d(e),y=t.unitRange,v=t.count||1;if(n=h(n,1),r(e)){u.set("Milliseconds",g,y>=p.second?0:v*Math.floor(u.get("Milliseconds",g)/v)),y>=p.second&&u.set("Seconds",g,y>=p.minute?0:v*Math.floor(u.get("Seconds",g)/v)),y>=p.minute&&u.set("Minutes",g,y>=p.hour?0:v*Math.floor(u.get("Minutes",g)/v)),y>=p.hour&&u.set("Hours",g,y>=p.day?0:v*Math.floor(u.get("Hours",g)/v)),y>=p.day&&u.set("Date",g,y>=p.month?1:Math.max(1,v*Math.floor(u.get("Date",g)/v))),y>=p.month&&(u.set("Month",g,y>=p.year?0:v*Math.floor(u.get("Month",g)/v)),s=u.get("FullYear",g)),y>=p.year&&(s-=s%v,u.set("FullYear",g,s)),y===p.week&&(c=u.get("Day",g),u.set("Date",g,u.get("Date",g)-c+n+(c<n?-7:0))),s=u.get("FullYear",g);let t=u.get("Month",g),o=u.get("Date",g),h=u.get("Hours",g);e=g.getTime(),(u.variableTimezone||!u.useUTC)&&r(i)&&(l=i-e>4*p.month||u.getTimezoneOffset(e)!==u.getTimezoneOffset(i));let d=g.getTime();for(a=1;d<i;)f.push(d),y===p.year?d=u.makeTime(s+a*v,0):y===p.month?d=u.makeTime(s,t+a*v):!l||y!==p.day&&y!==p.week?l&&y===p.hour&&v>1?d=u.makeTime(s,t,o,h+a*v):d+=y*v:d=u.makeTime(s,t,o+a*v*(y===p.day?1:7)),a++;f.push(d),y<=p.hour&&f.length<1e4&&f.forEach((function(t){t%18e5==0&&"000000000"===u.dateFormat("%H%M%S%L",t)&&(m[t]="day")}))}return f.info=o(t,{higherRanks:m,totalRange:y*v}),f}getDateFormat(t,e,i,r){let n=this.dateFormat("%m-%d %H:%M:%S.%L",e),o="01-01 00:00:00.000",a={millisecond:15,second:12,minute:9,hour:6,day:3},s="millisecond",l=s;for(s in p){if(t===p.week&&+this.dateFormat("%w",e)===i&&n.substr(6)===o.substr(6)){s="week";break}if(p[s]>t){s=l;break}if(a[s]&&n.substr(a[s])!==o.substr(a[s]))break;"week"!==s&&(l=s)}return this.resolveDTLFormat(r[s]).main}}return g.formatCache={},g})),i(e,"Core/Defaults.js",[e["Core/Chart/ChartDefaults.js"],e["Core/Globals.js"],e["Core/Color/Palettes.js"],e["Core/Time.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n){let{isTouchDevice:o}=e,{fireEvent:a,merge:s}=n,l={colors:i.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:t,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:t=>Math.sqrt(1-Math.pow(t-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:o?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};l.chart.styledMode=!1;let c=new r(l.time);return{defaultOptions:l,defaultTime:c,getOptions:function(){return l},setOptions:function(t){return a(e,"setOptions",{options:t}),s(!0,l,t),(t.time||t.global)&&(e.time?e.time.update(s(l.global,l.time,t.global,t.time)):e.time=c),l}}})),i(e,"Core/Color/Color.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e){let{isNumber:i,merge:r,pInt:n}=e;class o{static parse(t){return t?new o(t):o.None}constructor(e){let i,r,n,a;this.rgba=[NaN,NaN,NaN,NaN],this.input=e;let s=t.Color;if(s&&s!==o)return new s(e);if("object"==typeof e&&void 0!==e.stops)this.stops=e.stops.map((t=>new o(t[1])));else if("string"==typeof e){if(this.input=e=o.names[e.toLowerCase()]||e,"#"===e.charAt(0)){let t=e.length,i=parseInt(e.substr(1),16);7===t?r=[(16711680&i)>>16,(65280&i)>>8,255&i,1]:4===t&&(r=[(3840&i)>>4|(3840&i)>>8,(240&i)>>4|240&i,(15&i)<<4|15&i,1])}if(!r)for(n=o.parsers.length;n--&&!r;)(i=(a=o.parsers[n]).regex.exec(e))&&(r=a.parse(i))}r&&(this.rgba=r)}get(t){let e=this.input,n=this.rgba;if("object"==typeof e&&void 0!==this.stops){let i=r(e);return i.stops=[].slice.call(i.stops),this.stops.forEach(((e,r)=>{i.stops[r]=[i.stops[r][0],e.get(t)]})),i}return n&&i(n[0])?"rgb"===t||!t&&1===n[3]?"rgb("+n[0]+","+n[1]+","+n[2]+")":"a"===t?"".concat(n[3]):"rgba("+n.join(",")+")":e}brighten(t){let e=this.rgba;if(this.stops)this.stops.forEach((function(e){e.brighten(t)}));else if(i(t)&&0!==t)for(let i=0;i<3;i++)e[i]+=n(255*t),e[i]<0&&(e[i]=0),e[i]>255&&(e[i]=255);return this}setOpacity(t){return this.rgba[3]=t,this}tweenTo(t,e){let r=this.rgba,n=t.rgba;if(!i(r[0])||!i(n[0]))return t.input||"none";let o=1!==n[3]||1!==r[3];return(o?"rgba(":"rgb(")+Math.round(n[0]+(r[0]-n[0])*(1-e))+","+Math.round(n[1]+(r[1]-n[1])*(1-e))+","+Math.round(n[2]+(r[2]-n[2])*(1-e))+(o?","+(n[3]+(r[3]-n[3])*(1-e)):"")+")"}}return o.names={white:"#ffffff",black:"#000000"},o.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[n(t[1]),n(t[2]),n(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[n(t[1]),n(t[2]),n(t[3]),1]}}],o.None=new o(""),o})),i(e,"Core/Animation/Fx.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e,i){let{parse:r}=t,{win:n}=e,{isNumber:o,objectEach:a}=i;class s{constructor(t,e,i){this.pos=NaN,this.options=e,this.elem=t,this.prop=i}dSetter(){let t=this.paths,e=t&&t[0],i=t&&t[1],r=this.now||0,n=[];if(1!==r&&e&&i)if(e.length===i.length&&r<1)for(let a=0;a<i.length;a++){let t=e[a],s=i[a],l=[];for(let e=0;e<s.length;e++){let i=t[e],n=s[e];o(i)&&o(n)&&("A"!==s[0]||4!==e&&5!==e)?l[e]=i+r*(n-i):l[e]=n}n.push(l)}else n=i;else n=this.toD||[];this.elem.attr("d",n,void 0,!0)}update(){let t=this.elem,e=this.prop,i=this.now,r=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,i,null,!0):t.style[e]=i+this.unit,r&&r.call(t,i,this)}run(t,e,i){let r=this,o=r.options,a=function(t){return!a.stopped&&r.step(t)},l=n.requestAnimationFrame||function(t){setTimeout(t,13)},c=function(){for(let t=0;t<s.timers.length;t++)s.timers[t]()||s.timers.splice(t--,1);s.timers.length&&l(c)};t!==e||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=t,this.end=e,this.unit=i,this.now=this.start,this.pos=0,a.elem=this.elem,a.prop=this.prop,a()&&1===s.timers.push(a)&&l(c)):(delete o.curAnim[this.prop],o.complete&&0===Object.keys(o.curAnim).length&&o.complete.call(this.elem))}step(t){let e,i,r=+new Date,n=this.options,o=this.elem,s=n.complete,l=n.duration,c=n.curAnim;return o.attr&&!o.element?e=!1:t||r>=l+this.startTime?(this.now=this.end,this.pos=1,this.update(),c[this.prop]=!0,i=!0,a(c,(function(t){!0!==t&&(i=!1)})),i&&s&&s.call(o),e=!1):(this.pos=n.easing((r-this.startTime)/l),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0),e}initPath(t,e,i){let r,n,a,s,l=t.startX,c=t.endX,u=i.slice(),h=t.isArea,d=h?2:1,p=e&&e.slice();if(!p)return[u,u];function f(t,e){for(;t.length<n;){let i=t[0],r=e[n-t.length];if(r&&"M"===i[0]&&("C"===r[0]?t[0]=["C",i[1],i[2],i[1],i[2],i[1],i[2]]:t[0]=["L",i[1],i[2]]),t.unshift(i),h){let e=t.pop();t.push(t[t.length-1],e)}}}function m(t){for(;t.length<n;){let e=t[Math.floor(t.length/d)-1].slice();if("C"===e[0]&&(e[1]=e[5],e[2]=e[6]),h){let i=t[Math.floor(t.length/d)].slice();t.splice(t.length/2,0,e,i)}else t.push(e)}}if(l&&c&&c.length){for(a=0;a<l.length;a++){if(l[a]===c[0]){r=a;break}if(l[0]===c[c.length-l.length+a]){r=a,s=!0;break}if(l[l.length-1]===c[c.length-l.length+a]){r=l.length-a;break}}void 0===r&&(p=[])}return p.length&&o(r)&&(n=u.length+r*d,s?(f(p,u),m(u)):(f(u,p),m(p))),[p,u]}fillSetter(){s.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,r(this.start).tweenTo(r(this.end),this.pos),void 0,!0)}}return s.timers=[],s})),i(e,"Core/Animation/AnimationUtilities.js",[e["Core/Animation/Fx.js"],e["Core/Utilities.js"]],(function(t,e){let{defined:i,getStyle:r,isArray:n,isNumber:o,isObject:a,merge:s,objectEach:l,pick:c}=e;function u(t){return a(t)?s({duration:500,defer:0},t):{duration:t?500:0,defer:0}}function h(e,i){let r=t.timers.length;for(;r--;)t.timers[r].elem!==e||i&&i!==t.timers[r].prop||(t.timers[r].stopped=!0)}return{animate:function(e,i,c){let u,d,p,f,m="";a(c)||(f=arguments,c={duration:f[2],easing:f[3],complete:f[4]}),o(c.duration)||(c.duration=400),c.easing="function"==typeof c.easing?c.easing:Math[c.easing]||Math.easeInOutSine,c.curAnim=s(i),l(i,(function(o,a){h(e,a),p=new t(e,c,a),d=void 0,"d"===a&&n(i.d)?(p.paths=p.initPath(e,e.pathArray,i.d),p.toD=i.d,u=0,d=1):e.attr?u=e.attr(a):(u=parseFloat(r(e,a))||0,"opacity"!==a&&(m="px")),d||(d=o),"string"==typeof d&&d.match("px")&&(d=d.replace(/px/g,"")),p.run(u,d,m)}))},animObject:u,getDeferredAnimation:function(t,e,r){let n=u(e),o=r?[r]:t.series,s=0,l=0;return o.forEach((t=>{let r=u(t.options.animation);s=a(e)&&i(e.defer)?n.defer:Math.max(s,r.duration+r.defer),l=Math.min(n.duration,r.duration)})),t.renderer.forExport&&(s=0),{defer:Math.max(0,s-l),duration:Math.min(s,l)}},setAnimation:function(t,e){e.renderer.globalAnimation=c(t,e.options.chart.animation,!0)},stop:h}})),i(e,"Core/Renderer/HTML/AST.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e){let{SVG_NS:i,win:r}=t,{attr:n,createElement:o,css:a,error:s,isFunction:l,isString:c,objectEach:u,splat:h}=e,{trustedTypes:d}=r,p=d&&l(d.createPolicy)&&d.createPolicy("highcharts",{createHTML:t=>t}),f=p?p.createHTML(""):"",m=function(){try{return!!(new DOMParser).parseFromString(f,"text/html")}catch(t){return!1}}();class g{static filterUserAttributes(t){return u(t,((e,i)=>{let r=!0;-1===g.allowedAttributes.indexOf(i)&&(r=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(r=c(e)&&g.allowedReferences.some((t=>0===e.indexOf(t)))),r||(s(33,!1,void 0,{"Invalid attribute in config":"".concat(i)}),delete t[i]),c(e)&&t[i]&&(t[i]=e.replace(/</g,"&lt;"))})),t}static parseStyle(t){return t.split(";").reduce(((t,e)=>{let i=e.split(":").map((t=>t.trim())),r=i.shift();return r&&i.length&&(t[r.replace(/-([a-z])/g,(t=>t[1].toUpperCase()))]=i.join(":")),t}),{})}static setElementHTML(t,e){t.innerHTML=g.emptyHTML,e&&new g(e).addToDOM(t)}constructor(t){this.nodes="string"==typeof t?this.parseMarkup(t):t}addToDOM(e){return function e(r,o){let l;return h(r).forEach((function(r){let c,h=r.tagName,d=r.textContent?t.doc.createTextNode(r.textContent):void 0,p=g.bypassHTMLFiltering;if(h)if("#text"===h)c=d;else if(-1!==g.allowedTags.indexOf(h)||p){let s="svg"===h?i:o.namespaceURI||i,l=t.doc.createElementNS(s,h),f=r.attributes||{};u(r,(function(t,e){"tagName"!==e&&"attributes"!==e&&"children"!==e&&"style"!==e&&"textContent"!==e&&(f[e]=t)})),n(l,p?f:g.filterUserAttributes(f)),r.style&&a(l,r.style),d&&l.appendChild(d),e(r.children||[],l),c=l}else s(33,!1,void 0,{"Invalid tagName in config":h});c&&o.appendChild(c),l=c})),l}(this.nodes,e)}parseMarkup(t){let e,i=[];if(t=t.trim().replace(/ style=(["'])/g," data-style=$1"),m)e=(new DOMParser).parseFromString(p?p.createHTML(t):t,"text/html");else{let i=o("div");i.innerHTML=t,e={body:i}}let r=(t,e)=>{let i=t.nodeName.toLowerCase(),n={tagName:i};"#text"===i&&(n.textContent=t.textContent||"");let o=t.attributes;if(o){let t={};[].forEach.call(o,(e=>{"data-style"===e.name?n.style=g.parseStyle(e.value):t[e.name]=e.value})),n.attributes=t}if(t.childNodes.length){let e=[];[].forEach.call(t.childNodes,(t=>{r(t,e)})),e.length&&(n.children=e)}e.push(n)};return[].forEach.call(e.body.childNodes,(t=>r(t,i))),i}}return g.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","markerHeight","markerWidth","offset","opacity","orient","padding","paddingLeft","paddingRight","patternUnits","r","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],g.allowedReferences=["https://","http://","mailto:","/","../","./","#"],g.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feDropShadow","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],g.emptyHTML=f,g.bypassHTMLFiltering=!1,g})),i(e,"Core/Templating.js",[e["Core/Defaults.js"],e["Core/Utilities.js"]],(function(t,e){let{defaultOptions:i,defaultTime:r}=t,{extend:n,getNestedProperty:o,isArray:a,isNumber:s,isObject:l,pick:c,pInt:u}=e,h={add:(t,e)=>t+e,divide:(t,e)=>0!==e?t/e:"",eq:(t,e)=>t==e,each:function(t){let e=arguments[arguments.length-1];return!!a(t)&&t.map(((i,r)=>d(e.body,n(l(i)?i:{"@this":i},{"@index":r,"@first":0===r,"@last":r===t.length-1})))).join("")},ge:(t,e)=>t>=e,gt:(t,e)=>t>e,if:t=>!!t,le:(t,e)=>t<=e,lt:(t,e)=>t<e,multiply:(t,e)=>t*e,ne:(t,e)=>t!=e,subtract:(t,e)=>t-e,unless:t=>!t};function d(){let t,e,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,u=/\{([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= #\(\)]+)\}/g,f=/\(([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= ]+)\)/g,m=[],g=/f$/,y=/\.([0-9])/,v=i.lang,x=l&&l.time||r,_=l&&l.numberFormatter||p,b=function(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"true"===e||"false"!==e&&((t=Number(e)).toString()===e?t:o(e,s))},w=0;for(;null!==(t=u.exec(a));){var S;let i=f.exec(t[1]);i&&(t=i,n=!0),e&&e.isBlock||(e={ctx:s,expression:t[1],find:t[0],isBlock:"#"===t[1].charAt(0),start:t.index,startInner:t.index+t[0].length,length:t[0].length});let r=t[1].split(" ")[0].replace("#","");h[r]&&(e.isBlock&&r===e.fn&&w++,e.fn||(e.fn=r));let o="else"===t[1];if(e.isBlock&&e.fn&&(t[1]==="/".concat(e.fn)||o))if(w)!o&&w--;else{let i=e.startInner,r=a.substr(i,t.index-i);void 0===e.body?(e.body=r,e.startInner=t.index+t[0].length):e.elseBody=r,e.find+=r+t[0],o||(m.push(e),e=void 0)}else e.isBlock||m.push(e);if(i&&(null===(S=e)||void 0===S||!S.isBlock))break}return m.forEach((t=>{let e,i,{body:r,elseBody:n,expression:o,fn:u}=t;if(u){let a=[t],c=o.split(" ");for(i=h[u].length;i--;)a.unshift(b(c[i+1]));e=h[u].apply(s,a),t.isBlock&&"boolean"==typeof e&&(e=d(e?r:n,s,l))}else{let t=o.split(":");if(e=b(t.shift()||""),t.length&&"number"==typeof e){let i=t.join(":");if(g.test(i)){let t=parseInt((i.match(y)||["","-1"])[1],10);null!==e&&(e=_(e,t,v.decimalPoint,i.indexOf(",")>-1?v.thousandsSep:""))}else e=x.dateFormat(i,e)}}a=a.replace(t.find,c(e,""))})),n?d(a,s,l):a}function p(t,e,r,n){let o,a;t=+t||0,e=+e;let l=i.lang,h=(t.toString().split(".")[1]||"").split("e")[0].length,d=t.toString().split("e"),p=e;-1===e?e=Math.min(h,20):s(e)?e&&d[1]&&d[1]<0&&((a=e+ +d[1])>=0?(d[0]=(+d[0]).toExponential(a).split("e")[0],e=a):(d[0]=d[0].split(".")[0]||0,t=e<20?(d[0]*Math.pow(10,d[1])).toFixed(e):0,d[1]=0)):e=2;let f=(Math.abs(d[1]?d[0]:t)+Math.pow(10,-Math.max(e,h)-1)).toFixed(e),m=String(u(f)),g=m.length>3?m.length%3:0;return r=c(r,l.decimalPoint),n=c(n,l.thousandsSep),o=(t<0?"-":"")+(g?m.substr(0,g)+n:""),0>+d[1]&&!p?o="0":o+=m.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+n),e?o+=r+f.slice(-e):0==+o&&(o="0"),d[1]&&0!=+o&&(o+="e"+d[1]),o}return{dateFormat:function(t,e,i){return r.dateFormat(t,e,i)},format:d,helpers:h,numberFormat:p}})),i(e,"Core/Renderer/RendererRegistry.js",[e["Core/Globals.js"]],(function(t){var e,i;let r;return(i=e||(e={})).rendererTypes={},i.getRendererType=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return i.rendererTypes[t]||i.rendererTypes[r]},i.registerRendererType=function(e,n,o){i.rendererTypes[e]=n,(!r||o)&&(r=e,t.Renderer=n)},e})),i(e,"Core/Renderer/RendererUtilities.js",[e["Core/Utilities.js"]],(function(t){var e;let{clamp:i,pick:r,pushUnique:n,stableSort:o}=t;return(e||(e={})).distribute=function t(e,a,s){let l,c,u,h,d,p,f=e,m=f.reducedLen||a,g=(t,e)=>t.target-e.target,y=[],v=e.length,x=[],_=y.push,b=!0,w=0;for(l=v;l--;)w+=e[l].size;if(w>m){for(o(e,((t,e)=>(e.rank||0)-(t.rank||0))),u=(p=e[0].rank===e[e.length-1].rank)?v/2:-1,c=p?u:v-1;u&&w>m;)h=e[l=Math.floor(c)],n(x,l)&&(w-=h.size),c+=u,p&&c>=e.length&&(u/=2,c=u);x.sort(((t,e)=>e-t)).forEach((t=>_.apply(y,e.splice(t,1))))}for(o(e,g),e=e.map((t=>({size:t.size,targets:[t.target],align:r(t.align,.5)})));b;){for(l=e.length;l--;)h=e[l],d=(Math.min.apply(0,h.targets)+Math.max.apply(0,h.targets))/2,h.pos=i(d-h.size*h.align,0,a-h.size);for(l=e.length,b=!1;l--;)l>0&&e[l-1].pos+e[l-1].size>e[l].pos&&(e[l-1].size+=e[l].size,e[l-1].targets=e[l-1].targets.concat(e[l].targets),e[l-1].align=.5,e[l-1].pos+e[l-1].size>a&&(e[l-1].pos=a-e[l-1].size),e.splice(l,1),b=!0)}return _.apply(f,y),l=0,e.some((e=>{let i=0;return(e.targets||[]).some((()=>(f[l].pos=e.pos+i,void 0!==s&&Math.abs(f[l].pos-f[l].target)>s?(f.slice(0,l+1).forEach((t=>delete t.pos)),f.reducedLen=(f.reducedLen||a)-.1*a,f.reducedLen>.1*a&&t(f,a,s),!0):(i+=f[l].size,l++,!1))))})),o(f,g),f},e})),i(e,"Core/Renderer/SVG/SVGElement.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e,i,r){let{animate:n,animObject:o,stop:a}=t,{deg2rad:s,doc:l,svg:c,SVG_NS:u,win:h}=i,{addEvent:d,attr:p,createElement:f,crisp:m,css:g,defined:y,erase:v,extend:x,fireEvent:_,isArray:b,isFunction:w,isObject:S,isString:k,merge:C,objectEach:T,pick:A,pInt:P,pushUnique:M,replaceNested:E,syncTimeout:I,uniqueKey:z}=r;class L{_defaultGetter(t){let e=A(this[t+"Value"],this[t],this.element?this.element.getAttribute(t):null,0);return/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e}_defaultSetter(t,e,i){i.setAttribute(e,t)}add(t){let e,i=this.renderer,r=this.element;return t&&(this.parentGroup=t),void 0!==this.textStr&&"text"===this.element.nodeName&&i.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:i.box).appendChild(r),this.onAdd&&this.onAdd(),this}addClass(t,e){let i=e?"":this.attr("class")||"";return(t=(t||"").split(/ /g).reduce((function(t,e){return-1===i.indexOf(e)&&t.push(e),t}),i?[i]:[]).join(" "))!==i&&this.attr("class",t),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(t,e,i){let r,n,o,a,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l={},c=this.renderer,u=c.alignedObjects,h=!!t;t?(this.alignOptions=t,this.alignByTranslate=e,this.alignTo=i):(t=this.alignOptions||{},e=this.alignByTranslate,i=this.alignTo);let d=!i||k(i)?i||"renderer":void 0;d&&(h&&M(u,this),i=void 0);let p=A(i,c[d],c),f=t.align,m=t.verticalAlign;return r=(p.x||0)+(t.x||0),n=(p.y||0)+(t.y||0),"right"===f?o=1:"center"===f&&(o=2),o&&(r+=((p.width||0)-(t.width||0))/o),l[e?"translateX":"x"]=Math.round(r),"bottom"===m?a=1:"middle"===m&&(a=2),a&&(n+=((p.height||0)-(t.height||0))/a),l[e?"translateY":"y"]=Math.round(n),s&&(this[this.placed?"animate":"attr"](l),this.placed=!0),this.alignAttr=l,this}alignSetter(t){let e={left:"start",center:"middle",right:"end"};e[t]&&(this.alignValue=t,this.element.setAttribute("text-anchor",e[t]))}animate(t,e,i){let r=o(A(e,this.renderer.globalAnimation,!0)),a=r.defer;return l.hidden&&(r.duration=0),0!==r.duration?(i&&(r.complete=i),I((()=>{this.element&&n(this,t,r)}),a)):(this.attr(t,void 0,i||r.complete),T(t,(function(t,e){r.step&&r.step.call(this,t,{prop:e,pos:1,elem:this})}),this)),this}applyTextOutline(t){let e=this.element;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(e.style.fill)));let r=t.split(" "),n=r[r.length-1],o=r[0];if(o&&"none"!==o&&i.svg){this.fakeTS=!0,o=o.replace(/(^[\d\.]+)(.*?)$/g,(function(t,e,i){return 2*Number(e)+i})),this.removeTextOutline();let t=l.createElementNS(u,"tspan");p(t,{class:"highcharts-text-outline",fill:n,stroke:n,"stroke-width":o,"stroke-linejoin":"round"});let i=e.querySelector("textPath")||e;[].forEach.call(i.childNodes,(e=>{let i=e.cloneNode(!0);i.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((t=>i.removeAttribute(t))),t.appendChild(i)}));let r=0;[].forEach.call(i.querySelectorAll("text tspan"),(t=>{r+=Number(t.getAttribute("dy"))}));let a=l.createElementNS(u,"tspan");a.textContent="\u200b",p(a,{x:Number(e.getAttribute("x")),dy:-r}),t.appendChild(a),i.insertBefore(t,i.firstChild)}}attr(t,e,i,r){let n,o,s,{element:l}=this,c=L.symbolCustomAttribs,u=this;return"string"==typeof t&&void 0!==e&&(n=t,(t={})[n]=e),"string"==typeof t?u=(this[t+"Getter"]||this._defaultGetter).call(this,t,l):(T(t,(function(e,i){s=!1,r||a(this,i),this.symbolName&&-1!==c.indexOf(i)&&(o||(this.symbolAttr(t),o=!0),s=!0),this.rotation&&("x"===i||"y"===i)&&(this.doTransform=!0),s||(this[i+"Setter"]||this._defaultSetter).call(this,e,i,l)}),this),this.afterSetters()),i&&i.call(this),u}clip(t){if(t&&!t.clipPath){let e=z()+"-",i=this.renderer.createElement("clipPath").attr({id:e}).add(this.renderer.defs);x(t,{clipPath:i,id:e,count:0}),t.add(i)}return this.attr("clip-path",t?"url(".concat(this.renderer.url,"#").concat(t.id,")"):"none")}crisp(t,e){e=Math.round(e||t.strokeWidth||0);let i=t.x||this.x||0,r=t.y||this.y||0,n=(t.width||this.width||0)+i,o=(t.height||this.height||0)+r,a=m(i,e),s=m(r,e);return x(t,{x:a,y:s,width:m(n,e)-a,height:m(o,e)-s}),y(t.strokeWidth)&&(t.strokeWidth=e),t}complexColor(t,i,r){let n,o,a,s,l,c,u,h,d,p,f,m=this.renderer,g=[];_(this.renderer,"complexColor",{args:arguments},(function(){if(t.radialGradient?o="radialGradient":t.linearGradient&&(o="linearGradient"),o){if(a=t[o],l=m.gradients,c=t.stops,d=r.radialReference,b(a)&&(t[o]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&d&&!y(a.gradientUnits)&&(s=a,a=C(a,m.getRadialAttr(d,s),{gradientUnits:"userSpaceOnUse"})),T(a,(function(t,e){"id"!==e&&g.push(e,t)})),T(c,(function(t){g.push(t)})),l[g=g.join(",")])p=l[g].attr("id");else{a.id=p=z();let t=l[g]=m.createElement(o).attr(a).add(m.defs);t.radAttr=s,t.stops=[],c.forEach((function(i){0===i[1].indexOf("rgba")?(u=(n=e.parse(i[1])).get("rgb"),h=n.get("a")):(u=i[1],h=1);let r=m.createElement("stop").attr({offset:i[0],"stop-color":u,"stop-opacity":h}).add(t);t.stops.push(r)}))}f="url("+m.url+"#"+p+")",r.setAttribute(i,f),r.gradient=g,t.toString=function(){return f}}}))}css(t){let e,i=this.styles,r={},n=this.element,o=!i;if(i&&T(t,(function(t,e){i&&i[e]!==t&&(r[e]=t,o=!0)})),o){i&&(t=x(i,r)),null===t.width||"auto"===t.width?delete this.textWidth:"text"===n.nodeName.toLowerCase()&&t.width&&(e=this.textWidth=P(t.width)),x(this.styles,t),e&&!c&&this.renderer.forExport&&delete t.width;let o=C(t);n.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach((t=>o&&delete o[t])),o.color&&(o.fill=o.color)),g(n,o)}return this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t.textOutline&&this.applyTextOutline(t.textOutline)),this}dashstyleSetter(t){let e,i=this["stroke-width"];if("inherit"===i&&(i=1),t=t&&t.toLowerCase()){let r=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(e=r.length;e--;)r[e]=""+P(r[e])*A(i,NaN);t=r.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}}destroy(){var t;let e,i,r=this,n=r.element||{},o=r.renderer,s=n.ownerSVGElement,l="SPAN"===n.nodeName&&r.parentGroup||void 0;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,a(r),r.clipPath&&s){let t=r.clipPath;[].forEach.call(s.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(e){e.getAttribute("clip-path").indexOf(t.element.id)>-1&&e.removeAttribute("clip-path")})),r.clipPath=t.destroy()}if(r.connector=null===(t=r.connector)||void 0===t?void 0:t.destroy(),r.stops){for(i=0;i<r.stops.length;i++)r.stops[i].destroy();r.stops.length=0,r.stops=void 0}for(r.safeRemoveChild(n);l&&l.div&&0===l.div.childNodes.length;)e=l.parentGroup,r.safeRemoveChild(l.div),delete l.div,l=e;r.alignOptions&&v(o.alignedObjects,r),T(r,(function(t,e){r[e]&&r[e].parentGroup===r&&r[e].destroy&&r[e].destroy(),delete r[e]}))}dSetter(t,e,i){b(t)&&("string"==typeof t[0]&&(t=this.renderer.pathToSegments(t)),this.pathArray=t,t=t.reduce(((t,e,i)=>e&&e.join?(i?t+" ":"")+e.join(" "):(e||"").toString()),"")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),this[e]!==t&&(i.setAttribute(e,t),this[e]=t)}fillSetter(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.complexColor(t,e,i)}hrefSetter(t,e,i){i.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}getBBox(t,e){let i,r,n,o,{alignValue:a,element:s,renderer:l,styles:c,textStr:u}=this,{cache:h,cacheKeys:d}=l,p=s.namespaceURI===this.SVG_NS,f=A(e,this.rotation,0),m=l.styledMode?s&&L.prototype.getStyle.call(s,"font-size"):c.fontSize;if(y(u)&&(-1===(o=u.toString()).indexOf("<")&&(o=o.replace(/[0-9]/g,"0")),o+=["",l.rootFontSize,m,f,this.textWidth,a,c.textOverflow,c.fontWeight].join(",")),o&&!t&&(i=h[o]),!i){if(p||l.forExport){try{n=this.fakeTS&&function(t){let e=s.querySelector(".highcharts-text-outline");e&&g(e,{display:t})},w(n)&&n("none"),i=s.getBBox?x({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight,x:0,y:0},w(n)&&n("")}catch(t){}(!i||i.width<0)&&(i={x:0,y:0,width:0,height:0})}else i=this.htmlGetBBox();r=i.height,p&&(i.height=r={"11px,17":14,"13px,20":16}["".concat(m||"",",").concat(Math.round(r))]||r),f&&(i=this.getRotatedBox(i,f))}if(o&&(""===u||i.height>0)){for(;d.length>250;)delete h[d.shift()];h[o]||d.push(o),h[o]=i}return i}getRotatedBox(t,e){let{x:i,y:r,width:n,height:o}=t,{alignValue:a,translateY:l,rotationOriginX:c=0,rotationOriginY:u=0}=this,h={right:1,center:.5}[a||0]||0,d=Number(this.element.getAttribute("y")||0)-(l?0:r),p=e*s,f=(e-90)*s,m=Math.cos(p),g=Math.sin(p),y=n*m,v=n*g,x=Math.cos(f),_=Math.sin(f),[[b,w],[S,k]]=[c,u].map((t=>[t-t*m,t*g])),C=i+h*(n-y)+b+k+d*x,T=C+y,A=T-o*x,P=A-y,M=r+d-h*v-w+S+d*_,E=M+v,I=E-o*_,z=I-v,L=Math.min(C,T,A,P),D=Math.min(M,E,I,z);return{x:L,y:D,width:Math.max(C,T,A,P)-L,height:Math.max(M,E,I,z)-D}}getStyle(t){return h.getComputedStyle(this.element||this,"").getPropertyValue(t)}hasClass(t){return-1!==(""+this.attr("class")).split(" ").indexOf(t)}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(t,e){this.onEvents={},this.opacity=1,this.SVG_NS=u,this.element="span"===e||"body"===e?f(e):l.createElementNS(this.SVG_NS,e),this.renderer=t,this.styles={},_(this,"afterInit")}on(t,e){let{onEvents:i}=this;return i[t]&&i[t](),i[t]=d(this.element,t,e),this}opacitySetter(t,e,i){let r=Number(Number(t).toFixed(3));this.opacity=r,i.setAttribute(e,r)}reAlign(){var t;(null===(t=this.alignOptions)||void 0===t?void 0:t.width)&&"left"!==this.alignOptions.align&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(t){return this.attr("class",(""+this.attr("class")).replace(k(t)?RegExp("(^| )".concat(t,"( |$)")):t," ").replace(/ +/g," ").trim())}removeTextOutline(){let t=this.element.querySelector("tspan.highcharts-text-outline");t&&this.safeRemoveChild(t)}safeRemoveChild(t){let e=t.parentNode;e&&e.removeChild(t)}setRadialReference(t){let e=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this}setTextPath(t,e){e=C(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);let i=this.renderer.url,r=this.text||this,n=r.textPath,{attributes:o,enabled:a}=e;if(t=t||n&&n.path,n&&n.undo(),t&&a){let e=d(r,"afterModifyTree",(e=>{if(t&&a){let n=t.attr("id");n||t.attr("id",n=z());let a={x:0,y:0};y(o.dx)&&(a.dx=o.dx,delete o.dx),y(o.dy)&&(a.dy=o.dy,delete o.dy),r.attr(a),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let s=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:x(o,{"text-anchor":o.textAnchor,href:"".concat(i,"#").concat(n)}),children:s}}}));r.textPath={path:t,undo:e}}else r.attr({dx:0,dy:0}),delete r.textPath;return this.added&&(r.textCache="",this.renderer.buildText(r)),this}shadow(t){var e;let{renderer:i}=this,r=C(90===(null===(e=this.parentGroup)||void 0===e?void 0:e.rotation)?{offsetX:-1,offsetY:-1}:{},S(t)?t:{}),n=i.shadowDefinition(r);return this.attr({filter:t?"url(".concat(i.url,"#").concat(n,")"):"none"})}show(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.attr({visibility:t?"inherit":"visible"})}"stroke-widthSetter"(t,e,i){this[e]=t,i.setAttribute(e,t)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let t,e=this.getStyle("stroke-width"),i=0;return/px$/.test(e)?i=P(e):""!==e&&(p(t=l.createElementNS(u,"rect"),{width:e,"stroke-width":0}),this.element.parentNode.appendChild(t),i=t.getBBox().width,t.parentNode.removeChild(t)),i}symbolAttr(t){let e=this;L.symbolCustomAttribs.forEach((function(i){e[i]=A(t[i],e[i])})),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})}textSetter(t){t!==this.textStr&&(delete this.textPxLength,this.textStr=t,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(t){let e=this.element,i=e.getElementsByTagName("title")[0]||l.createElementNS(this.SVG_NS,"title");e.insertBefore?e.insertBefore(i,e.firstChild):e.appendChild(i),i.textContent=E(A(t,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let t=this.element;return t.parentNode.appendChild(t),this}translate(t,e){return this.attr({translateX:t,translateY:e})}updateTransform(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform",{element:i,matrix:r,rotation:n=0,rotationOriginX:o,rotationOriginY:a,scaleX:s,scaleY:l,translateX:c=0,translateY:u=0}=this,h=["translate("+c+","+u+")"];y(r)&&h.push("matrix("+r.join(",")+")"),n&&(h.push("rotate("+n+" "+A(o,i.getAttribute("x"),0)+" "+A(a,i.getAttribute("y")||0)+")"),"SPAN"===(null===(t=this.text)||void 0===t?void 0:t.element.tagName)&&this.text.attr({rotation:n,rotationOriginX:(o||0)-this.padding,rotationOriginY:(a||0)-this.padding})),(y(s)||y(l))&&h.push("scale("+A(s,1)+" "+A(l,1)+")"),h.length&&!(this.text||this).textPath&&i.setAttribute(e,h.join(" "))}visibilitySetter(t,e,i){"inherit"===t?i.removeAttribute(e):this[e]!==t&&i.setAttribute(e,t),this[e]=t}xGetter(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)}zIndexSetter(t,e){let i,r,n,o,a,s=this.renderer,l=this.parentGroup,c=(l||s).element||s.box,u=this.element,h=c===s.box,d=!1,p=this.added;if(y(t)?(u.setAttribute("data-z-index",t),t=+t,this[e]===t&&(p=!1)):y(this[e])&&u.removeAttribute("data-z-index"),this[e]=t,p){for((t=this.zIndex)&&l&&(l.handleZ=!0),a=(i=c.childNodes).length-1;a>=0&&!d;a--)o=!y(n=(r=i[a]).getAttribute("data-z-index")),r!==u&&(t<0&&o&&!h&&!a?(c.insertBefore(u,i[a]),d=!0):(P(n)<=t||o&&(!y(t)||t>=0))&&(c.insertBefore(u,i[a+1]),d=!0));d||(c.insertBefore(u,i[h?3:0]),d=!0)}return d}}return L.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],L.prototype.strokeSetter=L.prototype.fillSetter,L.prototype.yGetter=L.prototype.xGetter,L.prototype.matrixSetter=L.prototype.rotationOriginXSetter=L.prototype.rotationOriginYSetter=L.prototype.rotationSetter=L.prototype.scaleXSetter=L.prototype.scaleYSetter=L.prototype.translateXSetter=L.prototype.translateYSetter=L.prototype.verticalAlignSetter=function(t,e){this[e]=t,this.doTransform=!0},L})),i(e,"Core/Renderer/SVG/SVGLabel.js",[e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],(function(t,e){let{defined:i,extend:r,isNumber:n,merge:o,pick:a,removeEvent:s}=e;class l extends t{constructor(t,e,i,r,n,o,a,s,c,u){let h;super(t,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.textStr=e,this.x=i,this.y=r,this.anchorX=o,this.anchorY=a,this.baseline=c,this.className=u,this.addClass("button"===u?"highcharts-no-tooltip":"highcharts-label"),u&&this.addClass("highcharts-"+u),this.text=t.text(void 0,0,0,s).attr({zIndex:1}),"string"==typeof n&&((h=/^url\((.*?)\)$/.test(n))||this.renderer.symbols[n])&&(this.symbolKey=n),this.bBox=l.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=t.styledMode||h,this.deferredAttr={},this.alignFactor=0}alignSetter(t){let e={left:0,center:.5,right:1}[t];e!==this.alignFactor&&(this.alignFactor=e,this.bBox&&n(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(t,e){this.anchorX=t,this.boxAttr(e,Math.round(t)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(t,e){this.anchorY=t,this.boxAttr(e,t-this.ySetting)}boxAttr(t,e){this.box?this.box.attr(t,e):this.deferredAttr[t]=e}css(e){if(e){let t={};e=o(e),l.textProps.forEach((i=>{void 0!==e[i]&&(t[i]=e[i],delete e[i])})),this.text.css(t),"fontSize"in t||"fontWeight"in t?this.updateTextPadding():("width"in t||"textOverflow"in t)&&this.updateBoxSize()}return t.prototype.css.call(this,e)}destroy(){s(this.element,"mouseenter"),s(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),t.prototype.destroy.call(this)}fillSetter(t,e){t&&(this.needsBox=!0),this.fill=t,this.boxAttr(e,t)}getBBox(t,e){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();let{padding:i,height:r=0,translateX:n=0,translateY:o=0,width:s=0}=this,l=a(this.paddingLeft,i),c=null!==e&&void 0!==e?e:this.rotation||0,u={width:s,height:r,x:n+this.bBox.x-l,y:o+this.bBox.y-i+this.baselineOffset};return c&&(u=this.getRotatedBox(u,c)),u}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(t){this.heightSetting=t}onAdd(){this.text.add(this),this.attr({text:a(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&i(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(t,e){n(t)?t!==this[e]&&(this[e]=t,this.updateTextPadding()):this[e]=void 0}rSetter(t,e){this.boxAttr(e,t)}strokeSetter(t,e){this.stroke=t,this.boxAttr(e,t)}"stroke-widthSetter"(t,e){t&&(this.needsBox=!0),this["stroke-width"]=t,this.boxAttr(e,t)}"text-alignSetter"(t){this.textAlign=t}textSetter(t){void 0!==t&&this.text.attr({text:t}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let t,e=this.text,o={},a=this.padding,s=this.bBox=n(this.widthSetting)&&n(this.heightSetting)&&!this.textAlign||!i(e.textStr)?l.emptyBBox:e.getBBox(void 0,0);this.width=this.getPaddedWidth(),this.height=(this.heightSetting||s.height||0)+2*a;let c=this.renderer.fontMetrics(e);if(this.baselineOffset=a+Math.min((this.text.firstLineMetrics||c).b,s.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-c.h)/2),this.needsBox&&!e.textPath){if(!this.box){let t=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();t.addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),t.add(this)}t=this.getCrispAdjust(),o.x=t,o.y=(this.baseline?-this.baselineOffset:0)+t,o.width=Math.round(this.width),o.height=Math.round(this.height),this.box.attr(r(o,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let t=this.text;if(!t.textPath){this.updateBoxSize();let e=this.baseline?0:this.baselineOffset,r=a(this.paddingLeft,this.padding);i(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(r+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(r!==t.x||e!==t.y)&&(t.attr("x",r),t.hasBoxWidthChanged&&(this.bBox=t.getBBox(!0)),void 0!==e&&t.attr("y",e)),t.x=r,t.y=e}}widthSetter(t){this.widthSetting=n(t)?t:void 0}getPaddedWidth(){let t=this.padding,e=a(this.paddingLeft,t),i=a(this.paddingRight,t);return(this.widthSetting||this.bBox.width||0)+e+i}xSetter(t){this.x=t,this.alignFactor&&(t-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(t),this.attr("translateX",this.xSetting)}ySetter(t){this.ySetting=this.y=Math.round(t),this.attr("translateY",this.ySetting)}}return l.emptyBBox={width:0,height:0,x:0,y:0},l.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],l})),i(e,"Core/Renderer/SVG/Symbols.js",[e["Core/Utilities.js"]],(function(t){let{defined:e,isNumber:i,pick:r}=t;function n(t,i,n,o,a){let s=[];if(a){let l=a.start||0,c=r(a.r,n),u=r(a.r,o||n),h=2e-4/Math.max(c,1),d=Math.abs((a.end||0)-l-2*Math.PI)<h,p=(a.end||0)-h,f=a.innerR,m=r(a.open,d),g=Math.cos(l),y=Math.sin(l),v=Math.cos(p),x=Math.sin(p),_=r(a.longArc,p-l-Math.PI<h?0:1),b=["A",c,u,0,_,r(a.clockwise,1),t+c*v,i+u*x];b.params={start:l,end:p,cx:t,cy:i},s.push(["M",t+c*g,i+u*y],b),e(f)&&((b=["A",f,f,0,_,e(a.clockwise)?1-a.clockwise:0,t+f*g,i+f*y]).params={start:p,end:l,cx:t,cy:i},s.push(m?["M",t+f*v,i+f*x]:["L",t+f*v,i+f*x],b)),m||s.push(["Z"])}return s}function o(t,e,i,r,n){return n&&n.r?a(t,e,i,r,n):[["M",t,e],["L",t+i,e],["L",t+i,e+r],["L",t,e+r],["Z"]]}function a(t,e,i,r,n){let o=(null===n||void 0===n?void 0:n.r)||0;return[["M",t+o,e],["L",t+i-o,e],["A",o,o,0,0,1,t+i,e+o],["L",t+i,e+r-o],["A",o,o,0,0,1,t+i-o,e+r],["L",t+o,e+r],["A",o,o,0,0,1,t,e+r-o],["L",t,e+o],["A",o,o,0,0,1,t+o,e],["Z"]]}return{arc:n,callout:function(t,e,r,n,o){let s=Math.min(o&&o.r||0,r,n),l=s+6,c=o&&o.anchorX,u=o&&o.anchorY||0,h=a(t,e,r,n,{r:s});if(!i(c)||c<r&&c>0&&u<n&&u>0)return h;if(t+c>r-l)if(u>e+l&&u<e+n-l)h.splice(3,1,["L",t+r,u-6],["L",t+r+6,u],["L",t+r,u+6],["L",t+r,e+n-s]);else if(c<r){let i=u<e+l,o=i?e:e+n;h.splice(i?2:5,0,["L",c,u],["L",t+r-s,o])}else h.splice(3,1,["L",t+r,n/2],["L",c,u],["L",t+r,n/2],["L",t+r,e+n-s]);else if(t+c<l)if(u>e+l&&u<e+n-l)h.splice(7,1,["L",t,u+6],["L",t-6,u],["L",t,u-6],["L",t,e+s]);else if(c>0){let i=u<e+l,r=i?e:e+n;h.splice(i?1:6,0,["L",c,u],["L",t+s,r])}else h.splice(7,1,["L",t,n/2],["L",c,u],["L",t,n/2],["L",t,e+s]);else u>n&&c<r-l?h.splice(5,1,["L",c+6,e+n],["L",c,e+n+6],["L",c-6,e+n],["L",t+s,e+n]):u<0&&c>l&&h.splice(1,1,["L",c-6,e],["L",c,e-6],["L",c+6,e],["L",r-s,e]);return h},circle:function(t,e,i,r){return n(t+i/2,e+r/2,i/2,r/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(t,e,i,r){return[["M",t+i/2,e],["L",t+i,e+r/2],["L",t+i/2,e+r],["L",t,e+r/2],["Z"]]},rect:o,roundedRect:a,square:o,triangle:function(t,e,i,r){return[["M",t+i/2,e],["L",t+i,e+r],["L",t,e+r],["Z"]]},"triangle-down":function(t,e,i,r){return[["M",t,e],["L",t+i,e],["L",t+i/2,e+r],["Z"]]}}})),i(e,"Core/Renderer/SVG/TextBuilder.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e,i){let{doc:r,SVG_NS:n,win:o}=e,{attr:a,extend:s,fireEvent:l,isString:c,objectEach:u,pick:h}=i;return class{constructor(t){let e=t.styles;this.renderer=t.renderer,this.svgElement=t,this.width=t.textWidth,this.textLineHeight=e&&e.lineHeight,this.textOutline=e&&e.textOutline,this.ellipsis=!(!e||"ellipsis"!==e.textOverflow),this.noWrap=!(!e||"nowrap"!==e.whiteSpace)}buildSVG(){let e=this.svgElement,i=e.element,n=e.renderer,o=h(e.textStr,"").toString(),a=-1!==o.indexOf("<"),s=i.childNodes,l=!e.added&&n.box,u=[o,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,e.getStyle("font-size"),this.width].join(",");if(u!==e.textCache){e.textCache=u,delete e.actualWidth;for(let t=s.length;t--;)i.removeChild(s[t]);if(a||this.ellipsis||this.width||e.textPath||-1!==o.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(o))){if(""!==o){l&&l.appendChild(i);let r=new t(o);this.modifyTree(r.nodes),r.addToDOM(i),this.modifyDOM(),this.ellipsis&&-1!==(i.textContent||"").indexOf("\u2026")&&e.attr("title",this.unescapeEntities(e.textStr||"",["&lt;","&gt;"])),l&&l.removeChild(i)}}else i.appendChild(r.createTextNode(this.unescapeEntities(o)));c(this.textOutline)&&e.applyTextOutline&&e.applyTextOutline(this.textOutline)}}modifyDOM(){let t,e=this.svgElement,i=a(e.element,"x");for(e.firstLineMetrics=void 0;(t=e.element.firstChild)&&/^[\s\u200B]*$/.test(t.textContent||" ");)e.element.removeChild(t);[].forEach.call(e.element.querySelectorAll("tspan.highcharts-br"),((t,r)=>{t.nextSibling&&t.previousSibling&&(0===r&&1===t.previousSibling.nodeType&&(e.firstLineMetrics=e.renderer.fontMetrics(t.previousSibling)),a(t,{dy:this.getLineHeight(t.nextSibling),x:i}))}));let s=this.width||0;if(!s)return;let l=(t,o)=>{let l=t.textContent||"",c=l.replace(/([^\^])-/g,"$1- ").split(" "),u=!this.noWrap&&(c.length>1||e.element.childNodes.length>1),h=this.getLineHeight(o),d=0,p=e.actualWidth;if(this.ellipsis)l&&this.truncate(t,l,void 0,0,Math.max(0,s-.8*h),((t,e)=>t.substring(0,e)+"\u2026"));else if(u){let l=[],u=[];for(;o.firstChild&&o.firstChild!==t;)u.push(o.firstChild),o.removeChild(o.firstChild);for(;c.length;)c.length&&!this.noWrap&&d>0&&(l.push(t.textContent||""),t.textContent=c.join(" ").replace(/- /g,"-")),this.truncate(t,void 0,c,0===d&&p||0,s,((t,e)=>c.slice(0,e).join(" ").replace(/- /g,"-"))),p=e.actualWidth,d++;u.forEach((e=>{o.insertBefore(e,t)})),l.forEach((e=>{o.insertBefore(r.createTextNode(e),t);let s=r.createElementNS(n,"tspan");s.textContent="\u200b",a(s,{dy:h,x:i}),o.insertBefore(s,t)}))}},c=t=>{[].slice.call(t.childNodes).forEach((i=>{i.nodeType===o.Node.TEXT_NODE?l(i,t):(-1!==i.className.baseVal.indexOf("highcharts-br")&&(e.actualWidth=0),c(i))}))};c(e.element)}getLineHeight(t){let e=t.nodeType===o.Node.TEXT_NODE?t.parentElement:t;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(e||this.svgElement.element).h}modifyTree(t){let e=(i,r)=>{let{attributes:n={},children:o,style:a={},tagName:l}=i,c=this.renderer.styledMode;if("b"===l||"strong"===l?c?n.class="highcharts-strong":a.fontWeight="bold":("i"===l||"em"===l)&&(c?n.class="highcharts-emphasized":a.fontStyle="italic"),a&&a.color&&(a.fill=a.color),"br"===l){n.class="highcharts-br",i.textContent="\u200b";let e=t[r+1];e&&e.textContent&&(e.textContent=e.textContent.replace(/^ +/gm,""))}else"a"===l&&o&&o.some((t=>"#text"===t.tagName))&&(i.children=[{children:o,tagName:"tspan"}]);"#text"!==l&&"a"!==l&&(i.tagName="tspan"),s(i,{attributes:n,style:a}),o&&o.filter((t=>"#text"!==t.tagName)).forEach(e)};t.forEach(e),l(this.svgElement,"afterModifyTree",{nodes:t})}truncate(t,e,i,r,n,o){let a,s,l=this.svgElement,{rotation:c}=l,u=[],h=i?1:0,d=(e||i||"").length,p=d,f=function(e,n){let o=n||e,a=t.parentNode;if(a&&void 0===u[o]&&a.getSubStringLength)try{u[o]=r+a.getSubStringLength(0,i?o+1:o)}catch(t){}return u[o]};if(l.rotation=0,r+(s=f(t.textContent.length))>n){for(;h<=d;)p=Math.ceil((h+d)/2),i&&(a=o(i,p)),s=f(p,a&&a.length-1),h===d?h=d+1:s>n?d=p-1:h=p;0===d?t.textContent="":e&&d===e.length-1||(t.textContent=a||o(e||i,p))}i&&i.splice(0,p),l.actualWidth=s,l.rotation=c}unescapeEntities(t,e){return u(this.renderer.escapes,(function(i,r){e&&-1!==e.indexOf(i)||(t=t.toString().replace(RegExp(i,"g"),r))})),t}}})),i(e,"Core/Renderer/SVG/SVGRenderer.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Defaults.js"],e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Renderer/SVG/SVGLabel.js"],e["Core/Renderer/SVG/Symbols.js"],e["Core/Renderer/SVG/TextBuilder.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o,a,s,l,c){let u,{defaultOptions:h}=e,{charts:d,deg2rad:p,doc:f,isFirefox:m,isMS:g,isWebKit:y,noop:v,SVG_NS:x,symbolSizes:_,win:b}=r,{addEvent:w,attr:S,createElement:k,crisp:C,css:T,defined:A,destroyObjectProperties:P,extend:M,isArray:E,isNumber:I,isObject:z,isString:L,merge:D,pick:R,pInt:O,replaceNested:B,uniqueKey:F}=c;class j{constructor(t,e,i,r,n,o,a){let s,l,c=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),u=c.element;a||c.css(this.getStyle(r||{})),t.appendChild(u),S(t,"dir","ltr"),-1===t.innerHTML.indexOf("xmlns")&&S(u,"xmlns",this.SVG_NS),this.box=u,this.boxWrapper=c,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(f.createTextNode("Created with Highcharts 11.4.3")),this.defs=this.createElement("defs").add(),this.allowHTML=o,this.forExport=n,this.styledMode=a,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=c.getStyle("font-size"),this.setSize(e,i,!1),m&&t.getBoundingClientRect&&((s=function(){T(t,{left:0,top:0}),l=t.getBoundingClientRect(),T(t,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})})(),this.unSubPixelFix=w(b,"resize",s))}definition(e){return new t([e]).addToDOM(this.defs.element)}getReferenceURL(){if((m||y)&&f.getElementsByTagName("base").length){if(!A(u)){let e=F(),i=new t([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:e},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#".concat(e,")"),fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(f.body);T(i,{position:"fixed",top:0,left:0,zIndex:9e5});let r=f.elementFromPoint(6,6);u="hitme"===(r&&r.id),f.body.removeChild(i)}if(u)return B(b.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(t){return this.style=M({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},t),this.style}setStyle(t){this.boxWrapper.css(this.getStyle(t))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),P(this.gradients||{}),this.gradients=null,this.defs=t.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(t){return new this.Element(this,t)}getRadialAttr(t,e){return{cx:t[0]-t[2]/2+(e.cx||0)*t[2],cy:t[1]-t[2]/2+(e.cy||0)*t[2],r:(e.r||0)*t[2]}}shadowDefinition(t){let e=["highcharts-drop-shadow-".concat(this.chartIndex),...Object.keys(t).map((e=>"".concat(e,"-").concat(t[e])))].join("-").toLowerCase().replace(/[^a-z0-9\-]/g,""),i=D({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},t);return this.defs.element.querySelector("#".concat(e))||this.definition({tagName:"filter",attributes:{id:e,filterUnits:i.filterUnits},children:[{tagName:"feDropShadow",attributes:{dx:i.offsetX,dy:i.offsetY,"flood-color":i.color,"flood-opacity":Math.min(5*i.opacity,1),stdDeviation:i.width/2}}]}),e}buildText(t){new l(t).buildSVG()}getContrast(t){let e=i.parse(t).rgba.map((t=>{let e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),r=.2126*e[0]+.7152*e[1]+.0722*e[2];return 1.05/(r+.05)>(r+.05)/.05?"#FFFFFF":"#000000"}button(e,i,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,l=this.label(e,i,r,a,void 0,void 0,s,void 0,"button"),c=this.styledMode,u=arguments,d=0;o=D(h.global.buttonTheme,o),c&&(delete o.fill,delete o.stroke,delete o["stroke-width"]);let p=o.states||{},f=o.style||{};delete o.states,delete o.style;let m=[t.filterUserAttributes(o)],y=[f];return c||["hover","select","disabled"].forEach(((e,i)=>{m.push(D(m[0],t.filterUserAttributes(u[i+5]||p[e]||{}))),y.push(m[i+1].style),delete m[i+1].style})),w(l.element,g?"mouseover":"mouseenter",(function(){3!==d&&l.setState(1)})),w(l.element,g?"mouseout":"mouseleave",(function(){3!==d&&l.setState(d)})),l.setState=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(1!==t&&(l.state=d=t),l.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t]),!c){l.attr(m[t]);let e=y[t];z(e)&&l.css(e)}},l.attr(m[0]),!c&&(l.css(M({cursor:"default"},f)),s&&l.text.css({pointerEvents:"none"})),l.on("touchstart",(t=>t.stopPropagation())).on("click",(function(t){3!==d&&n.call(l,t)}))}crispLine(t,e){let[i,r]=t;return A(i[1])&&i[1]===r[1]&&(i[1]=r[1]=C(i[1],e)),A(i[2])&&i[2]===r[2]&&(i[2]=r[2]=C(i[2],e)),t}path(t){let e=this.styledMode?{}:{fill:"none"};return E(t)?e.d=t:z(t)&&M(e,t),this.createElement("path").attr(e)}circle(t,e,i){let r=z(t)?t:void 0===t?{}:{x:t,y:e,r:i},n=this.createElement("circle");return n.xSetter=n.ySetter=function(t,e,i){i.setAttribute("c"+e,t)},n.attr(r)}arc(t,e,i,r,n,o){let a;z(t)?(e=(a=t).y,i=a.r,r=a.innerR,n=a.start,o=a.end,t=a.x):a={innerR:r,start:n,end:o};let s=this.symbol("arc",t,e,i,i,a);return s.r=i,s}rect(t,e,i,r,n,o){let a=z(t)?t:void 0===t?{}:{x:t,y:e,r:n,width:Math.max(i||0,0),height:Math.max(r||0,0)},s=this.createElement("rect");return this.styledMode||(void 0!==o&&(a["stroke-width"]=o,M(a,s.crisp(a))),a.fill="none"),s.rSetter=function(t,e,i){s.r=t,S(i,{rx:t,ry:t})},s.rGetter=function(){return s.r||0},s.attr(a)}roundedRect(t){return this.symbol("roundedRect").attr(t)}setSize(t,e,i){this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:R(i,!0)?void 0:0}),this.alignElements()}g(t){let e=this.createElement("g");return t?e.attr({class:"highcharts-"+t}):e}image(t,e,i,r,n,o){let a={preserveAspectRatio:"none"};I(e)&&(a.x=e),I(i)&&(a.y=i),I(r)&&(a.width=r),I(n)&&(a.height=n);let s=this.createElement("image").attr(a),l=function(e){s.attr({href:t}),o.call(s,e)};if(o){s.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let e=new b.Image;w(e,"load",l),e.src=t,e.complete&&l({})}else s.attr({href:t});return s}symbol(t,e,i,r,n,o){let a,s,l,c,u=this,h=/^url\((.*?)\)$/,p=h.test(t),m=!p&&(this.symbols[t]?t:"circle"),g=m&&this.symbols[m];if(g)"number"==typeof e&&(s=g.call(this.symbols,e||0,i||0,r||0,n||0,o)),a=this.path(s),u.styledMode||a.attr("fill","none"),M(a,{symbolName:m||void 0,x:e,y:i,width:r,height:n}),o&&M(a,o);else if(p){l=t.match(h)[1];let r=a=this.image(l);r.imgwidth=R(o&&o.width,_[l]&&_[l].width),r.imgheight=R(o&&o.height,_[l]&&_[l].height),c=t=>t.attr({width:t.width,height:t.height}),["width","height"].forEach((t=>{r["".concat(t,"Setter")]=function(t,e){this[e]=t;let{alignByTranslate:i,element:r,width:n,height:a,imgwidth:s,imgheight:l}=this,c="width"===e?s:l,u=1;o&&"within"===o.backgroundSize&&n&&a&&s&&l?(u=Math.min(n/s,a/l),S(r,{width:Math.round(s*u),height:Math.round(l*u)})):r&&c&&r.setAttribute(e,c),!i&&s&&l&&this.translate(((n||0)-s*u)/2,((a||0)-l*u)/2)}})),A(e)&&r.attr({x:e,y:i}),r.isImg=!0,A(r.imgwidth)&&A(r.imgheight)?c(r):(r.attr({width:0,height:0}),k("img",{onload:function(){let t=d[u.chartIndex];0===this.width&&(T(this,{position:"absolute",top:"-999em"}),f.body.appendChild(this)),_[l]={width:this.width,height:this.height},r.imgwidth=this.width,r.imgheight=this.height,r.element&&c(r),this.parentNode&&this.parentNode.removeChild(this),u.imgCount--,u.imgCount||!t||t.hasLoaded||t.onload()},src:l}),this.imgCount++)}return a}clipRect(t,e,i,r){return this.rect(t,e,i,r,0)}text(t,e,i,r){let n={};if(r&&(this.allowHTML||!this.forExport))return this.html(t,e,i);n.x=Math.round(e||0),i&&(n.y=Math.round(i)),A(t)&&(n.text=t);let o=this.createElement("text").attr(n);return r&&(!this.forExport||this.allowHTML)||(o.xSetter=function(t,e,i){let r=i.getElementsByTagName("tspan"),n=i.getAttribute(e);for(let o,a=0;a<r.length;a++)(o=r[a]).getAttribute(e)===n&&o.setAttribute(e,t);i.setAttribute(e,t)}),o}fontMetrics(t){let e=O(o.prototype.getStyle.call(t,"font-size")||0),i=e<24?e+3:Math.round(1.2*e);return{h:i,b:Math.round(.8*i),f:e}}rotCorr(t,e,i){let r=t;return e&&i&&(r=Math.max(r*Math.cos(e*p),4)),{x:-t/3*Math.sin(e*p),y:r}}pathToSegments(t){let e=[],i=[],r={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let n=0;n<t.length;n++)L(i[0])&&I(t[n])&&i.length===r[i[0].toUpperCase()]&&t.splice(n,0,i[0].replace("M","L").replace("m","l")),"string"==typeof t[n]&&(i.length&&e.push(i.slice(0)),i.length=0),i.push(t[n]);return e.push(i.slice(0)),e}label(t,e,i,r,n,o,s,l,c){return new a(this,t,e,i,r,n,o,s,l,c)}alignElements(){this.alignedObjects.forEach((t=>t.align()))}}return M(j.prototype,{Element:o,SVG_NS:x,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:s,draw:v}),n.registerRendererType("svg",j,!0),j})),i(e,"Core/Renderer/HTML/HTMLElement.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Globals.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],(function(t,e,i,r){let{composed:n}=e,{attr:o,css:a,createElement:s,defined:l,extend:c,pInt:u,pushUnique:h}=r;function d(t,e,r){var n;let o=(null===(n=this.div)||void 0===n?void 0:n.style)||r.style;i.prototype["".concat(e,"Setter")].call(this,t,e,r),o&&(o[e]=t)}let p=(t,e)=>{if(!t.div){var r;let n=o(t.element,"class"),a=t.css,l=s("div",n?{className:n}:void 0,{position:"absolute",left:"".concat(t.translateX||0,"px"),top:"".concat(t.translateY||0,"px"),...t.styles,display:t.display,opacity:t.opacity,visibility:t.visibility},(null===(r=t.parentGroup)||void 0===r?void 0:r.div)||e);t.classSetter=(t,e,i)=>{i.setAttribute("class",t),l.className=t},t.translateXSetter=t.translateYSetter=(e,i)=>{t[i]=e,l.style["translateX"===i?"left":"top"]="".concat(e,"px"),t.doTransform=!0},t.opacitySetter=t.visibilitySetter=d,t.css=e=>(a.call(t,e),e.cursor&&(l.style.cursor=e.cursor),e.pointerEvents&&(l.style.pointerEvents=e.pointerEvents),t),t.on=function(){return i.prototype.on.apply({element:l,onEvents:t.onEvents},arguments),t},t.div=l}return t.div};class f extends i{static compose(t){h(n,this.compose)&&(t.prototype.html=function(t,e,i){return new f(this,"span").attr({text:t,x:Math.round(e),y:Math.round(i)})})}constructor(t,e){super(t,e),this.css({position:"absolute",...t.styledMode?{}:{fontFamily:t.style.fontFamily,fontSize:t.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(t,e,i){this.xCorr=-t*i,this.yCorr=-e}css(t){let e,{element:i}=this,r="SPAN"===i.tagName&&t&&"width"in t,n=r&&t.width;return r&&(delete t.width,this.textWidth=u(n)||void 0,e=!0),"ellipsis"===(null===t||void 0===t?void 0:t.textOverflow)&&(t.whiteSpace="nowrap",t.overflow="hidden"),c(this.styles,t),a(i,t),e&&this.updateTransform(),this}htmlGetBBox(){let{element:t}=this;return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}updateTransform(){if(!this.added)return void(this.alignOnAdd=!0);let{element:t,renderer:e,rotation:i,rotationOriginX:r,rotationOriginY:n,styles:o,textAlign:s="left",textWidth:c,translateX:u=0,translateY:h=0,x:d=0,y:p=0}=this,f=o.whiteSpace;if(a(t,{marginLeft:"".concat(u,"px"),marginTop:"".concat(h,"px")}),"SPAN"===t.tagName){var m;let o,u=[i,s,t.innerHTML,c,this.textAlign].join(","),h=-1*(null===(m=this.parentGroup)||void 0===m?void 0:m.padding)||0,g=!1;if(c!==this.oldTextWidth){let e=this.textPxLength?this.textPxLength:(a(t,{width:"",whiteSpace:f||"nowrap"}),t.offsetWidth),r=c||0;(r>this.oldTextWidth||e>r)&&(/[ \-]/.test(t.textContent||t.innerText)||"ellipsis"===t.style.textOverflow)&&(a(t,{width:e>r||i?c+"px":"auto",display:"block",whiteSpace:f||"normal"}),this.oldTextWidth=c,g=!0)}this.hasBoxWidthChanged=g,u!==this.cTT&&(o=e.fontMetrics(t).b,l(i)&&(i!==(this.oldRotation||0)||s!==this.oldAlign)&&this.setSpanRotation(i,h,h),this.getSpanCorrection(!l(i)&&this.textPxLength||t.offsetWidth,o,{left:0,center:.5,right:1}[s]));let{xCorr:y=0,yCorr:v=0}=this,x=(null!==r&&void 0!==r?r:d)-y-d-h,_=(null!==n&&void 0!==n?n:p)-v-p-h;a(t,{left:"".concat(d+y,"px"),top:"".concat(p+v,"px"),transformOrigin:"".concat(x,"px ").concat(_,"px")}),this.cTT=u,this.oldRotation=i,this.oldAlign=s}}setSpanRotation(t,e,i){a(this.element,{transform:"rotate(".concat(t,"deg)"),transformOrigin:"".concat(e,"% ").concat(i,"px")})}add(t){let e,i=this.renderer.box.parentNode,r=[];if(this.parentGroup=t,t&&!(e=t.div)){let n=t;for(;n;)r.push(n),n=n.parentGroup;for(let t of r.reverse())e=p(t,i)}return(e||i).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(e){e!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,t.setElementHTML(this.element,null!==e&&void 0!==e?e:""),this.textStr=e,this.doTransform=!0)}alignSetter(t){this.alignValue=this.textAlign=t,this.doTransform=!0}xSetter(t,e){this[e]=t,this.doTransform=!0}}let m=f.prototype;return m.visibilitySetter=m.opacitySetter=d,m.ySetter=m.rotationSetter=m.rotationOriginXSetter=m.rotationOriginYSetter=m.xSetter,f})),i(e,"Core/Axis/AxisDefaults.js",[],(function(){var t,e;return(e=t||(t={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},e.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:t}=this.axis.chart;return t(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},t})),i(e,"Core/Foundation.js",[e["Core/Utilities.js"]],(function(t){var e;let{addEvent:i,isFunction:r,objectEach:n,removeEvent:o}=t;return(e||(e={})).registerEventOptions=function(t,e){t.eventOptions=t.eventOptions||{},n(e.events,(function(e,n){t.eventOptions[n]!==e&&(t.eventOptions[n]&&(o(t,n,t.eventOptions[n]),delete t.eventOptions[n]),r(e)&&(t.eventOptions[n]=e,i(t,n,e,{order:0})))}))},e})),i(e,"Core/Axis/Tick.js",[e["Core/Templating.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e,i){let{deg2rad:r}=e,{clamp:n,correctFloat:o,defined:a,destroyObjectProperties:s,extend:l,fireEvent:c,isNumber:u,merge:h,objectEach:d,pick:p}=i;return class{constructor(t,e,i,r,n){this.isNew=!0,this.isNewLabel=!0,this.axis=t,this.pos=e,this.type=i||"",this.parameters=n||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,c(this,"init"),i||r||this.addLabel()}addLabel(){let e,i,r,n=this,s=n.axis,h=s.options,d=s.chart,f=s.categories,m=s.logarithmic,g=s.names,y=n.pos,v=p(n.options&&n.options.labels,h.labels),x=s.tickPositions,_=y===x[0],b=y===x[x.length-1],w=(!v.step||1===v.step)&&1===s.tickInterval,S=x.info,k=n.label,C=this.parameters.category||(f?p(f[y],g[y],y):y);m&&u(C)&&(C=o(m.lin2log(C))),s.dateTime&&(S?e=(i=d.time.resolveDTLFormat(h.dateTimeLabelFormats[!h.grid&&S.higherRanks[y]||S.unitName])).main:u(C)&&(e=s.dateTime.getXDateFormat(C,h.dateTimeLabelFormats||{}))),n.isFirst=_,n.isLast=b;let T={axis:s,chart:d,dateTimeLabelFormat:e,isFirst:_,isLast:b,pos:y,tick:n,tickPositionInfo:S,value:C};c(this,"labelFormat",T);let A=e=>v.formatter?v.formatter.call(e,e):v.format?(e.text=s.defaultLabelFormatter.call(e),t.format(v.format,e,d)):s.defaultLabelFormatter.call(e),P=A.call(T,T),M=i&&i.list;n.shortenLabel=M?function(){for(r=0;r<M.length;r++)if(l(T,{dateTimeLabelFormat:M[r]}),k.attr({text:A.call(T,T)}),k.getBBox().width<s.getSlotWidth(n)-2*(v.padding||0))return;k.attr({text:""})}:void 0,w&&s._addedPlotLB&&n.moveLabel(P,v),a(k)||n.movedLabel?k&&k.textStr!==P&&!w&&(!k.textWidth||v.style.width||k.styles.width||k.css({width:null}),k.attr({text:P}),k.textPxLength=k.getBBox().width):(n.label=k=n.createLabel(P,v),n.rotation=0)}createLabel(t,e,i){let r=this.axis,n=r.chart,o=a(t)&&e.enabled?n.renderer.text(t,null===i||void 0===i?void 0:i.x,null===i||void 0===i?void 0:i.y,e.useHTML).add(r.labelGroup):void 0;return o&&(n.styledMode||o.css(h(e.style)),o.textPxLength=o.getBBox().width),o}destroy(){s(this,this.axis)}getPosition(t,e,i,r){let a=this.axis,s=a.chart,l=r&&s.oldChartHeight||s.chartHeight,u={x:t?o(a.translate(e+i,void 0,void 0,r)+a.transB):a.left+a.offset+(a.opposite?(r&&s.oldChartWidth||s.chartWidth)-a.right-a.left:0),y:t?l-a.bottom+a.offset-(a.opposite?a.height:0):o(l-a.translate(e+i,void 0,void 0,r)-a.transB)};return u.y=n(u.y,-1e5,1e5),c(this,"afterGetPosition",{pos:u}),u}getLabelPosition(t,e,i,n,o,s,l,u){let h,d,f=this.axis,m=f.transA,g=f.isLinked&&f.linkedParent?f.linkedParent.reversed:f.reversed,y=f.staggerLines,v=f.tickRotCorr||{x:0,y:0},x=n||f.reserveSpaceDefault?0:-f.labelOffset*("center"===f.labelAlign?.5:1),_=o.distance,b={};return h=0===f.side?i.rotation?-_:-i.getBBox().height:2===f.side?v.y+_:Math.cos(i.rotation*r)*(v.y-i.getBBox(!1,0).height/2),a(o.y)&&(h=0===f.side&&f.horiz?o.y+h:o.y),t=t+p(o.x,[0,1,0,-1][f.side]*_)+x+v.x-(s&&n?s*m*(g?-1:1):0),e=e+h-(s&&!n?s*m*(g?1:-1):0),y&&(d=l/(u||1)%y,f.opposite&&(d=y-d-1),e+=f.labelOffset/y*d),b.x=t,b.y=Math.round(e),c(this,"afterGetLabelPosition",{pos:b,tickmarkOffset:s,index:l}),b}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(arguments.length>5?arguments[5]:void 0).crispLine([["M",t,e],["L",t+(n?0:-i),e+(n?i:0)]],r)}handleOverflow(t){let e,i,n,o=this.axis,a=o.options.labels,s=t.x,l=o.chart.chartWidth,c=o.chart.spacing,u=p(o.labelLeft,Math.min(o.pos,c[3])),h=p(o.labelRight,Math.max(o.isRadial?0:o.pos+o.len,l-c[1])),d=this.label,f=this.rotation,m={left:0,center:.5,right:1}[o.labelAlign||d.attr("align")],g=d.getBBox().width,y=o.getSlotWidth(this),v={},x=y,_=1;f||"justify"!==a.overflow?f<0&&s-m*g<u?n=Math.round(s/Math.cos(f*r)-u):f>0&&s+m*g>h&&(n=Math.round((l-s)/Math.cos(f*r))):(e=s-m*g,i=s+(1-m)*g,e<u?x=t.x+x*(1-m)-u:i>h&&(x=h-t.x+x*m,_=-1),(x=Math.min(y,x))<y&&"center"===o.labelAlign&&(t.x+=_*(y-x-m*(y-Math.min(g,x)))),(g>x||o.autoRotation&&(d.styles||{}).width)&&(n=x)),n&&(this.shortenLabel?this.shortenLabel():(v.width=Math.floor(n)+"px",(a.style||{}).textOverflow||(v.textOverflow="ellipsis"),d.css(v)))}moveLabel(t,e){let i,r=this,n=r.label,o=r.axis,a=!1;n&&n.textStr===t?(r.movedLabel=n,a=!0,delete r.label):d(o.ticks,(function(e){a||e.isNew||e===r||!e.label||e.label.textStr!==t||(r.movedLabel=e.label,a=!0,e.labelPos=r.movedLabel.xy,delete e.label)})),!a&&(r.labelPos||n)&&(i=r.labelPos||n.xy,r.movedLabel=r.createLabel(t,e,i),r.movedLabel&&r.movedLabel.attr({opacity:0}))}render(t,e,i){let r=this.axis,n=r.horiz,a=this.pos,s=p(this.tickmarkOffset,r.tickmarkOffset),l=this.getPosition(n,a,s,e),u=l.x,h=l.y,d=r.pos,f=d+r.len,m=n?u:h;!r.chart.polar&&this.isNew&&(o(m)<d||m>f)&&(i=0);let g=p(i,this.label&&this.label.newOpacity,1);i=p(i,1),this.isActive=!0,this.renderGridLine(e,i),this.renderMark(l,i),this.renderLabel(l,e,g,t),this.isNew=!1,c(this,"afterRender")}renderGridLine(t,e){let i,r=this.axis,n=r.options,o={},a=this.pos,s=this.type,l=p(this.tickmarkOffset,r.tickmarkOffset),c=r.chart.renderer,u=this.gridLine,h=n.gridLineWidth,d=n.gridLineColor,f=n.gridLineDashStyle;"minor"===this.type&&(h=n.minorGridLineWidth,d=n.minorGridLineColor,f=n.minorGridLineDashStyle),u||(r.chart.styledMode||(o.stroke=d,o["stroke-width"]=h||0,o.dashstyle=f),s||(o.zIndex=1),t&&(e=0),this.gridLine=u=c.path().attr(o).addClass("highcharts-"+(s?s+"-":"")+"grid-line").add(r.gridGroup)),u&&(i=r.getPlotLinePath({value:a+l,lineWidth:u.strokeWidth(),force:"pass",old:t,acrossPanes:!1}))&&u[t||this.isNew?"attr":"animate"]({d:i,opacity:e})}renderMark(t,e){let i=this.axis,r=i.options,n=i.chart.renderer,o=this.type,a=i.tickSize(o?o+"Tick":"tick"),s=t.x,l=t.y,c=p(r["minor"!==o?"tickWidth":"minorTickWidth"],!o&&i.isXAxis?1:0),u=r["minor"!==o?"tickColor":"minorTickColor"],h=this.mark,d=!h;a&&(i.opposite&&(a[0]=-a[0]),h||(this.mark=h=n.path().addClass("highcharts-"+(o?o+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||h.attr({stroke:u,"stroke-width":c})),h[d?"attr":"animate"]({d:this.getMarkPath(s,l,a[0],h.strokeWidth(),i.horiz,n),opacity:e}))}renderLabel(t,e,i,r){let n=this.axis,o=n.horiz,a=n.options,s=this.label,l=a.labels,c=l.step,h=p(this.tickmarkOffset,n.tickmarkOffset),d=t.x,f=t.y,m=!0;s&&u(d)&&(s.xy=t=this.getLabelPosition(d,f,s,o,l,h,r,c),this.isFirst&&!this.isLast&&!a.showFirstLabel||this.isLast&&!this.isFirst&&!a.showLastLabel?m=!1:!o||l.step||l.rotation||e||0===i||this.handleOverflow(t),c&&r%c&&(m=!1),m&&u(t.y)?(t.opacity=i,s[this.isNewLabel?"attr":"animate"](t).show(!0),this.isNewLabel=!1):(s.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let t=this.label,e=this.axis;t&&!this.isNew&&(t.animate({opacity:0},void 0,t.destroy),delete this.label),e.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}})),i(e,"Core/Axis/Axis.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/AxisDefaults.js"],e["Core/Color/Color.js"],e["Core/Defaults.js"],e["Core/Foundation.js"],e["Core/Globals.js"],e["Core/Axis/Tick.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o,a,s){let{animObject:l}=t,{xAxis:c,yAxis:u}=e,{defaultOptions:h}=r,{registerEventOptions:d}=n,{deg2rad:p}=o,{arrayMax:f,arrayMin:m,clamp:g,correctFloat:y,defined:v,destroyObjectProperties:x,erase:_,error:b,extend:w,fireEvent:S,getClosestDistance:k,insertItem:C,isArray:T,isNumber:A,isString:P,merge:M,normalizeTickInterval:E,objectEach:I,pick:z,relativeLength:L,removeEvent:D,splat:R,syncTimeout:O}=s,B=(t,e)=>E(e,void 0,void 0,z(t.options.allowDecimals,e<.5||void 0!==t.tickAmount),!!t.tickAmount);w(h,{xAxis:c,yAxis:M(c,u)});class F{constructor(t,e,i){this.init(t,e,i)}init(t,e){var i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.coll,n="xAxis"===r,o=this.isZAxis||(t.inverted?!n:n);this.chart=t,this.horiz=o,this.isXAxis=n,this.coll=r,S(this,"init",{userOptions:e}),this.opposite=z(e.opposite,this.opposite),this.side=z(e.side,this.side,o?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);let a=this.options,s=a.labels,l=a.type;this.userOptions=e,this.minPixelPadding=0,this.reversed=z(a.reversed,this.reversed),this.visible=a.visible,this.zoomEnabled=a.zoomEnabled,this.hasNames="category"===l||!0===a.categories,this.categories=T(a.categories)&&a.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=v(a.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},null!==(i=this.len)&&void 0!==i||(this.len=0),this.minRange=this.userMinRange=a.minRange||a.maxZoom,this.range=a.range,this.offset=a.offset||0,this.max=void 0,this.min=void 0;let c=z(a.crosshair,R(t.options.tooltip.crosshairs)[n?0:1]);this.crosshair=!0===c?{}:c,-1===t.axes.indexOf(this)&&(n?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),C(this,t[this.coll])),t.orderItems(this.coll),this.series=this.series||[],t.inverted&&!this.isZAxis&&n&&!v(this.reversed)&&(this.reversed=!0),this.labelRotation=A(s.rotation)?s.rotation:void 0,d(this,a),S(this,"afterInit")}setOptions(t){let e=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=M(e,h[this.coll],t),S(this,"afterSetOptions",{userOptions:t})}defaultLabelFormatter(){let t,e,i=this.axis,{numberFormatter:r}=this.chart,n=A(this.value)?this.value:NaN,o=i.chart.time,a=i.categories,s=this.dateTimeLabelFormat,l=h.lang,c=l.numericSymbols,u=l.numericSymbolMagnitude||1e3,d=i.logarithmic?Math.abs(n):i.tickInterval,p=c&&c.length;if(a)e="".concat(this.value);else if(s)e=o.dateFormat(s,n);else if(p&&c&&d>=1e3)for(;p--&&void 0===e;)d>=(t=Math.pow(u,p+1))&&10*n%t==0&&null!==c[p]&&0!==n&&(e=r(n/t,-1)+c[p]);return void 0===e&&(e=Math.abs(n)>=1e4?r(n,-1):r(n,-1,void 0,"")),e}getSeriesExtremes(){let t,e=this;S(this,"getSeriesExtremes",null,(function(){e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.threshold=void 0,e.softThreshold=!e.isXAxis,e.series.forEach((i=>{if(i.reserveSpace()){let r,n,o,a=i.options,s=a.threshold;if(e.hasVisibleSeries=!0,e.positiveValuesOnly&&0>=(s||0)&&(s=void 0),e.isXAxis)(r=i.xData)&&r.length&&(r=e.logarithmic?r.filter((t=>t>0)):r,n=(t=i.getXExtremes(r)).min,o=t.max,A(n)||n instanceof Date||(r=r.filter(A),n=(t=i.getXExtremes(r)).min,o=t.max),r.length&&(e.dataMin=Math.min(z(e.dataMin,n),n),e.dataMax=Math.max(z(e.dataMax,o),o)));else{let t=i.applyExtremes();A(t.dataMin)&&(n=t.dataMin,e.dataMin=Math.min(z(e.dataMin,n),n)),A(t.dataMax)&&(o=t.dataMax,e.dataMax=Math.max(z(e.dataMax,o),o)),v(s)&&(e.threshold=s),(!a.softThreshold||e.positiveValuesOnly)&&(e.softThreshold=!1)}}}))})),S(this,"afterGetSeriesExtremes")}translate(t,e,i,r,n,o){var a;let s=this.linkedParent||this,l=r&&s.old?s.old.min:s.min;if(!A(l))return NaN;let c=s.minPixelPadding,u=(s.isOrdinal||(null===(a=s.brokenAxis)||void 0===a?void 0:a.hasBreaks)||s.logarithmic&&n)&&s.lin2val,h=1,d=0,p=r&&s.old?s.old.transA:s.transA,f=0;return p||(p=s.transA),i&&(h*=-1,d=s.len),s.reversed&&(h*=-1,d-=h*(s.sector||s.len)),e?(f=(t=t*h+d-c)/p+l,u&&(f=s.lin2val(f))):(u&&(t=s.val2lin(t)),f=h*(t-l)*p+d+h*c+(A(o)?p*o:0),s.isRadial||(f=y(f))),f}toPixels(t,e){return this.translate(t,!1,!this.horiz,void 0,!0)+(e?0:this.pos)}toValue(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(t){let e,i,r,n,o,a=this,s=a.chart,l=a.left,c=a.top,u=t.old,h=t.value,d=t.lineWidth,p=u&&s.oldChartHeight||s.chartHeight,f=u&&s.oldChartWidth||s.chartWidth,m=a.transB,y=t.translatedValue,v=t.force;function x(t,e,i){return"pass"!==v&&(t<e||t>i)&&(v?t=g(t,e,i):o=!0),t}let _={value:h,lineWidth:d,old:u,force:v,acrossPanes:t.acrossPanes,translatedValue:y};return S(this,"getPlotLinePath",_,(function(t){e=r=(y=g(y=z(y,a.translate(h,void 0,void 0,u)),-1e5,1e5))+m,i=n=p-y-m,A(y)?a.horiz?(i=c,n=p-a.bottom+(s.scrollablePixelsY||0),e=r=x(e,l,l+a.width)):(e=l,r=f-a.right+(s.scrollablePixelsX||0),i=n=x(i,c,c+a.height)):(o=!0,v=!1),t.path=o&&!v?void 0:s.renderer.crispLine([["M",e,i],["L",r,n]],d||1)})),_.path}getLinearTickPositions(t,e,i){let r,n,o,a=y(Math.floor(e/t)*t),s=y(Math.ceil(i/t)*t),l=[];if(y(a+t)===a&&(o=20),this.single)return[e];for(r=a;r<=s&&(l.push(r),(r=y(r+t,o))!==n);)n=r;return l}getMinorTickInterval(){let{minorTicks:t,minorTickInterval:e}=this.options;return!0===t?z(e,"auto"):!1!==t?e:void 0}getMinorTickPositions(){let t,e=this.options,i=this.tickPositions,r=this.minorTickInterval,n=this.pointRangePadding||0,o=(this.min||0)-n,a=(this.max||0)+n,s=a-o,l=[];if(s&&s/r<this.len/3){let n=this.logarithmic;if(n)this.paddedTicks.forEach((function(t,e,i){e&&l.push.apply(l,n.getLogTickPositions(r,i[e-1],i[e],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())l=l.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(r),o,a,e.startOfWeek));else for(t=o+(i[0]-o)%r;t<=a&&t!==l[0];t+=r)l.push(t)}return 0!==l.length&&this.trimTicks(l),l}adjustForMinRange(){let t,e,i,r,n=this.options,o=this.logarithmic,{max:a,min:s,minRange:l}=this;this.isXAxis&&void 0===l&&!o&&(l=v(n.min)||v(n.max)||v(n.floor)||v(n.ceiling)?null:Math.min(5*(k(this.series.map((t=>{var e;return(t.xIncrement?null===(e=t.xData)||void 0===e?void 0:e.slice(0,2):t.xData)||[]})))||0),this.dataMax-this.dataMin)),A(a)&&A(s)&&A(l)&&a-s<l&&(e=this.dataMax-this.dataMin>=l,t=(l-a+s)/2,i=[s-t,z(n.min,s-t)],e&&(i[2]=o?o.log2lin(this.dataMin):this.dataMin),r=[(s=f(i))+l,z(n.max,s+l)],e&&(r[2]=o?o.log2lin(this.dataMax):this.dataMax),(a=m(r))-s<l&&(i[0]=a-l,i[1]=z(n.min,a-l),s=f(i))),this.minRange=l,this.min=s,this.max=a}getClosest(){let t,e;if(this.categories)e=1;else{let i=[];this.series.forEach((function(t){var r;let n=t.closestPointRange;1===(null===(r=t.xData)||void 0===r?void 0:r.length)?i.push(t.xData[0]):!t.noSharedTooltip&&v(n)&&t.reserveSpace()&&(e=v(e)?Math.min(e,n):n)})),i.length&&(i.sort(((t,e)=>t-e)),t=k([i]))}return t&&e?Math.min(t,e):t||e}nameToX(t){let e,i=T(this.options.categories),r=i?this.categories:this.names,n=t.options.x;return t.series.requireSorting=!1,v(n)||(n=this.options.uniqueNames&&r?i?r.indexOf(t.name):z(r.keys[t.name],-1):t.series.autoIncrement()),-1===n?!i&&r&&(e=r.length):e=n,void 0!==e?(this.names[e]=t.name,this.names.keys[t.name]=e):t.x&&(e=t.x),e}updateNames(){let t=this,e=this.names;e.length>0&&(Object.keys(e.keys).forEach((function(t){delete e.keys[t]})),e.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((e=>{e.xIncrement=null,(!e.points||e.isDirtyData)&&(t.max=Math.max(t.max,e.xData.length-1),e.processData(),e.generatePoints()),e.data.forEach((function(i,r){let n;(null===i||void 0===i?void 0:i.options)&&void 0!==i.name&&void 0!==(n=t.nameToX(i))&&n!==i.x&&(i.x=n,e.xData[r]=n)}))})))}setAxisTranslation(){let t,e,i=this,r=i.max-i.min,n=i.linkedParent,o=!!i.categories,a=i.isXAxis,s=i.axisPointRange||0,l=0,c=0,u=i.transA;(a||o||s)&&(t=i.getClosest(),n?(l=n.minPointOffset,c=n.pointRangePadding):i.series.forEach((function(e){let r=o?1:a?z(e.options.pointRange,t,0):i.axisPointRange||0,n=e.options.pointPlacement;if(s=Math.max(s,r),!i.single||o){let t=e.is("xrange")?!a:a;l=Math.max(l,t&&P(n)?0:r/2),c=Math.max(c,t&&"on"===n?0:r)}})),e=i.ordinal&&i.ordinal.slope&&t?i.ordinal.slope/t:1,i.minPointOffset=l*=e,i.pointRangePadding=c*=e,i.pointRange=Math.min(s,i.single&&o?1:r),a&&t&&(i.closestPointRange=t)),i.translationSlope=i.transA=u=i.staticScale||i.len/(r+c||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=u*l,S(this,"afterSetAxisTranslation")}minFromRange(){let{max:t,min:e}=this;return A(t)&&A(e)&&t-e||void 0}setTickInterval(t){var e;let i,r,n,o,a,{categories:s,chart:l,dataMax:c,dataMin:u,dateTime:h,isXAxis:d,logarithmic:p,options:f,softThreshold:m}=this,g=A(this.threshold)?this.threshold:void 0,x=this.minRange||0,{ceiling:_,floor:w,linkedTo:k,softMax:C,softMin:T}=f,P=A(k)&&(null===(e=l[this.coll])||void 0===e?void 0:e[k]),M=f.tickPixelInterval,E=f.maxPadding,I=f.minPadding,L=0,D=A(f.tickInterval)&&f.tickInterval>=0?f.tickInterval:void 0;if(h||s||P||this.getTickAmount(),o=z(this.userMin,f.min),a=z(this.userMax,f.max),P?(this.linkedParent=P,i=P.getExtremes(),this.min=z(i.min,i.dataMin),this.max=z(i.max,i.dataMax),f.type!==P.options.type&&b(11,!0,l)):(m&&v(g)&&A(c)&&A(u)&&(u>=g?(r=g,I=0):c<=g&&(n=g,E=0)),this.min=z(o,r,u),this.max=z(a,n,c)),A(this.max)&&A(this.min)&&(p&&(this.positiveValuesOnly&&!t&&0>=Math.min(this.min,z(u,this.min))&&b(10,!0,l),this.min=y(p.log2lin(this.min),16),this.max=y(p.log2lin(this.max),16)),this.range&&A(u)&&(this.userMin=this.min=o=Math.max(u,this.minFromRange()||0),this.userMax=a=this.max,this.range=void 0)),S(this,"foundExtremes"),this.adjustForMinRange(),A(this.min)&&A(this.max)){var R;if(!A(this.userMin)&&A(T)&&T<this.min&&(this.min=o=T),!A(this.userMax)&&A(C)&&C>this.max&&(this.max=a=C),s||this.axisPointRange||null!==(R=this.stacking)&&void 0!==R&&R.usePercentage||P||!(L=this.max-this.min)||(!v(o)&&I&&(this.min-=L*I),v(a)||!E||(this.max+=L*E)),!A(this.userMin)&&A(w)&&(this.min=Math.max(this.min,w)),!A(this.userMax)&&A(_)&&(this.max=Math.min(this.max,_)),m&&A(u)&&A(c)){let t=g||0;!v(o)&&this.min<t&&u>=t?this.min=f.minRange?Math.min(t,this.max-x):t:!v(a)&&this.max>t&&c<=t&&(this.max=f.minRange?Math.max(t,this.min+x):t)}!l.polar&&this.min>this.max&&(v(f.min)?this.max=this.min:v(f.max)&&(this.min=this.max)),L=this.max-this.min}if(this.min!==this.max&&A(this.min)&&A(this.max)?P&&!D&&M===P.options.tickPixelInterval?this.tickInterval=D=P.tickInterval:this.tickInterval=z(D,this.tickAmount?L/Math.max(this.tickAmount-1,1):void 0,s?1:L*M/Math.max(this.len,M)):this.tickInterval=1,d&&!t){var O,F;let t=this.min!==(null===(O=this.old)||void 0===O?void 0:O.min)||this.max!==(null===(F=this.old)||void 0===F?void 0:F.max);this.series.forEach((function(e){var i;e.forceCrop=null===(i=e.forceCropping)||void 0===i?void 0:i.call(e),e.processData(t)})),S(this,"postProcessData",{hasExtremesChanged:t})}this.setAxisTranslation(),S(this,"initialAxisTranslation"),this.pointRange&&!D&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let j=z(f.minTickInterval,h&&!this.series.some((t=>t.noSharedTooltip))?this.closestPointRange:0);!D&&this.tickInterval<j&&(this.tickInterval=j),h||p||D||(this.tickInterval=B(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let t,e=this.options,i=e.tickPositions,r=e.tickPositioner,n=this.getMinorTickInterval(),o=!this.isPanning,a=o&&e.startOnTick,s=o&&e.endOnTick,l=[];if(this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===n&&this.tickInterval?this.tickInterval/e.minorTicksPerMajor:n,this.single=this.min===this.max&&v(this.min)&&!this.tickAmount&&(this.min%1==0||!1!==e.allowDecimals),i)l=i.slice();else if(A(this.min)&&A(this.max)){var c,u;if((null===(c=this.ordinal)||void 0===c||!c.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))l=[this.min,this.max],b(19,!1,this.chart);else if(this.dateTime)l=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,null===(u=this.ordinal)||void 0===u?void 0:u.positions,this.closestPointRange,!0);else if(this.logarithmic)l=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let t=this.tickInterval,e=t;for(;e<=2*t&&(l=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&l.length>this.tickAmount);)this.tickInterval=B(this,e*=1.1)}l.length>this.len&&(l=[l[0],l[l.length-1]])[0]===l[1]&&(l.length=1),r&&(this.tickPositions=l,(t=r.apply(this,[this.min,this.max]))&&(l=t))}this.tickPositions=l,this.paddedTicks=l.slice(0),this.trimTicks(l,a,s),!this.isLinked&&A(this.min)&&A(this.max)&&(this.single&&l.length<2&&!this.categories&&!this.series.some((t=>t.is("heatmap")&&"between"===t.options.pointPlacement))&&(this.min-=.5,this.max+=.5),i||t||this.adjustTickAmount()),S(this,"afterSetTickPositions")}trimTicks(t,e,i){let r=t[0],n=t[t.length-1],o=!this.isOrdinal&&this.minPointOffset||0;if(S(this,"trimTicks"),!this.isLinked){if(e&&r!==-1/0)this.min=r;else for(;this.min-o>t[0];)t.shift();if(i)this.max=n;else for(;this.max+o<t[t.length-1];)t.pop();0===t.length&&v(r)&&!this.options.tickPositions&&t.push((n+r)/2)}}alignToOthers(){let t,e=this,i=e.chart,r=[this],n=e.options,o=i.options.chart,a="yAxis"===this.coll&&o.alignThresholds,s=[];if(e.thresholdAlignment=void 0,(!1!==o.alignTicks&&n.alignTicks||a)&&!1!==n.startOnTick&&!1!==n.endOnTick&&!e.logarithmic){let n=t=>{let{horiz:e,options:i}=t;return[e?i.left:i.top,i.width,i.height,i.pane].join(",")},o=n(this);i[this.coll].forEach((function(i){let{series:a}=i;a.length&&a.some((t=>t.visible))&&i!==e&&n(i)===o&&(t=!0,r.push(i))}))}if(t&&a){r.forEach((t=>{let i=t.getThresholdAlignment(e);A(i)&&s.push(i)}));let t=s.length>1?s.reduce(((t,e)=>t+e),0)/s.length:void 0;r.forEach((e=>{e.thresholdAlignment=t}))}return t}getThresholdAlignment(t){if((!A(this.dataMin)||this!==t&&this.series.some((t=>t.isDirty||t.isDirtyData)))&&this.getSeriesExtremes(),A(this.threshold)){let t=g((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(t=1-t),t}}getTickAmount(){let t=this.options,e=t.tickPixelInterval,i=t.tickAmount;v(t.tickInterval)||i||!(this.len<e)||this.isRadial||this.logarithmic||!t.startOnTick||!t.endOnTick||(i=2),!i&&this.alignToOthers()&&(i=Math.ceil(this.len/e)+1),i<4&&(this.finalTickAmt=i,i=5),this.tickAmount=i}adjustTickAmount(){let t,e,i,r=this,{finalTickAmt:n,max:o,min:a,options:s,tickPositions:l,tickAmount:c,thresholdAlignment:u}=r,h=null===l||void 0===l?void 0:l.length,d=z(r.threshold,r.softThreshold?0:null),p=r.tickInterval,f=()=>l.push(y(l[l.length-1]+p)),m=()=>l.unshift(y(l[0]-p));if(A(u)&&(i=u<.5?Math.ceil(u*(c-1)):Math.floor(u*(c-1)),s.reversed&&(i=c-1-i)),r.hasData()&&A(a)&&A(o)){let u=()=>{r.transA*=(h-1)/(c-1),r.min=s.startOnTick?l[0]:Math.min(a,l[0]),r.max=s.endOnTick?l[l.length-1]:Math.max(o,l[l.length-1])};if(A(i)&&A(r.threshold)){for(;l[i]!==d||l.length!==c||l[0]>a||l[l.length-1]<o;){for(l.length=0,l.push(r.threshold);l.length<c;)void 0===l[i]||l[i]>r.threshold?m():f();if(p>8*r.tickInterval)break;p*=2}u()}else if(h<c){for(;l.length<c;)l.length%2||a===d?f():m();u()}if(v(n)){for(e=t=l.length;e--;)(3===n&&e%2==1||n<=2&&e>0&&e<t-1)&&l.splice(e,1);r.finalTickAmt=void 0}}}setScale(){var t,e;let{coll:i,stacking:r}=this,n=!1,o=!1;this.series.forEach((t=>{n=n||t.isDirtyData||t.isDirty,o=o||t.xAxis&&t.xAxis.isDirty||!1})),this.setAxisSize();let a=this.len!==(this.old&&this.old.len);a||n||o||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(r&&"yAxis"===i&&r.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),r&&"xAxis"===i&&r.buildStacks(),this.isDirty||(this.isDirty=a||this.min!==(null===(t=this.old)||void 0===t?void 0:t.min)||this.max!==(null===(e=this.old)||void 0===e?void 0:e.max))):r&&r.cleanStacks(),n&&delete this.allExtremes,S(this,"afterSetScale")}setExtremes(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;this.series.forEach((t=>{delete t.kdTree})),S(this,"setExtremes",n=w(n,{min:t,max:e}),(t=>{this.userMin=t.min,this.userMax=t.max,this.eventArgs=t,i&&this.chart.redraw(r)}))}setAxisSize(){let t=this.chart,e=this.options,i=e.offsets||[0,0,0,0],r=this.horiz,n=this.width=Math.round(L(z(e.width,t.plotWidth-i[3]+i[1]),t.plotWidth)),o=this.height=Math.round(L(z(e.height,t.plotHeight-i[0]+i[2]),t.plotHeight)),a=this.top=Math.round(L(z(e.top,t.plotTop+i[0]),t.plotHeight,t.plotTop)),s=this.left=Math.round(L(z(e.left,t.plotLeft+i[3]),t.plotWidth,t.plotLeft));this.bottom=t.chartHeight-o-a,this.right=t.chartWidth-n-s,this.len=Math.max(r?n:o,0),this.pos=r?s:a}getExtremes(){let t=this.logarithmic;return{min:t?y(t.lin2log(this.min)):this.min,max:t?y(t.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(t){let e=this.logarithmic,i=e?e.lin2log(this.min):this.min,r=e?e.lin2log(this.max):this.max;return null===t||t===-1/0?t=i:t===1/0?t=r:i>t?t=i:r<t&&(t=r),this.translate(t,0,1,0,1)}autoLabelAlign(t){let e=(z(t,0)-90*this.side+720)%360,i={align:"center"};return S(this,"autoLabelAlign",i,(function(t){e>15&&e<165?t.align="right":e>195&&e<345&&(t.align="left")})),i.align}tickSize(t){let e,i=this.options,r=z(i["tick"===t?"tickWidth":"minorTickWidth"],"tick"===t&&this.isXAxis&&!this.categories?1:0),n=i["tick"===t?"tickLength":"minorTickLength"];r&&n&&("inside"===i[t+"Position"]&&(n=-n),e=[n,r]);let o={tickSize:e};return S(this,"afterTickSize",o),o.tickSize}labelMetrics(){let t=this.chart.renderer,e=this.ticks,i=e[Object.keys(e)[0]]||{};return this.chart.renderer.fontMetrics(i.label||i.movedLabel||t.box)}unsquish(){let t,e,i=this.options.labels,r=i.padding||0,n=this.horiz,o=this.tickInterval,a=this.len/(((this.categories?1:0)+this.max-this.min)/o),s=i.rotation,l=y(.8*this.labelMetrics().h),c=Math.max(this.max-this.min,0),u=function(t){let e=(t+2*r)/(a||1);return(e=e>1?Math.ceil(e):1)*o>c&&t!==1/0&&a!==1/0&&c&&(e=Math.ceil(c/o)),y(e*o)},h=o,d=Number.MAX_VALUE;if(n){if(!i.staggerLines&&(A(s)?e=[s]:a<i.autoRotationLimit&&(e=i.autoRotation)),e){let i,r;for(let n of e)(n===s||n&&n>=-90&&n<=90)&&(r=(i=u(Math.abs(l/Math.sin(p*n))))+Math.abs(n/360))<d&&(d=r,t=n,h=i)}}else h=u(.75*l);return this.autoRotation=e,this.labelRotation=z(t,A(s)?s:0),i.step?o:h}getSlotWidth(t){let e=this.chart,i=this.horiz,r=this.options.labels,n=Math.max(this.tickPositions.length-(this.categories?0:1),1),o=e.margin[3];if(t&&A(t.slotWidth))return t.slotWidth;if(i&&r.step<2)return r.rotation?0:(this.staggerLines||1)*this.len/n;if(!i){let t=r.style.width;if(void 0!==t)return parseInt(String(t),10);if(o)return o-e.spacing[3]}return.33*e.chartWidth}renderUnsquish(){let t,e,i,r,n=this.chart,o=n.renderer,a=this.tickPositions,s=this.ticks,l=this.options.labels,c=l.style,u=this.horiz,h=this.getSlotWidth(),d=Math.max(1,Math.round(h-(u?2*(l.padding||0):l.distance||0))),p={},f=this.labelMetrics(),m=c.textOverflow,g=0;if(P(l.rotation)||(p.rotation=l.rotation||0),a.forEach((function(t){let e=s[t];e.movedLabel&&e.replaceMovedLabel(),e&&e.label&&e.label.textPxLength>g&&(g=e.label.textPxLength)})),this.maxLabelLength=g,this.autoRotation)g>d&&g>f.h?p.rotation=this.labelRotation:this.labelRotation=0;else if(h&&(t=d,!m))for(e="clip",r=a.length;!u&&r--;)(i=s[a[r]].label)&&("ellipsis"===i.styles.textOverflow?i.css({textOverflow:"clip"}):i.textPxLength>h&&i.css({width:h+"px"}),i.getBBox().height>this.len/a.length-(f.h-f.f)&&(i.specificTextOverflow="ellipsis"));p.rotation&&(t=g>.5*n.chartHeight?.33*n.chartHeight:g,m||(e="ellipsis")),this.labelAlign=l.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(p.align=this.labelAlign),a.forEach((function(i){let r=s[i],n=r&&r.label,o=c.width,a={};n&&(n.attr(p),r.shortenLabel?r.shortenLabel():t&&!o&&"nowrap"!==c.whiteSpace&&(t<n.textPxLength||"SPAN"===n.element.tagName)?(a.width=t+"px",m||(a.textOverflow=n.specificTextOverflow||e),n.css(a)):!n.styles.width||a.width||o||n.css({width:null}),delete n.specificTextOverflow,r.rotation=p.rotation)}),this),this.tickRotCorr=o.rotCorr(f.b,this.labelRotation||0,0!==this.side)}hasData(){return this.series.some((function(t){return t.hasData()}))||this.options.showEmpty&&v(this.min)&&v(this.max)}addTitle(t){let e,i=this.chart.renderer,r=this.horiz,n=this.opposite,o=this.options.title,a=this.chart.styledMode;this.axisTitle||((e=o.textAlign)||(e=(r?{low:"left",middle:"center",high:"right"}:{low:n?"right":"left",middle:"center",high:n?"left":"right"})[o.align]),this.axisTitle=i.text(o.text||"",0,0,o.useHTML).attr({zIndex:7,rotation:o.rotation||0,align:e}).addClass("highcharts-axis-title"),a||this.axisTitle.css(M(o.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),a||o.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[t?"show":"hide"](t)}generateTick(t){let e=this.ticks;e[t]?e[t].addLabel():e[t]=new a(this,t)}createGroups(){let{axisParent:t,chart:e,coll:i,options:r}=this,n=e.renderer,o=(e,o,a)=>n.g(e).attr({zIndex:a}).addClass("highcharts-".concat(i.toLowerCase()).concat(o," ")+(this.isRadial?"highcharts-radial-axis".concat(o," "):"")+(r.className||"")).add(t);this.axisGroup||(this.gridGroup=o("grid","-grid",r.gridZIndex),this.axisGroup=o("axis","",r.zIndex),this.labelGroup=o("axis-labels","-labels",r.labels.zIndex))}getOffset(){let t,e,i,r,n=this,{chart:o,horiz:a,options:s,side:l,ticks:c,tickPositions:u,coll:h}=n,d=o.inverted&&!n.isZAxis?[1,0,3,2][l]:l,p=n.hasData(),f=s.title,m=s.labels,g=A(s.crossing),y=o.axisOffset,x=o.clipOffset,_=[-1,1,1,-1][l],b=0,w=0,k=0;if(n.showAxis=t=p||s.showEmpty,n.staggerLines=n.horiz&&m.staggerLines||void 0,n.createGroups(),p||n.isLinked?(u.forEach((function(t){n.generateTick(t)})),n.renderUnsquish(),n.reserveSpaceDefault=0===l||2===l||{1:"left",3:"right"}[l]===n.labelAlign,z(m.reserveSpace,!g&&null,"center"===n.labelAlign||null,n.reserveSpaceDefault)&&u.forEach((function(t){k=Math.max(c[t].getLabelSize(),k)})),n.staggerLines&&(k*=n.staggerLines),n.labelOffset=k*(n.opposite?-1:1)):I(c,(function(t,e){t.destroy(),delete c[e]})),null!==f&&void 0!==f&&f.text&&!1!==f.enabled&&(n.addTitle(t),t&&!g&&!1!==f.reserveSpace&&(n.titleOffset=b=n.axisTitle.getBBox()[a?"height":"width"],w=v(e=f.offset)?0:z(f.margin,a?5:10))),n.renderLine(),n.offset=_*z(s.offset,y[l]?y[l]+(s.margin||0):0),n.tickRotCorr=n.tickRotCorr||{x:0,y:0},r=0===l?-n.labelMetrics().h:2===l?n.tickRotCorr.y:0,i=Math.abs(k)+w,k&&(i-=r,i+=_*(a?z(m.y,n.tickRotCorr.y+_*m.distance):z(m.x,_*m.distance))),n.axisTitleMargin=z(e,i),n.getMaxLabelDimensions&&(n.maxLabelDimensions=n.getMaxLabelDimensions(c,u)),"colorAxis"!==h&&x){let t=this.tickSize("tick");y[l]=Math.max(y[l],(n.axisTitleMargin||0)+b+_*n.offset,i,u&&u.length&&t?t[0]+_*n.offset:0);let e=!n.axisLine||s.offset?0:n.axisLine.strokeWidth()/2;x[d]=Math.max(x[d],e)}S(this,"afterGetOffset")}getLinePath(t){let e=this.chart,i=this.opposite,r=this.offset,n=this.horiz,o=this.left+(i?this.width:0)+r,a=e.chartHeight-this.bottom-(i?this.height:0)+r;return i&&(t*=-1),e.renderer.crispLine([["M",n?this.left:o,n?a:this.top],["L",n?e.chartWidth-this.right:o,n?a:e.chartHeight-this.bottom]],t)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(t){let e=this.horiz,i=this.left,r=this.top,n=this.len,o=this.options.title,a=e?i:r,s=this.opposite,l=this.offset,c=o.x,u=o.y,h=this.chart.renderer.fontMetrics(t),d=t?Math.max(t.getBBox(!1,0).height-h.h-1,0):0,p={low:a+(e?0:n),middle:a+n/2,high:a+(e?n:0)}[o.align],f=(e?r+this.height:i)+(e?1:-1)*(s?-1:1)*(this.axisTitleMargin||0)+[-d,d,h.f,-d][this.side],m={x:e?p+c:f+(s?this.width:0)+l+c,y:e?f+u-(s?this.height:0)+l:p+u};return S(this,"afterGetTitlePosition",{titlePosition:m}),m}renderMinorTick(t,e){let i=this.minorTicks;i[t]||(i[t]=new a(this,t,"minor")),e&&i[t].isNew&&i[t].render(null,!0),i[t].render(null,!1,1)}renderTick(t,e,i){let r=this.isLinked,n=this.ticks;(!r||t>=this.min&&t<=this.max||this.grid&&this.grid.isColumn)&&(n[t]||(n[t]=new a(this,t)),i&&n[t].isNew&&n[t].render(e,!0,-1),n[t].render(e))}render(){let t,e,i=this,r=i.chart,n=i.logarithmic,s=r.renderer,c=i.options,u=i.isLinked,h=i.tickPositions,d=i.axisTitle,p=i.ticks,f=i.minorTicks,m=i.alternateBands,g=c.stackLabels,y=c.alternateGridColor,v=c.crossing,x=i.tickmarkOffset,_=i.axisLine,b=i.showAxis,w=l(s.globalAnimation);if(i.labelEdge.length=0,i.overlap=!1,[p,f,m].forEach((function(t){I(t,(function(t){t.isActive=!1}))})),A(v)){let t=this.isXAxis?r.yAxis[0]:r.xAxis[0],e=[1,-1,-1,1][this.side];if(t){let r=t.toPixels(v,!0);i.horiz&&(r=t.len-r),i.offset=e*r}}if(i.hasData()||u){let s=i.chart.hasRendered&&i.old&&A(i.old.min);i.minorTickInterval&&!i.categories&&i.getMinorTickPositions().forEach((function(t){i.renderMinorTick(t,s)})),h.length&&(h.forEach((function(t,e){i.renderTick(t,e,s)})),x&&(0===i.min||i.single)&&(p[-1]||(p[-1]=new a(i,-1,null,!0)),p[-1].render(-1))),y&&h.forEach((function(a,s){e=void 0!==h[s+1]?h[s+1]+x:i.max-x,s%2==0&&a<i.max&&e<=i.max+(r.polar?-x:x)&&(m[a]||(m[a]=new o.PlotLineOrBand(i,{})),t=a+x,m[a].options={from:n?n.lin2log(t):t,to:n?n.lin2log(e):e,color:y,className:"highcharts-alternate-grid"},m[a].render(),m[a].isActive=!0)})),i._addedPlotLB||(i._addedPlotLB=!0,(c.plotLines||[]).concat(c.plotBands||[]).forEach((function(t){i.addPlotBandOrLine(t)})))}[p,f,m].forEach((function(t){let e=[],i=w.duration;I(t,(function(t,i){t.isActive||(t.render(i,!1,0),t.isActive=!1,e.push(i))})),O((function(){let i=e.length;for(;i--;)t[e[i]]&&!t[e[i]].isActive&&(t[e[i]].destroy(),delete t[e[i]])}),t!==m&&r.hasRendered&&i?i:0)})),_&&(_[_.isPlaced?"animate":"attr"]({d:this.getLinePath(_.strokeWidth())}),_.isPlaced=!0,_[b?"show":"hide"](b)),d&&b&&(d[d.isNew?"attr":"animate"](i.getTitlePosition(d)),d.isNew=!1),g&&g.enabled&&i.stacking&&i.stacking.renderStackTotals(),i.old={len:i.len,max:i.max,min:i.min,transA:i.transA,userMax:i.userMax,userMin:i.userMin},i.isDirty=!1,S(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(t){t.render()}))),this.series.forEach((function(t){t.isDirty=!0}))}getKeepProps(){return this.keepProps||F.keepProps}destroy(t){let e=this,i=e.plotLinesAndBands,r=this.eventOptions;if(S(this,"destroy",{keepEvents:t}),t||D(e),[e.ticks,e.minorTicks,e.alternateBands].forEach((function(t){x(t)})),i){let t=i.length;for(;t--;)i[t].destroy()}for(let n in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach((function(t){e[t]&&(e[t]=e[t].destroy())})),e.plotLinesAndBandsGroups)e.plotLinesAndBandsGroups[n]=e.plotLinesAndBandsGroups[n].destroy();I(e,(function(t,i){-1===e.getKeepProps().indexOf(i)&&delete e[i]})),this.eventOptions=r}drawCrosshair(t,e){let r,n,o,a,s=this.crosshair,l=z(s&&s.snap,!0),c=this.chart,u=this.cross;if(S(this,"drawCrosshair",{e:t,point:e}),t||(t=this.cross&&this.cross.e),s&&!1!==(v(e)||!l)){if(l?v(e)&&(n=z("colorAxis"!==this.coll?e.crosshairPos:null,this.isXAxis?e.plotX:this.len-e.plotY)):n=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),v(n)&&(a={value:e&&(this.isXAxis?e.x:z(e.stackY,e.y)),translatedValue:n},c.polar&&w(a,{isCrosshair:!0,chartX:t&&t.chartX,chartY:t&&t.chartY,point:e}),r=this.getPlotLinePath(a)||null),!v(r))return void this.hideCrosshair();o=this.categories&&!this.isRadial,u||(this.cross=u=c.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(o?"category ":"thin ")+(s.className||"")).attr({zIndex:z(s.zIndex,2)}).add(),!c.styledMode&&(u.attr({stroke:s.color||(o?i.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":z(s.width,1)}).css({"pointer-events":"none"}),s.dashStyle&&u.attr({dashstyle:s.dashStyle}))),u.show().attr({d:r}),o&&!s.width&&u.attr({"stroke-width":this.transA}),this.cross.e=t}else this.hideCrosshair();S(this,"afterDrawCrosshair",{e:t,point:e})}hideCrosshair(){this.cross&&this.cross.hide(),S(this,"afterHideCrosshair")}update(t,e){let i=this.chart;t=M(this.userOptions,t),this.destroy(!0),this.init(i,t),i.isDirtyBox=!0,z(e,!0)&&i.redraw()}remove(t){let e=this.chart,i=this.coll,r=this.series,n=r.length;for(;n--;)r[n]&&r[n].remove(!1);_(e.axes,this),_(e[i]||[],this),e.orderItems(i),this.destroy(),e.isDirtyBox=!0,z(t,!0)&&e.redraw()}setTitle(t,e){this.update({title:t},e)}setCategories(t,e){this.update({categories:t},e)}}return F.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],F})),i(e,"Core/Axis/DateTimeAxis.js",[e["Core/Utilities.js"]],(function(t){var e;let{addEvent:i,getMagnitude:r,normalizeTickInterval:n,timeUnits:o}=t;return function(t){function e(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function a(){"datetime"===this.options.type?this.dateTime||(this.dateTime=new s(this)):this.dateTime=void 0}t.compose=function(t){return t.keepProps.includes("dateTime")||(t.keepProps.push("dateTime"),t.prototype.getTimeTicks=e,i(t,"afterSetOptions",a)),t};class s{constructor(t){this.axis=t}normalizeTimeTickInterval(t,e){let i,a=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],s=a[a.length-1],l=o[s[0]],c=s[1];for(i=0;i<a.length&&(l=o[(s=a[i])[0]],c=s[1],!a[i+1]||!(t<=(l*c[c.length-1]+o[a[i+1][0]])/2));i++);return l===o.year&&t<5*l&&(c=[1,2,5]),{unitRange:l,count:n(t/l,c,"year"===s[0]?Math.max(r(t/l),1):1),unitName:s[0]}}getXDateFormat(t,e){let{axis:i}=this,r=i.chart.time;return i.closestPointRange?r.getDateFormat(i.closestPointRange,t,i.options.startOfWeek,e)||r.resolveDTLFormat(e.year).main:r.resolveDTLFormat(e.day).main}}t.Additions=s}(e||(e={})),e})),i(e,"Core/Axis/LogarithmicAxis.js",[e["Core/Utilities.js"]],(function(t){var e;let{addEvent:i,normalizeTickInterval:r,pick:n}=t;return function(t){function e(t){let e=t.userOptions,i=this.logarithmic;"logarithmic"!==e.type?this.logarithmic=void 0:i||(i=this.logarithmic=new a(this))}function o(){let t=this.logarithmic;t&&(this.lin2val=function(e){return t.lin2log(e)},this.val2lin=function(e){return t.log2lin(e)})}t.compose=function(t){return t.keepProps.includes("logarithmic")||(t.keepProps.push("logarithmic"),i(t,"init",e),i(t,"afterInit",o)),t};class a{constructor(t){this.axis=t}getLogTickPositions(t,e,i,o){let a=this.axis,s=a.len,l=a.options,c=[];if(o||(this.minorAutoInterval=void 0),t>=.5)t=Math.round(t),c=a.getLinearTickPositions(t,e,i);else if(t>=.08){let r,n,a,s,l,u,h;for(r=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],n=Math.floor(e);n<i+1&&!h;n++)for(a=0,s=r.length;a<s&&!h;a++)(l=this.log2lin(this.lin2log(n)*r[a]))>e&&(!o||u<=i)&&void 0!==u&&c.push(u),u>i&&(h=!0),u=l}else{let u=this.lin2log(e),h=this.lin2log(i),d=o?a.getMinorTickInterval():l.tickInterval,p=l.tickPixelInterval/(o?5:1),f=o?s/a.tickPositions.length:s;t=r(t=n("auto"===d?null:d,this.minorAutoInterval,(h-u)*p/(f||1))),c=a.getLinearTickPositions(t,u,h).map(this.log2lin),o||(this.minorAutoInterval=t/5)}return o||(a.tickInterval=t),c}lin2log(t){return Math.pow(10,t)}log2lin(t){return Math.log(t)/Math.LN10}}t.Additions=a}(e||(e={})),e})),i(e,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[e["Core/Utilities.js"]],(function(t){var e;let{erase:i,extend:r,isNumber:n}=t;return function(t){let e;function o(t){return this.addPlotBandOrLine(t,"plotBands")}function a(t,i){let r=this.userOptions,n=new e(this,t);if(this.visible&&(n=n.render()),n){if(this._addedPlotLB||(this._addedPlotLB=!0,(r.plotLines||[]).concat(r.plotBands||[]).forEach((t=>{this.addPlotBandOrLine(t)}))),i){let e=r[i]||[];e.push(t),r[i]=e}this.plotLinesAndBands.push(n)}return n}function s(t){return this.addPlotBandOrLine(t,"plotLines")}function l(t,e,i){i=i||this.options;let r,o,a=this.getPlotLinePath({value:e,force:!0,acrossPanes:i.acrossPanes}),s=[],l=this.horiz,c=!n(this.min)||!n(this.max)||t<this.min&&e<this.min||t>this.max&&e>this.max,u=this.getPlotLinePath({value:t,force:!0,acrossPanes:i.acrossPanes}),h=1;if(u&&a)for(c&&(o=u.toString()===a.toString(),h=0),r=0;r<u.length;r+=2){let t=u[r],e=u[r+1],i=a[r],n=a[r+1];("M"===t[0]||"L"===t[0])&&("M"===e[0]||"L"===e[0])&&("M"===i[0]||"L"===i[0])&&("M"===n[0]||"L"===n[0])&&(l&&i[1]===t[1]?(i[1]+=h,n[1]+=h):l||i[2]!==t[2]||(i[2]+=h,n[2]+=h),s.push(["M",t[1],t[2]],["L",e[1],e[2]],["L",n[1],n[2]],["L",i[1],i[2]],["Z"])),s.isFlat=o}return s}function c(t){this.removePlotBandOrLine(t)}function u(t){let e=this.plotLinesAndBands,r=this.options,n=this.userOptions;if(e){let o=e.length;for(;o--;)e[o].id===t&&e[o].destroy();[r.plotLines||[],n.plotLines||[],r.plotBands||[],n.plotBands||[]].forEach((function(e){for(o=e.length;o--;)(e[o]||{}).id===t&&i(e,e[o])}))}}function h(t){this.removePlotBandOrLine(t)}t.compose=function(t,i){let n=i.prototype;return n.addPlotBand||(e=t,r(n,{addPlotBand:o,addPlotLine:s,addPlotBandOrLine:a,getPlotBandPath:l,removePlotBand:c,removePlotLine:h,removePlotBandOrLine:u})),i}}(e||(e={})),e})),i(e,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[e["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],e["Core/Utilities.js"]],(function(t,e){let{arrayMax:i,arrayMin:r,defined:n,destroyObjectProperties:o,erase:a,fireEvent:s,merge:l,objectEach:c,pick:u}=e;class h{static compose(e){return t.compose(h,e)}constructor(t,e){this.axis=t,this.options=e,this.id=e.id}render(){var t,e,i;s(this,"render");let r,{axis:o,options:a}=this,{horiz:h,logarithmic:d}=o,{color:p,events:f,zIndex:m=0}=a,g={},y=o.chart.renderer,v=a.to,x=a.from,_=a.value,b=a.borderWidth,w=a.label,{label:S,svgElem:k}=this,C=[],T=n(x)&&n(v),A=n(_),P=!k,M={class:"highcharts-plot-"+(T?"band ":"line ")+(a.className||"")},E=T?"bands":"lines";if(!o.chart.styledMode&&(A?(M.stroke=p||"#999999",M["stroke-width"]=u(a.width,1),a.dashStyle&&(M.dashstyle=a.dashStyle)):T&&(M.fill=p||"#e6e9ff",b&&(M.stroke=a.borderColor,M["stroke-width"]=b))),g.zIndex=m,E+="-"+m,(r=o.plotLinesAndBandsGroups[E])||(o.plotLinesAndBandsGroups[E]=r=y.g("plot-"+E).attr(g).add()),k||(this.svgElem=k=y.path().attr(M).add(r)),n(_))C=o.getPlotLinePath({value:null!==(t=null===d||void 0===d?void 0:d.log2lin(_))&&void 0!==t?t:_,lineWidth:k.strokeWidth(),acrossPanes:a.acrossPanes});else{var I,z;if(!n(x)||!n(v))return;C=o.getPlotBandPath(null!==(I=null===d||void 0===d?void 0:d.log2lin(x))&&void 0!==I?I:x,null!==(z=null===d||void 0===d?void 0:d.log2lin(v))&&void 0!==z?z:v,a)}return!this.eventsAdded&&f&&(c(f,((t,e)=>{var i;null===(i=k)||void 0===i||i.on(e,(t=>{f[e].apply(this,[t])}))})),this.eventsAdded=!0),!P&&k.d||null===(e=C)||void 0===e||!e.length?k&&(C?(k.show(),k.animate({d:C})):k.d&&(k.hide(),S&&(this.label=S=S.destroy()))):k.attr({d:C}),w&&(n(w.text)||n(w.formatter))&&null!==(i=C)&&void 0!==i&&i.length&&o.width>0&&o.height>0&&!C.isFlat?(w=l({align:h&&T?"center":void 0,x:h?!T&&4:10,verticalAlign:!h&&T?"middle":void 0,y:h?T?16:10:T?6:-4,rotation:h&&!T?90:0},w),this.renderLabel(w,C,T,m)):S&&S.hide(),this}renderLabel(t,e,n,o){let a=this.axis,s=a.chart.renderer,c=this.label;c||(this.label=c=s.text(this.getLabelText(t),0,0,t.useHTML).attr({align:t.textAlign||t.align,rotation:t.rotation,class:"highcharts-plot-"+(n?"band":"line")+"-label "+(t.className||""),zIndex:o}),a.chart.styledMode||c.css(l({fontSize:"0.8em",textOverflow:"ellipsis"},t.style)),c.add());let u=e.xBounds||[e[0][1],e[1][1],n?e[2][1]:e[0][1]],h=e.yBounds||[e[0][2],e[1][2],n?e[2][2]:e[0][2]],d=r(u),p=r(h);if(c.align(t,!1,{x:d,y:p,width:i(u)-d,height:i(h)-p}),!c.alignValue||"left"===c.alignValue){let e=t.clip?a.width:a.chart.chartWidth;c.css({width:(90===c.rotation?a.height-(c.alignAttr.y-a.top):e-(c.alignAttr.x-a.left))+"px"})}c.show(!0)}getLabelText(t){return n(t.formatter)?t.formatter.call(this):t.text}destroy(){a(this.axis.plotLinesAndBands,this),delete this.axis,o(this)}}return h})),i(e,"Core/Tooltip.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Templating.js"],e["Core/Globals.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o){var a;let{animObject:s}=t,{format:l}=e,{composed:c,doc:u,isSafari:h}=i,{distribute:d}=r,{addEvent:p,clamp:f,css:m,discardElement:g,extend:y,fireEvent:v,isArray:x,isNumber:_,isString:b,merge:w,pick:S,pushUnique:k,splat:C,syncTimeout:T}=o;class A{constructor(t,e,i){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=t,this.init(t,e),this.pointer=i}bodyFormatter(t){return t.map((function(t){let e=t.series.tooltipOptions;return(e[(t.point.formatPrefix||"point")+"Formatter"]||t.point.tooltipFormatter).call(t.point,e[(t.point.formatPrefix||"point")+"Format"]||"")}))}cleanSplit(t){this.chart.series.forEach((function(e){let i=e&&e.tt;i&&(!i.isActive||t?e.tt=i.destroy():i.isActive=!1)}))}defaultFormatter(t){let e,i=this.points||C(this);return(e=(e=[t.tooltipFooterHeaderFormatter(i[0])]).concat(t.bodyFormatter(i))).push(t.tooltipFooterHeaderFormatter(i[0],!0)),e}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),g(this.container)),o.clearTimeout(this.hideTimer)}getAnchor(t,e){let i,{chart:r,pointer:n}=this,o=r.inverted,a=r.plotTop,s=r.plotLeft;if((t=C(t))[0].series&&t[0].series.yAxis&&!t[0].series.yAxis.options.reversedStacks&&(t=t.slice().reverse()),this.followPointer&&e)void 0===e.chartX&&(e=n.normalize(e)),i=[e.chartX-s,e.chartY-a];else if(t[0].tooltipPos)i=t[0].tooltipPos;else{let r=0,n=0;t.forEach((function(t){let e=t.pos(!0);e&&(r+=e[0],n+=e[1])})),r/=t.length,n/=t.length,this.shared&&t.length>1&&e&&(o?r=e.chartX:n=e.chartY),i=[r-s,n-a]}return i.map(Math.round)}getClassName(t,e,i){let r=this.options,n=t.series,o=n.options;return[r.className,"highcharts-label",i&&"highcharts-tooltip-header",e?"highcharts-tooltip-box":"highcharts-tooltip",!i&&"highcharts-color-"+S(t.colorIndex,n.colorIndex),o&&o.className].filter(b).join(" ")}getLabel(){let t=this,e=this.chart.styledMode,r=this.options,o=this.split&&this.allowShared,a=this.container,s=this.chart.renderer;if(this.label){let t=!this.label.hasClass("highcharts-label");(!o&&t||o&&!t)&&this.destroy()}if(!this.label){if(this.outside){let t=this.chart.options.chart.style,e=n.getRendererType();this.container=a=i.doc.createElement("div"),a.className="highcharts-tooltip-container",m(a,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(t&&t.zIndex||0)+3)}),this.renderer=s=new e(a,0,0,t,void 0,void 0,s.styledMode)}if(o?this.label=s.g("tooltip"):(this.label=s.label("",0,0,r.shape,void 0,void 0,r.useHTML,void 0,"tooltip").attr({padding:r.padding,r:r.borderRadius}),e||this.label.attr({fill:r.backgroundColor,"stroke-width":r.borderWidth||0}).css(r.style).css({pointerEvents:r.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),t.outside){let e=this.label;[e.xSetter,e.ySetter].forEach(((i,r)=>{e[r?"ySetter":"xSetter"]=n=>{i.call(e,t.distance),e[r?"y":"x"]=n,a&&(a.style[r?"top":"left"]="".concat(n,"px"))}}))}this.label.attr({zIndex:8}).shadow(r.shadow).add()}return a&&!a.parentElement&&i.doc.body.appendChild(a),this.label}getPlayingField(){let{body:t,documentElement:e}=u,{chart:i,distance:r,outside:n}=this;return{width:n?Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,e.clientWidth)-2*r:i.chartWidth,height:n?Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,e.clientHeight):i.chartHeight}}getPosition(t,e,i){var r;let n,{distance:o,chart:a,outside:s,pointer:l}=this,{inverted:c,plotLeft:u,plotTop:h,polar:d}=a,{plotX:p=0,plotY:f=0}=i,m={},g=c&&i.h||0,{height:y,width:v}=this.getPlayingField(),x=l.getChartPosition(),_=t=>t*x.scaleX,b=t=>t*x.scaleY,w=i=>{let r="x"===i;return[i,r?v:y,r?t:e].concat(s?[r?_(t):b(e),r?x.left-o+_(p+u):x.top-o+b(f+h),0,r?v:y]:[r?t:e,r?p+u:f+h,r?u:h,r?u+a.plotWidth:h+a.plotHeight])},k=w("y"),C=w("x"),T=!!i.negative;!d&&(null===(r=a.hoverSeries)||void 0===r||null===(r=r.yAxis)||void 0===r?void 0:r.reversed)&&(T=!T);let A=!this.followPointer&&S(i.ttBelow,!d&&!c===T),P=function(t,e,i,r,n,a,l){let c=s?"y"===t?b(o):_(o):o,u=(i-r)/2,h=r<n-o,d=n+o+r<e,p=n-c-i+u,f=n+c-u;if(A&&d)m[t]=f;else if(!A&&h)m[t]=p;else if(h)m[t]=Math.min(l-r,p-g<0?p:p-g);else{if(!d)return!1;m[t]=Math.max(a,f+g+i>e?f:f+g)}},M=function(t,e,i,r,n){if(n<o||n>e-o)return!1;m[t]=n<i/2?1:n>e-r/2?e-r-2:n-i/2},E=function(t){[k,C]=[C,k],n=t},I=()=>{!1!==P.apply(0,k)?!1!==M.apply(0,C)||n||(E(!0),I()):n?m.x=m.y=0:(E(!0),I())};return(c&&!d||this.len>1)&&E(),I(),m}hide(t){let e=this;o.clearTimeout(this.hideTimer),t=S(t,this.options.hideDelay),this.isHidden||(this.hideTimer=T((function(){let i=e.getLabel();e.getLabel().animate({opacity:0},{duration:t?150:t,complete:()=>{i.hide(),e.container&&e.container.remove()}}),e.isHidden=!0}),t))}init(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.isHidden=!0,this.split=e.split&&!t.inverted&&!t.polar,this.shared=e.shared||this.split,this.outside=S(e.outside,!(!t.scrollablePixelsX&&!t.scrollablePixelsY))}shouldStickOnContact(t){return!(this.followPointer||!this.options.stickOnContact||t&&!this.pointer.inClass(t.target,"highcharts-tooltip"))}move(t,e,i,r){let n=this,o=s(!n.isHidden&&n.options.animation),a={x:t,y:e};n.followPointer||(n.len||0)>1||(a.anchorX=i,a.anchorY=r),o.step=()=>n.drawTracker(),n.getLabel().animate(a,o)}refresh(t,e){let{chart:i,options:r,pointer:n,shared:a}=this,s=C(t),c=s[0],u=[],h=r.format,d=r.formatter||this.defaultFormatter,p=i.styledMode,f={};if(!r.enabled||!c.series)return;o.clearTimeout(this.hideTimer),this.allowShared=!(!x(t)&&t.series&&t.series.noSharedTooltip),this.followPointer=!this.split&&c.series.tooltipOptions.followPointer;let m=this.getAnchor(t,e),g=m[0],y=m[1];a&&this.allowShared?(n.applyInactiveState(s),s.forEach((function(t){t.setState("hover"),u.push(t.getLabelConfig())})),(f=c.getLabelConfig()).points=u):f=c.getLabelConfig(),this.len=u.length;let _=b(h)?l(h,f,i):d.call(f,this),w=c.series;if(this.distance=S(w.tooltipOptions.distance,16),!1===_)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(_,s);else{let t=g,o=y;if(e&&n.isDirectTouch&&(t=e.chartX-i.plotLeft,o=e.chartY-i.plotTop),!i.polar&&!1!==w.options.clip&&!s.some((e=>n.isDirectTouch||e.series.shouldShowTooltip(t,o))))return void this.hide();{let t=this.getLabel();(!r.style.width||p)&&t.css({width:(this.outside?this.getPlayingField():i.spacingBox).width+"px"}),t.attr({text:_&&_.join?_.join(""):_}),t.addClass(this.getClassName(c),!0),p||t.attr({stroke:r.borderColor||c.color||w.color||"#666666"}),this.updatePosition({plotX:g,plotY:y,negative:c.negative,ttBelow:c.ttBelow,h:m[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}v(this,"refresh")}renderSplit(t,e){var i;let r=this,{chart:n,chart:{chartWidth:o,chartHeight:a,plotHeight:s,plotLeft:l,plotTop:c,scrollablePixelsY:p=0,scrollablePixelsX:m,styledMode:g},distance:v,options:x,options:{positioner:_},pointer:w}=r,{scrollLeft:k=0,scrollTop:C=0}=(null===(i=n.scrollablePlotArea)||void 0===i?void 0:i.scrollingContainer)||{},T=r.outside&&"number"!=typeof m?u.documentElement.getBoundingClientRect():{left:k,right:k+o,top:C,bottom:C+a},A=r.getLabel(),P=this.renderer||n.renderer,M=!(!n.xAxis[0]||!n.xAxis[0].opposite),{left:E,top:I}=w.getChartPosition(),z=c+C,L=0,D=s-p;function R(t,e,i,n){let o,a,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return i?(o=M?0:D,a=f(t-n/2,T.left,T.right-n-(r.outside?E:0))):(o=e-z,a=f(a=s?t-n-v:t+v,s?a:T.left,T.right)),{x:a,y:o}}b(t)&&(t=[!1,t]);let O=t.slice(0,e.length+1).reduce((function(t,i,n){if(!1!==i&&""!==i){let o=e[n-1]||{isHeader:!0,plotX:e[0].plotX,plotY:s,series:{}},a=o.isHeader,u=a?r:o.series,h=u.tt=function(t,e,i){let n=t,{isHeader:o,series:a}=e;if(!n){var s;let t={padding:x.padding,r:x.borderRadius};g||(t.fill=x.backgroundColor,t["stroke-width"]=null!==(s=x.borderWidth)&&void 0!==s?s:1),n=P.label("",0,0,x[o?"headerShape":"shape"],void 0,void 0,x.useHTML).addClass(r.getClassName(e,!0,o)).attr(t).add(A)}return n.isActive=!0,n.attr({text:i}),g||n.css(x.style).attr({stroke:x.borderColor||e.color||a.color||"#333333"}),n}(u.tt,o,i.toString()),d=h.getBBox(),p=d.width+h.strokeWidth();a&&(L=d.height,D+=L,M&&(z-=L));let{anchorX:m,anchorY:y}=function(t){let e,i,{isHeader:r,plotX:n=0,plotY:o=0,series:a}=t;if(r)e=Math.max(l+n,l),i=c+s/2;else{let{xAxis:t,yAxis:r}=a;e=t.pos+f(n,-v,t.len+v),a.shouldShowTooltip(0,r.pos-c+o,{ignoreX:!0})&&(i=r.pos+o)}return{anchorX:e=f(e,T.left-v,T.right+v),anchorY:i}}(o);if("number"==typeof y){let e=d.height+1,i=_?_.call(r,p,e,o):R(m,y,a,p);t.push({align:_?0:void 0,anchorX:m,anchorY:y,boxWidth:p,point:o,rank:S(i.rank,a?1:0),size:e,target:i.y,tt:h,x:i.x})}else h.isActive=!1}return t}),[]);!_&&O.some((t=>{let{outside:e}=r,i=(e?E:0)+t.anchorX;return i<T.left&&i+t.boxWidth<T.right||i<E-T.left+t.boxWidth&&T.right-i>i}))&&(O=O.map((t=>{let{x:e,y:i}=R(t.anchorX,t.anchorY,t.point.isHeader,t.boxWidth,!1);return y(t,{target:i,x:e})}))),r.cleanSplit(),d(O,D);let B={left:E,right:E};O.forEach((function(t){let{x:e,boxWidth:i,isHeader:n}=t;!n&&(r.outside&&E+e<B.left&&(B.left=E+e),!n&&r.outside&&B.left+i>B.right&&(B.right=E+e))})),O.forEach((function(t){let{x:e,anchorX:i,anchorY:n,pos:o,point:{isHeader:a}}=t,s={visibility:void 0===o?"hidden":"inherit",x:e,y:(o||0)+z,anchorX:i,anchorY:n};if(r.outside&&e<i){let t=E-B.left;t>0&&(a||(s.x=e+t,s.anchorX=i+t),a&&(s.x=(B.right-B.left)/2,s.anchorX=i+t))}t.tt.attr(s)}));let{container:F,outside:j,renderer:N}=r;if(j&&F&&N){let{width:t,height:e,x:i,y:r}=A.getBBox();N.setSize(t+i,e+r,!1),F.style.left=B.left+"px",F.style.top=I+"px"}h&&A.attr({opacity:1===A.opacity?.999:1})}drawTracker(){if(!this.shouldStickOnContact())return void(this.tracker&&(this.tracker=this.tracker.destroy()));let t=this.chart,e=this.label,i=this.shared?t.hoverPoints:t.hoverPoint;if(!e||!i)return;let r={x:0,y:0,width:0,height:0},n=this.getAnchor(i),o=e.getBBox();n[0]+=t.plotLeft-(e.translateX||0),n[1]+=t.plotTop-(e.translateY||0),r.x=Math.min(0,n[0]),r.y=Math.min(0,n[1]),r.width=n[0]<0?Math.max(Math.abs(n[0]),o.width-n[0]):Math.max(Math.abs(n[0]),o.width),r.height=n[1]<0?Math.max(Math.abs(n[1]),o.height-Math.abs(n[1])):Math.max(Math.abs(n[1]),o.height),this.tracker?this.tracker.attr(r):(this.tracker=e.renderer.rect(r).addClass("highcharts-tracker").add(e),t.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(t){return t.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(t,e){let i=t.series,r=i.tooltipOptions,n=i.xAxis,o=n&&n.dateTime,a={isFooter:e,labelConfig:t},s=r.xDateFormat,c=r[e?"footerFormat":"headerFormat"];return v(this,"headerFormatter",a,(function(e){o&&!s&&_(t.key)&&(s=o.getXDateFormat(t.key,r.dateTimeLabelFormats)),o&&s&&(t.point&&t.point.tooltipDateKeys||["key"]).forEach((function(t){c=c.replace("{point."+t+"}","{point."+t+":"+s+"}")})),i.chart.styledMode&&(c=this.styledModeFormat(c)),e.text=l(c,{point:t,series:i},this.chart)})),a.text}update(t){this.destroy(),this.init(this.chart,w(!0,this.options,t))}updatePosition(t){let e,{chart:i,container:r,distance:n,options:o,pointer:a,renderer:s}=this,{height:l=0,width:c=0}=this.getLabel(),{left:u,top:h,scaleX:d,scaleY:p}=a.getChartPosition(),f=(o.positioner||this.getPosition).call(this,c,l,t),g=(t.plotX||0)+i.plotLeft,y=(t.plotY||0)+i.plotTop;s&&r&&(o.positioner&&(f.x+=u-n,f.y+=h-n),e=(o.borderWidth||0)+2*n+2,s.setSize(c+e,l+e,!1),(1!==d||1!==p)&&(m(r,{transform:"scale(".concat(d,", ").concat(p,")")}),g*=d,y*=p),g+=u-f.x,y+=h-f.y),this.move(Math.round(f.x),Math.round(f.y||0),g,y)}}return(a=A||(A={})).compose=function(t){k(c,"Core.Tooltip")&&p(t,"afterInit",(function(){let t=this.chart;t.options.tooltip&&(t.tooltip=new a(t,t.options.tooltip,this))}))},A})),i(e,"Core/Series/Point.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Animation/AnimationUtilities.js"],e["Core/Defaults.js"],e["Core/Templating.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n){let{animObject:o}=e,{defaultOptions:a}=i,{format:s}=r,{addEvent:l,crisp:c,erase:u,extend:h,fireEvent:d,getNestedProperty:p,isArray:f,isFunction:m,isNumber:g,isObject:y,merge:v,pick:x,syncTimeout:_,removeEvent:b,uniqueKey:w}=n;class S{animateBeforeDestroy(){let t=this,e={x:t.startXPos,opacity:0},i=t.getGraphicalProps();i.singular.forEach((function(i){t[i]=t[i].animate("dataLabel"===i?{x:t[i].startXPos,y:t[i].startYPos,opacity:0}:e)})),i.plural.forEach((function(e){t[e].forEach((function(e){e.element&&e.animate(h({x:t.startXPos},e.startYPos?{x:e.startXPos,y:e.startYPos}:{}))}))}))}applyOptions(t,e){let i=this.series,r=i.options.pointValKey||i.pointValKey;return h(this,t=S.prototype.optionsToObject.call(this,t)),this.options=this.options?h(this.options,t):t,t.group&&delete this.group,t.dataLabels&&delete this.dataLabels,r&&(this.y=S.prototype.getNestedProperty.call(this,r)),this.selected&&(this.state="select"),"name"in this&&void 0===e&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),void 0===this.x&&i?this.x=void 0===e?i.autoIncrement():e:g(t.x)&&i.options.relativeXValue&&(this.x=i.autoIncrement(t.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let t=this,e=t.series,i=e.chart,r=e.options.dataSorting,n=i.hoverPoints,a=o(t.series.chart.renderer.globalAnimation),s=()=>{for(let e in(t.graphic||t.graphics||t.dataLabel||t.dataLabels)&&(b(t),t.destroyElements()),t)delete t[e]};t.legendItem&&i.legend.destroyItem(t),n&&(t.setState(),u(n,t),n.length||(i.hoverPoints=null)),t===i.hoverPoint&&t.onMouseOut(),r&&r.enabled?(this.animateBeforeDestroy(),_(s,a.duration)):s(),i.pointCount--}this.destroyed=!0}destroyElements(t){let e=this,i=e.getGraphicalProps(t);i.singular.forEach((function(t){e[t]=e[t].destroy()})),i.plural.forEach((function(t){e[t].forEach((function(t){t&&t.element&&t.destroy()})),delete e[t]}))}firePointEvent(t,e,i){let r=this,n=this.series.options;r.manageEvent(t),"click"===t&&n.allowPointSelect&&(i=function(t){!r.destroyed&&r.select&&r.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),d(r,t,e,i)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(t){let e,i,r=this,n=[],o={singular:[],plural:[]};for((t=t||{graphic:1,dataLabel:1}).graphic&&n.push("graphic","connector"),t.dataLabel&&n.push("dataLabel","dataLabelPath","dataLabelUpper"),i=n.length;i--;)r[e=n[i]]&&o.singular.push(e);return["graphic","dataLabel"].forEach((function(e){let i=e+"s";t[e]&&r[i]&&o.plural.push(i)})),o}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(t){return t?0===t.indexOf("custom.")?p(t,this.options):this[t]:void 0}getZone(){let t,e=this.series,i=e.zones,r=e.zoneAxis||"y",n=0;for(t=i[0];this[r]>=t.value;)t=i[++n];return this.nonZonedColor||(this.nonZonedColor=this.color),t&&t.color&&!this.options.color?this.color=t.color:this.color=this.nonZonedColor,t}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(t,e,i){var r;this.formatPrefix="point",this.visible=!0,this.series=t,this.applyOptions(e,i),null!==(r=this.id)&&void 0!==r||(this.id=w()),this.resolveColor(),t.chart.pointCount++,d(this,"afterInit")}isValid(){return(g(this.x)||this.x instanceof Date)&&g(this.y)}optionsToObject(t){let e,i=this.series,r=i.options.keys,n=r||i.pointArrayMap||["y"],o=n.length,a={},s=0,l=0;if(g(t)||null===t)a[n[0]]=t;else if(f(t))for(!r&&t.length>o&&("string"==(e=typeof t[0])?a.name=t[0]:"number"===e&&(a.x=t[0]),s++);l<o;)r&&void 0===t[s]||(n[l].indexOf(".")>0?S.prototype.setNestedProperty(a,t[s],n[l]):a[n[l]]=t[s]),s++,l++;else"object"==typeof t&&(a=t,t.dataLabels&&(i.hasDataLabels=()=>!0),t.marker&&(i._hasPointMarkers=!0));return a}pos(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.plotY;if(!this.destroyed){let{plotX:i,series:r}=this,{chart:n,xAxis:o,yAxis:a}=r,s=0,l=0;if(g(i)&&g(e))return t&&(s=o?o.pos:n.plotLeft,l=a?a.pos:n.plotTop),n.inverted&&o&&a?[a.len-e+l,o.len-i+s]:[i+s,e+l]}}resolveColor(){let t,e,i,r=this.series,n=r.chart.options.chart,o=r.chart.styledMode,a=n.colorCount;delete this.nonZonedColor,r.options.colorByPoint?(o||(t=(e=r.options.colors||r.chart.options.colors)[r.colorCounter],a=e.length),i=r.colorCounter,r.colorCounter++,r.colorCounter===a&&(r.colorCounter=0)):(o||(t=r.color),i=r.colorIndex),this.colorIndex=x(this.options.colorIndex,i),this.color=x(this.options.color,t)}setNestedProperty(t,e,i){return i.split(".").reduce((function(t,i,r,n){let o=n.length-1===r;return t[i]=o?e:y(t[i],!0)?t[i]:{},t[i]}),t),t}shouldDraw(){return!this.isNull}tooltipFormatter(t){let e=this.series,i=e.tooltipOptions,r=x(i.valueDecimals,""),n=i.valuePrefix||"",o=i.valueSuffix||"";return e.chart.styledMode&&(t=e.chart.tooltip.styledModeFormat(t)),(e.pointArrayMap||["y"]).forEach((function(e){e="{point."+e,(n||o)&&(t=t.replace(RegExp(e+"}","g"),n+e+"}"+o)),t=t.replace(RegExp(e+"}","g"),e+":,."+r+"f}")})),s(t,{point:this,series:this.series},e.chart)}update(t,e,i,r){let n,o=this,a=o.series,s=o.graphic,l=a.chart,c=a.options;function u(){o.applyOptions(t);let r=s&&o.hasMockGraphic,u=null===o.y?!r:r;s&&u&&(o.graphic=s.destroy(),delete o.hasMockGraphic),y(t,!0)&&(s&&s.element&&t&&t.marker&&void 0!==t.marker.symbol&&(o.graphic=s.destroy()),null!==t&&void 0!==t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy())),n=o.index,a.updateParallelArrays(o,n),c.data[n]=y(c.data[n],!0)||y(t,!0)?o.options:x(t,c.data[n]),a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(i)}e=x(e,!0),!1===r?u():o.firePointEvent("update",{options:t},u)}remove(t,e){this.series.removePoint(this.series.data.indexOf(this),t,e)}select(t,e){let i=this,r=i.series,n=r.chart;t=x(t,!i.selected),this.selectedStaging=t,i.firePointEvent(t?"select":"unselect",{accumulate:e},(function(){i.selected=i.options.selected=t,r.options.data[r.data.indexOf(i)]=i.options,i.setState(t&&"select"),e||n.getSelectedPoints().forEach((function(t){let e=t.series;t.selected&&t!==i&&(t.selected=t.options.selected=!1,e.options.data[e.data.indexOf(t)]=t.options,t.setState(n.hoverPoints&&e.options.inactiveOtherPoints?"inactive":""),t.firePointEvent("unselect"))}))})),delete this.selectedStaging}onMouseOver(t){let{inverted:e,pointer:i}=this.series.chart;i&&(t=t?i.normalize(t):i.getChartCoordinatesFromPoint(this,e),i.runPointActions(t,this))}onMouseOut(){let t=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(t.hoverPoints||[]).forEach((function(t){t.setState()})),t.hoverPoints=t.hoverPoint=null}manageEvent(t){var e,i,r,n;let o=null===(e=v(this.series.options.point,this.options).events)||void 0===e?void 0:e[t];!m(o)||null!==(i=this.hcEvents)&&void 0!==i&&i[t]&&-1!==(null===(r=this.hcEvents)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.map((t=>t.fn)).indexOf(o))?this.hasImportedEvents&&!o&&(null===(n=this.hcEvents)||void 0===n?void 0:n[t])&&(b(this,t),delete this.hcEvents[t],Object.keys(this.hcEvents)||(this.hasImportedEvents=!1)):(l(this,t,o),this.hasImportedEvents=!0)}setState(e,i){var r;let n,o,s,l,c=this.series,u=this.state,p=c.options.states[e||"normal"]||{},f=a.plotOptions[c.type].marker&&c.options.marker,m=f&&!1===f.enabled,y=f&&f.states&&f.states[e||"normal"]||{},v=!1===y.enabled,_=this.marker||{},b=c.chart,w=f&&c.markerAttribs,S=c.halo,k=c.stateMarkerGraphic;if((e=e||"")===this.state&&!i||this.selected&&"select"!==e||!1===p.enabled||e&&(v||m&&!1===y.enabled)||e&&_.states&&_.states[e]&&!1===_.states[e].enabled)return;if(this.state=e,w&&(n=c.markerAttribs(this,e)),this.graphic&&!this.hasMockGraphic){if(u&&this.graphic.removeClass("highcharts-point-"+u),e&&this.graphic.addClass("highcharts-point-"+e),!b.styledMode){o=c.pointAttribs(this,e),s=x(b.options.chart.animation,p.animation);let t=o.opacity;c.options.inactiveOtherPoints&&g(t)&&(this.dataLabels||[]).forEach((function(e){e&&!e.hasClass("highcharts-data-label-hidden")&&(e.animate({opacity:t},s),e.connector&&e.connector.animate({opacity:t},s))})),this.graphic.animate(o,s)}n&&this.graphic.animate(n,x(b.options.chart.animation,y.animation,f.animation)),k&&k.hide()}else e&&y&&(l=_.symbol||c.symbol,k&&k.currentSymbol!==l&&(k=k.destroy()),n&&(k?k[i?"animate":"attr"]({x:n.x,y:n.y}):l&&(c.stateMarkerGraphic=k=b.renderer.symbol(l,n.x,n.y,n.width,n.height).add(c.markerGroup),k.currentSymbol=l)),!b.styledMode&&k&&"inactive"!==this.state&&k.attr(c.pointAttribs(this,e))),k&&(k[e&&this.isInside?"show":"hide"](),k.element.point=this,k.addClass(this.getClassName(),!0));let C=p.halo,T=this.graphic||k,A=T&&T.visibility||"inherit";C&&C.size&&T&&"hidden"!==A&&!this.isCluster?(S||(c.halo=S=b.renderer.path().add(T.parentGroup)),S.show()[i?"animate":"attr"]({d:this.haloPath(C.size)}),S.attr({class:"highcharts-halo highcharts-color-"+x(this.colorIndex,c.colorIndex)+(this.className?" "+this.className:""),visibility:A,zIndex:-1}),S.point=this,b.styledMode||S.attr(h({fill:this.color||c.color,"fill-opacity":C.opacity},t.filterUserAttributes(C.attributes||{})))):(null===(r=S)||void 0===r||null===(r=r.point)||void 0===r?void 0:r.haloPath)&&!S.point.destroyed&&S.animate({d:S.point.haloPath(0)},null,S.hide),d(this,"afterSetState",{state:e})}haloPath(t){let e=this.pos();return e?this.series.chart.renderer.symbols.circle(c(e[0],1)-t,e[1]-t,2*t,2*t):[]}}return S})),i(e,"Core/Pointer.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e,i){var r;let{parse:n}=t,{charts:o,composed:a,isTouchDevice:s}=e,{addEvent:l,attr:c,css:u,extend:h,find:d,fireEvent:p,isNumber:f,isObject:m,objectEach:g,offset:y,pick:v,pushUnique:x,splat:_}=i;class b{applyInactiveState(t){let e,i=[];(t||[]).forEach((function(t){e=t.series,i.push(e),e.linkedParent&&i.push(e.linkedParent),e.linkedSeries&&(i=i.concat(e.linkedSeries)),e.navigatorSeries&&i.push(e.navigatorSeries)})),this.chart.series.forEach((function(t){-1===i.indexOf(t)?t.setState("inactive",!0):t.options.inactiveOtherPoints&&t.setAllPointsToState("inactive")}))}destroy(){let t=this;this.eventsToUnbind.forEach((t=>t())),this.eventsToUnbind=[],!e.chartCount&&(b.unbindDocumentMouseUp&&(b.unbindDocumentMouseUp=b.unbindDocumentMouseUp()),b.unbindDocumentTouchEnd&&(b.unbindDocumentTouchEnd=b.unbindDocumentTouchEnd())),clearInterval(t.tooltipTimeout),g(t,(function(e,i){t[i]=void 0}))}getSelectionMarkerAttrs(t,e){let i={args:{chartX:t,chartY:e},attrs:{},shapeType:"rect"};return p(this,"getSelectionMarkerAttrs",i,(i=>{let r,{chart:n,zoomHor:o,zoomVert:a}=this,{mouseDownX:s=0,mouseDownY:l=0}=n,c=i.attrs;c.x=n.plotLeft,c.y=n.plotTop,c.width=o?1:n.plotWidth,c.height=a?1:n.plotHeight,o&&(r=t-s,c.width=Math.max(1,Math.abs(r)),c.x=(r>0?0:r)+s),a&&(r=e-l,c.height=Math.max(1,Math.abs(r)),c.y=(r>0?0:r)+l)})),i}drag(t){let e,{chart:i}=this,{mouseDownX:r=0,mouseDownY:o=0}=i,{panning:a,panKey:s,selectionMarkerFill:l}=i.options.chart,c=i.plotLeft,u=i.plotTop,h=i.plotWidth,d=i.plotHeight,p=m(a)?a.enabled:a,f=s&&t["".concat(s,"Key")],g=t.chartX,y=t.chartY,v=this.selectionMarker;if((!v||!v.touch)&&(g<c?g=c:g>c+h&&(g=c+h),y<u?y=u:y>u+d&&(y=u+d),this.hasDragged=Math.sqrt(Math.pow(r-g,2)+Math.pow(o-y,2)),this.hasDragged>10)){e=i.isInsidePlot(r-c,o-u,{visiblePlotOnly:!0});let{shapeType:s,attrs:h}=this.getSelectionMarkerAttrs(g,y);(i.hasCartesianSeries||i.mapView)&&this.hasZoom&&e&&!f&&!v&&(this.selectionMarker=v=i.renderer[s](),v.attr({class:"highcharts-selection-marker",zIndex:7}).add(),i.styledMode||v.attr({fill:l||n("#334eff").setOpacity(.25).get()})),v&&v.attr(h),e&&!v&&p&&i.pan(t,a)}}dragStart(t){let e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=t.chartX,e.mouseDownY=t.chartY}getSelectionBox(t){let e={args:{marker:t},result:t.getBBox()};return p(this,"getSelectionBox",e),e.result}drop(t){let e,{chart:i,selectionMarker:r}=this;for(let n of i.axes)n.isPanning&&(n.isPanning=!1,(n.options.startOnTick||n.options.endOnTick||n.series.some((t=>t.boosted)))&&(n.forceRedraw=!0,n.setExtremes(n.userMin,n.userMax,!1),e=!0));if(e&&i.redraw(),r&&t){if(this.hasDragged){let e=this.getSelectionBox(r);i.transform({axes:i.axes.filter((t=>t.zoomEnabled&&("xAxis"===t.coll&&this.zoomX||"yAxis"===t.coll&&this.zoomY))),selection:{originalEvent:t,xAxis:[],yAxis:[],...e},from:e})}f(i.index)&&(this.selectionMarker=r.destroy())}i&&f(i.index)&&(u(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(t,e,i){let r;return t.forEach((function(t){let n=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf("y"),o=t.searchPoint(i,n);m(o,!0)&&o.series&&(!m(r,!0)||function(t,i,r,n){let o=t.distX-i.distX,a=t.dist-i.dist,s=(null===(r=i.series.group)||void 0===r?void 0:r.zIndex)-(null===(n=t.series.group)||void 0===n?void 0:n.zIndex);return 0!==o&&e?o:0!==a?a:0!==s?s:t.series.index>i.series.index?-1:1}(r,o)>0)&&(r=o)})),r}getChartCoordinatesFromPoint(t,e){let{xAxis:i,yAxis:r}=t.series,n=t.shapeArgs;if(i&&r){var o,a;let s=null!==(o=null!==(a=t.clientX)&&void 0!==a?a:t.plotX)&&void 0!==o?o:0,l=t.plotY||0;return t.isNode&&n&&f(n.x)&&f(n.y)&&(s=n.x,l=n.y),e?{chartX:r.len+r.pos-l,chartY:i.len+i.pos-s}:{chartX:s+i.pos,chartY:l+r.pos}}if(n&&n.x&&n.y)return{chartX:n.x,chartY:n.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:t}=this.chart,e=y(t);this.chartPosition={left:e.left,top:e.top,scaleX:1,scaleY:1};let{offsetHeight:i,offsetWidth:r}=t;return r>2&&i>2&&(this.chartPosition.scaleX=e.width/r,this.chartPosition.scaleY=e.height/i),this.chartPosition}getCoordinates(t){let e={xAxis:[],yAxis:[]};for(let i of this.chart.axes)e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])});return e}getHoverData(t,e,i,r,n,o){let a,s=[],l=function(t){return t.visible&&!(!n&&t.directTouch)&&v(t.options.enableMouseTracking,!0)},c=e,u={chartX:o?o.chartX:void 0,chartY:o?o.chartY:void 0,shared:n};p(this,"beforeGetHoverData",u),a=c&&!c.stickyTracking?[c]:i.filter((t=>t.stickyTracking&&(u.filter||l)(t)));let h=r&&t||!o?t:this.findNearestKDPoint(a,n,o);return c=h&&h.series,h&&(n&&!c.noSharedTooltip?(a=i.filter((function(t){return u.filter?u.filter(t):l(t)&&!t.noSharedTooltip}))).forEach((function(t){let e=d(t.points,(function(t){return t.x===h.x&&!t.isNull}));m(e)&&(t.boosted&&t.boost&&(e=t.boost.getPoint(e)),s.push(e))})):s.push(h)),p(this,"afterGetHoverData",u={hoverPoint:h}),{hoverPoint:u.hoverPoint,hoverSeries:c,hoverPoints:s}}getPointFromEvent(t){let e,i=t.target;for(;i&&!e;)e=i.point,i=i.parentNode;return e}onTrackerMouseOut(t){let e=this.chart,i=t.relatedTarget,r=e.hoverSeries;this.isDirectTouch=!1,!r||!i||r.stickyTracking||this.inClass(i,"highcharts-tooltip")||this.inClass(i,"highcharts-series-"+r.index)&&this.inClass(i,"highcharts-tracker")||r.onMouseOut()}inClass(t,e){let i,r=t;for(;r;){if(i=c(r,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}r=r.parentElement}}constructor(t,e){var i;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=e,this.chart=t,this.runChartClick=!(null===(i=e.chart.events)||void 0===i||!i.click),this.pinchDown=[],this.setDOMEvents(),p(this,"afterInit")}normalize(t,e){let i=t.touches,r=i?i.length?i.item(0):v(i.changedTouches,t.changedTouches)[0]:t;e||(e=this.getChartPosition());let n=r.pageX-e.left,o=r.pageY-e.top;return h(t,{chartX:Math.round(n/=e.scaleX),chartY:Math.round(o/=e.scaleY)})}onContainerClick(t){let e=this.chart,i=e.hoverPoint,r=this.normalize(t),n=e.plotLeft,o=e.plotTop;!e.cancelClick&&(i&&this.inClass(r.target,"highcharts-tracker")?(p(i.series,"click",h(r,{point:i})),e.hoverPoint&&i.firePointEvent("click",r)):(h(r,this.getCoordinates(r)),e.isInsidePlot(r.chartX-n,r.chartY-o,{visiblePlotOnly:!0})&&p(e,"click",r)))}onContainerMouseDown(t){var i,r;let n=1==(1&(t.buttons||t.button));t=this.normalize(t),e.isFirefox&&0!==t.button&&this.onContainerMouseMove(t),(void 0===t.button||n)&&(this.zoomOption(t),n&&null!==(i=(r=t).preventDefault)&&void 0!==i&&i.call(r),this.dragStart(t))}onContainerMouseLeave(t){let{pointer:e}=o[v(b.hoverChartIndex,-1)]||{};t=this.normalize(t),this.onContainerMouseMove(t),e&&t.relatedTarget&&!this.inClass(t.relatedTarget,"highcharts-tooltip")&&(e.reset(),e.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(t){let e=this.chart,i=e.tooltip,r=this.normalize(t);this.setHoverChartIndex(t),("mousedown"===e.mouseIsDown||this.touchSelect(r))&&this.drag(r),!e.openMenu&&(this.inClass(r.target,"highcharts-tracker")||e.isInsidePlot(r.chartX-e.plotLeft,r.chartY-e.plotTop,{visiblePlotOnly:!0}))&&(!i||!i.shouldStickOnContact(r))&&(this.inClass(r.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(r))}onDocumentTouchEnd(t){this.onDocumentMouseUp(t)}onContainerTouchMove(t){this.touchSelect(t)?this.onContainerMouseMove(t):this.touch(t)}onContainerTouchStart(t){this.touchSelect(t)?this.onContainerMouseDown(t):(this.zoomOption(t),this.touch(t,!0))}onDocumentMouseMove(t){let e=this.chart,i=e.tooltip,r=this.chartPosition,n=this.normalize(t,r);!r||e.isInsidePlot(n.chartX-e.plotLeft,n.chartY-e.plotTop,{visiblePlotOnly:!0})||i&&i.shouldStickOnContact(n)||this.inClass(n.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(t){var e;null===(e=o[v(b.hoverChartIndex,-1)])||void 0===e||null===(e=e.pointer)||void 0===e||e.drop(t)}pinch(t){let e=this,{chart:i,hasZoom:r,lastTouches:n}=e,o=[].map.call(t.touches||[],(t=>e.normalize(t))),a=o.length,s=1===a&&(e.inClass(t.target,"highcharts-tracker")&&i.runTrackerClick||e.runChartClick),l=i.tooltip,c=1===a&&v(null===l||void 0===l?void 0:l.options.followTouchMove,!0);a>1?e.initiated=!0:c&&(e.initiated=!1),r&&e.initiated&&!s&&!1!==t.cancelable&&t.preventDefault(),"touchstart"===t.type?(e.pinchDown=o,e.res=!0):c?this.runPointActions(e.normalize(t)):n&&(p(i,"touchpan",{originalEvent:t,touches:o},(()=>{let e=t=>{let e=t[0],i=t[1]||e;return{x:e.chartX,y:e.chartY,width:i.chartX-e.chartX,height:i.chartY-e.chartY}};i.transform({axes:i.axes.filter((t=>t.zoomEnabled&&(this.zoomHor&&t.horiz||this.zoomVert&&!t.horiz))),to:e(o),from:e(n),trigger:t.type})})),e.res&&(e.res=!1,this.reset(!1,0))),e.lastTouches=o}reset(t,e){let i=this.chart,r=i.hoverSeries,n=i.hoverPoint,o=i.hoverPoints,a=i.tooltip,s=a&&a.shared?o:n;t&&s&&_(s).forEach((function(e){e.series.isCartesian&&void 0===e.plotX&&(t=!1)})),t?a&&s&&_(s).length&&(a.refresh(s),a.shared&&o?o.forEach((function(t){t.setState(t.state,!0),t.series.isCartesian&&(t.series.xAxis.crosshair&&t.series.xAxis.drawCrosshair(null,t),t.series.yAxis.crosshair&&t.series.yAxis.drawCrosshair(null,t))})):n&&(n.setState(n.state,!0),i.axes.forEach((function(t){t.crosshair&&n.series[t.coll]===t&&t.drawCrosshair(null,n)})))):(n&&n.onMouseOut(),o&&o.forEach((function(t){t.setState()})),r&&r.onMouseOut(),a&&a.hide(e),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),i.axes.forEach((function(t){t.hideCrosshair()})),i.hoverPoints=i.hoverPoint=void 0)}runPointActions(t,e,i){let r=this.chart,n=r.series,a=r.tooltip&&r.tooltip.options.enabled?r.tooltip:void 0,s=!!a&&a.shared,c=e||r.hoverPoint,u=c&&c.series||r.hoverSeries,h=(!t||"touchmove"!==t.type)&&(!!e||u&&u.directTouch&&this.isDirectTouch),p=this.getHoverData(c,u,n,h,s,t);c=p.hoverPoint,u=p.hoverSeries;let f=p.hoverPoints,m=u&&u.tooltipOptions.followPointer&&!u.tooltipOptions.split,g=s&&u&&!u.noSharedTooltip;if(c&&(i||c!==r.hoverPoint||a&&a.isHidden)){if((r.hoverPoints||[]).forEach((function(t){-1===f.indexOf(t)&&t.setState()})),r.hoverSeries!==u&&u.onMouseOver(),this.applyInactiveState(f),(f||[]).forEach((function(t){t.setState("hover")})),r.hoverPoint&&r.hoverPoint.firePointEvent("mouseOut"),!c.series)return;r.hoverPoints=f,r.hoverPoint=c,c.firePointEvent("mouseOver",void 0,(()=>{a&&c&&a.refresh(g?f:c,t)}))}else if(m&&a&&!a.isHidden){let e=a.getAnchor([{}],t);r.isInsidePlot(e[0],e[1],{visiblePlotOnly:!0})&&a.updatePosition({plotX:e[0],plotY:e[1]})}this.unDocMouseMove||(this.unDocMouseMove=l(r.container.ownerDocument,"mousemove",(t=>{var e,i;return null===(e=o[null!==(i=b.hoverChartIndex)&&void 0!==i?i:-1])||void 0===e||null===(e=e.pointer)||void 0===e?void 0:e.onDocumentMouseMove(t)})),this.eventsToUnbind.push(this.unDocMouseMove)),r.axes.forEach((function(e){let i,n=v((e.crosshair||{}).snap,!0);!n||(i=r.hoverPoint)&&i.series[e.coll]===e||(i=d(f,(t=>t.series&&t.series[e.coll]===e))),i||!n?e.drawCrosshair(t,i):e.hideCrosshair()}))}setDOMEvents(){let t=this.chart.container,e=t.ownerDocument;t.onmousedown=this.onContainerMouseDown.bind(this),t.onmousemove=this.onContainerMouseMove.bind(this),t.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(l(t,"mouseenter",this.onContainerMouseEnter.bind(this)),l(t,"mouseleave",this.onContainerMouseLeave.bind(this))),b.unbindDocumentMouseUp||(b.unbindDocumentMouseUp=l(e,"mouseup",this.onDocumentMouseUp.bind(this)));let i=this.chart.renderTo.parentElement;for(;i&&"BODY"!==i.tagName;)this.eventsToUnbind.push(l(i,"scroll",(()=>{delete this.chartPosition}))),i=i.parentElement;this.eventsToUnbind.push(l(t,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),l(t,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),b.unbindDocumentTouchEnd||(b.unbindDocumentTouchEnd=l(e,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),l(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var t,e;if(!s)return;let i=this.pointerCaptureEventsToUnbind,r=this.chart,n=r.container,o=v(null===(t=r.options.tooltip)||void 0===t?void 0:t.followTouchMove,!0)&&r.series.some((t=>t.options.findNearestPointBy.indexOf("y")>-1));!this.hasPointerCapture&&o?(i.push(l(n,"pointerdown",(t=>{var e,i;(null===(e=t.target)||void 0===e?void 0:e.hasPointerCapture(t.pointerId))&&(null===(i=t.target)||void 0===i||i.releasePointerCapture(t.pointerId))})),l(n,"pointermove",(t=>{var e;null===(e=r.pointer)||void 0===e||null===(e=e.getPointFromEvent(t))||void 0===e||e.onMouseOver(t)}))),r.styledMode||u(n,{"touch-action":"none"}),n.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!o&&(i.forEach((t=>t())),i.length=0,r.styledMode||u(n,{"touch-action":v(null===(e=r.options.chart.style)||void 0===e?void 0:e["touch-action"],"manipulation")}),n.className=n.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(t){var i;let r=this.chart,n=e.charts[v(b.hoverChartIndex,-1)];n&&n!==r&&null!==(i=n.pointer)&&void 0!==i&&i.onContainerMouseLeave(t||{relatedTarget:r.container}),n&&n.mouseIsDown||(b.hoverChartIndex=r.index)}touch(t,e){let i,{chart:r,pinchDown:n=[]}=this;this.setHoverChartIndex(),1===t.touches.length?(t=this.normalize(t),r.isInsidePlot(t.chartX-r.plotLeft,t.chartY-r.plotTop,{visiblePlotOnly:!0})&&!r.openMenu?(e&&this.runPointActions(t),"touchmove"===t.type&&(i=!!n[0]&&Math.pow(n[0].chartX-t.chartX,2)+Math.pow(n[0].chartY-t.chartY,2)>=16),v(i,!0)&&this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)}touchSelect(t){return!(!this.chart.zooming.singleTouch||!t.touches||1!==t.touches.length)}zoomOption(t){let e,i,r=this.chart,n=r.inverted,o=r.zooming.type||"";/touch/.test(t.type)&&(o=v(r.zooming.pinchType,o)),this.zoomX=e=/x/.test(o),this.zoomY=i=/y/.test(o),this.zoomHor=e&&!n||i&&n,this.zoomVert=i&&!n||e&&n,this.hasZoom=e||i}}return(r=b||(b={})).compose=function(t){x(a,"Core.Pointer")&&l(t,"beforeRender",(function(){this.pointer=new r(this,this.options)}))},b})),i(e,"Core/Legend/Legend.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Templating.js"],e["Core/Globals.js"],e["Core/Series/Point.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o){var a;let{animObject:s,setAnimation:l}=t,{format:c}=e,{composed:u,marginNames:h}=i,{distribute:d}=n,{addEvent:p,createElement:f,css:m,defined:g,discardElement:y,find:v,fireEvent:x,isNumber:_,merge:b,pick:w,pushUnique:S,relativeLength:k,stableSort:C,syncTimeout:T}=o;class A{constructor(t,e){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=t,this.setOptions(e),e.enabled&&(this.render(),p(this.chart,"endResize",(function(){this.legend.positionCheckboxes()}))),p(this.chart,"render",(()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())}))}setOptions(t){let e=w(t.padding,8);this.options=t,this.chart.styledMode||(this.itemStyle=t.itemStyle,this.itemHiddenStyle=b(this.itemStyle,t.itemHiddenStyle)),this.itemMarginTop=t.itemMarginTop,this.itemMarginBottom=t.itemMarginBottom,this.padding=e,this.initialItemY=e-5,this.symbolWidth=w(t.symbolWidth,16),this.pages=[],this.proximate="proximate"===t.layout&&!this.chart.inverted,this.baseline=void 0}update(t,e){let i=this.chart;this.setOptions(b(!0,this.options,t)),this.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,w(e,!0)&&i.redraw(),x(this,"afterUpdate",{redraw:e})}colorizeItem(t,e){let{area:i,group:r,label:n,line:o,symbol:a}=t.legendItem||{};if(null!==r&&void 0!==r&&r[e?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:r={}}=this,s=r.color,{fillColor:l,fillOpacity:c,lineColor:u,marker:h}=t.options,d=t=>(!e&&(t.fill&&(t.fill=s),t.stroke&&(t.stroke=s)),t);null!==n&&void 0!==n&&n.css(b(e?this.itemStyle:r)),null!==o&&void 0!==o&&o.attr(d({stroke:u||t.color})),a&&a.attr(d(h&&a.isMarker?t.pointAttribs():{fill:t.color})),null===i||void 0===i||i.attr(d({fill:l||t.color,"fill-opacity":l?1:null!==c&&void 0!==c?c:.75}))}x(this,"afterColorizeItem",{item:t,visible:e})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(t){let{group:e,x:i=0,y:r=0}=t.legendItem||{},n=this.options,o=n.symbolPadding,a=!n.rtl,s=t.checkbox;if(e&&e.element){let n={translateX:a?i:this.legendWidth-i-2*o-4,translateY:r};e[g(e.translateY)?"animate":"attr"](n,void 0,(()=>{x(this,"afterPositionItem",{item:t})}))}s&&(s.x=i,s.y=r)}destroyItem(t){let e=t.checkbox,i=t.legendItem||{};for(let r of["group","label","line","symbol"])i[r]&&(i[r]=i[r].destroy());e&&y(e),t.legendItem=void 0}destroy(){for(let t of this.getAllItems())this.destroyItem(t);for(let t of["clipRect","up","down","pager","nav","box","title","group"])this[t]&&(this[t]=this[t].destroy());this.display=null}positionCheckboxes(){let t,e=this.group&&this.group.alignAttr,i=this.clipHeight||this.legendHeight,r=this.titleHeight;e&&(t=e.translateY,this.allItems.forEach((function(n){let o,a=n.checkbox;a&&(o=t+r+a.y+(this.scrollOffset||0)+3,m(a,{left:e.translateX+n.checkboxOffset+a.x-20+"px",top:o+"px",display:this.proximate||o>t-6&&o<t+i-6?"":"none"}))}),this))}renderTitle(){let t,e=this.options,i=this.padding,r=e.title,n=0;r.text&&(this.title||(this.title=this.chart.renderer.label(r.text,i-3,i-4,void 0,void 0,void 0,e.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(r.style),this.title.add(this.group)),r.width||this.title.css({width:this.maxLegendWidth+"px"}),n=(t=this.title.getBBox()).height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n}setText(t){let e=this.options;t.legendItem.label.attr({text:e.labelFormat?c(e.labelFormat,t,this.chart):e.labelFormatter.call(t)})}renderItem(t){let e=t.legendItem=t.legendItem||{},i=this.chart,r=i.renderer,n=this.options,o="horizontal"===n.layout,a=this.symbolWidth,s=n.symbolPadding||0,l=this.itemStyle,c=this.itemHiddenStyle,u=o?w(n.itemDistance,20):0,h=!n.rtl,d=!t.series,p=!d&&t.series.drawLegendSymbol?t.series:t,f=p.options,m=!!this.createCheckboxForItem&&f&&f.showCheckbox,g=n.useHTML,y=t.options.className,v=e.label,x=a+s+u+(m?20:0);!v&&(e.group=r.g("legend-item").addClass("highcharts-"+p.type+"-series highcharts-color-"+t.colorIndex+(y?" "+y:"")+(d?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.label=v=r.text("",h?a+s:-s,this.baseline||0,g),i.styledMode||v.css(b(t.visible?l:c)),v.attr({align:h?"left":"right",zIndex:2}).add(e.group),!this.baseline&&(this.fontMetrics=r.fontMetrics(v),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,v.attr("y",this.baseline),this.symbolHeight=w(n.symbolHeight,this.fontMetrics.f),n.squareSymbol&&(this.symbolWidth=w(n.symbolWidth,Math.max(this.symbolHeight,16)),x=this.symbolWidth+s+u+(m?20:0),h&&v.attr("x",this.symbolWidth+s))),p.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,v,g)),m&&!t.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(t),this.colorizeItem(t,t.visible),(i.styledMode||!l.width)&&v.css({width:(n.itemWidth||this.widthOption||i.spacingBox.width)-x+"px"}),this.setText(t);let _=v.getBBox(),S=this.fontMetrics&&this.fontMetrics.h||0;t.itemWidth=t.checkboxOffset=n.itemWidth||e.labelWidth||_.width+x,this.maxItemWidth=Math.max(this.maxItemWidth,t.itemWidth),this.totalItemWidth+=t.itemWidth,this.itemHeight=t.itemHeight=Math.round(e.labelHeight||(_.height>1.5*S?_.height:S))}layoutItem(t){let e=this.options,i=this.padding,r="horizontal"===e.layout,n=t.itemHeight,o=this.itemMarginBottom,a=this.itemMarginTop,s=r?w(e.itemDistance,20):0,l=this.maxLegendWidth,c=e.alignColumns&&this.totalItemWidth>l?this.maxItemWidth:t.itemWidth,u=t.legendItem||{};r&&this.itemX-i+c>l&&(this.itemX=i,this.lastLineHeight&&(this.itemY+=a+this.lastLineHeight+o),this.lastLineHeight=0),this.lastItemY=a+this.itemY+o,this.lastLineHeight=Math.max(n,this.lastLineHeight),u.x=this.itemX,u.y=this.itemY,r?this.itemX+=c:(this.itemY+=a+n+o,this.lastLineHeight=n),this.offsetWidth=this.widthOption||Math.max((r?this.itemX-i-(t.checkbox?0:s):c)+i,this.offsetWidth)}getAllItems(){let t=[];return this.chart.series.forEach((function(e){let i=e&&e.options;e&&w(i.showInLegend,!g(i.linkedTo)&&void 0,!0)&&(t=t.concat((e.legendItem||{}).labels||("point"===i.legendType?e.data:e)))})),x(this,"afterGetAllItems",{allItems:t}),t}getAlignment(){let t=this.options;return this.proximate?t.align.charAt(0)+"tv":t.floating?"":t.align.charAt(0)+t.verticalAlign.charAt(0)+t.layout.charAt(0)}adjustMargins(t,e){let i=this.chart,r=this.options,n=this.getAlignment();n&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((function(o,a){o.test(n)&&!g(t[a])&&(i[h[a]]=Math.max(i[h[a]],i.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*r[a%2?"x":"y"]+w(r.margin,12)+e[a]+(i.titleOffset[a]||0)))}))}proximatePositions(){let t,e=this.chart,i=[],r="left"===this.options.align;for(let n of(this.allItems.forEach((function(t){let n,o,a,s,l=r;t.yAxis&&(t.xAxis.options.reversed&&(l=!l),t.points&&(n=v(l?t.points:t.points.slice(0).reverse(),(function(t){return _(t.plotY)}))),o=this.itemMarginTop+t.legendItem.label.getBBox().height+this.itemMarginBottom,s=t.yAxis.top-e.plotTop,a=t.visible?(n?n.plotY:t.yAxis.height)+(s-.3*o):s+t.yAxis.height,i.push({target:a,size:o,item:t}))}),this),d(i,e.plotHeight)))t=n.item.legendItem||{},_(n.pos)&&(t.y=e.plotTop-e.spacing[0]+n.pos)}render(){let t,e,i,r,n=this.chart,o=n.renderer,a=this.options,s=this.padding,l=this.getAllItems(),c=this.group,u=this.box;this.itemX=s,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=k(a.width,n.spacingBox.width-s),r=n.spacingBox.width-2*s-a.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(r/=2),this.maxLegendWidth=this.widthOption||r,c||(this.group=c=o.g("legend").addClass(a.className||"").attr({zIndex:7}).add(),this.contentGroup=o.g().attr({zIndex:1}).add(c),this.scrollGroup=o.g().add(this.contentGroup)),this.renderTitle(),C(l,((t,e)=>(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0))),a.reversed&&l.reverse(),this.allItems=l,this.display=t=!!l.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,l.forEach(this.renderItem,this),l.forEach(this.layoutItem,this),e=(this.widthOption||this.offsetWidth)+s,i=this.lastItemY+this.lastLineHeight+this.titleHeight,i=this.handleOverflow(i)+s,u||(this.box=u=o.rect().addClass("highcharts-legend-box").attr({r:a.borderRadius}).add(c)),n.styledMode||u.attr({stroke:a.borderColor,"stroke-width":a.borderWidth||0,fill:a.backgroundColor||"none"}).shadow(a.shadow),e>0&&i>0&&u[u.placed?"animate":"attr"](u.crisp.call({},{x:0,y:0,width:e,height:i},u.strokeWidth())),c[t?"show":"hide"](),n.styledMode&&"none"===c.getStyle("display")&&(e=i=0),this.legendWidth=e,this.legendHeight=i,t&&this.align(),this.proximate||this.positionItems(),x(this,"afterRender")}align(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.spacingBox,e=this.chart,i=this.options,r=t.y;/(lth|ct|rth)/.test(this.getAlignment())&&e.titleOffset[0]>0?r+=e.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&e.titleOffset[2]>0&&(r-=e.titleOffset[2]),r!==t.y&&(t=b(t,{y:r})),e.hasRendered||(this.group.placed=!1),this.group.align(b(i,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":i.verticalAlign}),!0,t)}handleOverflow(t){let e,i,r,n=this,o=this.chart,a=o.renderer,s=this.options,l=s.y,c="top"===s.verticalAlign,u=this.padding,h=s.maxHeight,d=s.navigation,p=w(d.animation,!0),f=d.arrowSize||12,m=this.pages,g=this.allItems,y=function(t){"number"==typeof t?b.attr({height:t}):b&&(n.clipRect=b.destroy(),n.contentGroup.clip()),n.contentGroup.div&&(n.contentGroup.div.style.clip=t?"rect("+u+"px,9999px,"+(u+t)+"px,0)":"auto")},v=function(t){return n[t]=a.circle(0,0,1.3*f).translate(f/2,f/2).add(_),o.styledMode||n[t].attr("fill","rgba(0,0,0,0.0001)"),n[t]},x=o.spacingBox.height+(c?-l:l)-u,_=this.nav,b=this.clipRect;return"horizontal"!==s.layout||"middle"===s.verticalAlign||s.floating||(x/=2),h&&(x=Math.min(x,h)),m.length=0,t&&x>0&&t>x&&!1!==d.enabled?(this.clipHeight=e=Math.max(x-20-this.titleHeight-u,0),this.currentPage=w(this.currentPage,1),this.fullHeight=t,g.forEach(((t,n)=>{let o=(r=t.legendItem||{}).y||0,a=Math.round(r.label.getBBox().height),s=m.length;(!s||o-m[s-1]>e&&(i||o)!==m[s-1])&&(m.push(i||o),s++),r.pageIx=s-1,i&&((g[n-1].legendItem||{}).pageIx=s-1),n===g.length-1&&o+a-m[s-1]>e&&o>m[s-1]&&(m.push(o),r.pageIx=s),o!==i&&(i=o)})),b||(b=n.clipRect=a.clipRect(0,u-2,9999,0),n.contentGroup.clip(b)),y(e),_||(this.nav=_=a.g().attr({zIndex:1}).add(this.group),this.up=a.symbol("triangle",0,0,f,f).add(_),v("upTracker").on("click",(function(){n.scroll(-1,p)})),this.pager=a.text("",15,10).addClass("highcharts-legend-navigation"),!o.styledMode&&d.style&&this.pager.css(d.style),this.pager.add(_),this.down=a.symbol("triangle-down",0,0,f,f).add(_),v("downTracker").on("click",(function(){n.scroll(1,p)}))),n.scroll(0),t=x):_&&(y(),this.nav=_.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t}scroll(t,e){let i=this.chart,r=this.pages,n=r.length,o=this.clipHeight,a=this.options.navigation,c=this.pager,u=this.padding,h=this.currentPage+t;h>n&&(h=n),h>0&&(void 0!==e&&l(e,i),this.nav.attr({translateX:u,translateY:o+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach((function(t){t.attr({class:1===h?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),c.attr({text:h+"/"+n}),[this.down,this.downTracker].forEach((function(t){t.attr({x:18+this.pager.getBBox().width,class:h===n?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),i.styledMode||(this.up.attr({fill:1===h?a.inactiveColor:a.activeColor}),this.upTracker.css({cursor:1===h?"default":"pointer"}),this.down.attr({fill:h===n?a.inactiveColor:a.activeColor}),this.downTracker.css({cursor:h===n?"default":"pointer"})),this.scrollOffset=-r[h-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=h,this.positionCheckboxes(),T((()=>{x(this,"afterScroll",{currentPage:h})}),s(w(e,i.renderer.globalAnimation,!0)).duration))}setItemEvents(t,e,i){let n=this,o=t.legendItem||{},a=n.chart.renderer.boxWrapper,s=t instanceof r,l="highcharts-legend-"+(s?"point":"series")+"-active",c=n.chart.styledMode,u=i?[e,o.symbol]:[o.group],h=e=>{n.allItems.forEach((i=>{t!==i&&[i].concat(i.linkedSeries||[]).forEach((t=>{t.setState(e,!s)}))}))};for(let r of u)r&&r.on("mouseover",(function(){t.visible&&h("inactive"),t.setState("hover"),t.visible&&a.addClass(l),c||e.css(n.options.itemHoverStyle)})).on("mouseout",(function(){n.chart.styledMode||e.css(b(t.visible?n.itemStyle:n.itemHiddenStyle)),h(""),a.removeClass(l),t.setState()})).on("click",(function(e){let i="legendItemClick",r=function(){t.setVisible&&t.setVisible(),h(t.visible?"inactive":"")};a.removeClass(l),e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,r):x(t,i,e,r)}))}createCheckboxForItem(t){t.checkbox=f("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),p(t.checkbox,"click",(function(e){let i=e.target;x(t.series||t,"checkboxClick",{checked:i.checked,item:t},(function(){t.select()}))}))}}return(a=A||(A={})).compose=function(t){S(u,"Core.Legend")&&p(t,"beforeMargins",(function(){this.legend=new a(this,this.options.legend)}))},A})),i(e,"Core/Legend/LegendSymbol.js",[e["Core/Utilities.js"]],(function(t){var e;let{extend:i,merge:r,pick:n}=t;return function(t){function e(t,e,o){let a,s=this.legendItem=this.legendItem||{},{chart:l,options:c}=this,{baseline:u=0,symbolWidth:h,symbolHeight:d}=t,p=this.symbol||"circle",f=d/2,m=l.renderer,g=s.group,y=u-Math.round(d*(o?.4:.3)),v={},x=c.marker,_=0;if(l.styledMode||(v["stroke-width"]=Math.min(c.lineWidth||0,24),c.dashStyle?v.dashstyle=c.dashStyle:"square"===c.linecap||(v["stroke-linecap"]="round")),s.line=m.path().addClass("highcharts-graph").attr(v).add(g),o&&(s.area=m.path().addClass("highcharts-area").add(g)),v["stroke-linecap"]&&(_=Math.min(s.line.strokeWidth(),h)/2),h){var b;let t=[["M",_,y],["L",h-_,y]];s.line.attr({d:t}),null===(b=s.area)||void 0===b||b.attr({d:[...t,["L",h-_,u],["L",_,u]]})}if(x&&!1!==x.enabled&&h){let t=Math.min(n(x.radius,f),f);0===p.indexOf("url")&&(x=r(x,{width:d,height:d}),t=0),s.symbol=a=m.symbol(p,h/2-t,y-t,2*t,2*t,i({context:"legend"},x)).addClass("highcharts-point").add(g),a.isMarker=!0}}t.areaMarker=function(t,i){e.call(this,t,i,!0)},t.lineMarker=e,t.rectangle=function(t,e){let i=e.legendItem||{},r=t.options,o=t.symbolHeight,a=r.squareSymbol,s=a?o:t.symbolWidth;i.symbol=this.chart.renderer.rect(a?(t.symbolWidth-o)/2:0,t.baseline-o+1,s,o,n(t.options.symbolRadius,o/2)).addClass("highcharts-point").attr({zIndex:3}).add(i.group)}}(e||(e={})),e})),i(e,"Core/Series/SeriesDefaults.js",[],(function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:t}=this.series.chart;return"number"!=typeof this.y?"":t(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}})),i(e,"Core/Series/SeriesRegistry.js",[e["Core/Globals.js"],e["Core/Defaults.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],(function(t,e,i,r){var n;let{defaultOptions:o}=e,{extend:a,extendClass:s,merge:l}=r;return function(e){function r(t,r){let n=o.plotOptions||{},a=r.defaultOptions,s=r.prototype;return s.type=t,s.pointClass||(s.pointClass=i),!e.seriesTypes[t]&&(a&&(n[t]=a),e.seriesTypes[t]=r,!0)}e.seriesTypes=t.seriesTypes,e.registerSeriesType=r,e.seriesType=function(t,n,c,u,h){let d=o.plotOptions||{};if(n=n||"",d[t]=l(d[n],c),delete e.seriesTypes[t],r(t,s(e.seriesTypes[n]||function(){},u)),e.seriesTypes[t].prototype.type=t,h){class r extends i{}a(r.prototype,h),e.seriesTypes[t].prototype.pointClass=r}return e.seriesTypes[t]}}(n||(n={})),n})),i(e,"Core/Series/Series.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Defaults.js"],e["Core/Foundation.js"],e["Core/Globals.js"],e["Core/Legend/LegendSymbol.js"],e["Core/Series/Point.js"],e["Core/Series/SeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o,a,s,l,c){let{animObject:u,setAnimation:h}=t,{defaultOptions:d}=e,{registerEventOptions:p}=i,{svg:f,win:m}=r,{seriesTypes:g}=s,{arrayMax:y,arrayMin:v,clamp:x,correctFloat:_,crisp:b,defined:w,destroyObjectProperties:S,diffObjects:k,erase:C,error:T,extend:A,find:P,fireEvent:M,getClosestDistance:E,getNestedProperty:I,insertItem:z,isArray:L,isNumber:D,isString:R,merge:O,objectEach:B,pick:F,removeEvent:j,splat:N,syncTimeout:V}=c;class U{constructor(){this.zoneAxis="y"}init(t,e){let i;M(this,"init",{options:e});let r=this,n=t.series;this.eventsToUnbind=[],r.chart=t,r.options=r.setOptions(e);let o=r.options,a=!1!==o.visible;r.linkedSeries=[],r.bindAxes(),A(r,{name:o.name,state:"",visible:a,selected:!0===o.selected}),p(this,o);let s=o.events;(s&&s.click||o.point&&o.point.events&&o.point.events.click||o.allowPointSelect)&&(t.runTrackerClick=!0),r.getColor(),r.getSymbol(),r.parallelArrays.forEach((function(t){r[t+"Data"]||(r[t+"Data"]=[])})),r.isCartesian&&(t.hasCartesianSeries=!0),n.length&&(i=n[n.length-1]),r._i=F(i&&i._i,-1)+1,r.opacity=r.options.opacity,t.orderItems("series",z(this,n)),o.dataSorting&&o.dataSorting.enabled?r.setDataSortingOptions():r.points||r.data||r.setData(o.data,!1),M(this,"afterInit")}is(t){return g[t]&&this instanceof g[t]}bindAxes(){let t,e=this,i=e.options,r=e.chart;M(this,"bindAxes",null,(function(){(e.axisTypes||[]).forEach((function(n){(r[n]||[]).forEach((function(r){t=r.options,(F(i[n],0)===r.index||void 0!==i[n]&&i[n]===t.id)&&(z(e,r.series),e[n]=r,r.isDirty=!0)})),e[n]||e.optionalAxis===n||T(18,!0,r)}))})),M(this,"afterBindAxes")}updateParallelArrays(t,e,i){let r=t.series,n=D(e)?function(i){let n="y"===i&&r.toYData?r.toYData(t):t[i];r[i+"Data"][e]=n}:function(t){Array.prototype[e].apply(r[t+"Data"],i)};r.parallelArrays.forEach(n)}hasData(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(t,e){let i=t.marker,r=e.marker||{};return i&&(r.enabled&&!i.enabled||r.symbol!==i.symbol||r.height!==i.height||r.width!==i.width)}autoIncrement(t){let e,i,r=this.options,n=r.pointIntervalUnit,o=r.relativeXValue,a=this.chart.time,s=this.xIncrement;return s=F(s,r.pointStart,0),this.pointInterval=i=F(this.pointInterval,r.pointInterval,1),o&&D(t)&&(i*=t),n&&(e=new a.Date(s),"day"===n?a.set("Date",e,a.get("Date",e)+i):"month"===n?a.set("Month",e,a.get("Month",e)+i):"year"===n&&a.set("FullYear",e,a.get("FullYear",e)+i),i=e.getTime()-s),o&&D(t)?s+i:(this.xIncrement=s+i,s)}setDataSortingOptions(){let t=this.options;A(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),w(t.pointRange)||(t.pointRange=1)}setOptions(t){var e,i;let r,n=this.chart,o=n.options.plotOptions,a=n.userOptions||{},s=O(t),l=n.styledMode,c={plotOptions:o,userOptions:s};M(this,"setOptions",c);let u=c.plotOptions[this.type],h=a.plotOptions||{},p=h.series||{},f=d.plotOptions[this.type]||{},m=h[this.type]||{};this.userOptions=c.userOptions;let g=O(u,o.series,m,s);this.tooltipOptions=O(d.tooltip,null===(e=d.plotOptions.series)||void 0===e?void 0:e.tooltip,null===f||void 0===f?void 0:f.tooltip,n.userOptions.tooltip,null===(i=h.series)||void 0===i?void 0:i.tooltip,m.tooltip,s.tooltip),this.stickyTracking=F(s.stickyTracking,m.stickyTracking,p.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||g.stickyTracking),null===u.marker&&delete g.marker,this.zoneAxis=g.zoneAxis||"y";let y=this.zones=(g.zones||[]).map((t=>({...t})));return(g.negativeColor||g.negativeFillColor)&&!g.zones&&(r={value:g[this.zoneAxis+"Threshold"]||g.threshold||0,className:"highcharts-negative"},l||(r.color=g.negativeColor,r.fillColor=g.negativeFillColor),y.push(r)),y.length&&w(y[y.length-1].value)&&y.push(l?{}:{color:this.color,fillColor:this.fillColor}),M(this,"afterSetOptions",{options:g}),g}getName(){return F(this.options.name,"Series "+(this.index+1))}getCyclic(t,e,i){let r,n,o=this.chart,a="".concat(t,"Index"),s="".concat(t,"Counter"),l=(null===i||void 0===i?void 0:i.length)||o.options.chart.colorCount;!e&&(w(n=F("color"===t?this.options.colorIndex:void 0,this[a]))?r=n:(o.series.length||(o[s]=0),r=o[s]%l,o[s]+=1),i&&(e=i[r])),void 0!==r&&(this[a]=r),this[t]=e}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||d.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols)}findPointIndex(t,e){let i,r,n,a=t.id,s=t.x,l=this.points,c=this.options.dataSorting;if(a){let t=this.chart.get(a);t instanceof o&&(i=t)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let e=e=>!e.touched&&e.index===t.index;if(c&&c.matchByName?e=e=>!e.touched&&e.name===t.name:this.options.relativeXValue&&(e=e=>!e.touched&&e.options.x===t.x),!(i=P(l,e)))return}return i&&void 0!==(n=i&&i.index)&&(r=!0),void 0===n&&D(s)&&(n=this.xData.indexOf(s,e)),-1!==n&&void 0!==n&&this.cropped&&(n=n>=this.cropStart?n-this.cropStart:n),!r&&D(n)&&l[n]&&l[n].touched&&(n=void 0),n}updateData(t,e){let i,r,n,o,a=this.options,s=a.dataSorting,l=this.points,c=[],u=this.requireSorting,h=t.length===l.length,d=!0;if(this.xIncrement=null,t.forEach((function(t,e){let r,n=w(t)&&this.pointClass.prototype.optionsToObject.call({series:this},t)||{},d=n.x;n.id||D(d)?(-1===(r=this.findPointIndex(n,o))||void 0===r?c.push(t):l[r]&&t!==a.data[r]?(l[r].update(t,!1,null,!1),l[r].touched=!0,u&&(o=r+1)):l[r]&&(l[r].touched=!0),(!h||e!==r||s&&s.enabled||this.hasDerivedData)&&(i=!0)):c.push(t)}),this),i)for(r=l.length;r--;)(n=l[r])&&!n.touched&&n.remove&&n.remove(!1,e);else!h||s&&s.enabled?d=!1:(t.forEach((function(t,e){t===l[e].y||l[e].destroyed||l[e].update(t,!1,null,!1)})),c.length=0);return l.forEach((function(t){t&&(t.touched=!1)})),!!d&&(c.forEach((function(t){this.addPoint(t,!1,null,null,!1)}),this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=y(this.xData),this.autoIncrement()),!0)}setData(t){let e,i,r,n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,l=this,c=l.points,u=c&&c.length||0,h=l.options,d=l.chart,p=h.dataSorting,f=l.xAxis,m=h.turboThreshold,g=this.xData,y=this.yData,v=l.pointArrayMap,x=v&&v.length,_=h.keys,b=0,w=1,S=null;d.options.chart.allowMutatingData||(h.data&&delete l.options.data,l.userOptions.data&&delete l.userOptions.data,n=O(!0,t));let k=(t=n||t||[]).length;if(p&&p.enabled&&(t=this.sortData(t)),d.options.chart.allowMutatingData&&!1!==s&&k&&u&&!l.cropped&&!l.hasGroupedData&&l.visible&&!l.boosted&&(r=this.updateData(t,a)),!r){if(l.xIncrement=null,l.colorCounter=0,this.parallelArrays.forEach((function(t){l[t+"Data"].length=0})),m&&k>m)if(D(S=l.getFirstValidPoint(t)))for(e=0;e<k;e++)g[e]=this.autoIncrement(),y[e]=t[e];else if(L(S))if(x)if(S.length===x)for(e=0;e<k;e++)g[e]=this.autoIncrement(),y[e]=t[e];else for(e=0;e<k;e++)i=t[e],g[e]=i[0],y[e]=i.slice(1,x+1);else if(_&&(b=_.indexOf("x"),w=_.indexOf("y"),b=b>=0?b:0,w=w>=0?w:1),1===S.length&&(w=0),b===w)for(e=0;e<k;e++)g[e]=this.autoIncrement(),y[e]=t[e][w];else for(e=0;e<k;e++)i=t[e],g[e]=i[b],y[e]=i[w];else T(12,!1,d);else for(e=0;e<k;e++)i={series:l},l.pointClass.prototype.applyOptions.apply(i,[t[e]]),l.updateParallelArrays(i,e);for(y&&R(y[0])&&T(14,!0,d),l.data=[],l.options.data=l.userOptions.data=t,e=u;e--;){var C;null===(C=c[e])||void 0===C||C.destroy()}f&&(f.minRange=f.userMinRange),l.isDirty=d.isDirtyBox=!0,l.isDirtyData=!!c,a=!1}"point"===h.legendType&&(this.processData(),this.generatePoints()),o&&d.redraw(a)}sortData(t){let e=this,i=e.options.dataSorting.sortKey||"y",r=function(t,e){return w(e)&&t.pointClass.prototype.optionsToObject.call({series:t},e)||{}};return t.forEach((function(i,n){t[n]=r(e,i),t[n].index=n}),this),t.concat().sort(((t,e)=>{let r=I(i,t),n=I(i,e);return n<r?-1:n>r?1:0})).forEach((function(t,e){t.x=e}),this),e.linkedSeries&&e.linkedSeries.forEach((function(e){let i=e.options,n=i.data;i.dataSorting&&i.dataSorting.enabled||!n||(n.forEach((function(i,o){n[o]=r(e,i),t[o]&&(n[o].x=t[o].x,n[o].index=o)})),e.setData(n,!1))})),t}getProcessedData(t){let e,i,r,n,o,a=this,s=a.xAxis,l=a.options.cropThreshold,c=null===s||void 0===s?void 0:s.logarithmic,u=a.isCartesian,h=0,d=a.xData,p=a.yData,f=!1,m=d.length;s&&(n=(r=s.getExtremes()).min,o=r.max,f=!(!s.categories||s.names.length)),u&&a.sorted&&!t&&(!l||m>l||a.forceCrop)&&(d[m-1]<n||d[0]>o?(d=[],p=[]):a.yData&&(d[0]<n||d[m-1]>o)&&(d=(e=this.cropData(a.xData,a.yData,n,o)).xData,p=e.yData,h=e.start,i=!0));let g=E([c?d.map(c.log2lin):d],(()=>a.requireSorting&&!f&&T(15,!1,a.chart)));return{xData:d,yData:p,cropped:i,cropStart:h,closestPointRange:g}}processData(t){let e=this.xAxis;if(this.isCartesian&&!this.isDirty&&!e.isDirty&&!this.yAxis.isDirty&&!t)return!1;let i=this.getProcessedData();this.cropped=i.cropped,this.cropStart=i.cropStart,this.processedXData=i.xData,this.processedYData=i.yData,this.closestPointRange=this.basePointRange=i.closestPointRange,M(this,"afterProcessData")}cropData(t,e,i,r){let n,o,a=t.length,s=0,l=a;for(n=0;n<a;n++)if(t[n]>=i){s=Math.max(0,n-1);break}for(o=n;o<a;o++)if(t[o]>r){l=o+1;break}return{xData:t.slice(s,l),yData:e.slice(s,l),start:s,end:l}}generatePoints(){let t,e,i,r,n=this.options,o=this.processedData||n.data,a=this.processedXData,s=this.processedYData,l=this.pointClass,c=a.length,u=this.cropStart||0,h=this.hasGroupedData,d=n.keys,p=[],f=n.dataGrouping&&n.dataGrouping.groupAll?u:0,m=this.data;if(!m&&!h){let t=[];t.length=o.length,m=this.data=t}for(d&&h&&(this.options.keys=!1),r=0;r<c;r++)e=u+r,h?((i=new l(this,[a[r]].concat(N(s[r])))).dataGroup=this.groupMap[f+r],i.dataGroup.options&&(i.options=i.dataGroup.options,A(i,i.dataGroup.options),delete i.dataLabels)):(i=m[e])||void 0===o[e]||(m[e]=i=new l(this,o[e],a[r])),i&&(i.index=h?f+r:e,p[r]=i);if(this.options.keys=d,m&&(c!==(t=m.length)||h))for(r=0;r<t;r++)r!==u||h||(r+=c),m[r]&&(m[r].destroyElements(),m[r].plotX=void 0);this.data=m,this.points=p,M(this,"afterGeneratePoints")}getXExtremes(t){return{min:v(t),max:y(t)}}getExtremes(t,e){let i,r,n,o,a,s,l,c=this.xAxis,u=this.yAxis,h=[],d=this.requireSorting&&!this.is("column")?1:0,p=!!u&&u.positiveValuesOnly,f=e||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:m,processedYData:g}=this,x=0,_=0,b=0;if(this.cropped&&f){let t=this.getProcessedData(!0);m=t.xData,g=t.yData}let w=(t=t||this.stackedYData||g||[]).length,S=m||this.xData;for(c&&(x=(i=c.getExtremes()).min,_=i.max),s=0;s<w;s++)if(o=S[s],r=(D(a=t[s])||L(a))&&((D(a)?a>0:a.length)||!p),n=e||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!c||(S[s+d]||o)>=x&&(S[s-d]||o)<=_,r&&n)if(l=a.length)for(;l--;)D(a[l])&&(h[b++]=a[l]);else h[b++]=a;let k={activeYData:h,dataMin:v(h),dataMax:y(h)};return M(this,"afterGetExtremes",{dataExtremes:k}),k}applyExtremes(){let t=this.getExtremes();return this.dataMin=t.dataMin,this.dataMax=t.dataMax,t}getFirstValidPoint(t){let e=t.length,i=0,r=null;for(;null===r&&i<e;)r=t[i],i++;return r}translate(){this.processedXData||this.processData(),this.generatePoints();let t,e,i,r,n=this.options,o=n.stacking,a=this.xAxis,s=a.categories,l=this.enabledDataSorting,c=this.yAxis,u=this.points,h=u.length,d=this.pointPlacementToXValue(),p=!!d,f=n.threshold,m=n.startFromThreshold?f:0,g=Number.MAX_VALUE;function y(t){return x(t,-1e5,1e5)}for(t=0;t<h;t++){var v;let n,h,x,b=u[t],S=b.x,k=b.y,C=b.low,T=o&&(null===(v=c.stacking)||void 0===v?void 0:v.stacks[(this.negStacks&&k<(m?0:f)?"-":"")+this.stackKey]);e=a.translate(S,!1,!1,!1,!0,d),b.plotX=D(e)?_(y(e)):void 0,o&&this.visible&&T&&T[S]&&(r=this.getStackIndicator(r,S,this.index),!b.isNull&&r.key&&(x=(h=T[S]).points[r.key]),h&&L(x)&&(C=x[0],k=x[1],C===m&&r.key===T[S].base&&(C=F(D(f)?f:c.min)),c.positiveValuesOnly&&w(C)&&C<=0&&(C=void 0),b.total=b.stackTotal=F(h.total),b.percentage=w(b.y)&&h.total?b.y/h.total*100:void 0,b.stackY=k,this.irregularWidths||h.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),b.yBottom=w(C)?y(c.translate(C,!1,!0,!1,!0)):void 0,this.dataModify&&(k=this.dataModify.modifyValue(k,t)),D(k)&&void 0!==b.plotX&&(n=D(n=c.translate(k,!1,!0,!1,!0))?y(n):void 0),b.plotY=n,b.isInside=this.isPointInside(b),b.clientX=p?_(a.translate(S,!1,!1,!1,!0,d)):e,b.negative=(b.y||0)<(f||0),b.category=F(s&&s[b.x],b.x),b.isNull||!1===b.visible||(void 0!==i&&(g=Math.min(g,Math.abs(e-i))),i=e),b.zone=this.zones.length?b.getZone():void 0,!b.graphic&&this.group&&l&&(b.isNew=!0)}this.closestPointRangePx=g,M(this,"afterTranslate")}getValidPoints(t,e,i){let r=this.chart;return(t||this.points||[]).filter((function(t){let{plotX:n,plotY:o}=t;return!(!(i||!t.isNull&&D(o))||e&&!r.isInsidePlot(n,o,{inverted:r.inverted}))&&!1!==t.visible}))}getClipBox(){let{chart:t,xAxis:e,yAxis:i}=this,{x:r,y:n,width:o,height:a}=O(t.clipBox);return e&&e.len!==t.plotSizeX&&(o=e.len),i&&i.len!==t.plotSizeY&&(a=i.len),t.inverted&&!this.invertible&&([o,a]=[a,o]),{x:r,y:n,width:o,height:a}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:t,group:e,markerGroup:i}=this,r=t.sharedClips,n=t.renderer,o=this.getClipBox(),a=this.getSharedClipKey(),s=r[a];s?s.animate(o):r[a]=s=n.clipRect(o),e&&e.clip(!1===this.options.clip?void 0:s),i&&i.clip()}animate(t){let{chart:e,group:i,markerGroup:r}=this,n=e.inverted,o=u(this.options.animation),a=[this.getSharedClipKey(),o.duration,o.easing,o.defer].join(","),s=e.sharedClips[a],l=e.sharedClips[a+"m"];if(t&&i){let t=this.getClipBox();if(s)s.attr("height",t.height);else{t.width=0,n&&(t.x=e.plotHeight),s=e.renderer.clipRect(t),e.sharedClips[a]=s;let i={x:-99,y:-99,width:n?e.plotWidth+199:99,height:n?99:e.plotHeight+199};l=e.renderer.clipRect(i),e.sharedClips[a+"m"]=l}i.clip(s),null===r||void 0===r||r.clip(l)}else if(s&&!s.hasClass("highcharts-animating")){let t=this.getClipBox(),i=o.step;(null!==r&&void 0!==r&&r.element.childNodes.length||e.series.length>1)&&(o.step=function(t,e){var r;i&&i.apply(e,arguments),"width"===e.prop&&(null===(r=l)||void 0===r?void 0:r.element)&&l.attr(n?"height":"width",t+99)}),s.addClass("highcharts-animating").animate(t,o)}}afterAnimate(){this.setClip(),B(this.chart.sharedClips,((t,e,i)=>{t&&!this.chart.container.querySelector('[clip-path="url(#'.concat(t.id,')"]'))&&(t.destroy(),delete i[e])})),this.finishedAnimating=!0,M(this,"afterAnimate")}drawPoints(){let t,e,i,r,n,o,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,l=this.chart,c=l.styledMode,{colorAxis:u,options:h}=this,d=h.marker,p=this[this.specialGroup||"markerGroup"],f=this.xAxis,m=F(d.enabled,!f||!!f.isRadial||null,this.closestPointRangePx>=d.enabledThreshold*d.radius);if(!1!==d.enabled||this._hasPointMarkers)for(t=0;t<s.length;t++)if(r=(i=(e=s[t]).graphic)?"animate":"attr",n=e.marker||{},o=!!e.marker,(m&&void 0===n.enabled||n.enabled)&&!e.isNull&&!1!==e.visible){let t=F(n.symbol,this.symbol,"rect");a=this.markerAttribs(e,e.selected&&"select"),this.enabledDataSorting&&(e.startXPos=f.reversed?-(a.width||0):f.width);let s=!1!==e.isInside;if(!i&&s&&((a.width||0)>0||e.hasImage)&&(e.graphic=i=l.renderer.symbol(t,a.x,a.y,a.width,a.height,o?n:d).add(p),this.enabledDataSorting&&l.hasRendered&&(i.attr({x:e.startXPos}),r="animate")),i&&"animate"===r&&i[s?"show":"hide"](s).animate(a),i){let t=this.pointAttribs(e,c||!e.selected?void 0:"select");c?u&&i.css({fill:t.fill}):i[r](t)}i&&i.addClass(e.getClassName(),!0)}else i&&(e.graphic=i.destroy())}markerAttribs(t,e){let i,r,n=this.options,o=n.marker,a=t.marker||{},s=a.symbol||o.symbol,l={},c=F(a.radius,o&&o.radius);e&&(i=o.states[e],c=F((r=a.states&&a.states[e])&&r.radius,i&&i.radius,c&&c+(i&&i.radiusPlus||0))),t.hasImage=s&&0===s.indexOf("url"),t.hasImage&&(c=0);let u=t.pos();return D(c)&&u&&(n.crisp&&(u[0]=b(u[0],t.hasImage?0:"rect"===s?(null===o||void 0===o?void 0:o.lineWidth)||0:1)),l.x=u[0]-c,l.y=u[1]-c),c&&(l.width=l.height=2*c),l}pointAttribs(t,e){let i,r,n,o,a=this.options.marker,s=t&&t.options,l=s&&s.marker||{},c=s&&s.color,u=t&&t.color,h=t&&t.zone&&t.zone.color,d=this.color,p=F(l.lineWidth,a.lineWidth),f=1;return d=c||h||u||d,n=l.fillColor||a.fillColor||d,o=l.lineColor||a.lineColor||d,e=e||"normal",i=a.states[e]||{},p=F((r=l.states&&l.states[e]||{}).lineWidth,i.lineWidth,p+F(r.lineWidthPlus,i.lineWidthPlus,0)),n=r.fillColor||i.fillColor||n,{stroke:o=r.lineColor||i.lineColor||o,"stroke-width":p,fill:n,opacity:f=F(r.opacity,i.opacity,f)}}destroy(t){let e,i,r,n=this,o=n.chart,a=/AppleWebKit\/533/.test(m.navigator.userAgent),s=n.data||[];for(M(n,"destroy",{keepEventsForUpdate:t}),this.removeEvents(t),(n.axisTypes||[]).forEach((function(t){(r=n[t])&&r.series&&(C(r.series,n),r.isDirty=r.forceRedraw=!0)})),n.legendItem&&n.chart.legend.destroyItem(n),e=s.length;e--;)(i=s[e])&&i.destroy&&i.destroy();for(let l of n.zones)S(l,void 0,!0);c.clearTimeout(n.animationTimeout),B(n,(function(t,e){t instanceof l&&!t.survive&&t[a&&"group"===e?"hide":"destroy"]()})),o.hoverSeries===n&&(o.hoverSeries=void 0),C(o.series,n),o.orderItems("series"),B(n,(function(e,i){t&&"hcEvents"===i||delete n[i]}))}applyZones(){let{area:t,chart:e,graph:i,zones:r,points:n,xAxis:o,yAxis:a,zoneAxis:s}=this,{inverted:l,renderer:c}=e,u=this["".concat(s,"Axis")],{isXAxis:h,len:d=0}=u||{},p=((null===i||void 0===i?void 0:i.strokeWidth())||0)/2+1,f=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l&&(i=d-i);let{translated:r=0,lineClip:n}=t,o=i-r;null===n||void 0===n||n.push(["L",e,Math.abs(o)<p?i-p*(o<=0?-1:1):r])};if(r.length&&(i||t)&&u&&D(u.min)){let e=u.getExtremes().max,p=t=>{t.forEach(((e,i)=>{("M"===e[0]||"L"===e[0])&&(t[i]=[e[0],h?d-e[1]:e[1],h?e[2]:d-e[2]])}))};if(r.forEach((t=>{t.lineClip=[],t.translated=x(u.toPixels(F(t.value,e),!0)||0,0,d)})),i&&!this.showLine&&i.hide(),t&&t.hide(),"y"===s&&n.length<o.len)for(let t of n){let{plotX:e,plotY:i,zone:n}=t,o=n&&r[r.indexOf(n)-1];n&&f(n,e,i),o&&f(o,e,i)}let m=[],g=u.toPixels(u.getExtremes().min,!0);r.forEach((e=>{var r,n,s;let u=e.lineClip||[],d=Math.round(e.translated||0);o.reversed&&u.reverse();let{clip:f,simpleClip:y}=e,v=0,x=0,_=o.len,b=a.len;h?(v=d,_=g):(x=d,b=g);let w=[["M",v,x],["L",_,x],["L",_,b],["L",v,b],["Z"]],S=[w[0],...u,w[1],w[2],...m,w[3],w[4]];m=u.reverse(),g=d,l&&(p(S),t&&p(w)),f?(f.animate({d:S}),null===(r=y)||void 0===r||r.animate({d:w})):(f=e.clip=c.path(S),t&&(y=e.simpleClip=c.path(w))),i&&null!==(n=e.graph)&&void 0!==n&&n.clip(f),t&&(null===(s=e.area)||void 0===s||s.clip(y))}))}else this.visible&&(i&&i.show(),t&&t.show())}plotGroup(t,e,i,r,n){let o=this[t],a=!o,s={visibility:i,zIndex:r||.1};return w(this.opacity)&&!this.chart.styledMode&&"inactive"!==this.state&&(s.opacity=this.opacity),o||(this[t]=o=this.chart.renderer.g().add(n)),o.addClass("highcharts-"+e+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(w(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(o.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),o.attr(s)[a?"attr":"animate"](this.getPlotBox(e)),o}getPlotBox(t){let e=this.xAxis,i=this.yAxis,r=this.chart,n=r.inverted&&!r.polar&&e&&this.invertible&&"series"===t;return r.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:r.plotLeft,translateY:i?i.top:r.plotTop,rotation:n?90:0,rotationOriginX:n?(e.len-i.len)/2:0,rotationOriginY:n?(e.len+i.len)/2:0,scaleX:n?-1:1,scaleY:1}}removeEvents(t){let{eventsToUnbind:e}=this;t||j(this),e.length&&(e.forEach((t=>{t()})),e.length=0)}render(){var t,e,i,r,n;let o=this,{chart:a,options:s,hasRendered:l}=o,c=u(s.animation),h=o.visible?"inherit":"hidden",d=s.zIndex,p=a.seriesGroup,f=o.finishedAnimating?0:c.duration;M(this,"render"),o.plotGroup("group","series",h,d,p),o.markerGroup=o.plotGroup("markerGroup","markers",h,d,p),!1!==s.clip&&o.setClip(),f&&null!==(t=o.animate)&&void 0!==t&&t.call(o,!0),o.drawGraph&&(o.drawGraph(),o.applyZones()),o.visible&&o.drawPoints(),null!==(e=o.drawDataLabels)&&void 0!==e&&e.call(o),null!==(i=o.redrawPoints)&&void 0!==i&&i.call(o),s.enableMouseTracking&&null!==(r=o.drawTracker)&&void 0!==r&&r.call(o),f&&null!==(n=o.animate)&&void 0!==n&&n.call(o),l||(f&&c.defer&&(f+=c.defer),o.animationTimeout=V((()=>{o.afterAnimate()}),f||0)),o.isDirty=!1,o.hasRendered=!0,M(o,"afterRender")}redraw(){let t=this.isDirty||this.isDirtyData;this.translate(),this.render(),t&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(t,e){let{xAxis:i,yAxis:r}=this,n=this.chart.inverted;return this.searchKDTree({clientX:n?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:n?r.len-t.chartX+r.pos:t.chartY-r.pos},e,t)}buildKDTree(t){this.buildingKdTree=!0;let e=this,i=e.options.findNearestPointBy.indexOf("y")>-1?2:1;delete e.kdTree,V((function(){e.kdTree=function t(i,r,n){let o,a,s=null===i||void 0===i?void 0:i.length;if(s)return o=e.kdAxisArray[r%n],i.sort(((t,e)=>(t[o]||0)-(e[o]||0))),{point:i[a=Math.floor(s/2)],left:t(i.slice(0,a),r+1,n),right:t(i.slice(a+1),r+1,n)}}(e.getValidPoints(void 0,!e.directTouch),i,i),e.buildingKdTree=!1}),e.options.kdNow||"touchstart"===(null===t||void 0===t?void 0:t.type)?0:1)}searchKDTree(t,e,i){let r=this,[n,o]=this.kdAxisArray,a=e?"distX":"dist",s=(r.options.findNearestPointBy||"").indexOf("y")>-1?2:1,l=!!r.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(i),this.kdTree)return function t(e,i,s,c,u){let h,d,p=i.point,f=r.kdAxisArray[s%c],m=p;!function(t,e,i){let r=t[n],a=e[n],s=w(r)&&w(a)?r-a:null,c=t[o],u=e[o],h=w(c)&&w(u)?c-u:0,d=l&&(null===(i=e.marker)||void 0===i?void 0:i.radius)||0;e.dist=Math.sqrt((s&&s*s||0)+h*h)-d,e.distX=w(s)?Math.abs(s)-d:Number.MAX_VALUE}(e,p);let g=(e[f]||0)-(p[f]||0)+(l&&(null===(u=p.marker)||void 0===u?void 0:u.radius)||0),y=g<0?"left":"right",v=g<0?"right":"left";return i[y]&&(m=(h=t(e,i[y],s+1,c))[a]<m[a]?h:p),i[v]&&Math.sqrt(g*g)<m[a]&&(m=(d=t(e,i[v],s+1,c))[a]<m[a]?d:m),m}(t,this.kdTree,s,s)}pointPlacementToXValue(){let{options:t,xAxis:e}=this,i=t.pointPlacement;return"between"===i&&(i=e.reversed?-.5:.5),D(i)?i*(t.pointRange||e.pointRange):0}isPointInside(t){let{chart:e,xAxis:i,yAxis:r}=this,{plotX:n=-1,plotY:o=-1}=t;return o>=0&&o<=(r?r.len:e.plotHeight)&&n>=0&&n<=(i?i.len:e.plotWidth)}drawTracker(){var t;let e=this,i=e.options,r=i.trackByArea,n=[].concat((r?e.areaPath:e.graphPath)||[]),o=e.chart,a=o.pointer,s=o.renderer,l=(null===(t=o.options.tooltip)||void 0===t?void 0:t.snap)||0,c=()=>{i.enableMouseTracking&&o.hoverSeries!==e&&e.onMouseOver()},u="rgba(192,192,192,"+(f?1e-4:.002)+")",h=e.tracker;h?h.attr({d:n}):e.graph&&(e.tracker=h=s.path(n).attr({visibility:e.visible?"inherit":"hidden",zIndex:2}).addClass(r?"highcharts-tracker-area":"highcharts-tracker-line").add(e.group),o.styledMode||h.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:u,fill:r?u:"none","stroke-width":e.graph.strokeWidth()+(r?0:2*l)}),[e.tracker,e.markerGroup,e.dataLabelsGroup].forEach((t=>{t&&(t.addClass("highcharts-tracker").on("mouseover",c).on("mouseout",(t=>{null===a||void 0===a||a.onTrackerMouseOut(t)})),i.cursor&&!o.styledMode&&t.css({cursor:i.cursor}),t.on("touchstart",c))}))),M(this,"afterDrawTracker")}addPoint(t,e,i,r,n){let o,a,s=this.options,l=this.data,c=this.chart,u=this.xAxis,h=u&&u.hasNames&&u.names,d=s.data,p=this.xData;e=F(e,!0);let f={series:this};this.pointClass.prototype.applyOptions.apply(f,[t]);let m=f.x;if(a=p.length,this.requireSorting&&m<p[a-1])for(o=!0;a&&p[a-1]>m;)a--;this.updateParallelArrays(f,"splice",[a,0,0]),this.updateParallelArrays(f,a),h&&f.name&&(h[m]=f.name),d.splice(a,0,t),(o||this.processedData)&&(this.data.splice(a,0,null),this.processData()),"point"===s.legendType&&this.generatePoints(),i&&(l[0]&&l[0].remove?l[0].remove(!1):(l.shift(),this.updateParallelArrays(f,"shift"),d.shift())),!1!==n&&M(this,"addPoint",{point:f}),this.isDirty=!0,this.isDirtyData=!0,e&&c.redraw(r)}removePoint(t,e,i){let r=this,n=r.data,o=n[t],a=r.points,s=r.chart,l=function(){a&&a.length===n.length&&a.splice(t,1),n.splice(t,1),r.options.data.splice(t,1),r.updateParallelArrays(o||{series:r},"splice",[t,1]),o&&o.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&s.redraw()};h(i,s),e=F(e,!0),o?o.firePointEvent("remove",null,l):l()}remove(t,e,i,r){let n=this,o=n.chart;function a(){n.destroy(r),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(r),F(t,!0)&&o.redraw(e)}!1!==i?M(n,"remove",null,a):a()}update(t,e){var i,r,n,o;M(this,"update",{options:t=k(t,this.userOptions)});let a,s,l=this,c=l.chart,u=l.userOptions,h=l.initialType||l.type,d=c.options.plotOptions,p=g[h].prototype,f=l.finishedAnimating&&{animation:!1},m={},y=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],v=t.type||u.type||c.options.chart.type,x=!(this.hasDerivedData||v&&v!==this.type||void 0!==t.pointStart||void 0!==t.pointInterval||void 0!==t.relativeXValue||t.joinBy||t.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some((t=>l.hasOptionChanged(t))));v=v||h,x&&(y.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),!1!==t.visible&&y.push("area","graph"),l.parallelArrays.forEach((function(t){y.push(t+"Data")})),t.data&&(t.dataSorting&&A(l.options.dataSorting,t.dataSorting),this.setData(t.data,!1))),t=O(u,{index:void 0===u.index?l.index:u.index,pointStart:null!==(i=null!==(r=null===d||void 0===d||null===(n=d.series)||void 0===n?void 0:n.pointStart)&&void 0!==r?r:u.pointStart)&&void 0!==i?i:null===(o=l.xData)||void 0===o?void 0:o[0]},!x&&{data:l.options.data},t,f),x&&t.data&&(t.data=l.options.data),(y=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(y)).forEach((function(t){y[t]=l[t],delete l[t]}));let _=!1;if(g[v]){if(_=v!==l.type,l.remove(!1,!1,!1,!0),_)if(c.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(l,g[v].prototype);else{let t=Object.hasOwnProperty.call(l,"hcEvents")&&l.hcEvents;for(s in p)l[s]=void 0;A(l,g[v].prototype),t?l.hcEvents=t:delete l.hcEvents}}else T(17,!0,c,{missingModuleFor:v});if(y.forEach((function(t){l[t]=y[t]})),l.init(c,t),x&&this.points)for(let g of(!1===(a=l.options).visible?(m.graphic=1,m.dataLabel=1):(this.hasMarkerChanged(a,u)&&(m.graphic=1),(null===(b=l.hasDataLabels)||void 0===b?void 0:b.call(l))||(m.dataLabel=1)),this.points)){var b;g&&g.series&&(g.resolveColor(),Object.keys(m).length&&g.destroyElements(m),!1===a.showInLegend&&g.legendItem&&c.legend.destroyItem(g))}l.initialType=h,c.linkSeries(),c.setSortedData(),_&&l.linkedSeries.length&&(l.isDirtyData=!0),M(this,"afterUpdate"),F(e,!0)&&c.redraw(!!x&&void 0)}setName(t){this.name=this.options.name=this.userOptions.name=t,this.chart.isDirtyLegend=!0}hasOptionChanged(t){var e,i;let r=this.chart,n=this.options[t],o=r.options.plotOptions,a=this.userOptions[t],s=F(null===o||void 0===o||null===(e=o[this.type])||void 0===e?void 0:e[t],null===o||void 0===o||null===(i=o.series)||void 0===i?void 0:i[t]);return a&&!w(s)?n!==a:n!==F(s,n)}onMouseOver(){let t=this.chart,e=t.hoverSeries,i=t.pointer;null!==i&&void 0!==i&&i.setHoverChartIndex(),e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&M(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this}onMouseOut(){let t=this.options,e=this.chart,i=e.tooltip,r=e.hoverPoint;e.hoverSeries=null,r&&r.onMouseOut(),this&&t.events.mouseOut&&M(this,"mouseOut"),i&&!this.stickyTracking&&(!i.shared||this.noSharedTooltip)&&i.hide(),e.series.forEach((function(t){t.setState("",!0)}))}setState(t,e){let i=this,r=i.options,n=i.graph,o=r.inactiveOtherPoints,a=r.states,s=F(a[t||"normal"]&&a[t||"normal"].animation,i.chart.options.chart.animation),l=r.lineWidth,c=r.opacity;if(t=t||"",i.state!==t&&([i.group,i.markerGroup,i.dataLabelsGroup].forEach((function(e){e&&(i.state&&e.removeClass("highcharts-series-"+i.state),t&&e.addClass("highcharts-series-"+t))})),i.state=t,!i.chart.styledMode)){if(a[t]&&!1===a[t].enabled)return;if(t&&(l=a[t].lineWidth||l+(a[t].lineWidthPlus||0),c=F(a[t].opacity,c)),n&&!n.dashstyle&&D(l))for(let t of[n,...this.zones.map((t=>t.graph))])null===t||void 0===t||t.animate({"stroke-width":l},s);o||[i.group,i.markerGroup,i.dataLabelsGroup,i.labelBySeries].forEach((function(t){t&&t.animate({opacity:c},s)}))}e&&o&&i.points&&i.setAllPointsToState(t||void 0)}setAllPointsToState(t){this.points.forEach((function(e){e.setState&&e.setState(t)}))}setVisible(t,e){var i;let r=this,n=r.chart,o=n.options.chart.ignoreHiddenSeries,a=r.visible;r.visible=t=r.options.visible=r.userOptions.visible=void 0===t?!a:t;let s=t?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((t=>{var e;null===(e=r[t])||void 0===e||e[s]()})),(n.hoverSeries===r||(null===(i=n.hoverPoint)||void 0===i?void 0:i.series)===r)&&r.onMouseOut(),r.legendItem&&n.legend.colorizeItem(r,t),r.isDirty=!0,r.options.stacking&&n.series.forEach((t=>{t.options.stacking&&t.visible&&(t.isDirty=!0)})),r.linkedSeries.forEach((e=>{e.setVisible(t,!1)})),o&&(n.isDirtyBox=!0),M(r,s),!1!==e&&n.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(t){this.selected=t=this.options.selected=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),M(this,t?"select":"unselect")}shouldShowTooltip(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.series=this,i.visiblePlotOnly=!0,this.chart.isInsidePlot(t,e,i)}drawLegendSymbol(t,e){var i;null===(i=n[this.options.legendSymbol||"rectangle"])||void 0===i||i.call(this,t,e)}}return U.defaultOptions=a,U.types=s.seriesTypes,U.registerType=s.registerSeriesType,A(U.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:o,requireSorting:!0,sorted:!0}),s.series=U,U})),i(e,"Core/Chart/Chart.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/Axis.js"],e["Core/Defaults.js"],e["Core/Templating.js"],e["Core/Foundation.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Time.js"],e["Core/Utilities.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Axis/Tick.js"]],(function(t,e,i,r,n,o,a,s,l,c,u,h,d,p){let{animate:f,animObject:m,setAnimation:g}=t,{defaultOptions:y,defaultTime:v}=i,{numberFormat:x}=r,{registerEventOptions:_}=n,{charts:b,doc:w,marginNames:S,svg:k,win:C}=o,{seriesTypes:T}=l,{addEvent:A,attr:P,createElement:M,css:E,defined:I,diffObjects:z,discardElement:L,erase:D,error:R,extend:O,find:B,fireEvent:F,getStyle:j,isArray:N,isNumber:V,isObject:U,isString:W,merge:H,objectEach:G,pick:q,pInt:Z,relativeLength:X,removeEvent:Y,splat:K,syncTimeout:$,uniqueKey:J}=h;class Q{static chart(t,e,i){return new Q(t,e,i)}constructor(t,e,i){this.sharedClips={};let r=[...arguments];(W(t)||t.nodeName)&&(this.renderTo=r.shift()),this.init(r[0],r[1])}setZoomOptions(){let t=this.options.chart,e=t.zooming;this.zooming={...e,type:q(t.zoomType,e.type),key:q(t.zoomKey,e.key),pinchType:q(t.pinchType,e.pinchType),singleTouch:q(t.zoomBySingleTouch,e.singleTouch,!1),resetButton:H(e.resetButton,t.resetZoomButton)}}init(t,e){F(this,"init",{args:arguments},(function(){let i=H(y,t),r=i.chart;this.userOptions=O({},t),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=e,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.time=t.time&&Object.keys(t.time).length?new u(t.time):o.time,this.numberFormatter=r.numberFormatter||x,this.styledMode=r.styledMode,this.hasCartesianSeries=r.showAxes,this.index=b.length,b.push(this),o.chartCount++,_(this,r),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),F(this,"afterInit"),this.firstRender()}))}initSeries(t){let e=this.options.chart,i=t.type||e.type,r=T[i];r||R(17,!0,this,{missingModuleFor:i});let n=new r;return"function"==typeof n.init&&n.init(this,t),n}setSortedData(){this.getSeriesOrderByLinks().forEach((function(t){t.points||t.data||!t.enabledDataSorting||t.setData(t.options.data,!1)}))}getSeriesOrderByLinks(){return this.series.concat().sort((function(t,e){return t.linkedSeries.length||e.linkedSeries.length?e.linkedSeries.length-t.linkedSeries.length:0}))}orderItems(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this[t],r=this.options[t]=K(this.options[t]).slice(),n=this.userOptions[t]=this.userOptions[t]?K(this.userOptions[t]).slice():[];if(this.hasRendered&&(r.splice(e),n.splice(e)),i)for(let o=e,a=i.length;o<a;++o){let t=i[o];t&&(t.index=o,t instanceof s&&(t.name=t.getName()),t.options.isInternal||(r[o]=t.options,n[o]=t.userOptions))}}isInsidePlot(t,e){var i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{inverted:n,plotBox:o,plotLeft:a,plotTop:s,scrollablePlotBox:l}=this,{scrollLeft:c=0,scrollTop:u=0}=r.visiblePlotOnly&&(null===(i=this.scrollablePlotArea)||void 0===i?void 0:i.scrollingContainer)||{},h=r.series,d=r.visiblePlotOnly&&l||o,p=r.inverted?e:t,f=r.inverted?t:e,m={x:p,y:f,isInsidePlot:!0,options:r};if(!r.ignoreX){let t=h&&(n&&!this.polar?h.yAxis:h.xAxis)||{pos:a,len:1/0},e=r.paneCoordinates?t.pos+p:a+p;e>=Math.max(c+a,t.pos)&&e<=Math.min(c+a+d.width,t.pos+t.len)||(m.isInsidePlot=!1)}if(!r.ignoreY&&m.isInsidePlot){let t=!n&&r.axis&&!r.axis.isXAxis&&r.axis||h&&(n?h.xAxis:h.yAxis)||{pos:s,len:1/0},e=r.paneCoordinates?t.pos+f:s+f;e>=Math.max(u+s,t.pos)&&e<=Math.min(u+s+d.height,t.pos+t.len)||(m.isInsidePlot=!1)}return F(this,"afterIsInsidePlot",m),m.isInsidePlot}redraw(t){F(this,"beforeRedraw");let e,i,r,n,o=this.hasCartesianSeries?this.axes:this.colorAxis||[],a=this.series,s=this.pointer,l=this.legend,c=this.userOptions.legend,u=this.renderer,h=u.isHidden(),d=[],p=this.isDirtyBox,f=this.isDirtyLegend;for(u.rootFontSize=u.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),g(!!this.hasRendered&&t,this),h&&this.temporaryDisplay(),this.layOutTitles(!1),r=a.length;r--;)if(((n=a[r]).options.stacking||n.options.centerInCategory)&&(i=!0,n.isDirty)){e=!0;break}if(e)for(r=a.length;r--;)(n=a[r]).options.stacking&&(n.isDirty=!0);a.forEach((function(t){t.isDirty&&("point"===t.options.legendType?("function"==typeof t.updateTotals&&t.updateTotals(),f=!0):c&&(c.labelFormatter||c.labelFormat)&&(f=!0)),t.isDirtyData&&F(t,"updatedData")})),f&&l&&l.options.enabled&&(l.render(),this.isDirtyLegend=!1),i&&this.getStacks(),o.forEach((function(t){t.updateNames(),t.setScale()})),this.getMargins(),o.forEach((function(t){t.isDirty&&(p=!0)})),o.forEach((function(t){let e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,d.push((function(){F(t,"afterSetExtremes",O(t.eventArgs,t.getExtremes())),delete t.eventArgs}))),(p||i)&&t.redraw()})),p&&this.drawChartBox(),F(this,"predraw"),a.forEach((function(t){(p||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1})),s&&s.reset(!0),u.draw(),F(this,"redraw"),F(this,"render"),h&&this.temporaryDisplay(!0),d.forEach((function(t){t.call()}))}get(t){let e=this.series;function i(e){return e.id===t||e.options&&e.options.id===t}let r=B(this.axes,i)||B(this.series,i);for(let n=0;!r&&n<e.length;n++)r=B(e[n].points||[],i);return r}getAxes(){let t=this.userOptions;for(let i of(F(this,"getAxes"),["xAxis","yAxis"]))for(let r of t[i]=K(t[i]||{}))new e(this,r,i);F(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce(((t,e)=>(e.getPointsCollection().forEach((e=>{q(e.selectedStaging,e.selected)&&t.push(e)})),t)),[])}getSelectedSeries(){return this.series.filter((function(t){return t.selected}))}setTitle(t,e,i){this.applyDescription("title",t),this.applyDescription("subtitle",e),this.applyDescription("caption",void 0),this.layOutTitles(i)}applyDescription(t,e){let i=this,r=this.options[t]=H(this.options[t],e),n=this[t];n&&e&&(this[t]=n=n.destroy()),r&&!n&&((n=this.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,class:"highcharts-"+t,zIndex:r.zIndex||4}).add()).update=function(e,r){i.applyDescription(t,e),i.layOutTitles(r)},this.styledMode||n.css(O("title"===t?{fontSize:this.options.isStock?"1em":"1.2em"}:{},r.style)),this[t]=n)}layOutTitles(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=[0,0,0],i=this.renderer,r=this.spacingBox;["title","subtitle","caption"].forEach((function(t){let n=this[t],o=this.options[t],a=o.verticalAlign||"top",s="title"===t?"top"===a?-3:0:"top"===a?e[0]+2:0;if(n){n.css({width:(o.width||r.width+(o.widthAdjust||0))+"px"});let t=i.fontMetrics(n).b,l=Math.round(n.getBBox(o.useHTML).height);n.align(O({y:"bottom"===a?t:s+t,height:l},o),!1,"spacingBox"),o.floating||("top"===a?e[0]=Math.ceil(e[0]+l):"bottom"===a&&(e[2]=Math.ceil(e[2]+l)))}}),this),e[0]&&"top"===(this.options.title.verticalAlign||"top")&&(e[0]+=this.options.title.margin),e[2]&&"bottom"===this.options.caption.verticalAlign&&(e[2]+=this.options.caption.margin);let n=!this.titleOffset||this.titleOffset.join(",")!==e.join(",");this.titleOffset=e,F(this,"afterLayOutTitles"),!this.isDirtyBox&&n&&(this.isDirtyBox=this.isDirtyLegend=n,this.hasRendered&&t&&this.isDirtyBox&&this.redraw())}getContainerBox(){return{width:j(this.renderTo,"width",!0)||0,height:j(this.renderTo,"height",!0)||0}}getChartSize(){let t=this.options.chart,e=t.width,i=t.height,r=this.getContainerBox();this.chartWidth=Math.max(0,e||r.width||600),this.chartHeight=Math.max(0,X(i,this.chartWidth)||(r.height>1?r.height:400)),this.containerBox=r}temporaryDisplay(t){let e,i=this.renderTo;if(t)for(;i&&i.style;)i.hcOrigStyle&&(E(i,i.hcOrigStyle),delete i.hcOrigStyle),i.hcOrigDetached&&(w.body.removeChild(i),i.hcOrigDetached=!1),i=i.parentNode;else for(;i&&i.style&&(w.body.contains(i)||i.parentNode||(i.hcOrigDetached=!0,w.body.appendChild(i)),("none"===j(i,"display",!1)||i.hcOricDetached)&&(i.hcOrigStyle={display:i.style.display,height:i.style.height,overflow:i.style.overflow},e={display:"block",overflow:"hidden"},i!==this.renderTo&&(e.height=0),E(i,e),i.offsetWidth||i.style.setProperty("display","block","important")),(i=i.parentNode)!==w.body););}setClassName(t){this.container.className="highcharts-container "+(t||"")}getContainer(){var t;let e,i=this.options,r=i.chart,n="data-highcharts-chart",o=J(),s=this.renderTo;s||(this.renderTo=s=r.renderTo),W(s)&&(this.renderTo=s=w.getElementById(s)),s||R(13,!0,this);let l=Z(P(s,n));V(l)&&b[l]&&b[l].hasRendered&&b[l].destroy(),P(s,n,this.index),s.innerHTML=d.emptyHTML,r.skipClone||s.offsetWidth||this.temporaryDisplay(),this.getChartSize();let u=this.chartHeight,h=this.chartWidth;E(s,{overflow:"hidden"}),this.styledMode||(e=O({position:"relative",overflow:"hidden",width:h+"px",height:u+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},r.style||{}));let p=M("div",{id:o},e,s);this.container=p,this.getChartSize(),h===this.chartWidth||(h=this.chartWidth,this.styledMode||E(p,{width:q(null===(t=r.style)||void 0===t?void 0:t.width,h+"px")})),this.containerBox=this.getContainerBox(),this._cursor=p.style.cursor;let f=r.renderer||!k?a.getRendererType(r.renderer):c;if(this.renderer=new f(p,h,u,void 0,r.forExport,i.exporting&&i.exporting.allowHTML,this.styledMode),g(void 0,this),this.setClassName(r.className),this.styledMode)for(let a in i.defs)this.renderer.definition(i.defs[a]);else this.renderer.setStyle(r.style);this.renderer.chartIndex=this.index,F(this,"afterGetContainer")}getMargins(t){let{spacing:e,margin:i,titleOffset:r}=this;this.resetMargins(),r[0]&&!I(i[0])&&(this.plotTop=Math.max(this.plotTop,r[0]+e[0])),r[2]&&!I(i[2])&&(this.marginBottom=Math.max(this.marginBottom,r[2]+e[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(i,e),F(this,"getMargins"),t||this.getAxisMargins()}getAxisMargins(){let t=this,e=t.axisOffset=[0,0,0,0],i=t.colorAxis,r=t.margin,n=function(t){t.forEach((function(t){t.visible&&t.getOffset()}))};t.hasCartesianSeries?n(t.axes):i&&i.length&&n(i),S.forEach((function(i,n){I(r[n])||(t[i]+=e[n])})),t.setChartSize()}getOptions(){return z(this.userOptions,y)}reflow(t){var e;let i=this,r=i.containerBox,n=i.getContainerBox();null===(e=i.pointer)||void 0===e||delete e.chartPosition,!i.isPrinting&&!i.isResizing&&r&&n.width&&((n.width!==r.width||n.height!==r.height)&&(h.clearTimeout(i.reflowTimeout),i.reflowTimeout=$((function(){i.container&&i.setSize(void 0,void 0,!1)}),t?100:0)),i.containerBox=n)}setReflow(){let t=this,e=e=>{var i;(null===(i=t.options)||void 0===i?void 0:i.chart.reflow)&&t.hasLoaded&&t.reflow(e)};if("function"==typeof ResizeObserver)new ResizeObserver(e).observe(t.renderTo);else{let t=A(C,"resize",e);A(this,"destroy",t)}}setSize(t,e,i){let r=this,n=r.renderer;r.isResizing+=1,g(i,r);let o=n.globalAnimation;r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,void 0!==t&&(r.options.chart.width=t),void 0!==e&&(r.options.chart.height=e),r.getChartSize();let{chartWidth:a,chartHeight:s,scrollablePixelsX:l=0,scrollablePixelsY:c=0}=r;(r.isDirtyBox||a!==r.oldChartWidth||s!==r.oldChartHeight)&&(r.styledMode||(o?f:E)(r.container,{width:"".concat(a+l,"px"),height:"".concat(s+c,"px")},o),r.setChartSize(!0),n.setSize(a,s,o),r.axes.forEach((function(t){t.isDirty=!0,t.setScale()})),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.layOutTitles(),r.getMargins(),r.redraw(o),r.oldChartHeight=void 0,F(r,"resize"),setTimeout((()=>{r&&F(r,"endResize")}),m(o).duration)),r.isResizing-=1}setChartSize(t){let e,i,r,n,{chartHeight:o,chartWidth:a,inverted:s,spacing:l,renderer:c}=this,u=this.clipOffset,h=Math[s?"floor":"round"];this.plotLeft=e=Math.round(this.plotLeft),this.plotTop=i=Math.round(this.plotTop),this.plotWidth=r=Math.max(0,Math.round(a-e-this.marginRight)),this.plotHeight=n=Math.max(0,Math.round(o-i-this.marginBottom)),this.plotSizeX=s?n:r,this.plotSizeY=s?r:n,this.spacingBox=c.spacingBox={x:l[3],y:l[0],width:a-l[3]-l[1],height:o-l[0]-l[2]},this.plotBox=c.plotBox={x:e,y:i,width:r,height:n},u&&(this.clipBox={x:h(u[3]),y:h(u[0]),width:h(this.plotSizeX-u[1]-u[3]),height:h(this.plotSizeY-u[0]-u[2])}),t||(this.axes.forEach((function(t){t.setAxisSize(),t.setAxisTranslation()})),c.alignElements()),F(this,"afterSetChartSize",{skipAxes:t})}resetMargins(){F(this,"resetMargins");let t=this,e=t.options.chart,i=e.plotBorderWidth||0,r=i/2;["margin","spacing"].forEach((function(i){let r=e[i],n=U(r)?r:[r,r,r,r];["Top","Right","Bottom","Left"].forEach((function(r,o){t[i][o]=q(e[i+r],n[o])}))})),S.forEach((function(e,i){t[e]=q(t.margin[i],t.spacing[i])})),t.axisOffset=[0,0,0,0],t.clipOffset=[r,r,r,r],t.plotBorderWidth=i}drawChartBox(){let t,e,i,r=this.options.chart,n=this.renderer,o=this.chartWidth,a=this.chartHeight,s=this.styledMode,l=this.plotBGImage,c=r.backgroundColor,u=r.plotBackgroundColor,h=r.plotBackgroundImage,d=this.plotLeft,p=this.plotTop,f=this.plotWidth,m=this.plotHeight,g=this.plotBox,y=this.clipRect,v=this.clipBox,x=this.chartBackground,_=this.plotBackground,b=this.plotBorder,w="animate";x||(this.chartBackground=x=n.rect().addClass("highcharts-background").add(),w="attr"),s?t=e=x.strokeWidth():(e=(t=r.borderWidth||0)+(r.shadow?8:0),i={fill:c||"none"},(t||x["stroke-width"])&&(i.stroke=r.borderColor,i["stroke-width"]=t),x.attr(i).shadow(r.shadow)),x[w]({x:e/2,y:e/2,width:o-e-t%2,height:a-e-t%2,r:r.borderRadius}),w="animate",_||(w="attr",this.plotBackground=_=n.rect().addClass("highcharts-plot-background").add()),_[w](g),!s&&(_.attr({fill:u||"none"}).shadow(r.plotShadow),h&&(l?(h!==l.attr("href")&&l.attr("href",h),l.animate(g)):this.plotBGImage=n.image(h,d,p,f,m).add())),y?y.animate({width:v.width,height:v.height}):this.clipRect=n.clipRect(v),w="animate",b||(w="attr",this.plotBorder=b=n.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),s||b.attr({stroke:r.plotBorderColor,"stroke-width":r.plotBorderWidth||0,fill:"none"}),b[w](b.crisp({x:d,y:p,width:f,height:m},-b.strokeWidth())),this.isDirtyBox=!1,F(this,"afterDrawChartBox")}propFromSeries(){let t,e,i,r=this,n=r.options.chart,o=r.options.series;["inverted","angular","polar"].forEach((function(a){for(e=T[n.type],i=n[a]||e&&e.prototype[a],t=o&&o.length;!i&&t--;)(e=T[o[t].type])&&e.prototype[a]&&(i=!0);r[a]=i}))}linkSeries(t){let e=this,i=e.series;i.forEach((function(t){t.linkedSeries.length=0})),i.forEach((function(t){let{linkedTo:i}=t.options;if(W(i)){let r;(r=":previous"===i?e.series[t.index-1]:e.get(i))&&r.linkedParent!==t&&(r.linkedSeries.push(t),t.linkedParent=r,r.enabledDataSorting&&t.setDataSortingOptions(),t.visible=q(t.options.visible,r.options.visible,t.visible))}})),F(this,"afterLinkSeries",{isUpdating:t})}renderSeries(){this.series.forEach((function(t){t.translate(),t.render()}))}render(){let t,e=this.axes,i=this.colorAxis,r=this.renderer,n=this.options.chart.axisLayoutRuns||2,o=t=>{t.forEach((t=>{t.visible&&t.render()}))},a=0,s=!0,l=0;for(let u of(this.setTitle(),F(this,"beforeMargins"),null!==(c=this.getStacks)&&void 0!==c&&c.call(this),this.getMargins(!0),this.setChartSize(),e)){var c;let{options:t}=u,{labels:e}=t;if(this.hasCartesianSeries&&u.horiz&&u.visible&&e.enabled&&u.series.length&&"colorAxis"!==u.coll&&!this.polar){a=t.tickLength,u.createGroups();let i=new p(u,0,"",!0),r=i.createLabel("x",e);if(i.destroy(),r&&q(e.reserveSpace,!V(t.crossing))&&(a=r.getBBox().height+e.distance+Math.max(t.offset||0,0)),a){null===r||void 0===r||r.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-a,0);(s||t||n>1)&&l<n;){let i=this.plotWidth,r=this.plotHeight;for(let n of e)0===l?n.setScale():(n.horiz&&s||!n.horiz&&t)&&n.setTickInterval(!0);0===l?this.getAxisMargins():this.getMargins(),s=i/this.plotWidth>(l?1:1.1),t=r/this.plotHeight>(l?1:1.05),l++}this.drawChartBox(),this.hasCartesianSeries?o(e):i&&i.length&&o(i),this.seriesGroup||(this.seriesGroup=r.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(t){let e=this,i=H(!0,this.options.credits,t);i.enabled&&!this.credits&&(this.credits=this.renderer.text(i.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){i.href&&(C.location.href=i.href)})).attr({align:i.position.align,zIndex:8}),e.styledMode||this.credits.css(i.style),this.credits.add().align(i.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})}destroy(){let t,e=this,i=e.axes,r=e.series,n=e.container,a=n&&n.parentNode;for(F(e,"destroy"),e.renderer.forExport?D(b,e):b[e.index]=void 0,o.chartCount--,e.renderTo.removeAttribute("data-highcharts-chart"),Y(e),t=i.length;t--;)i[t]=i[t].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),t=r.length;t--;)r[t]=r[t].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach((function(t){let i=e[t];i&&i.destroy&&(e[t]=i.destroy())})),n&&(n.innerHTML=d.emptyHTML,Y(n),a&&L(n)),G(e,(function(t,i){delete e[i]}))}firstRender(){var t;let e=this,i=e.options;e.getContainer(),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes();let r=N(i.series)?i.series:[];i.series=[],r.forEach((function(t){e.initSeries(t)})),e.linkSeries(),e.setSortedData(),F(e,"beforeRender"),e.render(),null!==(t=e.pointer)&&void 0!==t&&t.getChartPosition(),e.renderer.imgCount||e.hasLoaded||e.onload(),e.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach((function(t){t&&void 0!==this.index&&t.apply(this,[this])}),this),F(this,"load"),F(this,"render"),I(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:t,title:e}=this;!t||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(e&&e.element.textContent||"").replace(/</g,"&lt;")}),t.accessibility&&!1===t.accessibility.enabled||R('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(t,e,i){let r,n=this;return t&&(e=q(e,!0),F(n,"addSeries",{options:t},(function(){r=n.initSeries(t),n.isDirtyLegend=!0,n.linkSeries(),r.enabledDataSorting&&r.setData(t.data,!1),F(n,"afterAddSeries",{series:r}),e&&n.redraw(i)}))),r}addAxis(t,e,i,r){return this.createAxis(e?"xAxis":"yAxis",{axis:t,redraw:i,animation:r})}addColorAxis(t,e,i){return this.createAxis("colorAxis",{axis:t,redraw:e,animation:i})}createAxis(t,i){let r=new e(this,i.axis,t);return q(i.redraw,!0)&&this.redraw(i.animation),r}showLoading(t){let e=this,i=e.options,r=i.loading,n=function(){o&&E(o,{left:e.plotLeft+"px",top:e.plotTop+"px",width:e.plotWidth+"px",height:e.plotHeight+"px"})},o=e.loadingDiv,a=e.loadingSpan;o||(e.loadingDiv=o=M("div",{className:"highcharts-loading highcharts-loading-hidden"},null,e.container)),a||(e.loadingSpan=a=M("span",{className:"highcharts-loading-inner"},null,o),A(e,"redraw",n)),o.className="highcharts-loading",d.setElementHTML(a,q(t,i.lang.loading,"")),e.styledMode||(E(o,O(r.style,{zIndex:10})),E(a,r.labelStyle),e.loadingShown||(E(o,{opacity:0,display:""}),f(o,{opacity:r.style.opacity||.5},{duration:r.showDuration||0}))),e.loadingShown=!0,n()}hideLoading(){let t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",this.styledMode||f(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){E(e,{display:"none"})}})),this.loadingShown=!1}update(t,e,i,r){let n,o,a,s=this,l={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},c=t.isResponsiveOptions,h=[];F(s,"update",{options:t}),c||s.setResponsive(!1,!0),t=z(t,s.options),s.userOptions=H(s.userOptions,t);let d=t.chart;d&&(H(!0,s.options.chart,d),this.setZoomOptions(),"className"in d&&s.setClassName(d.className),("inverted"in d||"polar"in d||"type"in d)&&(s.propFromSeries(),n=!0),"alignTicks"in d&&(n=!0),"events"in d&&_(this,d),G(d,(function(t,e){-1!==s.propsRequireUpdateSeries.indexOf("chart."+e)&&(o=!0),-1!==s.propsRequireDirtyBox.indexOf(e)&&(s.isDirtyBox=!0),-1===s.propsRequireReflow.indexOf(e)||(s.isDirtyBox=!0,c||(a=!0))})),!s.styledMode&&d.style&&s.renderer.setStyle(s.options.chart.style||{})),!s.styledMode&&t.colors&&(this.options.colors=t.colors),t.time&&(this.time===v&&(this.time=new u(t.time)),H(!0,s.options.time,t.time)),G(t,(function(e,i){s[i]&&"function"==typeof s[i].update?s[i].update(e,!1):"function"==typeof s[l[i]]?s[l[i]](e):"colors"!==i&&-1===s.collectionsWithUpdate.indexOf(i)&&H(!0,s.options[i],t[i]),"chart"!==i&&-1!==s.propsRequireUpdateSeries.indexOf(i)&&(o=!0)})),this.collectionsWithUpdate.forEach((function(e){t[e]&&(K(t[e]).forEach((function(t,r){let n,o=I(t.id);o&&(n=s.get(t.id)),!n&&s[e]&&(n=s[e][q(t.index,r)])&&(o&&I(n.options.id)||n.options.isInternal)&&(n=void 0),n&&n.coll===e&&(n.update(t,!1),i&&(n.touched=!0)),!n&&i&&s.collectionsWithInit[e]&&(s.collectionsWithInit[e][0].apply(s,[t].concat(s.collectionsWithInit[e][1]||[]).concat([!1])).touched=!0)})),i&&s[e].forEach((function(t){t.touched||t.options.isInternal?delete t.touched:h.push(t)})))})),h.forEach((function(t){t.chart&&t.remove&&t.remove(!1)})),n&&s.axes.forEach((function(t){t.update({},!1)})),o&&s.getSeriesOrderByLinks().forEach((function(t){t.chart&&t.update({},!1)}),this);let p=d&&d.width,f=d&&(W(d.height)?X(d.height,p||s.chartWidth):d.height);a||V(p)&&p!==s.chartWidth||V(f)&&f!==s.chartHeight?s.setSize(p,f,r):q(e,!0)&&s.redraw(r),F(s,"afterUpdate",{options:t,redraw:e,animation:r})}setSubtitle(t,e){this.applyDescription("subtitle",t),this.layOutTitles(e)}setCaption(t,e){this.applyDescription("caption",t),this.layOutTitles(e)}showResetZoom(){let t=this,e=y.lang,i=t.zooming.resetButton,r=i.theme,n="chart"===i.relativeTo||"spacingBox"===i.relativeTo?null:"plotBox";function o(){t.zoomOut()}F(this,"beforeShowResetZoom",null,(function(){t.resetZoomButton=t.renderer.button(e.resetZoom,null,null,o,r).attr({align:i.position.align,title:e.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,n)})),F(this,"afterShowResetZoom")}zoomOut(){F(this,"selection",{resetSelection:!0},(()=>this.transform({reset:!0,trigger:"zoom"})))}pan(t,e){let i=this,r="object"==typeof e?e:{enabled:e,type:"x"},n=r.type,o=n&&i[{x:"xAxis",xy:"axes",y:"yAxis"}[n]].filter((t=>t.options.panningEnabled&&!t.options.isInternal)),a=i.options.chart;null!==a&&void 0!==a&&a.panning&&(a.panning=r),F(this,"pan",{originalEvent:t},(()=>{i.transform({axes:o,event:t,to:{x:t.chartX-(i.mouseDownX||0),y:t.chartY-(i.mouseDownY||0)},trigger:"pan"}),E(i.container,{cursor:"move"})}))}transform(t){var e;let i,{axes:r=this.axes,event:n,from:o={},reset:a,selection:s,to:l={},trigger:c}=t,{inverted:u}=this,h=!1;for(let y of(null!==(d=this.hoverPoints)&&void 0!==d&&d.forEach((t=>t.setState())),r)){var d,p,f,m;let{horiz:t,len:e,minPointOffset:r=0,options:v,reversed:x}=y,_=t?"width":"height",b=t?"x":"y",w=q(l[_],y.len),S=q(o[_],y.len),k=10>Math.abs(w)?1:w/S,C=(o[b]||0)+S/2-y.pos,T=C-((null!==(p=l[b])&&void 0!==p?p:y.pos)+w/2-y.pos)/k,A=x&&!u||!x&&u?-1:1;if(!a&&(C<0||C>y.len))continue;let P=y.toValue(T,!0)+(s?0:r*A),M=y.toValue(T+e/k,!0)-(s?0:r*A||0),E=y.allExtremes;if(P>M&&([P,M]=[M,P]),1===k&&!a&&"yAxis"===y.coll&&!E){for(let t of y.series){var g;let e=t.getExtremes(t.getProcessedData(!0).yData,!0);null!==(g=E)&&void 0!==g||(E={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),V(e.dataMin)&&V(e.dataMax)&&(E.dataMin=Math.min(e.dataMin,E.dataMin),E.dataMax=Math.max(e.dataMax,E.dataMax))}y.allExtremes=E}let{dataMin:z,dataMax:L,min:D,max:R}=O(y.getExtremes(),E||{}),B=null!==z&&void 0!==z?z:v.min,F=null!==L&&void 0!==L?L:v.max,j=M-P,N=y.categories?0:Math.min(j,F-B),U=B-N*(I(v.min)?0:v.minPadding),W=F+N*(I(v.max)?0:v.maxPadding),H=y.allowZoomOutside||1===k||"zoom"!==c&&k>1,G=Math.min(null!==(f=v.min)&&void 0!==f?f:U,U,H?D:U),Z=Math.max(null!==(m=v.max)&&void 0!==m?m:W,W,H?R:W);(!y.isOrdinal||1!==k||a)&&(P<G&&(P=G,k>=1&&(M=P+j)),M>Z&&(M=Z,k>=1&&(P=M-j)),(a||y.series.length&&(P!==D||M!==R)&&P>=G&&M<=Z)&&(s?s[y.coll].push({axis:y,min:P,max:M}):(y.isPanning="zoom"!==c,y.setExtremes(a?void 0:P,a?void 0:M,!1,!1,{move:T,trigger:c,scale:k}),!a&&(P>G||M<Z)&&"mousewheel"!==c&&(i=!0)),h=!0),n&&(this[t?"mouseDownX":"mouseDownY"]=n[t?"chartX":"chartY"]))}return h&&(s?F(this,"selection",s,(()=>{delete t.selection,t.trigger="zoom",this.transform(t)})):(i&&!this.resetZoomButton?this.showResetZoom():!i&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()),this.redraw("zoom"===c&&(null!==(e=this.options.chart.animation)&&void 0!==e?e:this.pointCount<100)))),h}}return O(Q.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Q.prototype.addAxis,[!0]],yAxis:[Q.prototype.addAxis,[!1]],series:[Q.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),Q})),i(e,"Extensions/ScrollablePlotArea.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i,r){let{stop:n}=t,{composed:o}=e,{addEvent:a,createElement:s,css:l,defined:c,merge:u,pushUnique:h}=r;function d(){var t;let e=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!e&&(this.scrollablePlotArea=e=new f(this)),null===(t=e)||void 0===t||t.applyFixed()}function p(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class f{static compose(t,e,i){h(o,this.compose)&&(a(t,"afterInit",p),a(e,"afterSetChartSize",(t=>this.afterSetSize(t.target,t))),a(e,"render",d),a(i,"show",p))}static afterSetSize(t,e){let i,r,n,{minWidth:o,minHeight:a}=t.options.chart.scrollablePlotArea||{},{clipBox:s,plotBox:l,inverted:h,renderer:d}=t;if(!d.forExport&&(o?(t.scrollablePixelsX=i=Math.max(0,o-t.chartWidth),i&&(t.scrollablePlotBox=u(t.plotBox),l.width=t.plotWidth+=i,s[h?"height":"width"]+=i,n=!0)):a&&(t.scrollablePixelsY=r=Math.max(0,a-t.chartHeight),c(r)&&(t.scrollablePlotBox=u(t.plotBox),l.height=t.plotHeight+=r,s[h?"width":"height"]+=r,n=!1)),c(n)&&!e.skipAxes))for(let c of t.axes)c.horiz===n&&(c.setAxisSize(),c.setAxisTranslation())}constructor(t){var e,r;let n,o=t.options.chart,c=i.getRendererType(),u=o.scrollablePlotArea||{},h=this.moveFixedElements.bind(this),d={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};t.scrollablePixelsX&&(d.overflowX="auto"),t.scrollablePixelsY&&(d.overflowY="auto"),this.chart=t;let p=this.parentDiv=s("div",{className:"highcharts-scrolling-parent"},{position:"relative"},t.renderTo),f=this.scrollingContainer=s("div",{className:"highcharts-scrolling"},d,p),m=this.innerContainer=s("div",{className:"highcharts-inner-container"},void 0,f),g=this.fixedDiv=s("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:((null===(e=o.style)||void 0===e?void 0:e.zIndex)||0)+2,top:0},void 0,!0),y=this.fixedRenderer=new c(g,t.chartWidth,t.chartHeight,o.style);this.mask=y.path().attr({fill:o.backgroundColor||"#fff","fill-opacity":null!==(r=u.opacity)&&void 0!==r?r:.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),f.parentNode.insertBefore(g,f),l(t.renderTo,{overflow:"visible"}),a(t,"afterShowResetZoom",h),a(t,"afterApplyDrilldown",h),a(t,"afterLayOutTitles",h),a(f,"scroll",(()=>{let{pointer:e,hoverPoint:i}=t;e&&(delete e.chartPosition,i&&(n=i),e.runPointActions(void 0,n,!0))})),m.appendChild(t.container)}applyFixed(){var t;let{chart:e,fixedRenderer:i,isDirty:r,scrollingContainer:o}=this,{axisOffset:a,chartWidth:s,chartHeight:u,container:h,plotHeight:d,plotLeft:p,plotTop:f,plotWidth:m,scrollablePixelsX:g=0,scrollablePixelsY:y=0}=e,{scrollPositionX:v=0,scrollPositionY:x=0}=e.options.chart.scrollablePlotArea||{},_=s+g,b=u+y;i.setSize(s,u),(null===r||void 0===r||r)&&(this.isDirty=!1,this.moveFixedElements()),n(e.container),l(h,{width:"".concat(_,"px"),height:"".concat(b,"px")}),e.renderer.boxWrapper.attr({width:_,height:b,viewBox:[0,0,_,b].join(" ")}),null!==(t=e.chartBackground)&&void 0!==t&&t.attr({width:_,height:b}),l(o,{width:"".concat(s,"px"),height:"".concat(u,"px")}),c(r)||(o.scrollLeft=g*v,o.scrollTop=y*x);let w=f-a[0]-1,S=p-a[3]-1,k=f+d+a[2]+1,C=p+m+a[1]+1,T=p+m-g,A=f+d-y,P=[["M",0,0]];g?P=[["M",0,w],["L",p-1,w],["L",p-1,k],["L",0,k],["Z"],["M",T,w],["L",s,w],["L",s,k],["L",T,k],["Z"]]:y&&(P=[["M",S,0],["L",S,f-1],["L",C,f-1],["L",C,0],["Z"],["M",S,A],["L",S,u],["L",C,u],["L",C,A],["Z"]]),"adjustHeight"!==e.redrawTrigger&&this.mask.attr({d:P})}moveFixedElements(){let t,{container:e,inverted:i,scrollablePixelsX:r,scrollablePixelsY:n}=this.chart,o=this.fixedRenderer,a=f.fixedSelectors;for(let s of(r&&!i?t=".highcharts-yaxis":r&&i||n&&!i?t=".highcharts-xaxis":n&&i&&(t=".highcharts-yaxis"),t&&a.push("".concat(t,":not(.highcharts-radial-axis)"),"".concat(t,"-labels:not(.highcharts-radial-axis-labels)")),a))[].forEach.call(e.querySelectorAll(s),(t=>{(t.namespaceURI===o.SVG_NS?o.box:o.box.parentNode).appendChild(t),t.style.pointerEvents="auto"}))}}return f.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],f})),i(e,"Core/Axis/Stacking/StackItem.js",[e["Core/Templating.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i){let{format:r}=t,{series:n}=e,{destroyObjectProperties:o,fireEvent:a,isNumber:s,pick:l}=i;return class{constructor(t,e,i,r,n){let o=t.chart.inverted,a=t.reversed;this.axis=t;let s=this.isNegative=!!i!=!!a;this.options=e=e||{},this.x=r,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=n,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:e.align||(o?s?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":s?"bottom":"top"),y:e.y,x:e.x},this.textAlign=e.textAlign||(o?s?"right":"left":"center")}destroy(){o(this,this.axis)}render(t){let e=this.axis.chart,i=this.options,n=i.format,o=n?r(n,this,e):i.formatter.call(this);if(this.label)this.label.attr({text:o,visibility:"hidden"});else{this.label=e.renderer.label(o,null,void 0,i.shape,void 0,void 0,i.useHTML,!1,"stack-labels");let r={r:i.borderRadius||0,text:o,padding:l(i.padding,5),visibility:"hidden"};e.styledMode||(r.fill=i.backgroundColor,r.stroke=i.borderColor,r["stroke-width"]=i.borderWidth,this.label.css(i.style||{})),this.label.attr(r),this.label.added||this.label.add(t)}this.label.labelrank=e.plotSizeY,a(this,"afterRender")}setOffset(t,e,i,r,o,c){let{alignOptions:u,axis:h,label:d,options:p,textAlign:f}=this,m=h.chart,g=this.getStackBox({xOffset:t,width:e,boxBottom:i,boxTop:r,defaultX:o,xAxis:c}),{verticalAlign:y}=u;if(d&&g){let t,e=d.getBBox(void 0,0),i=d.padding,r="justify"===l(p.overflow,"justify");u.x=p.x||0,u.y=p.y||0;let{x:o,y:a}=this.adjustStackPosition({labelBox:e,verticalAlign:y,textAlign:f});g.x-=o,g.y-=a,d.align(u,!1,g),(t=m.isInsidePlot(d.alignAttr.x+u.x+o,d.alignAttr.y+u.y+a))||(r=!1),r&&n.prototype.justifyDataLabel.call(h,d,u,d.alignAttr,e,g),d.attr({x:d.alignAttr.x,y:d.alignAttr.y,rotation:p.rotation,rotationOriginX:e.width*{left:0,center:.5,right:1}[p.textAlign||"center"],rotationOriginY:e.height/2}),l(!r&&p.crop,!0)&&(t=s(d.x)&&s(d.y)&&m.isInsidePlot(d.x-i+(d.width||0),d.y)&&m.isInsidePlot(d.x+i,d.y)),d[t?"show":"hide"]()}a(this,"afterSetOffset",{xOffset:t,width:e})}adjustStackPosition(t){let{labelBox:e,verticalAlign:i,textAlign:r}=t,n={bottom:0,middle:1,top:2,right:1,center:0,left:-1},o=n[i],a=n[r];return{x:e.width/2+e.width/2*a,y:e.height/2*o}}getStackBox(t){let e=this.axis,i=e.chart,{boxTop:r,defaultX:n,xOffset:o,width:a,boxBottom:c}=t,u=e.stacking.usePercentage?100:l(r,this.total,0),h=e.toPixels(u),d=t.xAxis||i.xAxis[0],p=l(n,d.translate(this.x))+o,f=Math.abs(h-e.toPixels(c||s(e.min)&&e.logarithmic&&e.logarithmic.lin2log(e.min)||0)),m=i.inverted,g=this.isNegative;return m?{x:(g?h:h-f)-i.plotLeft,y:d.height-p-a,width:f,height:a}:{x:p+d.transB-i.plotLeft,y:(g?h-f:h)-i.plotTop,width:a,height:f}}}})),i(e,"Core/Axis/Stacking/StackingAxis.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/Axis.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Axis/Stacking/StackItem.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n){var o;let{getDeferredAnimation:a}=t,{series:{prototype:s}}=i,{addEvent:l,correctFloat:c,defined:u,destroyObjectProperties:h,fireEvent:d,isArray:p,isNumber:f,objectEach:m,pick:g}=n;function y(){let t=this.inverted;this.axes.forEach((t=>{t.stacking&&t.stacking.stacks&&t.hasVisibleSeries&&(t.stacking.oldStacks=t.stacking.stacks)})),this.series.forEach((e=>{let i=e.xAxis&&e.xAxis.options||{};e.options.stacking&&e.reserveSpace()&&(e.stackKey=[e.type,g(e.options.stack,""),t?i.top:i.left,t?i.height:i.width].join(","))}))}function v(){let t=this.stacking;if(t){var e;let i=t.stacks;m(i,((t,e)=>{h(t),delete i[e]})),null===(e=t.stackTotalGroup)||void 0===e||e.destroy()}}function x(){this.stacking||(this.stacking=new C(this))}function _(t,e,i,r){return!u(t)||t.x!==e||r&&t.stackKey!==r?t={x:e,index:0,key:r,stackKey:r}:t.index++,t.key=[i,e,t.index].join(","),t}function b(){let t,e=this,i=e.yAxis,r=e.stackKey||"",n=i.stacking.stacks,o=e.processedXData,a=e.options.stacking,s=e[a+"Stacker"];s&&[r,"-"+r].forEach((i=>{let r,a,l,c=o.length;for(;c--;){var u,h;r=o[c],t=e.getStackIndicator(t,r,e.index,i),a=null===(u=n[i])||void 0===u?void 0:u[r],(l=null===(h=a)||void 0===h?void 0:h.points[t.key||""])&&s.call(e,l,a,c)}}))}function w(t,e,i){let r=e.total?100/e.total:0;t[0]=c(t[0]*r),t[1]=c(t[1]*r),this.stackedYData[i]=t[1]}function S(t){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?s.setStackedPoints.call(this,t,"group"):t.stacking.resetStacks())}function k(t,e){let i,n,o,a,s,l,h,d,f,m=e||this.options.stacking;if(!m||!this.reserveSpace()||({group:"xAxis"}[m]||"yAxis")!==t.coll)return;let y=this.processedXData,v=this.processedYData,x=[],_=v.length,b=this.options,w=b.threshold||0,S=b.startFromThreshold?w:0,k=b.stack,C=e?"".concat(this.type,",").concat(m):this.stackKey||"",T="-"+C,A=this.negStacks,P=t.stacking,M=P.stacks,E=P.oldStacks;for(P.stacksTouched+=1,h=0;h<_;h++){var I,z;d=y[h],f=v[h],l=(i=this.getStackIndicator(i,d,this.index)).key||"",M[s=(n=A&&f<(S?0:w))?T:C]||(M[s]={}),M[s][d]||(null!==(I=E[s])&&void 0!==I&&I[d]?(M[s][d]=E[s][d],M[s][d].total=null):M[s][d]=new r(t,t.options.stackLabels,!!n,d,k)),o=M[s][d],null!==f?(o.points[l]=o.points[this.index]=[g(o.cumulative,S)],u(o.cumulative)||(o.base=l),o.touched=P.stacksTouched,i.index>0&&!1===this.singleStacks&&(o.points[l][0]=o.points[this.index+","+d+",0"][0])):(delete o.points[l],delete o.points[this.index]);let e=o.total||0;"percent"===m?(a=n?C:T,e=A&&null!==(z=M[a])&&void 0!==z&&z[d]?(a=M[a][d]).total=Math.max(a.total||0,e)+Math.abs(f)||0:c(e+(Math.abs(f)||0))):"group"===m?(p(f)&&(f=f[0]),null!==f&&e++):e=c(e+(f||0)),o.cumulative="group"===m?(e||1)-1:c(g(o.cumulative,S)+(f||0)),o.total=e,null!==f&&(o.points[l].push(o.cumulative),x[h]=o.cumulative,o.hasValidPoints=!0)}"percent"===m&&(P.usePercentage=!0),"group"!==m&&(this.stackedYData=x),P.oldStacks={}}class C{constructor(t){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=t}buildStacks(){let t,e,i=this.axis,r=i.series,n="xAxis"===i.coll,o=i.options.reversedStacks,a=r.length;for(this.resetStacks(),this.usePercentage=!1,e=a;e--;)t=r[o?e:a-e-1],n&&t.setGroupedPoints(i),t.setStackedPoints(i);if(!n)for(e=0;e<a;e++)r[e].modifyStacks();d(i,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,m(this.stacks,(t=>{m(t,(t=>{t.cumulative=t.total}))})))}resetStacks(){m(this.stacks,(t=>{m(t,((e,i)=>{f(e.touched)&&e.touched<this.stacksTouched?(e.destroy(),delete t[i]):(e.total=null,e.cumulative=null)}))}))}renderStackTotals(){var t;let e=this.axis,i=e.chart,r=i.renderer,n=this.stacks,o=a(i,(null===(t=e.options.stackLabels)||void 0===t?void 0:t.animation)||!1),s=this.stackTotalGroup=this.stackTotalGroup||r.g("stack-labels").attr({zIndex:6,opacity:0}).add();s.translate(i.plotLeft,i.plotTop),m(n,(t=>{m(t,(t=>{t.render(s)}))})),s.animate({opacity:1},o)}}return(o||(o={})).compose=function(t,e,i){let r=e.prototype,n=i.prototype;r.getStacks||(l(t,"init",x),l(t,"destroy",v),r.getStacks=y,n.getStackIndicator=_,n.modifyStacks=b,n.percentStacker=w,n.setGroupedPoints=S,n.setStackedPoints=k)},o})),i(e,"Series/Line/LineSeries.js",[e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i){let{defined:r,merge:n,isObject:o}=i;class a extends t{drawGraph(){let t=this.options,e=(this.gappedPath||this.getGraphPath).call(this),i=this.chart.styledMode;[this,...this.zones].forEach(((r,a)=>{let s,l=r.graph,c=l?"animate":"attr",u=r.dashStyle||t.dashStyle;l?(l.endX=this.preventGraphAnimation?null:e.xMap,l.animate({d:e})):e.length&&(r.graph=l=this.chart.renderer.path(e).addClass("highcharts-graph"+(a?" highcharts-zone-graph-".concat(a-1," "):" ")+(a&&r.className||"")).attr({zIndex:1}).add(this.group)),l&&!i&&(s={stroke:!a&&t.lineColor||r.color||this.color||"#cccccc","stroke-width":t.lineWidth||0,fill:this.fillGraph&&this.color||"none"},u?s.dashstyle=u:"square"!==t.linecap&&(s["stroke-linecap"]=s["stroke-linejoin"]="round"),l[c](s).shadow(a<2&&t.shadow&&n({filterUnits:"userSpaceOnUse"},o(t.shadow)?t.shadow:{}))),l&&(l.startX=e.xMap,l.isArea=e.isArea)}))}getGraphPath(t,e,i){let n,o=this,a=o.options,s=[],l=[],c=a.step,u=(t=t||o.points).reversed;return u&&t.reverse(),(c={right:1,center:2}[c]||c&&3)&&u&&(c=4-c),(t=this.getValidPoints(t,!1,!(a.connectNulls&&!e&&!i))).forEach((function(u,h){let d,p=u.plotX,f=u.plotY,m=t[h-1],g=u.isNull||"number"!=typeof f;(u.leftCliff||m&&m.rightCliff)&&!i&&(n=!0),g&&!r(e)&&h>0?n=!a.connectNulls:g&&!e?n=!0:(0===h||n?d=[["M",u.plotX,u.plotY]]:o.getPointSpline?d=[o.getPointSpline(t,u,h)]:c?(d=1===c?[["L",m.plotX,f]]:2===c?[["L",(m.plotX+p)/2,m.plotY],["L",(m.plotX+p)/2,f]]:[["L",p,m.plotY]]).push(["L",p,f]):d=[["L",p,f]],l.push(u.x),c&&(l.push(u.x),2===c&&l.push(u.x)),s.push.apply(s,d),n=!1)})),s.xMap=l,o.graphPath=s,s}}return a.defaultOptions=n(t.defaultOptions,{legendSymbol:"lineMarker"}),e.registerSeriesType("line",a),a})),i(e,"Series/Area/AreaSeriesDefaults.js",[],(function(){return{threshold:0,legendSymbol:"areaMarker"}})),i(e,"Series/Area/AreaSeries.js",[e["Series/Area/AreaSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i){let{seriesTypes:{line:r}}=e,{extend:n,merge:o,objectEach:a,pick:s}=i;class l extends r{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:t,options:e}=this;[this,...this.zones].forEach(((i,r)=>{var n;let o={},a=i.fillColor||e.fillColor,s=i.area,l=s?"animate":"attr";s?(s.endX=this.preventGraphAnimation?null:t.xMap,s.animate({d:t})):(o.zIndex=0,(s=i.area=this.chart.renderer.path(t).addClass("highcharts-area"+(r?" highcharts-zone-area-".concat(r-1," "):" ")+(r&&i.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(o.fill=a||i.color||this.color,o["fill-opacity"]=a?1:null!==(n=e.fillOpacity)&&void 0!==n?n:.75,s.css({pointerEvents:this.stickyTracking?"none":"auto"})),s[l](o),s.startX=t.xMap,s.shiftUnit=e.step?2:1}))}getGraphPath(t){let e,i,n,o=r.prototype.getGraphPath,a=this.options,l=a.stacking,c=this.yAxis,u=[],h=[],d=this.index,p=c.stacking.stacks[this.stackKey],f=a.threshold,m=Math.round(c.getThreshold(a.threshold)),g=s(a.connectNulls,"percent"===l),y=function(i,r,n){let o,a,s=t[i],g=l&&p[s.x].points[d],y=s[n+"Null"]||0,v=s[n+"Cliff"]||0,x=!0;v||y?(o=(y?g[0]:g[1])+v,a=g[0]+v,x=!!y):!l&&t[r]&&t[r].isNull&&(o=a=f),void 0!==o&&(h.push({plotX:e,plotY:null===o?m:c.getThreshold(o),isNull:x,isCliff:!0}),u.push({plotX:e,plotY:null===a?m:c.getThreshold(a),doCurve:!1}))};t=t||this.points,l&&(t=this.getStackPoints(t));for(let r=0,S=t.length;r<S;++r)l||(t[r].leftCliff=t[r].rightCliff=t[r].leftNull=t[r].rightNull=void 0),i=t[r].isNull,e=s(t[r].rectPlotX,t[r].plotX),n=l?s(t[r].yBottom,m):m,i&&!g||(g||y(r,r-1,"left"),i&&!l&&g||(h.push(t[r]),u.push({x:r,plotX:e,plotY:n})),g||y(r,r+1,"right"));let v=o.call(this,h,!0,!0);u.reversed=!0;let x=o.call(this,u,!0,!0),_=x[0];_&&"M"===_[0]&&(x[0]=["L",_[1],_[2]]);let b=v.concat(x);b.length&&b.push(["Z"]);let w=o.call(this,h,!1,g);return b.xMap=v.xMap,this.areaPath=b,w}getStackPoints(t){let e=this,i=[],r=[],n=this.xAxis,o=this.yAxis,l=o.stacking.stacks[this.stackKey],c={},u=o.series,h=u.length,d=o.options.reversedStacks?1:-1,p=u.indexOf(e);if(t=t||this.points,this.options.stacking){for(let e=0;e<t.length;e++)t[e].leftNull=t[e].rightNull=void 0,c[t[e].x]=t[e];a(l,(function(t,e){null!==t.total&&r.push(e)})),r.sort((function(t,e){return t-e}));let f=u.map((t=>t.visible));r.forEach((function(t,a){let m,g,y=0;if(c[t]&&!c[t].isNull)i.push(c[t]),[-1,1].forEach((function(i){let n=1===i?"rightNull":"leftNull",o=l[r[a+i]],s=0;if(o){let i=p;for(;i>=0&&i<h;){let r=u[i].index;!(m=o.points[r])&&(r===e.index?c[t][n]=!0:f[i]&&(g=l[t].points[r])&&(s-=g[1]-g[0])),i+=d}}c[t][1===i?"rightCliff":"leftCliff"]=s}));else{let e=p;for(;e>=0&&e<h;){let i=u[e].index;if(m=l[t].points[i]){y=m[1];break}e+=d}y=s(y,0),y=o.translate(y,0,1,0,1),i.push({isNull:!0,plotX:n.translate(t,0,0,0,1),x:t,plotY:y,yBottom:y})}}))}return i}}return l.defaultOptions=o(r.defaultOptions,t),n(l.prototype,{singleStacks:!1}),e.registerSeriesType("area",l),l})),i(e,"Series/Spline/SplineSeries.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e){let{line:i}=t.seriesTypes,{merge:r,pick:n}=e;class o extends i{getPointSpline(t,e,i){let r,o,a,s,l=e.plotX||0,c=e.plotY||0,u=t[i-1],h=t[i+1];function d(t){return t&&!t.isNull&&!1!==t.doCurve&&!e.isCliff}if(d(u)&&d(h)){let t=u.plotX||0,i=u.plotY||0,n=h.plotX||0,d=h.plotY||0,p=0;r=(1.5*l+t)/2.5,o=(1.5*c+i)/2.5,a=(1.5*l+n)/2.5,s=(1.5*c+d)/2.5,a!==r&&(p=(s-o)*(a-l)/(a-r)+c-s),o+=p,s+=p,o>i&&o>c?(o=Math.max(i,c),s=2*c-o):o<i&&o<c&&(o=Math.min(i,c),s=2*c-o),s>d&&s>c?(s=Math.max(d,c),o=2*c-s):s<d&&s<c&&(s=Math.min(d,c),o=2*c-s),e.rightContX=a,e.rightContY=s,e.controlPoints={low:[r,o],high:[a,s]}}let p=["C",n(u.rightContX,u.plotX,0),n(u.rightContY,u.plotY,0),n(r,l,0),n(o,c,0),l,c];return u.rightContX=u.rightContY=void 0,p}}return o.defaultOptions=r(i.defaultOptions),t.registerSeriesType("spline",o),o})),i(e,"Series/AreaSpline/AreaSplineSeries.js",[e["Series/Spline/SplineSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i){let{area:r,area:{prototype:n}}=e.seriesTypes,{extend:o,merge:a}=i;class s extends t{}return s.defaultOptions=a(t.defaultOptions,r.defaultOptions),o(s.prototype,{getGraphPath:n.getGraphPath,getStackPoints:n.getStackPoints,drawGraph:n.drawGraph}),e.registerSeriesType("areaspline",s),s})),i(e,"Series/Column/ColumnSeriesDefaults.js",[],(function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}})),i(e,"Series/Column/ColumnSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Color/Color.js"],e["Series/Column/ColumnSeriesDefaults.js"],e["Core/Globals.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o,a){let{animObject:s}=t,{parse:l}=e,{noop:c}=r,{clamp:u,crisp:h,defined:d,extend:p,fireEvent:f,isArray:m,isNumber:g,merge:y,pick:v,objectEach:x}=a;class _ extends n{animate(t){let e,i,r=this,n=this.yAxis,o=n.pos,a=n.reversed,l=r.options,{clipOffset:c,inverted:h}=this.chart,d={},f=h?"translateX":"translateY";t&&c?(d.scaleY=.001,i=u(n.toPixels(l.threshold),o,o+n.len),h?(i+=a?-Math.floor(c[0]):Math.ceil(c[2]),d.translateX=i-n.len):(i+=a?Math.ceil(c[0]):-Math.floor(c[2]),d.translateY=i),r.clipBox&&r.setClip(),r.group.attr(d)):(e=Number(r.group.attr(f)),r.group.animate({scaleY:1},p(s(r.options.animation),{step:function(t,i){r.group&&(d[f]=e+i.pos*(o-e),r.group.attr(d))}})))}init(t,e){super.init.apply(this,arguments);let i=this;(t=i.chart).hasRendered&&t.series.forEach((function(t){t.type===i.type&&(t.isDirty=!0)}))}getColumnMetrics(){var t,e;let i,r=this,n=r.options,o=r.xAxis,a=r.yAxis,s=o.options.reversedStacks,l=o.reversed&&!s||!o.reversed&&s,c={},u=0;!1===n.grouping?u=1:r.chart.series.forEach((function(t){let e,n=t.yAxis,o=t.options;t.type===r.type&&t.reserveSpace()&&a.len===n.len&&a.pos===n.pos&&(o.stacking&&"group"!==o.stacking?(void 0===c[i=t.stackKey]&&(c[i]=u++),e=c[i]):!1!==o.grouping&&(e=u++),t.columnIndex=e)}));let h=Math.min(Math.abs(o.transA)*(!(null!==(t=o.brokenAxis)&&void 0!==t&&t.hasBreaks)&&(null===(e=o.ordinal)||void 0===e?void 0:e.slope)||n.pointRange||o.closestPointRange||o.tickInterval||1),o.len),d=h*n.groupPadding,p=(h-2*d)/(u||1),f=Math.min(n.maxPointWidth||o.len,v(n.pointWidth,p*(1-2*n.pointPadding))),m=(r.columnIndex||0)+(l?1:0);return r.columnMetrics={width:f,offset:(p-f)/2+(d+m*p-h/2)*(l?-1:1),paddedWidth:p,columnCount:u},r.columnMetrics}crispCol(t,e,i,r){let n=this.borderWidth,o=this.chart.inverted;return r=h(e+r,n,o)-(e=h(e,n,o)),this.options.crisp&&(i=h(t+i,n)-(t=h(t,n))),{x:t,y:e,width:i,height:r}}adjustForMissingColumns(t,e,i,r){if(!i.isNull&&r.columnCount>1){var n;let o=this.xAxis.series.filter((t=>t.visible)).map((t=>t.index)),a=0,s=0;x(null===(n=this.xAxis.stacking)||void 0===n?void 0:n.stacks,(t=>{if("number"==typeof i.x){let e=t[i.x.toString()];if(e&&m(e.points[this.index])){let t=Object.keys(e.points).filter((t=>!t.match(",")&&e.points[t]&&e.points[t].length>1)).map(parseFloat).filter((t=>-1!==o.indexOf(t))).sort(((t,e)=>e-t));a=t.indexOf(this.index),s=t.length}}})),a=this.xAxis.reversed?s-1-a:a;let l=(s-1)*r.paddedWidth+e;t=(i.plotX||0)+l/2-e-a*r.paddedWidth}return t}translate(){let t=this,e=t.chart,i=t.options,r=t.dense=t.closestPointRange*t.xAxis.transA<2,o=t.borderWidth=v(i.borderWidth,r?0:1),a=t.xAxis,s=t.yAxis,l=i.threshold,c=v(i.minPointLength,5),h=t.getColumnMetrics(),p=h.width,m=t.pointXOffset=h.offset,y=t.dataMin,x=t.dataMax,_=t.translatedThreshold=s.getThreshold(l),b=t.barW=Math.max(p,1+2*o);i.pointPadding&&(b=Math.ceil(b)),n.prototype.translate.apply(t),t.points.forEach((function(r){let n,o=v(r.yBottom,_),f=999+Math.abs(o),w=r.plotX||0,S=u(r.plotY,-f,s.len+f),k=Math.min(S,o),C=Math.max(S,o)-k,T=p,A=w+m,P=b;c&&Math.abs(C)<c&&(C=c,n=!s.reversed&&!r.negative||s.reversed&&r.negative,g(l)&&g(x)&&r.y===l&&x<=l&&(s.min||0)<l&&(y!==x||(s.max||0)<=l)&&(n=!n,r.negative=!r.negative),k=Math.abs(k-_)>c?o-c:_-(n?c:0)),d(r.options.pointWidth)&&(A-=Math.round(((T=P=Math.ceil(r.options.pointWidth))-p)/2)),i.centerInCategory&&!i.stacking&&(A=t.adjustForMissingColumns(A,T,r,h)),r.barX=A,r.pointWidth=T,r.tooltipPos=e.inverted?[u(s.len+s.pos-e.plotLeft-S,s.pos-e.plotLeft,s.len+s.pos-e.plotLeft),a.len+a.pos-e.plotTop-A-P/2,C]:[a.left-e.plotLeft+A+P/2,u(S+s.pos-e.plotTop,s.pos-e.plotTop,s.len+s.pos-e.plotTop),C],r.shapeType=t.pointClass.prototype.shapeType||"roundedRect",r.shapeArgs=t.crispCol(A,r.isNull?_:k,P,r.isNull?0:C)})),f(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(t,e){let i,r,n,o=this.options,a=this.pointAttrToOptions||{},s=a.stroke||"borderColor",c=a["stroke-width"]||"borderWidth",u=t&&t.color||this.color,h=t&&t[s]||o[s]||u,d=t&&t.options.dashStyle||o.dashStyle,p=t&&t[c]||o[c]||this[c]||0,f=v(t&&t.opacity,o.opacity,1);t&&this.zones.length&&(r=t.getZone(),u=t.options.color||r&&(r.color||t.nonZonedColor)||this.color,r&&(h=r.borderColor||h,d=r.dashStyle||d,p=r.borderWidth||p)),e&&t&&(n=(i=y(o.states[e],t.options.states&&t.options.states[e]||{})).brightness,u=i.color||void 0!==n&&l(u).brighten(i.brightness).get()||u,h=i[s]||h,p=i[c]||p,d=i.dashStyle||d,f=v(i.opacity,f));let m={fill:u,stroke:h,"stroke-width":p,opacity:f};return d&&(m.dashstyle=d),m}drawPoints(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,i=this,r=this.chart,n=i.options,o=r.renderer,a=n.animationLimit||250;e.forEach((function(e){let s=e.plotY,l=e.graphic,c=!!l,u=l&&r.pointCount<a?"animate":"attr";g(s)&&null!==e.y?(t=e.shapeArgs,l&&e.hasNewShapeType()&&(l=l.destroy()),i.enabledDataSorting&&(e.startXPos=i.xAxis.reversed?-(t&&t.width||0):i.xAxis.width),!l&&(e.graphic=l=o[e.shapeType](t).add(e.group||i.group),l&&i.enabledDataSorting&&r.hasRendered&&r.pointCount<a&&(l.attr({x:e.startXPos}),c=!0,u="animate")),l&&c&&l[u](y(t)),r.styledMode||l[u](i.pointAttribs(e,e.selected&&"select")).shadow(!1!==e.allowShadow&&n.shadow),l&&(l.addClass(e.getClassName(),!0),l.attr({visibility:e.visible?"inherit":"hidden"}))):l&&(e.graphic=l.destroy())}))}drawTracker(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,i=this,r=i.chart,n=r.pointer,o=function(t){let e=null===n||void 0===n?void 0:n.getPointFromEvent(t);n&&e&&i.options.enableMouseTracking&&(n.isDirectTouch=!0,e.onMouseOver(t))};e.forEach((function(e){t=m(e.dataLabels)?e.dataLabels:e.dataLabel?[e.dataLabel]:[],e.graphic&&(e.graphic.element.point=e),t.forEach((function(t){(t.div||t.element).point=e}))})),i._hasTracking||(i.trackerGroups.forEach((function(t){i[t]&&(i[t].addClass("highcharts-tracker").on("mouseover",o).on("mouseout",(function(t){null===n||void 0===n||n.onTrackerMouseOut(t)})).on("touchstart",o),!r.styledMode&&i.options.cursor&&i[t].css({cursor:i.options.cursor}))})),i._hasTracking=!0),f(this,"afterDrawTracker")}remove(){let t=this,e=t.chart;e.hasRendered&&e.series.forEach((function(e){e.type===t.type&&(e.isDirty=!0)})),n.prototype.remove.apply(t,arguments)}}return _.defaultOptions=y(n.defaultOptions,i),p(_.prototype,{directTouch:!0,getSymbol:c,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),o.registerSeriesType("column",_),_})),i(e,"Core/Series/DataLabel.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Templating.js"],e["Core/Utilities.js"]],(function(t,e,i){var r;let{getDeferredAnimation:n}=t,{format:o}=e,{defined:a,extend:s,fireEvent:l,isArray:c,isString:u,merge:h,objectEach:d,pick:p,pInt:f,splat:m}=i;return function(t){function e(){return _(this).some((t=>null===t||void 0===t?void 0:t.enabled))}function i(t,e,i,r,n){let{chart:o,enabledDataSorting:l}=this,c=this.isCartesian&&o.inverted,u=t.plotX,d=t.plotY,f=i.rotation||0,m=a(u)&&a(d)&&o.isInsidePlot(u,Math.round(d),{inverted:c,paneCoordinates:!0,series:this}),g=0===f&&"justify"===p(i.overflow,l?"none":"justify"),y=this.visible&&!1!==t.visible&&a(u)&&(t.series.forceDL||l&&!g||m||p(i.inside,!!this.options.stacking)&&r&&o.isInsidePlot(u,c?r.x+1:r.y+r.height-1,{inverted:c,paneCoordinates:!0,series:this})),v=t.pos();if(y&&v){var x,_;let a=e.getBBox(),u=e.getBBox(void 0,0),d={right:1,center:.5}[i.align||0]||0,b={bottom:1,middle:.5}[i.verticalAlign||0]||0;if(r=s({x:v[0],y:Math.round(v[1]),width:0,height:0},r||{}),"plotEdges"===i.alignTo&&this.isCartesian&&(r[c?"x":"y"]=0,r[c?"width":"height"]=(null===(x=this.yAxis)||void 0===x?void 0:x.len)||0),s(i,{width:a.width,height:a.height}),_=r,l&&this.xAxis&&!g&&this.setDataLabelStartPos(t,e,n,m,_),e.align(h(i,{width:u.width,height:u.height}),!1,r,!1),e.alignAttr.x+=d*(u.width-a.width),e.alignAttr.y+=b*(u.height-a.height),e[e.placed?"animate":"attr"]({x:e.alignAttr.x+(a.width-u.width)/2,y:e.alignAttr.y+(a.height-u.height)/2,rotationOriginX:(e.width||0)/2,rotationOriginY:(e.height||0)/2}),g&&r.height>=0)this.justifyDataLabel(e,i,e.alignAttr,a,r,n);else if(p(i.crop,!0)){let{x:t,y:i}=e.alignAttr;y=o.isInsidePlot(t,i,{paneCoordinates:!0,series:this})&&o.isInsidePlot(t+a.width-1,i+a.height-1,{paneCoordinates:!0,series:this})}i.shape&&!f&&e[n?"attr":"animate"]({anchorX:v[0],anchorY:v[1]})}n&&l&&(e.placed=!1),y||l&&!g?(e.show(),e.placed=!0):(e.hide(),e.placed=!1)}function r(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function g(t){let e=this.hasRendered||0,i=this.initDataLabelsGroup().attr({opacity:+e});return!e&&i&&(this.visible&&i.show(),this.options.animation?i.animate({opacity:1},t):i.attr({opacity:1})),i}function y(t){var e;let i;t=t||this.points;let r=this,s=r.chart,c=r.options,h=s.renderer,{backgroundColor:g,plotBackgroundColor:y}=s.options.chart,v=h.getContrast(u(y)&&y||u(g)&&g||"#000000"),b=_(r),{animation:w,defer:S}=b[0],k=S?n(s,w,r):{defer:0,duration:0};l(this,"drawDataLabels"),null!==(e=r.hasDataLabels)&&void 0!==e&&e.call(r)&&(i=this.initDataLabels(k),t.forEach((t=>{var e;let n=t.dataLabels||[];m(x(b,t.dlOptions||(null===(e=t.options)||void 0===e?void 0:e.dataLabels))).forEach(((e,l)=>{let m,g,y,x,_,b=e.enabled&&(t.visible||t.dataLabelOnHidden)&&(!t.isNull||t.dataLabelOnNull)&&function(t,e){let i=e.filter;if(i){let e=i.operator,r=t[i.property],n=i.value;return">"===e&&r>n||"<"===e&&r<n||">="===e&&r>=n||"<="===e&&r<=n||"=="===e&&r==n||"==="===e&&r===n||"!="===e&&r!=n||"!=="===e&&r!==n}return!0}(t,e),{backgroundColor:w,borderColor:S,distance:k,style:C={}}=e,T={},A=n[l],P=!A;if(b&&(g=p(e[t.formatPrefix+"Format"],e.format),m=t.getLabelConfig(),y=a(g)?o(g,m,s):(e[t.formatPrefix+"Formatter"]||e.formatter).call(m,e),x=e.rotation,!s.styledMode&&(C.color=p(e.color,C.color,u(r.color)?r.color:void 0,"#000000"),"contrast"===C.color?("none"!==w&&(_=w),t.contrastColor=h.getContrast("auto"!==_&&_||t.color||r.color),C.color=_||!a(k)&&e.inside||0>f(k||0)||c.stacking?t.contrastColor:v):delete t.contrastColor,c.cursor&&(C.cursor=c.cursor)),T={r:e.borderRadius||0,rotation:x,padding:e.padding,zIndex:1},s.styledMode||(T.fill="auto"===w?t.color:w,T.stroke="auto"===S?t.color:S,T["stroke-width"]=e.borderWidth),d(T,((t,e)=>{void 0===t&&delete T[e]}))),!A||b&&a(y)&&!!A.div==!!e.useHTML&&(A.rotation&&e.rotation||A.rotation===e.rotation)||(A=void 0,P=!0),b&&a(y)&&(A?T.text=y:(A=h.label(y,0,0,e.shape,void 0,void 0,e.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+t.colorIndex+" "+(e.className||"")+(e.useHTML?" highcharts-tracker":"")),A)){var M;A.options=e,A.attr(T),s.styledMode||A.css(C).shadow(e.shadow);let o=e[t.formatPrefix+"TextPath"]||e.textPath;o&&!e.useHTML&&(A.setTextPath((null===(M=t.getDataLabelPath)||void 0===M?void 0:M.call(t,A))||t.graphic,o),t.dataLabelPath&&!o.enabled&&(t.dataLabelPath=t.dataLabelPath.destroy())),A.added||A.add(i),r.alignDataLabel(t,A,e,void 0,P),A.isActive=!0,n[l]&&n[l]!==A&&n[l].destroy(),n[l]=A}}));let l=n.length;for(;l--;){var g;n[l]&&n[l].isActive?n[l].isActive=!1:(null!==(g=n[l])&&void 0!==g&&g.destroy(),n.splice(l,1))}t.dataLabel=n[0],t.dataLabels=n}))),l(this,"afterDrawDataLabels")}function v(t,e,i,r,n,o){let a,s,l=this.chart,c=e.align,u=e.verticalAlign,h=t.box?0:t.padding||0,d=l.inverted?this.yAxis:this.xAxis,p=d?d.left-l.plotLeft:0,f=l.inverted?this.xAxis:this.yAxis,m=f?f.top-l.plotTop:0,{x:g=0,y:y=0}=e;return(a=(i.x||0)+h+p)<0&&("right"===c&&g>=0?(e.align="left",e.inside=!0):g-=a,s=!0),(a=(i.x||0)+r.width-h+p)>l.plotWidth&&("left"===c&&g<=0?(e.align="right",e.inside=!0):g+=l.plotWidth-a,s=!0),(a=i.y+h+m)<0&&("bottom"===u&&y>=0?(e.verticalAlign="top",e.inside=!0):y-=a,s=!0),(a=(i.y||0)+r.height-h+m)>l.plotHeight&&("top"===u&&y<=0?(e.verticalAlign="bottom",e.inside=!0):y+=l.plotHeight-a,s=!0),s&&(e.x=g,e.y=y,t.placed=!o,t.align(e,void 0,n)),s}function x(t,e){let i,r=[];if(c(t)&&!c(e))r=t.map((function(t){return h(t,e)}));else if(c(e)&&!c(t))r=e.map((function(e){return h(t,e)}));else if(c(t)||c(e)){if(c(t)&&c(e))for(i=Math.max(t.length,e.length);i--;)r[i]=h(t[i],e[i])}else r=h(t,e);return r}function _(t){var e,i;let r=t.chart.options.plotOptions;return m(x(x(null===r||void 0===r||null===(e=r.series)||void 0===e?void 0:e.dataLabels,null===r||void 0===r||null===(i=r[t.type])||void 0===i?void 0:i.dataLabels),t.options.dataLabels))}function b(t,e,i,r,n){let o=this.chart,a=o.inverted,s=this.xAxis,l=s.reversed,c=((a?e.height:e.width)||0)/2,u=t.pointWidth,h=u?u/2:0;e.startXPos=a?n.x:l?-c-h:s.width-c+h,e.startYPos=a?l?this.yAxis.height-c+h:-c-h:n.y,r?"hidden"===e.visibility&&(e.show(),e.attr({opacity:0}).animate({opacity:1})):e.attr({opacity:1}).animate({opacity:0},void 0,e.hide),o.hasRendered&&(i&&e.attr({x:e.startXPos,y:e.startYPos}),e.placed=!0)}t.compose=function(t){let n=t.prototype;n.initDataLabels||(n.initDataLabels=g,n.initDataLabelsGroup=r,n.alignDataLabel=i,n.drawDataLabels=y,n.justifyDataLabel=v,n.setDataLabelStartPos=b,n.hasDataLabels=e)}}(r||(r={})),r})),i(e,"Series/Column/ColumnDataLabel.js",[e["Core/Series/DataLabel.js"],e["Core/Globals.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i,r){var n;let{composed:o}=e,{series:a}=i,{merge:s,pick:l,pushUnique:c}=r;return function(e){function i(t,e,i,r,n){let o=this.chart.inverted,c=t.series,u=(c.xAxis?c.xAxis.len:this.chart.plotSizeX)||0,h=(c.yAxis?c.yAxis.len:this.chart.plotSizeY)||0,d=t.dlBox||t.shapeArgs,p=l(t.below,t.plotY>l(this.translatedThreshold,h)),f=l(i.inside,!!this.options.stacking);if(d){if(r=s(d),"allow"!==i.overflow||!1!==i.crop){r.y<0&&(r.height+=r.y,r.y=0);let t=r.y+r.height-h;t>0&&t<r.height-1&&(r.height-=t)}o&&(r={x:h-r.y-r.height,y:u-r.x-r.width,width:r.height,height:r.width}),f||(o?(r.x+=p?0:r.width,r.width=0):(r.y+=p?r.height:0,r.height=0))}i.align=l(i.align,!o||f?"center":p?"right":"left"),i.verticalAlign=l(i.verticalAlign,o||f?"middle":p?"top":"bottom"),a.prototype.alignDataLabel.call(this,t,e,i,r,n),i.inside&&t.contrastColor&&e.css({color:t.contrastColor})}e.compose=function(e){t.compose(a),c(o,"ColumnDataLabel")&&(e.prototype.alignDataLabel=i)}}(n||(n={})),n})),i(e,"Series/Bar/BarSeries.js",[e["Series/Column/ColumnSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i){let{extend:r,merge:n}=i;class o extends t{}return o.defaultOptions=n(t.defaultOptions,{}),r(o.prototype,{inverted:!0}),e.registerSeriesType("bar",o),o})),i(e,"Series/Scatter/ScatterSeriesDefaults.js",[],(function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}})),i(e,"Series/Scatter/ScatterSeries.js",[e["Series/Scatter/ScatterSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i){let{column:r,line:n}=e.seriesTypes,{addEvent:o,extend:a,merge:s}=i;class l extends n{applyJitter(){let t=this,e=this.options.jitter,i=this.points.length;e&&this.points.forEach((function(r,n){["x","y"].forEach((function(o,a){if(e[o]&&!r.isNull){let s="plot".concat(o.toUpperCase()),l=t["".concat(o,"Axis")],c=e[o]*l.transA;if(l&&!l.logarithmic){let t=Math.max(0,(r[s]||0)-c),e=Math.min(l.len,(r[s]||0)+c);r[s]=t+(e-t)*function(t){let e=1e4*Math.sin(t);return e-Math.floor(e)}(n+a*i),"x"===o&&(r.clientX=r.plotX)}}}))}))}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return l.defaultOptions=s(n.defaultOptions,t),a(l.prototype,{drawTracker:r.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),o(l,"afterTranslate",(function(){this.applyJitter()})),e.registerSeriesType("scatter",l),l})),i(e,"Series/CenteredUtilities.js",[e["Core/Globals.js"],e["Core/Series/Series.js"],e["Core/Utilities.js"]],(function(t,e,i){var r,n;let{deg2rad:o}=t,{fireEvent:a,isNumber:s,pick:l,relativeLength:c}=i;return(n=r||(r={})).getCenter=function(){let t,i,r,n=this.options,o=this.chart,u=2*(n.slicedOffset||0),h=o.plotWidth-2*u,d=o.plotHeight-2*u,p=n.center,f=Math.min(h,d),m=n.thickness,g=n.size,y=n.innerSize||0;"string"==typeof g&&(g=parseFloat(g)),"string"==typeof y&&(y=parseFloat(y));let v=[l(p[0],"50%"),l(p[1],"50%"),l(g&&g<0?void 0:n.size,"100%"),l(y&&y<0?void 0:n.innerSize||0,"0%")];for(!o.angular||this instanceof e||(v[3]=0),i=0;i<4;++i)r=v[i],t=i<2||2===i&&/%$/.test(r),v[i]=c(r,[h,d,f,v[2]][i])+(t?u:0);return v[3]>v[2]&&(v[3]=v[2]),s(m)&&2*m<v[2]&&m>0&&(v[3]=v[2]-2*m),a(this,"afterGetCenter",{positions:v}),v},n.getStartAndEndRadians=function(t,e){let i=s(t)?t:0,r=s(e)&&e>i&&e-i<360?e:i+360;return{start:o*(i+-90),end:o*(r+-90)}},r})),i(e,"Series/Pie/PiePoint.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],(function(t,e,i){let{setAnimation:r}=t,{addEvent:n,defined:o,extend:a,isNumber:s,pick:l,relativeLength:c}=i;class u extends e{getConnectorPath(t){let e=t.dataLabelPosition,i=t.options||{},r=i.connectorShape,n=this.connectorShapes[r]||r;return e&&n.call(this,{...e.computed,alignment:e.alignment},e.connectorPosition,i)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(t){let e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end,borderRadius:e.borderRadius})}constructor(t,e,i){var r;super(t,e,i),this.half=0,null!==(r=this.name)&&void 0!==r||(this.name="Slice");let o=t=>{this.slice("select"===t.type)};n(this,"select",o),n(this,"unselect",o)}isValid(){return s(this.y)&&this.y>=0}setVisible(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.visible&&this.update({visible:null!==t&&void 0!==t?t:!this.visible},e,void 0,!1)}slice(t,e,i){let n=this.series;r(i,n.chart),e=l(e,!0),this.sliced=this.options.sliced=t=o(t)?t:!this.sliced,n.options.data[n.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return a(u.prototype,{connectorShapes:{fixedOffset:function(t,e,i){let r=e.breakAt,n=e.touchingSliceAt,o=i.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*r.x-n.x,2*r.y-n.y,r.x,r.y]:["L",r.x,r.y];return[["M",t.x,t.y],o,["L",n.x,n.y]]},straight:function(t,e){let i=e.touchingSliceAt;return[["M",t.x,t.y],["L",i.x,i.y]]},crookedLine:function(t,e,i){let{breakAt:r,touchingSliceAt:n}=e,{series:o}=this,[a,s,l]=o.center,u=l/2,{plotLeft:h,plotWidth:d}=o.chart,p="left"===t.alignment,{x:f,y:m}=t,g=r.x;if(i.crookDistance){let t=c(i.crookDistance,1);g=p?a+u+(d+h-a-u)*(1-t):h+(a-u)*t}else g=a+(s-m)*Math.tan((this.angle||0)-Math.PI/2);let y=[["M",f,m]];return(p?g<=f&&g>=r.x:g>=f&&g<=r.x)&&y.push(["L",g,m]),y.push(["L",r.x,r.y],["L",n.x,n.y]),y}}}),u})),i(e,"Series/Pie/PieSeriesDefaults.js",[],(function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}})),i(e,"Series/Pie/PieSeries.js",[e["Series/CenteredUtilities.js"],e["Series/Column/ColumnSeries.js"],e["Core/Globals.js"],e["Series/Pie/PiePoint.js"],e["Series/Pie/PieSeriesDefaults.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/Symbols.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n,o,a,s,l){let{getStartAndEndRadians:c}=t,{noop:u}=i,{clamp:h,extend:d,fireEvent:p,merge:f,pick:m}=l;class g extends o{animate(t){let e=this,i=e.points,r=e.startAngleRad;t||i.forEach((function(t){let i=t.graphic,n=t.shapeArgs;i&&n&&(i.attr({r:m(t.startR,e.center&&e.center[3]/2),start:r,end:r}),i.animate({r:n.r,start:n.start,end:n.end},e.options.animation))}))}drawEmpty(){let t,e,i=this.startAngleRad,r=this.endAngleRad,n=this.options;0===this.total&&this.center?(t=this.center[0],e=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(t,e,this.center[1]/2,0,i,r).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:s.arc(t,e,this.center[2]/2,0,{start:i,end:r,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":n.borderWidth,fill:n.fillColor||"none",stroke:n.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let t=this.chart.renderer;this.points.forEach((function(e){e.graphic&&e.hasNewShapeType()&&(e.graphic=e.graphic.destroy()),e.graphic||(e.graphic=t[e.shapeType](e.shapeArgs).add(e.series.group),e.delayedRendering=!0)}))}generatePoints(){super.generatePoints(),this.updateTotals()}getX(t,e,i,r){let n=this.center,o=this.radii?this.radii[i.index]||0:n[2]/2,a=r.dataLabelPosition,s=(null===a||void 0===a?void 0:a.distance)||0,l=Math.asin(h((t-n[1])/(o+s),-1,1));return n[0]+Math.cos(l)*(o+s)*(e?-1:1)+(s>0?(e?-1:1)*(r.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let t,e,i,r,n=this,o=n.chart;this.drawEmpty(),n.group&&!o.styledMode&&n.group.shadow(n.options.shadow),n.points.forEach((function(a){let s={};e=a.graphic,!a.isNull&&e?(r=a.shapeArgs,t=a.getTranslate(),o.styledMode||(i=n.pointAttribs(a,a.selected&&"select")),a.delayedRendering?(e.setRadialReference(n.center).attr(r).attr(t),o.styledMode||e.attr(i).attr({"stroke-linejoin":"round"}),a.delayedRendering=!1):(e.setRadialReference(n.center),o.styledMode||f(!0,s,i),f(!0,s,r,t),e.animate(s)),e.attr({visibility:a.visible?"inherit":"hidden"}),e.addClass(a.getClassName(),!0)):e&&(a.graphic=e.destroy())}))}sortByAngle(t,e){t.sort((function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e}))}translate(t){p(this,"translate"),this.generatePoints();let e,i,r,n,o,a,s,l=this.options,u=l.slicedOffset,h=c(l.startAngle,l.endAngle),d=this.startAngleRad=h.start,f=(this.endAngleRad=h.end)-d,m=this.points,g=l.ignoreHiddenPoint,y=m.length,v=0;for(t||(this.center=t=this.getCenter()),a=0;a<y;a++){s=m[a],e=d+v*f,s.isValid()&&(!g||s.visible)&&(v+=s.percentage/100),i=d+v*f;let l={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*e)/1e3,end:Math.round(1e3*i)/1e3};s.shapeType="arc",s.shapeArgs=l,(r=(i+e)/2)>1.5*Math.PI?r-=2*Math.PI:r<-Math.PI/2&&(r+=2*Math.PI),s.slicedTranslation={translateX:Math.round(Math.cos(r)*u),translateY:Math.round(Math.sin(r)*u)},n=Math.cos(r)*t[2]/2,o=Math.sin(r)*t[2]/2,s.tooltipPos=[t[0]+.7*n,t[1]+.7*o],s.half=r<-Math.PI/2||r>Math.PI/2?1:0,s.angle=r}p(this,"afterTranslate")}updateTotals(){let t,e,i=this.points,r=i.length,n=this.options.ignoreHiddenPoint,o=0;for(t=0;t<r;t++)(e=i[t]).isValid()&&(!n||e.visible)&&(o+=e.y);for(t=0,this.total=o;t<r;t++)(e=i[t]).percentage=o>0&&(e.visible||!n)?e.y/o*100:0,e.total=o}}return g.defaultOptions=f(o.defaultOptions,n),d(g.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:e.prototype.drawTracker,getCenter:t.getCenter,getSymbol:u,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:e.prototype.pointAttribs,pointClass:r,requireSorting:!1,searchPoint:u,trackerGroups:["group","dataLabelsGroup"]}),a.registerSeriesType("pie",g),g})),i(e,"Series/Pie/PieDataLabel.js",[e["Core/Series/DataLabel.js"],e["Core/Globals.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(t,e,i,r,n){var o;let{composed:a,noop:s}=e,{distribute:l}=i,{series:c}=r,{arrayMax:u,clamp:h,defined:d,pick:p,pushUnique:f,relativeLength:m}=n;return function(e){let i={radialDistributionY:function(t,e){var i;return((null===(i=e.dataLabelPosition)||void 0===i?void 0:i.top)||0)+t.distributeBox.pos},radialDistributionX:function(t,e,i,r,n){let o=n.dataLabelPosition;return t.getX(i<((null===o||void 0===o?void 0:o.top)||0)+2||i>((null===o||void 0===o?void 0:o.bottom)||0)-2?r:i,e.half,e,n)},justify:function(t,e,i,r){var n;return r[0]+(t.half?-1:1)*(i+((null===(n=e.dataLabelPosition)||void 0===n?void 0:n.distance)||0))},alignToPlotEdges:function(t,e,i,r){let n=t.getBBox().width;return e?n+r:i-n-r},alignToConnectors:function(t,e,i,r){let n,o=0;return t.forEach((function(t){(n=t.dataLabel.getBBox().width)>o&&(o=n)})),e?o+r:i-o-r}};function r(t,e){let{center:i,options:r}=this,n=i[2]/2,o=t.angle||0,a=Math.cos(o),s=Math.sin(o),l=i[0]+a*n,c=i[1]+s*n,u=Math.min((r.slicedOffset||0)+(r.borderWidth||0),e/5);return{natural:{x:l+a*e,y:c+s*e},computed:{},alignment:e<0?"center":t.half?"right":"left",connectorPosition:{breakAt:{x:l+a*u,y:c+s*u},touchingSliceAt:{x:l,y:c}},distance:e}}function n(){var t;let e,i,r,n=this,o=n.points,a=n.chart,s=a.plotWidth,h=a.plotHeight,f=a.plotLeft,g=Math.round(a.chartWidth/3),y=n.center,v=y[2]/2,x=y[1],_=[[],[]],b=[0,0,0,0],w=n.dataLabelPositioners,S=0;n.visible&&(null===(t=n.hasDataLabels)||void 0===t?void 0:t.call(n))&&(o.forEach((t=>{(t.dataLabels||[]).forEach((t=>{t.shortened&&(t.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.shortened=!1)}))})),c.prototype.drawDataLabels.apply(n),o.forEach((t=>{(t.dataLabels||[]).forEach(((e,i)=>{var r;let n=y[2]/2,o=e.options,a=m((null===o||void 0===o?void 0:o.distance)||0,n);0===i&&_[t.half].push(t),!d(null===o||void 0===o||null===(r=o.style)||void 0===r?void 0:r.width)&&e.getBBox().width>g&&(e.css({width:Math.round(.7*g)+"px"}),e.shortened=!0),e.dataLabelPosition=this.getDataLabelPosition(t,a),S=Math.max(S,a)}))})),_.forEach(((t,e)=>{let o,c,u,m=t.length,g=[],_=0;m&&(n.sortByAngle(t,e-.5),S>0&&(o=Math.max(0,x-v-S),c=Math.min(x+v+S,a.plotHeight),t.forEach((t=>{(t.dataLabels||[]).forEach((e=>{var i;let r=e.dataLabelPosition;r&&r.distance>0&&(r.top=Math.max(0,x-v-r.distance),r.bottom=Math.min(x+v+r.distance,a.plotHeight),_=e.getBBox().height||21,t.distributeBox={target:((null===(i=e.dataLabelPosition)||void 0===i?void 0:i.natural.y)||0)-r.top+_/2,size:_,rank:t.y},g.push(t.distributeBox))}))})),l(g,u=c+_-o,u/5)),t.forEach((o=>{(o.dataLabels||[]).forEach((a=>{let l=a.options||{},c=o.distributeBox,u=a.dataLabelPosition,m=(null===u||void 0===u?void 0:u.natural.y)||0,x=l.connectorPadding||0,_=0,S=m,k="inherit";if(u){if(g&&d(c)&&u.distance>0&&(void 0===c.pos?k="hidden":(r=c.size,S=w.radialDistributionY(o,a))),l.justify)_=w.justify(o,a,v,y);else switch(l.alignTo){case"connectors":_=w.alignToConnectors(t,e,s,f);break;case"plotEdges":_=w.alignToPlotEdges(a,e,s,f);break;default:_=w.radialDistributionX(n,o,S,m,a)}if(u.attribs={visibility:k,align:u.alignment},u.posAttribs={x:_+(l.x||0)+({left:x,right:-x}[u.alignment]||0),y:S+(l.y||0)-a.getBBox().height/2},u.computed.x=_,u.computed.y=S,p(l.crop,!0)){let t;_-(i=a.getBBox().width)<x&&1===e?(t=Math.round(i-_+x),b[3]=Math.max(t,b[3])):_+i>s-x&&0===e&&(t=Math.round(_+i-s+x),b[1]=Math.max(t,b[1])),S-r/2<0?b[0]=Math.max(Math.round(r/2-S),b[0]):S+r/2>h&&(b[2]=Math.max(Math.round(S+r/2-h),b[2])),u.sideOverflow=t}}}))})))})),(0===u(b)||this.verifyDataLabelOverflow(b))&&(this.placeDataLabels(),this.points.forEach((t=>{(t.dataLabels||[]).forEach((i=>{let{connectorColor:r,connectorWidth:o=1}=i.options||{},s=i.dataLabelPosition;if(o){var l;let c;e=i.connector,s&&s.distance>0?(c=!e,e||(i.connector=e=a.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+t.colorIndex+(t.className?" "+t.className:"")).add(n.dataLabelsGroup)),a.styledMode||e.attr({"stroke-width":o,stroke:r||t.color||"#666666"}),e[c?"attr":"animate"]({d:t.getConnectorPath(i)}),e.attr({visibility:null===(l=s.attribs)||void 0===l?void 0:l.visibility})):e&&(i.connector=e.destroy())}}))}))))}function o(){this.points.forEach((t=>{(t.dataLabels||[]).forEach((t=>{var e;let i=t.dataLabelPosition;i?(i.sideOverflow&&(t.css({width:Math.max(t.getBBox().width-i.sideOverflow,0)+"px",textOverflow:((null===(e=t.options)||void 0===e?void 0:e.style)||{}).textOverflow||"ellipsis"}),t.shortened=!0),t.attr(i.attribs),t[t.moved?"animate":"attr"](i.posAttribs),t.moved=!0):t&&t.attr({y:-9999})})),delete t.distributeBox}),this)}function g(t){let e=this.center,i=this.options,r=i.center,n=i.minSize||80,o=n,a=null!==i.size;return!a&&(null!==r[0]?o=Math.max(e[2]-Math.max(t[1],t[3]),n):(o=Math.max(e[2]-t[1]-t[3],n),e[0]+=(t[3]-t[1])/2),null!==r[1]?o=h(o,n,e[2]-Math.max(t[0],t[2])):(o=h(o,n,e[2]-t[0]-t[2]),e[1]+=(t[0]-t[2])/2),o<e[2]?(e[2]=o,e[3]=Math.min(i.thickness?Math.max(0,o-2*i.thickness):Math.max(0,m(i.innerSize||0,o)),o),this.translate(e),this.drawDataLabels&&this.drawDataLabels()):a=!0),a}e.compose=function(e){if(t.compose(c),f(a,"PieDataLabel")){let t=e.prototype;t.dataLabelPositioners=i,t.alignDataLabel=s,t.drawDataLabels=n,t.getDataLabelPosition=r,t.placeDataLabels=o,t.verifyDataLabelOverflow=g}}}(o||(o={})),o})),i(e,"Extensions/OverlappingDataLabels.js",[e["Core/Utilities.js"]],(function(t){let{addEvent:e,fireEvent:i,objectEach:r,pick:n}=t;function o(t){let e,r,n,o,s,l=t.length,c=(t,e)=>!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y),u=!1;for(let i=0;i<l;i++)(e=t[i])&&(e.oldOpacity=e.opacity,e.newOpacity=1,e.absoluteBox=function(t){if(t&&(!t.alignAttr||t.placed)){var e,i;let r=t.box?0:t.padding||0,n=t.alignAttr||{x:t.attr("x"),y:t.attr("y")},o=t.getBBox();return t.width=o.width,t.height=o.height,{x:n.x+((null===(e=t.parentGroup)||void 0===e?void 0:e.translateX)||0)+r,y:n.y+((null===(i=t.parentGroup)||void 0===i?void 0:i.translateY)||0)+r,width:(t.width||0)-2*r,height:(t.height||0)-2*r}}}(e));t.sort(((t,e)=>(e.labelrank||0)-(t.labelrank||0)));for(let i=0;i<l;++i){o=(r=t[i])&&r.absoluteBox;for(let e=i+1;e<l;++e)s=(n=t[e])&&n.absoluteBox,o&&s&&r!==n&&0!==r.newOpacity&&0!==n.newOpacity&&"hidden"!==r.visibility&&"hidden"!==n.visibility&&c(o,s)&&((r.labelrank<n.labelrank?r:n).newOpacity=0)}for(let i of t)a(i,this)&&(u=!0);u&&i(this,"afterHideAllOverlappingLabels")}function a(t,e){let r,n,o=!1;return t&&(n=t.newOpacity,t.oldOpacity!==n&&(t.hasClass("highcharts-data-label")?(t[n?"removeClass":"addClass"]("highcharts-data-label-hidden"),r=function(){e.styledMode||t.css({pointerEvents:n?"auto":"none"})},o=!0,t[t.isOld?"animate":"attr"]({opacity:n},void 0,r),i(e,"afterHideOverlappingLabel")):t.attr({opacity:n})),t.isOld=!0),o}function s(){let t=this,e=[];for(let r of t.labelCollectors||[])e=e.concat(r());for(let n of t.yAxis||[])n.stacking&&n.options.stackLabels&&!n.options.stackLabels.allowOverlap&&r(n.stacking.stacks,(t=>{r(t,(t=>{t.label&&e.push(t.label)}))}));for(let r of t.series||[]){var i;if(r.visible&&null!==(i=r.hasDataLabels)&&void 0!==i&&i.call(r)){let i=i=>{for(let r of i)r.visible&&(r.dataLabels||[]).forEach((i=>{var o,s;let l=i.options||{};i.labelrank=n(l.labelrank,r.labelrank,null===(o=r.shapeArgs)||void 0===o?void 0:o.height),(null!==(s=l.allowOverlap)&&void 0!==s?s:Number(l.distance)>0)?(i.oldOpacity=i.opacity,i.newOpacity=1,a(i,t)):e.push(i)}))};i(r.nodes||[]),i(r.points)}}this.hideOverlappingLabels(e)}return{compose:function(t){let i=t.prototype;i.hideOverlappingLabels||(i.hideOverlappingLabels=o,e(t,"render",s))}}})),i(e,"Extensions/BorderRadius.js",[e["Core/Defaults.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(t,e,i){let{defaultOptions:r}=t,{noop:n}=e,{addEvent:o,extend:a,isObject:s,merge:l,relativeLength:c}=i,u={radius:0,scope:"stack",where:void 0},h=n,d=n;function p(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=h(t,e,i,r,n),{innerR:a=0,r:s=i,start:l=0,end:u=0}=n;if(n.open||!n.borderRadius)return o;let d=u-l,p=Math.sin(d/2),f=Math.max(Math.min(c(n.borderRadius||0,s-a),(s-a)/2,s*p/(1+p)),0),m=Math.min(f,d/Math.PI*2*a),g=o.length-1;for(;g--;)!function(t,e,i){let r,n,o,a=t[e],s=t[e+1];if("Z"===s[0]&&(s=t[0]),"M"!==a[0]&&"L"!==a[0]||"A"!==s[0]?"A"===a[0]&&("M"===s[0]||"L"===s[0])&&(r=s,n=a):(r=a,n=s,o=!0),r&&n&&n.params){let a=n[1],s=n[5],l=n.params,{start:c,end:u,cx:h,cy:d}=l,p=s?a-i:a+i,f=p?Math.asin(i/p):0,m=s?f:-f,g=Math.cos(f)*p;o?(l.start=c+m,r[1]=h+g*Math.cos(c),r[2]=d+g*Math.sin(c),t.splice(e+1,0,["A",i,i,0,0,1,h+a*Math.cos(l.start),d+a*Math.sin(l.start)])):(l.end=u-m,n[6]=h+a*Math.cos(l.end),n[7]=d+a*Math.sin(l.end),t.splice(e+1,0,["A",i,i,0,0,1,h+g*Math.cos(u),d+g*Math.sin(u)])),n[4]=Math.abs(l.end-l.start)<Math.PI?0:1}}(o,g,g>1?m:f);return o}function f(){if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){var t;let{options:e,yAxis:i}=this,n="percent"===e.stacking,o=null===(t=r.plotOptions)||void 0===t||null===(t=t[this.type])||void 0===t?void 0:t.borderRadius,l=m(e.borderRadius,s(o)?o:{}),u=i.options.reversed;for(let t of this.points){let{shapeArgs:r}=t;if("roundedRect"===t.shapeType&&r){let{width:o=0,height:s=0,y:h=0}=r,d=h,p=s;if("stack"===l.scope&&t.stackTotal){let r=i.translate(n?100:t.stackTotal,!1,!0,!1,!0),o=i.translate(e.threshold||0,!1,!0,!1,!0),a=this.crispCol(0,Math.min(r,o),0,Math.abs(r-o));d=a.y,p=a.height}let f=(t.negative?-1:1)*(u?-1:1)==-1,m=l.where;!m&&this.is("waterfall")&&Math.abs((t.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(m="all"),m||(m="end");let g=Math.min(c(l.radius,o),o/2,"all"===m?s/2:1/0)||0;"end"===m&&(f&&(d-=g),p+=g),a(r,{brBoxHeight:p,brBoxY:d,r:g})}}}}function m(t,e){return s(t)||(t={radius:t||0}),l(u,e,t)}function g(){let t=m(this.options.borderRadius);for(let e of this.points){let i=e.shapeArgs;i&&(i.borderRadius=c(t.radius,(i.r||0)-(i.innerR||0)))}}function y(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=d(t,e,i,r,n),{r:a=0,brBoxHeight:s=r,brBoxY:l=e}=n,c=e-l,u=l+s-(e+r),h=c-a>-.1?0:a,p=u-a>-.1?0:a,f=Math.max(h&&c,0),m=Math.max(p&&u,0),g=[t+h,e],y=[t+i-h,e],v=[t+i,e+h],x=[t+i,e+r-p],_=[t+i-p,e+r],b=[t+p,e+r],w=[t,e+r-p],S=[t,e+h],k=(t,e)=>Math.sqrt(Math.pow(t,2)-Math.pow(e,2));if(f){let t=k(h,h-f);g[0]-=t,y[0]+=t,v[1]=S[1]=e+h-f}if(r<h-f){let n=k(h,h-f-r);v[0]=x[0]=t+i-h+n,_[0]=Math.min(v[0],_[0]),b[0]=Math.max(x[0],b[0]),w[0]=S[0]=t+h-n,v[1]=S[1]=e+r}if(m){let t=k(p,p-m);_[0]+=t,b[0]-=t,x[1]=w[1]=e+r-p+m}if(r<p-m){let n=k(p,p-m-r);v[0]=x[0]=t+i-p+n,y[0]=Math.min(v[0],y[0]),g[0]=Math.max(x[0],g[0]),w[0]=S[0]=t+p-n,x[1]=w[1]=e}return o.length=0,o.push(["M",...g],["L",...y],["A",h,h,0,0,1,...v],["L",...x],["A",p,p,0,0,1,..._],["L",...b],["A",p,p,0,0,1,...w],["L",...S],["A",h,h,0,0,1,...g],["Z"]),o}return{compose:function(t,e,i){let r=t.types.pie;if(!e.symbolCustomAttribs.includes("borderRadius")){let n=i.prototype.symbols;o(t,"afterColumnTranslate",f,{order:9}),o(r,"afterTranslate",g),e.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),h=n.arc,d=n.roundedRect,n.arc=p,n.roundedRect=y}},optionsToObject:m}})),i(e,"Core/Responsive.js",[e["Core/Utilities.js"]],(function(t){var e;let{diffObjects:i,extend:r,find:n,merge:o,pick:a,uniqueKey:s}=t;return function(t){function e(t,e){let i=t.condition;(i.callback||function(){return this.chartWidth<=a(i.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=a(i.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=a(i.minWidth,0)&&this.chartHeight>=a(i.minHeight,0)}).call(this)&&e.push(t._id)}function l(t,e){let r,a=this.options.responsive,l=this.currentResponsive,c=[];!e&&a&&a.rules&&a.rules.forEach((t=>{void 0===t._id&&(t._id=s()),this.matchResponsiveRule(t,c)}),this);let u=o(...c.map((t=>n((a||{}).rules||[],(e=>e._id===t)))).map((t=>t&&t.chartOptions)));u.isResponsiveOptions=!0,c=c.toString()||void 0;let h=l&&l.ruleIds;c!==h&&(l&&this.update(l.undoOptions,t,!0),c?((r=i(u,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:c,mergedOptions:u,undoOptions:r},this.update(u,t,!0)):this.currentResponsive=void 0)}t.compose=function(t){let i=t.prototype;return i.matchResponsiveRule||r(i,{matchResponsiveRule:e,setResponsive:l}),t}}(e||(e={})),e})),i(e,"masters/highcharts.src.js",[e["Core/Globals.js"],e["Core/Utilities.js"],e["Core/Defaults.js"],e["Core/Animation/Fx.js"],e["Core/Animation/AnimationUtilities.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Templating.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Renderer/HTML/HTMLElement.js"],e["Core/Axis/Axis.js"],e["Core/Axis/DateTimeAxis.js"],e["Core/Axis/LogarithmicAxis.js"],e["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],e["Core/Axis/Tick.js"],e["Core/Tooltip.js"],e["Core/Series/Point.js"],e["Core/Pointer.js"],e["Core/Legend/Legend.js"],e["Core/Legend/LegendSymbol.js"],e["Core/Chart/Chart.js"],e["Extensions/ScrollablePlotArea.js"],e["Core/Axis/Stacking/StackingAxis.js"],e["Core/Axis/Stacking/StackItem.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Series/Column/ColumnDataLabel.js"],e["Series/Pie/PieDataLabel.js"],e["Core/Series/DataLabel.js"],e["Extensions/OverlappingDataLabels.js"],e["Extensions/BorderRadius.js"],e["Core/Responsive.js"],e["Core/Color/Color.js"],e["Core/Time.js"]],(function(t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,x,_,b,w,S,k,C,T,A,P,M,E,I,z,L,D,R){return t.AST=o,t.Axis=d,t.Chart=w,t.Color=D,t.DataLabel=E,t.Fx=r,t.HTMLElement=h,t.Legend=_,t.LegendSymbol=b,t.OverlappingDataLabels=t.OverlappingDataLabels||I,t.PlotLineOrBand=m,t.Point=v,t.Pointer=x,t.RendererRegistry=s,t.Series=T,t.SeriesRegistry=A,t.StackItem=C,t.SVGElement=c,t.SVGRenderer=u,t.Templating=a,t.Tick=g,t.Time=R,t.Tooltip=y,t.animate=n.animate,t.animObject=n.animObject,t.chart=w.chart,t.color=D.parse,t.dateFormat=a.dateFormat,t.defaultOptions=i.defaultOptions,t.distribute=l.distribute,t.format=a.format,t.getDeferredAnimation=n.getDeferredAnimation,t.getOptions=i.getOptions,t.numberFormat=a.numberFormat,t.seriesType=A.seriesType,t.setAnimation=n.setAnimation,t.setOptions=i.setOptions,t.stop=n.stop,t.time=i.defaultTime,t.timers=r.timers,z.compose(t.Series,t.SVGElement,t.SVGRenderer),P.compose(t.Series.types.column),E.compose(t.Series),p.compose(t.Axis),h.compose(t.SVGRenderer),_.compose(t.Chart),f.compose(t.Axis),I.compose(t.Chart),M.compose(t.Series.types.pie),m.compose(t.Axis),x.compose(t.Chart),L.compose(t.Chart),S.compose(t.Axis,t.Chart,t.Series),k.compose(t.Axis,t.Chart,t.Series),y.compose(t.Pointer),e.extend(t,e),t})),e["masters/highcharts.src.js"]._modules=e,e["masters/highcharts.src.js"]},t.exports?(o.default=o,t.exports=n&&n.document?o(n):o):void 0===(r=function(){return o(n)}.call(e,i,e,t))||(t.exports=r)},219:(t,e,i)=>{"use strict";var r=i(763),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||n}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,i,r){if("string"!==typeof i){if(f){var n=p(i);n&&n!==f&&t(e,n,r)}var a=u(i);h&&(a=a.concat(h(i)));for(var s=l(e),m=l(i),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(i,y);try{c(e,y,v)}catch(x){}}}}return e}},983:(t,e)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,n=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,s=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,u=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,v=i?Symbol.for("react.fundamental"):60117,x=i?Symbol.for("react.responder"):60118,_=i?Symbol.for("react.scope"):60119;function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case c:case d:case g:case m:case l:return t;default:return e}}case n:return e}}}function w(t){return b(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=n,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||b(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return b(t)===c},e.isContextProvider=function(t){return b(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return b(t)===d},e.isFragment=function(t){return b(t)===o},e.isLazy=function(t){return b(t)===g},e.isMemo=function(t){return b(t)===m},e.isPortal=function(t){return b(t)===n},e.isProfiler=function(t){return b(t)===s},e.isStrictMode=function(t){return b(t)===a},e.isSuspense=function(t){return b(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===p||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===v||t.$$typeof===x||t.$$typeof===_||t.$$typeof===y)},e.typeOf=b},763:(t,e,i)=>{"use strict";t.exports=i(983)},611:(t,e,i)=>{t=i.nmd(t);var r="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",h="[object Proxy]",d="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m[o]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m[s]=m["[object Map]"]=m["[object Number]"]=m[u]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1;var g="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,y="object"==typeof self&&self&&self.Object===Object&&self,v=g||y||Function("return this")(),x=e&&!e.nodeType&&e,_=x&&t&&!t.nodeType&&t,b=_&&_.exports===x,w=b&&g.process,S=function(){try{var t=_&&_.require&&_.require("util").types;return t||w&&w.binding&&w.binding("util")}catch(e){}}(),k=S&&S.isTypedArray;var C,T,A=Array.prototype,P=Function.prototype,M=Object.prototype,E=v["__core-js_shared__"],I=P.toString,z=M.hasOwnProperty,L=function(){var t=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),D=M.toString,R=I.call(Object),O=RegExp("^"+I.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=b?v.Buffer:void 0,F=v.Symbol,j=v.Uint8Array,N=B?B.allocUnsafe:void 0,V=(C=Object.getPrototypeOf,T=Object,function(t){return C(T(t))}),U=Object.create,W=M.propertyIsEnumerable,H=A.splice,G=F?F.toStringTag:void 0,q=function(){try{var t=vt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Z=B?B.isBuffer:void 0,X=Math.max,Y=Date.now,K=vt(v,"Map"),$=vt(Object,"create"),J=function(){function t(){}return function(e){if(!Et(e))return{};if(U)return U(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Q(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function tt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function et(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=this.__data__=new tt(t);this.size=e.size}function rt(t,e){var i=Ct(t),r=!i&&kt(t),n=!i&&!r&&At(t),o=!i&&!r&&!n&&zt(t),a=i||r||n||o,s=a?function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(t.length,String):[],l=s.length;for(var c in t)!e&&!z.call(t,c)||a&&("length"==c||n&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xt(c,l))||s.push(c);return s}function nt(t,e,i){(void 0!==i&&!St(t[e],i)||void 0===i&&!(e in t))&&st(t,e,i)}function ot(t,e,i){var r=t[e];z.call(t,e)&&St(r,i)&&(void 0!==i||e in t)||st(t,e,i)}function at(t,e){for(var i=t.length;i--;)if(St(t[i][0],e))return i;return-1}function st(t,e,i){"__proto__"==e&&q?q(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}Q.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},Q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Q.prototype.get=function(t){var e=this.__data__;if($){var i=e[t];return i===r?void 0:i}return z.call(e,t)?e[t]:void 0},Q.prototype.has=function(t){var e=this.__data__;return $?void 0!==e[t]:z.call(e,t)},Q.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=$&&void 0===e?r:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,i=at(e,t);return!(i<0)&&(i==e.length-1?e.pop():H.call(e,i,1),--this.size,!0)},tt.prototype.get=function(t){var e=this.__data__,i=at(e,t);return i<0?void 0:e[i][1]},tt.prototype.has=function(t){return at(this.__data__,t)>-1},tt.prototype.set=function(t,e){var i=this.__data__,r=at(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(K||tt),string:new Q}},et.prototype.delete=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return yt(this,t).get(t)},et.prototype.has=function(t){return yt(this,t).has(t)},et.prototype.set=function(t,e){var i=yt(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},it.prototype.clear=function(){this.__data__=new tt,this.size=0},it.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},it.prototype.get=function(t){return this.__data__.get(t)},it.prototype.has=function(t){return this.__data__.has(t)},it.prototype.set=function(t,e){var i=this.__data__;if(i instanceof tt){var r=i.__data__;if(!K||r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new et(r)}return i.set(t,e),this.size=i.size,this};var lt,ct=function(t,e,i){for(var r=-1,n=Object(t),o=i(t),a=o.length;a--;){var s=o[lt?a:++r];if(!1===e(n[s],s,n))break}return t};function ut(t){return null==t?void 0===t?d:c:G&&G in Object(t)?function(t){var e=z.call(t,G),i=t[G];try{t[G]=void 0;var r=!0}catch(o){}var n=D.call(t);r&&(e?t[G]=i:delete t[G]);return n}(t):function(t){return D.call(t)}(t)}function ht(t){return It(t)&&ut(t)==o}function dt(t){return!(!Et(t)||function(t){return!!L&&L in t}(t))&&(Pt(t)?O:p).test(function(t){if(null!=t){try{return I.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))}function pt(t){if(!Et(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=_t(t),i=[];for(var r in t)("constructor"!=r||!e&&z.call(t,r))&&i.push(r);return i}function ft(t,e,i,r,n){t!==e&&ct(e,(function(o,a){if(n||(n=new it),Et(o))!function(t,e,i,r,n,o,a){var s=bt(t,i),l=bt(e,i),c=a.get(l);if(c)return void nt(t,i,c);var h=o?o(s,l,i+"",t,e,a):void 0,d=void 0===h;if(d){var p=Ct(l),f=!p&&At(l),m=!p&&!f&&zt(l);h=l,p||f||m?Ct(s)?h=s:It(g=s)&&Tt(g)?h=function(t,e){var i=-1,r=t.length;e||(e=Array(r));for(;++i<r;)e[i]=t[i];return e}(s):f?(d=!1,h=function(t,e){if(e)return t.slice();var i=t.length,r=N?N(i):new t.constructor(i);return t.copy(r),r}(l,!0)):m?(d=!1,h=function(t,e){var i=e?function(t){var e=new t.constructor(t.byteLength);return new j(e).set(new j(t)),e}(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(l,!0)):h=[]:function(t){if(!It(t)||ut(t)!=u)return!1;var e=V(t);if(null===e)return!0;var i=z.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&I.call(i)==R}(l)||kt(l)?(h=s,kt(s)?h=function(t){return function(t,e,i,r){var n=!i;i||(i={});var o=-1,a=e.length;for(;++o<a;){var s=e[o],l=r?r(i[s],t[s],s,i,t):void 0;void 0===l&&(l=t[s]),n?st(i,s,l):ot(i,s,l)}return i}(t,Lt(t))}(s):Et(s)&&!Pt(s)||(h=function(t){return"function"!=typeof t.constructor||_t(t)?{}:J(V(t))}(l))):d=!1}var g;d&&(a.set(l,h),n(h,l,r,o,a),a.delete(l));nt(t,i,h)}(t,e,a,i,ft,r,n);else{var s=r?r(bt(t,a),o,a+"",t,e,n):void 0;void 0===s&&(s=o),nt(t,a,s)}}),Lt)}function mt(t,e){return wt(function(t,e,i){return e=X(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=X(r.length-e,0),a=Array(o);++n<o;)a[n]=r[e+n];n=-1;for(var s=Array(e+1);++n<e;)s[n]=r[n];return s[e]=i(a),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,s)}}(t,e,Ot),t+"")}var gt=q?function(t,e){return q(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:Ot;function yt(t,e){var i=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map}function vt(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return dt(i)?i:void 0}function xt(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&f.test(t))&&t>-1&&t%1==0&&t<e}function _t(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||M)}function bt(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var wt=function(t){var e=0,i=0;return function(){var r=Y(),n=16-(r-i);if(i=r,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(gt);function St(t,e){return t===e||t!==t&&e!==e}var kt=ht(function(){return arguments}())?ht:function(t){return It(t)&&z.call(t,"callee")&&!W.call(t,"callee")},Ct=Array.isArray;function Tt(t){return null!=t&&Mt(t.length)&&!Pt(t)}var At=Z||function(){return!1};function Pt(t){if(!Et(t))return!1;var e=ut(t);return e==s||e==l||e==a||e==h}function Mt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function Et(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function It(t){return null!=t&&"object"==typeof t}var zt=k?function(t){return function(e){return t(e)}}(k):function(t){return It(t)&&Mt(t.length)&&!!m[ut(t)]};function Lt(t){return Tt(t)?rt(t,!0):pt(t)}var Dt,Rt=(Dt=function(t,e,i,r){ft(t,e,i,r)},mt((function(t,e){var i=-1,r=e.length,n=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(n=Dt.length>3&&"function"==typeof n?(r--,n):void 0,o&&function(t,e,i){if(!Et(i))return!1;var r=typeof e;return!!("number"==r?Tt(i)&&xt(e,i.length):"string"==r&&e in i)&&St(i[e],t)}(e[0],e[1],o)&&(n=r<3?void 0:n,r=1),t=Object(t);++i<r;){var a=e[i];a&&Dt(t,a,i,n)}return t})));function Ot(t){return t}t.exports=Rt},730:(t,e,i)=>{"use strict";var r=i(43),n=i(853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t,e,i,r,n,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function x(t,e,i,r){var n=g.hasOwnProperty(e)?g[e]:null;(null!==n?0!==n.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,i,r){if(null===e||"undefined"===typeof e||function(t,e,i,r){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,r))return!0;if(r)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,n,r)&&(i=null),r||null===n?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=null===i?3!==n.type&&"":i:(e=n.attributeName,r=n.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(n=n.type)||4===n&&!0===i?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=D&&t[D]||t["@@iterator"])?t:null}var O,B=Object.assign;function F(t){if(void 0===O)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);O=e&&e[1]||""}return"\n"+O+t}var j=!1;function N(t,e){if(!t||j)return"";j=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),o=r.stack.split("\n"),a=n.length-1,s=o.length-1;1<=a&&0<=s&&n[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(n[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||n[a]!==o[s]){var l="\n"+n[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?F(t):""}function V(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=N(t.type,!1);case 11:return t=N(t.type.render,!1);case 1:return t=N(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case k:return"StrictMode";case M:return"Suspense";case E:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case P:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case I:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case z:e=t._payload,t=t._init;try{return U(t(e))}catch(i){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var n=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Z(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==i&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var i=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function K(t,e){var i=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;i=H(null!=e.value?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&x(t,"checked",e,!1)}function J(t,e){$(t,e);var i=H(e.value),r=e.type;if(null!=i)"number"===r?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,i):e.hasOwnProperty("defaultValue")&&tt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function tt(t,e,i){"number"===e&&X(t.ownerDocument)===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var et=Array.isArray;function it(t,e,i,r){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&r&&(t[i].defaultSelected=!0)}else{for(i=""+H(i),e=null,n=0;n<t.length;n++){if(t[n].value===i)return t[n].selected=!0,void(r&&(t[n].defaultSelected=!0));null!==e||t[n].disabled||(e=t[n])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nt(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(o(92));if(et(i)){if(1<i.length)throw Error(o(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:H(i)}}function ot(t,e){var i=H(e.value),r=H(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var r=0===i.indexOf("--"),n=mt(i,e[i],r);"float"===i&&(i="cssFloat"),r?t.setProperty(i,n):t[i]=n}}Object.keys(pt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var yt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function xt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,kt=null;function Ct(t){if(t=xn(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=bn(e),wt(t.stateNode,t.type,e))}}function Tt(t){St?kt?kt.push(t):kt=[t]:St=t}function At(){if(St){var t=St,e=kt;if(kt=St=null,Ct(t),e)for(t=0;t<e.length;t++)Ct(e[t])}}function Pt(t,e){return t(e)}function Mt(){}var Et=!1;function It(t,e,i){if(Et)return t(e,i);Et=!0;try{return Pt(t,e,i)}finally{Et=!1,(null!==St||null!==kt)&&(Mt(),At())}}function zt(t,e){var i=t.stateNode;if(null===i)return null;var r=bn(i);if(null===r)return null;i=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(o(231,e,typeof i));return i}var Lt=!1;if(u)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(ut){Lt=!1}function Rt(t,e,i,r,n,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(u){this.onError(u)}}var Ot=!1,Bt=null,Ft=!1,jt=null,Nt={onError:function(t){Ot=!0,Bt=t}};function Vt(t,e,i,r,n,o,a,s,l){Ot=!1,Bt=null,Rt.apply(Nt,arguments)}function Ut(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Ht(t){if(Ut(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(o(188));return e!==t?null:t}for(var i=t,r=e;;){var n=i.return;if(null===n)break;var a=n.alternate;if(null===a){if(null!==(r=n.return)){i=r;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===i)return Ht(n),t;if(a===r)return Ht(n),e;a=a.sibling}throw Error(o(188))}if(i.return!==r.return)i=n,r=a;else{for(var s=!1,l=n.child;l;){if(l===i){s=!0,i=n,r=a;break}if(l===r){s=!0,r=n,i=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===i){s=!0,i=a,r=n;break}if(l===r){s=!0,r=a,i=n;break}l=l.sibling}if(!s)throw Error(o(189))}}if(i.alternate!==r)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Zt=n.unstable_scheduleCallback,Xt=n.unstable_cancelCallback,Yt=n.unstable_shouldYield,Kt=n.unstable_requestPaint,$t=n.unstable_now,Jt=n.unstable_getCurrentPriorityLevel,Qt=n.unstable_ImmediatePriority,te=n.unstable_UserBlockingPriority,ee=n.unstable_NormalPriority,ie=n.unstable_LowPriority,re=n.unstable_IdlePriority,ne=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var i=t.pendingLanes;if(0===i)return 0;var r=0,n=t.suspendedLanes,o=t.pingedLanes,a=268435455&i;if(0!==a){var s=a&~n;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=i&~n)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&n)&&((n=r&-r)>=(o=e&-e)||16===n&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&i),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)n=1<<(i=31-ae(e)),r|=t[i],e&=~n;return r}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function ge(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function ye(t,e,i){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=i}function ve(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-ae(i),n=1<<r;n&e|t[r]&e&&(t[r]|=e),i&=~n}}var xe=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var be,we,Se,ke,Ce,Te=!1,Ae=[],Pe=null,Me=null,Ee=null,Ie=new Map,ze=new Map,Le=[],De="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":Pe=null;break;case"dragenter":case"dragleave":Me=null;break;case"mouseover":case"mouseout":Ee=null;break;case"pointerover":case"pointerout":Ie.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(e.pointerId)}}function Oe(t,e,i,r,n,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:o,targetContainers:[n]},null!==e&&(null!==(e=xn(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==n&&-1===e.indexOf(n)&&e.push(n),t)}function Be(t){var e=vn(t.target);if(null!==e){var i=Ut(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=Wt(i)))return t.blockedOn=e,void Ce(t.priority,(function(){Se(i)}))}else if(3===e&&i.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i)return null!==(e=xn(i))&&we(e),t.blockedOn=i,!1;var r=new(i=t.nativeEvent).constructor(i.type,i);_t=r,i.target.dispatchEvent(r),_t=null,e.shift()}return!0}function je(t,e,i){Fe(t)&&i.delete(e)}function Ne(){Te=!1,null!==Pe&&Fe(Pe)&&(Pe=null),null!==Me&&Fe(Me)&&(Me=null),null!==Ee&&Fe(Ee)&&(Ee=null),Ie.forEach(je),ze.forEach(je)}function Ve(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ne)))}function Ue(t){function e(e){return Ve(e,t)}if(0<Ae.length){Ve(Ae[0],t);for(var i=1;i<Ae.length;i++){var r=Ae[i];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Pe&&Ve(Pe,t),null!==Me&&Ve(Me,t),null!==Ee&&Ve(Ee,t),Ie.forEach(e),ze.forEach(e),i=0;i<Le.length;i++)(r=Le[i]).blockedOn===t&&(r.blockedOn=null);for(;0<Le.length&&null===(i=Le[0]).blockedOn;)Be(i),null===i.blockedOn&&Le.shift()}var We=_.ReactCurrentBatchConfig,He=!0;function Ge(t,e,i,r){var n=xe,o=We.transition;We.transition=null;try{xe=1,Ze(t,e,i,r)}finally{xe=n,We.transition=o}}function qe(t,e,i,r){var n=xe,o=We.transition;We.transition=null;try{xe=4,Ze(t,e,i,r)}finally{xe=n,We.transition=o}}function Ze(t,e,i,r){if(He){var n=Ye(t,e,i,r);if(null===n)Wr(t,e,r,Xe,i),Re(t,r);else if(function(t,e,i,r,n){switch(e){case"focusin":return Pe=Oe(Pe,t,e,i,r,n),!0;case"dragenter":return Me=Oe(Me,t,e,i,r,n),!0;case"mouseover":return Ee=Oe(Ee,t,e,i,r,n),!0;case"pointerover":var o=n.pointerId;return Ie.set(o,Oe(Ie.get(o)||null,t,e,i,r,n)),!0;case"gotpointercapture":return o=n.pointerId,ze.set(o,Oe(ze.get(o)||null,t,e,i,r,n)),!0}return!1}(n,t,e,i,r))r.stopPropagation();else if(Re(t,r),4&e&&-1<De.indexOf(t)){for(;null!==n;){var o=xn(n);if(null!==o&&be(o),null===(o=Ye(t,e,i,r))&&Wr(t,e,r,Xe,i),o===n)break;n=o}null!==n&&r.stopPropagation()}else Wr(t,e,r,null,i)}}var Xe=null;function Ye(t,e,i,r){if(Xe=null,null!==(t=vn(t=bt(r))))if(null===(e=Ut(t)))t=null;else if(13===(i=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===i){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ie:return 16;case re:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Qe=null;function ti(){if(Qe)return Qe;var t,e,i=Je,r=i.length,n="value"in $e?$e.value:$e.textContent,o=n.length;for(t=0;t<r&&i[t]===n[t];t++);var a=r-t;for(e=1;e<=a&&i[r-e]===n[o-e];e++);return Qe=n.slice(t,1<e?1-e:void 0)}function ei(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function ii(){return!0}function ri(){return!1}function ni(t){function e(e,i,r,n,o){for(var a in this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=n,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(n):n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ii:ri,this.isPropagationStopped=ri,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),e}var oi,ai,si,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ni(li),ui=B({},li,{view:0,detail:0}),hi=ni(ui),di=B({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ki,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&"mousemove"===t.type?(oi=t.screenX-si.screenX,ai=t.screenY-si.screenY):ai=oi=0,si=t),oi)},movementY:function(t){return"movementY"in t?t.movementY:ai}}),pi=ni(di),fi=ni(B({},di,{dataTransfer:0})),mi=ni(B({},ui,{relatedTarget:0})),gi=ni(B({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=B({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vi=ni(yi),xi=ni(B({},li,{data:0})),_i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wi[t])&&!!e[t]}function ki(){return Si}var Ci=B({},ui,{key:function(t){if(t.key){var e=_i[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ei(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?bi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ki,charCode:function(t){return"keypress"===t.type?ei(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ei(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ti=ni(Ci),Ai=ni(B({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pi=ni(B({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ki})),Mi=ni(B({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ei=B({},di,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ii=ni(Ei),zi=[9,13,27,32],Li=u&&"CompositionEvent"in window,Di=null;u&&"documentMode"in document&&(Di=document.documentMode);var Ri=u&&"TextEvent"in window&&!Di,Oi=u&&(!Li||Di&&8<Di&&11>=Di),Bi=String.fromCharCode(32),Fi=!1;function ji(t,e){switch(t){case"keyup":return-1!==zi.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ni(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vi=!1;var Ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ui[t.type]:"textarea"===e}function Hi(t,e,i,r){Tt(r),0<(e=Gr(e,"onChange")).length&&(i=new ci("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var Gi=null,qi=null;function Zi(t){Br(t,0)}function Xi(t){if(Z(_n(t)))return t}function Yi(t,e){if("change"===t)return e}var Ki=!1;if(u){var $i;if(u){var Ji="oninput"in document;if(!Ji){var Qi=document.createElement("div");Qi.setAttribute("oninput","return;"),Ji="function"===typeof Qi.oninput}$i=Ji}else $i=!1;Ki=$i&&(!document.documentMode||9<document.documentMode)}function tr(){Gi&&(Gi.detachEvent("onpropertychange",er),qi=Gi=null)}function er(t){if("value"===t.propertyName&&Xi(qi)){var e=[];Hi(e,qi,t,bt(t)),It(Zi,e)}}function ir(t,e,i){"focusin"===t?(tr(),qi=i,(Gi=e).attachEvent("onpropertychange",er)):"focusout"===t&&tr()}function rr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xi(qi)}function nr(t,e){if("click"===t)return Xi(e)}function or(t,e){if("input"===t||"change"===t)return Xi(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function sr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!h.call(e,n)||!ar(t[n],e[n]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var i,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function ur(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ur(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hr(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(r){i=!1}if(!i)break;e=X((t=e.contentWindow).document)}return e}function dr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=hr(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&ur(i.ownerDocument.documentElement,i)){if(null!==r&&dr(i))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if((t=(e=i.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var n=i.textContent.length,o=Math.min(r.start,n);r=void 0===r.end?o:Math.min(r.end,n),!t.extend&&o>r&&(n=r,r=o,o=n),n=cr(i,o);var a=cr(i,r);n&&a&&(1!==t.rangeCount||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(n.node,n.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=i;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<e.length;i++)(t=e[i]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function xr(t,e,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;vr||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&sr(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(e=new ci("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=mr)))}function _r(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var br={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},wr={},Sr={};function kr(t){if(wr[t])return wr[t];if(!br[t])return t;var e,i=br[t];for(e in i)if(i.hasOwnProperty(e)&&e in Sr)return wr[t]=i[e];return t}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Cr=kr("animationend"),Tr=kr("animationiteration"),Ar=kr("animationstart"),Pr=kr("transitionend"),Mr=new Map,Er="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){Mr.set(t,e),l(e,[t])}for(var zr=0;zr<Er.length;zr++){var Lr=Er[zr];Ir(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Ir(Cr,"onAnimationEnd"),Ir(Tr,"onAnimationIteration"),Ir(Ar,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Or(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,function(t,e,i,r,n,a,s,l,c){if(Vt.apply(this,arguments),Ot){if(!Ot)throw Error(o(198));var u=Bt;Ot=!1,Bt=null,Ft||(Ft=!0,jt=u)}}(r,e,void 0,t),t.currentTarget=null}function Br(t,e){e=0!==(4&e);for(var i=0;i<t.length;i++){var r=t[i],n=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&n.isPropagationStopped())break t;Or(n,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&n.isPropagationStopped())break t;Or(n,s,c),o=l}}}if(Ft)throw t=jt,Ft=!1,jt=null,t}function Fr(t,e){var i=e[mn];void 0===i&&(i=e[mn]=new Set);var r=t+"__bubble";i.has(r)||(Ur(e,t,2,!1),i.add(r))}function jr(t,e,i){var r=0;e&&(r|=4),Ur(i,t,r,e)}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Nr]){t[Nr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Rr.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Nr]||(e[Nr]=!0,jr("selectionchange",!1,e))}}function Ur(t,e,i,r){switch(Ke(e)){case 1:var n=Ge;break;case 4:n=qe;break;default:n=Ze}i=n.bind(null,e,i,t),n=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(n=!0),r?void 0!==n?t.addEventListener(e,i,{capture:!0,passive:n}):t.addEventListener(e,i,!0):void 0!==n?t.addEventListener(e,i,{passive:n}):t.addEventListener(e,i,!1)}function Wr(t,e,i,r,n){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===n||8===s.nodeType&&s.parentNode===n)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;a=a.return}for(;null!==s;){if(null===(a=vn(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}It((function(){var r=o,n=bt(i),a=[];t:{var s=Mr.get(t);if(void 0!==s){var l=ci,c=t;switch(t){case"keypress":if(0===ei(i))break t;case"keydown":case"keyup":l=Ti;break;case"focusin":c="focus",l=mi;break;case"focusout":c="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pi;break;case Cr:case Tr:case Ar:l=gi;break;case Pr:l=Mi;break;case"scroll":l=hi;break;case"wheel":l=Ii;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ai}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=zt(f,d))&&u.push(Hr(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,i,n),a.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||i===_t||!(c=i.relatedTarget||i.fromElement)||!vn(c)&&!c[fn])&&(l||s)&&(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=i.relatedTarget||i.toElement)?vn(c):null)&&(c!==(h=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pi,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Ai,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:_n(l),p=null==c?s:_n(c),(s=new u(m,f+"leave",l,i,n)).target=h,s.relatedTarget=p,m=null,vn(n)===r&&((u=new u(d,f+"enter",c,i,n)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,f=0,p=u=l;p;p=qr(p))f++;for(p=0,m=d;m;m=qr(m))p++;for(;0<f-p;)u=qr(u),f--;for(;0<p-f;)d=qr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=qr(u),d=qr(d)}u=null}else u=null;null!==l&&Zr(a,s,l,u,!1),null!==c&&null!==h&&Zr(a,h,c,u,!0)}if("select"===(l=(s=r?_n(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yi;else if(Wi(s))if(Ki)g=or;else{g=rr;var y=ir}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=nr);switch(g&&(g=g(t,r))?Hi(a,g,i,n):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?_n(r):window,t){case"focusin":(Wi(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,xr(a,i,n);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":xr(a,i,n)}var v;if(Li)t:{switch(t){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else Vi?ji(t,i)&&(x="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(x="onCompositionStart");x&&(Oi&&"ko"!==i.locale&&(Vi||"onCompositionStart"!==x?"onCompositionEnd"===x&&Vi&&(v=ti()):(Je="value"in($e=n)?$e.value:$e.textContent,Vi=!0)),0<(y=Gr(r,x)).length&&(x=new xi(x,t,null,i,n),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=Ni(i))&&(x.data=v))),(v=Ri?function(t,e){switch(t){case"compositionend":return Ni(e);case"keypress":return 32!==e.which?null:(Fi=!0,Bi);case"textInput":return(t=e.data)===Bi&&Fi?null:t;default:return null}}(t,i):function(t,e){if(Vi)return"compositionend"===t||!Li&&ji(t,e)?(t=ti(),Qe=Je=$e=null,Vi=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Oi&&"ko"!==e.locale?null:e.data}}(t,i))&&(0<(r=Gr(r,"onBeforeInput")).length&&(n=new xi("onBeforeInput","beforeinput",null,i,n),a.push({event:n,listeners:r}),n.data=v))}Br(a,e)}))}function Hr(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Gr(t,e){for(var i=e+"Capture",r=[];null!==t;){var n=t,o=n.stateNode;5===n.tag&&null!==o&&(n=o,null!=(o=zt(t,i))&&r.unshift(Hr(t,o,n)),null!=(o=zt(t,e))&&r.push(Hr(t,o,n))),t=t.return}return r}function qr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Zr(t,e,i,r,n){for(var o=e._reactName,a=[];null!==i&&i!==r;){var s=i,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,n?null!=(l=zt(i,o))&&a.unshift(Hr(i,l,s)):n||null!=(l=zt(i,o))&&a.push(Hr(i,l,s))),i=i.return}0!==a.length&&t.push({event:e,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Kr(t){return("string"===typeof t?t:""+t).replace(Xr,"\n").replace(Yr,"")}function $r(t,e,i){if(e=Kr(e),Kr(t)!==e&&i)throw Error(o(425))}function Jr(){}var Qr=null,tn=null;function en(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,nn="function"===typeof clearTimeout?clearTimeout:void 0,on="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof on?function(t){return on.resolve(null).then(t).catch(sn)}:rn;function sn(t){setTimeout((function(){throw t}))}function ln(t,e){var i=e,r=0;do{var n=i.nextSibling;if(t.removeChild(i),n&&8===n.nodeType)if("/$"===(i=n.data)){if(0===r)return t.removeChild(n),void Ue(e);r--}else"$"!==i&&"$?"!==i&&"$!"!==i||r++;i=n}while(i);Ue(e)}function cn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function un(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var hn=Math.random().toString(36).slice(2),dn="__reactFiber$"+hn,pn="__reactProps$"+hn,fn="__reactContainer$"+hn,mn="__reactEvents$"+hn,gn="__reactListeners$"+hn,yn="__reactHandles$"+hn;function vn(t){var e=t[dn];if(e)return e;for(var i=t.parentNode;i;){if(e=i[fn]||i[dn]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=un(t);null!==t;){if(i=t[dn])return i;t=un(t)}return e}i=(t=i).parentNode}return null}function xn(t){return!(t=t[dn]||t[fn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _n(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function bn(t){return t[pn]||null}var wn=[],Sn=-1;function kn(t){return{current:t}}function Cn(t){0>Sn||(t.current=wn[Sn],wn[Sn]=null,Sn--)}function Tn(t,e){Sn++,wn[Sn]=t.current,t.current=e}var An={},Pn=kn(An),Mn=kn(!1),En=An;function In(t,e){var i=t.type.contextTypes;if(!i)return An;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in i)o[n]=e[n];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function zn(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ln(){Cn(Mn),Cn(Pn)}function Dn(t,e,i){if(Pn.current!==An)throw Error(o(168));Tn(Pn,e),Tn(Mn,i)}function Rn(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return i;for(var n in r=r.getChildContext())if(!(n in e))throw Error(o(108,W(t)||"Unknown",n));return B({},i,r)}function On(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||An,En=Pn.current,Tn(Pn,t),Tn(Mn,Mn.current),!0}function Bn(t,e,i){var r=t.stateNode;if(!r)throw Error(o(169));i?(t=Rn(t,e,En),r.__reactInternalMemoizedMergedChildContext=t,Cn(Mn),Cn(Pn),Tn(Pn,t)):Cn(Mn),Tn(Mn,i)}var Fn=null,jn=!1,Nn=!1;function Vn(t){null===Fn?Fn=[t]:Fn.push(t)}function Un(){if(!Nn&&null!==Fn){Nn=!0;var t=0,e=xe;try{var i=Fn;for(xe=1;t<i.length;t++){var r=i[t];do{r=r(!0)}while(null!==r)}Fn=null,jn=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(t+1)),Zt(Qt,Un),n}finally{xe=e,Nn=!1}}return null}var Wn=[],Hn=0,Gn=null,qn=0,Zn=[],Xn=0,Yn=null,Kn=1,$n="";function Jn(t,e){Wn[Hn++]=qn,Wn[Hn++]=Gn,Gn=t,qn=e}function Qn(t,e,i){Zn[Xn++]=Kn,Zn[Xn++]=$n,Zn[Xn++]=Yn,Yn=t;var r=Kn;t=$n;var n=32-ae(r)-1;r&=~(1<<n),i+=1;var o=32-ae(e)+n;if(30<o){var a=n-n%5;o=(r&(1<<a)-1).toString(32),r>>=a,n-=a,Kn=1<<32-ae(e)+n|i<<n|r,$n=o+t}else Kn=1<<o|i<<n|r,$n=t}function to(t){null!==t.return&&(Jn(t,1),Qn(t,1,0))}function eo(t){for(;t===Gn;)Gn=Wn[--Hn],Wn[Hn]=null,qn=Wn[--Hn],Wn[Hn]=null;for(;t===Yn;)Yn=Zn[--Xn],Zn[Xn]=null,$n=Zn[--Xn],Zn[Xn]=null,Kn=Zn[--Xn],Zn[Xn]=null}var io=null,ro=null,no=!1,oo=null;function ao(t,e){var i=Ic(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,null===(e=t.deletions)?(t.deletions=[i],t.flags|=16):e.push(i)}function so(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,io=t,ro=cn(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,io=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(i=null!==Yn?{id:Kn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},(i=Ic(18,null,null,0)).stateNode=e,i.return=t,t.child=i,io=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(no){var e=ro;if(e){var i=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=cn(i.nextSibling);var r=io;e&&so(t,e)?ao(r,i):(t.flags=-4097&t.flags|2,no=!1,io=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,no=!1,io=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;io=t}function ho(t){if(t!==io)return!1;if(!no)return uo(t),no=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!en(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw po(),Error(o(418));for(;e;)ao(t,e),e=cn(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){ro=cn(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}ro=null}}else ro=io?cn(t.stateNode.nextSibling):null;return!0}function po(){for(var t=ro;t;)t=cn(t.nextSibling)}function fo(){ro=io=null,no=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=_.ReactCurrentBatchConfig;function yo(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var r=i.stateNode}if(!r)throw Error(o(147,t));var n=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=n.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!i._owner)throw Error(o(290,t))}return t}function vo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xo(t){return(0,t._init)(t._payload)}function _o(t){function e(e,i){if(t){var r=e.deletions;null===r?(e.deletions=[i],e.flags|=16):r.push(i)}}function i(i,r){if(!t)return null;for(;null!==r;)e(i,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(t,e){return(t=Lc(t,e)).index=0,t.sibling=null,t}function a(e,i,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<i?(e.flags|=2,i):r:(e.flags|=2,i):(e.flags|=1048576,i)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,i,r){return null===e||6!==e.tag?((e=Bc(i,t.mode,r)).return=t,e):((e=n(e,i)).return=t,e)}function c(t,e,i,r){var o=i.type;return o===S?h(t,e,i.props.children,r,i.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===z&&xo(o)===e.type)?((r=n(e,i.props)).ref=yo(t,e,i),r.return=t,r):((r=Dc(i.type,i.key,i.props,null,t.mode,r)).ref=yo(t,e,i),r.return=t,r)}function u(t,e,i,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Fc(i,t.mode,r)).return=t,e):((e=n(e,i.children||[])).return=t,e)}function h(t,e,i,r,o){return null===e||7!==e.tag?((e=Rc(i,t.mode,r,o)).return=t,e):((e=n(e,i)).return=t,e)}function d(t,e,i){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Bc(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case b:return(i=Dc(e.type,e.key,e.props,null,t.mode,i)).ref=yo(t,null,e),i.return=t,i;case w:return(e=Fc(e,t.mode,i)).return=t,e;case z:return d(t,(0,e._init)(e._payload),i)}if(et(e)||R(e))return(e=Rc(e,t.mode,i,null)).return=t,e;vo(t,e)}return null}function p(t,e,i,r){var n=null!==e?e.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==n?null:l(t,e,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return i.key===n?c(t,e,i,r):null;case w:return i.key===n?u(t,e,i,r):null;case z:return p(t,e,(n=i._init)(i._payload),r)}if(et(i)||R(i))return null!==n?null:h(t,e,i,r,null);vo(t,i)}return null}function f(t,e,i,r,n){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(i)||null,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(e,t=t.get(null===r.key?i:r.key)||null,r,n);case w:return u(e,t=t.get(null===r.key?i:r.key)||null,r,n);case z:return f(t,e,i,(0,r._init)(r._payload),n)}if(et(r)||R(r))return h(e,t=t.get(i)||null,r,n,null);vo(e,r)}return null}function m(n,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(n,h,s[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(n,h),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return i(n,h),no&&Jn(n,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(n,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return no&&Jn(n,m),c}for(h=r(n,h);m<s.length;m++)null!==(g=f(h,n,m,s[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach((function(t){return e(n,t)})),no&&Jn(n,m),c}function g(n,s,l,c){var u=R(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var x=p(n,m,v.value,c);if(null===x){null===m&&(m=y);break}t&&m&&null===x.alternate&&e(n,m),s=a(x,s,g),null===h?u=x:h.sibling=x,h=x,m=y}if(v.done)return i(n,m),no&&Jn(n,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(n,v.value,c))&&(s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return no&&Jn(n,g),u}for(m=r(n,m);!v.done;g++,v=l.next())null!==(v=f(m,n,g,v.value,c))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(n,t)})),no&&Jn(n,g),u}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:t:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){i(r,u.sibling),(o=n(u,a.props.children)).return=r,r=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===z&&xo(c)===u.type){i(r,u.sibling),(o=n(u,a.props)).ref=yo(r,u,a),o.return=r,r=o;break t}i(r,u);break}e(r,u),u=u.sibling}a.type===S?((o=Rc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){i(r,o.sibling),(o=n(o,a.children||[])).return=r,r=o;break t}i(r,o);break}e(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case z:return t(r,o,(u=a._init)(a._payload),l)}if(et(a))return m(r,o,a,l);if(R(a))return g(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(i(r,o.sibling),(o=n(o,a)).return=r,r=o):(i(r,o),(o=Bc(a,r.mode,l)).return=r,r=o),s(r)):i(r,o)}}var bo=_o(!0),wo=_o(!1),So=kn(null),ko=null,Co=null,To=null;function Ao(){To=Co=ko=null}function Po(t){var e=So.current;Cn(So),t._currentValue=e}function Mo(t,e,i){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function Eo(t,e){ko=t,To=Co=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xs=!0),t.firstContext=null)}function Io(t){var e=t._currentValue;if(To!==t)if(t={context:t,memoizedValue:e,next:null},null===Co){if(null===ko)throw Error(o(308));Co=t,ko.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var zo=null;function Lo(t){null===zo?zo=[t]:zo.push(t)}function Do(t,e,i,r){var n=e.interleaved;return null===n?(i.next=i,Lo(e)):(i.next=n.next,n.next=i),e.interleaved=i,Ro(t,r)}function Ro(t,e){t.lanes|=e;var i=t.alternate;for(null!==i&&(i.lanes|=e),i=t,t=t.return;null!==t;)t.childLanes|=e,null!==(i=t.alternate)&&(i.childLanes|=e),i=t,t=t.return;return 3===i.tag?i.stateNode:null}var Oo=!1;function Bo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function No(t,e,i){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var n=r.pending;return null===n?e.next=e:(e.next=n.next,n.next=e),r.pending=e,Ro(t,i)}return null===(n=r.interleaved)?(e.next=e,Lo(r)):(e.next=n.next,n.next=e),r.interleaved=e,Ro(t,i)}function Vo(t,e,i){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&i))){var r=e.lanes;i|=r&=t.pendingLanes,e.lanes=i,ve(t,i)}}function Uo(t,e){var i=t.updateQueue,r=t.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?n=o=a:o=o.next=a,i=i.next}while(null!==i);null===o?n=o=e:o=o.next=e}else n=o=e;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Wo(t,e,i,r){var n=t.updateQueue;Oo=!1;var o=n.firstBaseUpdate,a=n.lastBaseUpdate,s=n.shared.pending;if(null!==s){n.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=n.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,m=s;switch(d=e,p=i,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break t;h=B({},h,d);break t;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=n.effects)?n.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=n.shared.pending))break;s=(d=s).next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}if(null===u&&(l=h),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=u,null!==(e=n.shared.interleaved)){n=e;do{a|=n.lane,n=n.next}while(n!==e)}else null===o&&(n.shared.lanes=0);Ol|=a,t.lanes=a,t.memoizedState=h}}function Ho(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(null!==n){if(r.callback=null,r=i,"function"!==typeof n)throw Error(o(191,n));n.call(r)}}}var Go={},qo=kn(Go),Zo=kn(Go),Xo=kn(Go);function Yo(t){if(t===Go)throw Error(o(174));return t}function Ko(t,e){switch(Tn(Xo,e),Tn(Zo,t),Tn(qo,Go),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Cn(qo),Tn(qo,e)}function $o(){Cn(qo),Cn(Zo),Cn(Xo)}function Jo(t){Yo(Xo.current);var e=Yo(qo.current),i=lt(e,t.type);e!==i&&(Tn(Zo,t),Tn(qo,i))}function Qo(t){Zo.current===t&&(Cn(qo),Cn(Zo))}var ta=kn(0);function ea(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ia=[];function ra(){for(var t=0;t<ia.length;t++)ia[t]._workInProgressVersionPrimary=null;ia.length=0}var na=_.ReactCurrentDispatcher,oa=_.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!ar(t[i],e[i]))return!1;return!0}function ga(t,e,i,r,n,a){if(aa=a,sa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,na.current=null===t||null===t.memoizedState?Qa:ts,t=i(r,n),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,e.updateQueue=null,na.current=es,t=i(r,n)}while(ha)}if(na.current=Ja,e=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,e)throw Error(o(300));return t}function ya(){var t=0!==da;return da=0,t}function va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=t:ca=ca.next=t,ca}function xa(){if(null===la){var t=sa.alternate;t=null!==t?t.memoizedState:null}else t=la.next;var e=null===ca?sa.memoizedState:ca.next;if(null!==e)ca=e,la=t;else{if(null===t)throw Error(o(310));t={memoizedState:(la=t).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=t:ca=ca.next=t}return ca}function _a(t,e){return"function"===typeof e?e(t):e}function ba(t){var e=xa(),i=e.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=t;var r=la,n=r.baseQueue,a=i.pending;if(null!==a){if(null!==n){var s=n.next;n.next=a.next,a.next=s}r.baseQueue=n=a,i.pending=null}if(null!==n){a=n.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,sa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,ar(r,e.memoizedState)||(xs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,i.lastRenderedState=r}if(null!==(t=i.interleaved)){n=t;do{a=n.lane,sa.lanes|=a,Ol|=a,n=n.next}while(n!==t)}else null===n&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function wa(t){var e=xa(),i=e.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=t;var r=i.dispatch,n=i.pending,a=e.memoizedState;if(null!==n){i.pending=null;var s=n=n.next;do{a=t(a,s.action),s=s.next}while(s!==n);ar(a,e.memoizedState)||(xs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),i.lastRenderedState=a}return[a,r]}function Sa(){}function ka(t,e){var i=sa,r=xa(),n=e(),a=!ar(r.memoizedState,n);if(a&&(r.memoizedState=n,xs=!0),r=r.queue,Oa(Aa.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||null!==ca&&1&ca.memoizedState.tag){if(i.flags|=2048,Ia(9,Ta.bind(null,i,r,n,e),void 0,null),null===Ml)throw Error(o(349));0!==(30&aa)||Ca(i,e,n)}return n}function Ca(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.stores=[t]):null===(i=e.stores)?e.stores=[t]:i.push(t)}function Ta(t,e,i,r){e.value=i,e.getSnapshot=r,Pa(e)&&Ma(t)}function Aa(t,e,i){return i((function(){Pa(e)&&Ma(t)}))}function Pa(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!ar(t,i)}catch(r){return!0}}function Ma(t){var e=Ro(t,1);null!==e&&ic(e,t,1,-1)}function Ea(t){var e=va();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},e.queue=t,t=t.dispatch=Xa.bind(null,sa,t),[e.memoizedState,t]}function Ia(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t),t}function za(){return xa().memoizedState}function La(t,e,i,r){var n=va();sa.flags|=t,n.memoizedState=Ia(1|e,i,void 0,void 0===r?null:r)}function Da(t,e,i,r){var n=xa();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(n.memoizedState=Ia(e,i,o,r))}sa.flags|=t,n.memoizedState=Ia(1|e,i,o,r)}function Ra(t,e){return La(8390656,8,t,e)}function Oa(t,e){return Da(2048,8,t,e)}function Ba(t,e){return Da(4,2,t,e)}function Fa(t,e){return Da(4,4,t,e)}function ja(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Na(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,Da(4,4,ja.bind(null,e,t),i)}function Va(){}function Ua(t,e){var i=xa();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function Wa(t,e){var i=xa();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function Ha(t,e,i){return 0===(21&aa)?(t.baseState&&(t.baseState=!1,xs=!0),t.memoizedState=i):(ar(i,e)||(i=me(),sa.lanes|=i,Ol|=i,t.baseState=!0),e)}function Ga(t,e){var i=xe;xe=0!==i&&4>i?i:4,t(!0);var r=oa.transition;oa.transition={};try{t(!1),e()}finally{xe=i,oa.transition=r}}function qa(){return xa().memoizedState}function Za(t,e,i){var r=ec(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},Ya(t))Ka(e,i);else if(null!==(i=Do(t,e,i,r))){ic(i,t,r,tc()),$a(i,e,r)}}function Xa(t,e,i){var r=ec(t),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ya(t))Ka(e,n);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,i);if(n.hasEagerState=!0,n.eagerState=s,ar(s,a)){var l=e.interleaved;return null===l?(n.next=n,Lo(e)):(n.next=l.next,l.next=n),void(e.interleaved=n)}}catch(c){}null!==(i=Do(t,e,n,r))&&(ic(i,t,r,n=tc()),$a(i,e,r))}}function Ya(t){var e=t.alternate;return t===sa||null!==e&&e===sa}function Ka(t,e){ha=ua=!0;var i=t.pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function $a(t,e,i){if(0!==(4194240&i)){var r=e.lanes;i|=r&=t.pendingLanes,e.lanes=i,ve(t,i)}}var Ja={readContext:Io,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Io,useCallback:function(t,e){return va().memoizedState=[t,void 0===e?null:e],t},useContext:Io,useEffect:Ra,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,La(4194308,4,ja.bind(null,e,t),i)},useLayoutEffect:function(t,e){return La(4194308,4,t,e)},useInsertionEffect:function(t,e){return La(4,2,t,e)},useMemo:function(t,e){var i=va();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=va();return e=void 0!==i?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Za.bind(null,sa,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},va().memoizedState=t},useState:Ea,useDebugValue:Va,useDeferredValue:function(t){return va().memoizedState=t},useTransition:function(){var t=Ea(!1),e=t[0];return t=Ga.bind(null,t[1]),va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=sa,n=va();if(no){if(void 0===i)throw Error(o(407));i=i()}else{if(i=e(),null===Ml)throw Error(o(349));0!==(30&aa)||Ca(r,e,i)}n.memoizedState=i;var a={value:i,getSnapshot:e};return n.queue=a,Ra(Aa.bind(null,r,a,t),[t]),r.flags|=2048,Ia(9,Ta.bind(null,r,a,i,e),void 0,null),i},useId:function(){var t=va(),e=Ml.identifierPrefix;if(no){var i=$n;e=":"+e+"R"+(i=(Kn&~(1<<32-ae(Kn)-1)).toString(32)+i),0<(i=da++)&&(e+="H"+i.toString(32)),e+=":"}else e=":"+e+"r"+(i=pa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ts={readContext:Io,useCallback:Ua,useContext:Io,useEffect:Oa,useImperativeHandle:Na,useInsertionEffect:Ba,useLayoutEffect:Fa,useMemo:Wa,useReducer:ba,useRef:za,useState:function(){return ba(_a)},useDebugValue:Va,useDeferredValue:function(t){return Ha(xa(),la.memoizedState,t)},useTransition:function(){return[ba(_a)[0],xa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},es={readContext:Io,useCallback:Ua,useContext:Io,useEffect:Oa,useImperativeHandle:Na,useInsertionEffect:Ba,useLayoutEffect:Fa,useMemo:Wa,useReducer:wa,useRef:za,useState:function(){return wa(_a)},useDebugValue:Va,useDeferredValue:function(t){var e=xa();return null===la?e.memoizedState=t:Ha(e,la.memoizedState,t)},useTransition:function(){return[wa(_a)[0],xa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function is(t,e){if(t&&t.defaultProps){for(var i in e=B({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}return e}function rs(t,e,i,r){i=null===(i=i(r,e=t.memoizedState))||void 0===i?e:B({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var ns={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=tc(),n=ec(t),o=jo(r,n);o.payload=e,void 0!==i&&null!==i&&(o.callback=i),null!==(e=No(t,o,n))&&(ic(e,t,n,r),Vo(e,t,n))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=tc(),n=ec(t),o=jo(r,n);o.tag=1,o.payload=e,void 0!==i&&null!==i&&(o.callback=i),null!==(e=No(t,o,n))&&(ic(e,t,n,r),Vo(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=tc(),r=ec(t),n=jo(i,r);n.tag=2,void 0!==e&&null!==e&&(n.callback=e),null!==(e=No(t,n,r))&&(ic(e,t,r,i),Vo(e,t,r))}};function os(t,e,i,r,n,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!sr(i,r)||!sr(n,o))}function as(t,e,i){var r=!1,n=An,o=e.contextType;return"object"===typeof o&&null!==o?o=Io(o):(n=zn(e)?En:Pn.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?In(t,n):An),e=new e(i,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ns,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),e}function ss(t,e,i,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&ns.enqueueReplaceState(e,e.state,null)}function ls(t,e,i,r){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs={},Bo(t);var o=e.contextType;"object"===typeof o&&null!==o?n.context=Io(o):(o=zn(e)?En:Pn.current,n.context=In(t,o)),n.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(rs(t,e,o,i),n.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(e=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),e!==n.state&&ns.enqueueReplaceState(n,n.state,null),Wo(t,i,n,r),n.state=t.memoizedState),"function"===typeof n.componentDidMount&&(t.flags|=4194308)}function cs(t,e){try{var i="",r=e;do{i+=V(r),r=r.return}while(r);var n=i}catch(o){n="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:n,digest:null}}function us(t,e,i){return{value:t,source:null,stack:null!=i?i:null,digest:null!=e?e:null}}function hs(t,e){try{console.error(e.value)}catch(i){setTimeout((function(){throw i}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(t,e,i){(i=jo(-1,i)).tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){Hl||(Hl=!0,Gl=r),hs(0,e)},i}function fs(t,e,i){(i=jo(-1,i)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var n=e.value;i.payload=function(){return r(n)},i.callback=function(){hs(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){hs(0,e),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),i}function ms(t,e,i){var r=t.pingCache;if(null===r){r=t.pingCache=new ds;var n=new Set;r.set(e,n)}else void 0===(n=r.get(e))&&(n=new Set,r.set(e,n));n.has(i)||(n.add(i),t=Cc.bind(null,t,e,i),e.then(t,t))}function gs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ys(t,e,i,r,n){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((e=jo(-1,1)).tag=2,No(i,e,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=n,t)}var vs=_.ReactCurrentOwner,xs=!1;function _s(t,e,i,r){e.child=null===t?wo(e,null,i,r):bo(e,t.child,i,r)}function bs(t,e,i,r,n){i=i.render;var o=e.ref;return Eo(e,n),r=ga(t,e,i,r,o,n),i=ya(),null===t||xs?(no&&i&&to(e),e.flags|=1,_s(t,e,r,n),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Hs(t,e,n))}function ws(t,e,i,r,n){if(null===t){var o=i.type;return"function"!==typeof o||zc(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=Dc(i.type,null,r,e,e.mode,n)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ss(t,e,o,r,n))}if(o=t.child,0===(t.lanes&n)){var a=o.memoizedProps;if((i=null!==(i=i.compare)?i:sr)(a,r)&&t.ref===e.ref)return Hs(t,e,n)}return e.flags|=1,(t=Lc(o,r)).ref=e.ref,t.return=e,e.child=t}function Ss(t,e,i,r,n){if(null!==t){var o=t.memoizedProps;if(sr(o,r)&&t.ref===e.ref){if(xs=!1,e.pendingProps=r=o,0===(t.lanes&n))return e.lanes=t.lanes,Hs(t,e,n);0!==(131072&t.flags)&&(xs=!0)}}return Ts(t,e,i,r,n)}function ks(t,e,i){var r=e.pendingProps,n=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn(Ll,zl),zl|=i;else{if(0===(1073741824&i))return t=null!==o?o.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tn(Ll,zl),zl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:i,Tn(Ll,zl),zl|=r}else null!==o?(r=o.baseLanes|i,e.memoizedState=null):r=i,Tn(Ll,zl),zl|=r;return _s(t,e,n,i),e.child}function Cs(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function Ts(t,e,i,r,n){var o=zn(i)?En:Pn.current;return o=In(e,o),Eo(e,n),i=ga(t,e,i,r,o,n),r=ya(),null===t||xs?(no&&r&&to(e),e.flags|=1,_s(t,e,i,n),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Hs(t,e,n))}function As(t,e,i,r,n){if(zn(i)){var o=!0;On(e)}else o=!1;if(Eo(e,n),null===e.stateNode)Ws(t,e),as(e,i,r),ls(e,i,r,n),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=Io(c):c=In(e,c=zn(i)?En:Pn.current);var u=i.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(e,a,r,c),Oo=!1;var d=e.memoizedState;a.state=d,Wo(e,r,a,n),l=e.memoizedState,s!==r||d!==l||Mn.current||Oo?("function"===typeof u&&(rs(e,i,u,r),l=e.memoizedState),(s=Oo||os(e,i,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Fo(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:is(e.type,s),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=i.contextType)&&null!==l?l=Io(l):l=In(e,l=zn(i)?En:Pn.current);var p=i.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(e,a,r,l),Oo=!1,d=e.memoizedState,a.state=d,Wo(e,r,a,n);var f=e.memoizedState;s!==h||d!==f||Mn.current||Oo?("function"===typeof p&&(rs(e,i,p,r),f=e.memoizedState),(c=Oo||os(e,i,c,r,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ps(t,e,i,r,o,n)}function Ps(t,e,i,r,n,o){Cs(t,e);var a=0!==(128&e.flags);if(!r&&!a)return n&&Bn(e,i,!1),Hs(t,e,o);r=e.stateNode,vs.current=e;var s=a&&"function"!==typeof i.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=bo(e,t.child,null,o),e.child=bo(e,null,s,o)):_s(t,e,s,o),e.memoizedState=r.state,n&&Bn(e,i,!0),e.child}function Ms(t){var e=t.stateNode;e.pendingContext?Dn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Dn(0,e.context,!1),Ko(t,e.containerInfo)}function Es(t,e,i,r,n){return fo(),mo(n),e.flags|=256,_s(t,e,i,r),e.child}var Is,zs,Ls,Ds,Rs={dehydrated:null,treeContext:null,retryLane:0};function Os(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bs(t,e,i){var r,n=e.pendingProps,a=ta.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Tn(ta,1&a),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=n.children,t=n.fallback,s?(n=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&n)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,n,0,null),t=Rc(t,n,i,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Os(i),e.memoizedState=Rs,t):Fs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,i,r,n,a,s){if(i)return 256&e.flags?(e.flags&=-257,js(t,e,s,r=us(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,n=e.mode,r=Oc({mode:"visible",children:r.children},n,0,null),(a=Rc(a,n,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&bo(e,t.child,null,s),e.child.memoizedState=Os(s),e.memoizedState=Rs,a);if(0===(1&e.mode))return js(t,e,s,null);if("$!"===n.data){if(r=n.nextSibling&&n.nextSibling.dataset)var l=r.dgst;return r=l,js(t,e,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),xs||l){if(null!==(r=Ml)){switch(s&-s){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(r.suspendedLanes|s))?0:n)&&n!==a.retryLane&&(a.retryLane=n,Ro(t,n),ic(r,t,n,-1))}return mc(),js(t,e,s,r=us(Error(o(421))))}return"$?"===n.data?(e.flags|=128,e.child=t.child,e=Ac.bind(null,t),n._reactRetry=e,null):(t=a.treeContext,ro=cn(n.nextSibling),io=e,no=!0,oo=null,null!==t&&(Zn[Xn++]=Kn,Zn[Xn++]=$n,Zn[Xn++]=Yn,Kn=t.id,$n=t.overflow,Yn=e),e=Fs(e,r.children),e.flags|=4096,e)}(t,e,l,n,r,a,i);if(s){s=n.fallback,l=e.mode,r=(a=t.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=c,e.deletions=null):(n=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Lc(r,s):(s=Rc(s,l,i,null)).flags|=2,s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,l=null===(l=t.child.memoizedState)?Os(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~i,e.memoizedState=Rs,n}return t=(s=t.child).sibling,n=Lc(s,{mode:"visible",children:n.children}),0===(1&e.mode)&&(n.lanes=i),n.return=e,n.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n}function Fs(t,e){return(e=Oc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function js(t,e,i,r){return null!==r&&mo(r),bo(e,t.child,null,i),(t=Fs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ns(t,e,i){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Mo(t.return,e,i)}function Vs(t,e,i,r,n){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n)}function Us(t,e,i){var r=e.pendingProps,n=r.revealOrder,o=r.tail;if(_s(t,e,r.children,i),0!==(2&(r=ta.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ns(t,i,e);else if(19===t.tag)Ns(t,i,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tn(ta,r),0===(1&e.mode))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;null!==i;)null!==(t=i.alternate)&&null===ea(t)&&(n=i),i=i.sibling;null===(i=n)?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),Vs(e,!1,n,i,o);break;case"backwards":for(i=null,n=e.child,e.child=null;null!==n;){if(null!==(t=n.alternate)&&null===ea(t)){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}Vs(e,!0,i,null,o);break;case"together":Vs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ws(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hs(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),Ol|=e.lanes,0===(i&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(i=Lc(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Lc(t,t.pendingProps)).return=e;i.sibling=null}return e.child}function Gs(t,e){if(!no)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qs(t){var e=null!==t.alternate&&t.alternate.child===t.child,i=0,r=0;if(e)for(var n=t.child;null!==n;)i|=n.lanes|n.childLanes,r|=14680064&n.subtreeFlags,r|=14680064&n.flags,n.return=t,n=n.sibling;else for(n=t.child;null!==n;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function Zs(t,e,i){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(e),null;case 1:case 17:return zn(e.type)&&Ln(),qs(e),null;case 3:return r=e.stateNode,$o(),Cn(Mn),Cn(Pn),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(ac(oo),oo=null))),zs(t,e),qs(e),null;case 5:Qo(e);var n=Yo(Xo.current);if(i=e.type,null!==t&&null!=e.stateNode)Ls(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return qs(e),null}if(t=Yo(qo.current),ho(e)){r=e.stateNode,i=e.type;var a=e.memoizedProps;switch(r[dn]=e,r[pn]=a,t=0!==(1&e.mode),i){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(n=0;n<Dr.length;n++)Fr(Dr[n],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":nt(r,a),Fr("invalid",r)}for(var l in vt(i,a),n=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,t),n=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,t),n=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(i){case"input":q(r),Q(r,a,!0);break;case"textarea":q(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=n,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(i)),"http://www.w3.org/1999/xhtml"===t?"script"===i?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(i,{is:r.is}):(t=l.createElement(i),"select"===i&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,i),t[dn]=e,t[pn]=r,Is(t,e,!1,!1),e.stateNode=t;t:{switch(l=xt(i,r),i){case"dialog":Fr("cancel",t),Fr("close",t),n=r;break;case"iframe":case"object":case"embed":Fr("load",t),n=r;break;case"video":case"audio":for(n=0;n<Dr.length;n++)Fr(Dr[n],t);n=r;break;case"source":Fr("error",t),n=r;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),n=r;break;case"details":Fr("toggle",t),n=r;break;case"input":K(t,r),n=Y(t,r),Fr("invalid",t);break;case"option":default:n=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=B({},r,{value:void 0}),Fr("invalid",t);break;case"textarea":nt(t,r),n=rt(t,r),Fr("invalid",t)}for(a in vt(i,n),c=n)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?gt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==i||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",t):null!=u&&x(t,a,u,l))}switch(i){case"input":q(t),Q(t,r,!1);break;case"textarea":q(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+H(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?it(t,!!r.multiple,a,!1):null!=r.defaultValue&&it(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof n.onClick&&(t.onclick=Jr)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return qs(e),null;case 6:if(t&&null!=e.stateNode)Ds(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(i=Yo(Xo.current),Yo(qo.current),ho(e)){if(r=e.stateNode,i=e.memoizedProps,r[dn]=e,(a=r.nodeValue!==i)&&null!==(t=io))switch(t.tag){case 3:$r(r.nodeValue,i,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,i,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===i.nodeType?i:i.ownerDocument).createTextNode(r))[dn]=e,e.stateNode=r}return qs(e),null;case 13:if(Cn(ta),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(no&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))po(),fo(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[dn]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;qs(e),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=i,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ta.current)?0===Dl&&(Dl=3):mc())),null!==e.updateQueue&&(e.flags|=4),qs(e),null);case 4:return $o(),zs(t,e),null===t&&Vr(e.stateNode.containerInfo),qs(e),null;case 10:return Po(e.type._context),qs(e),null;case 19:if(Cn(ta),null===(a=e.memoizedState))return qs(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Dl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ea(t))){for(e.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;null!==i;)t=r,(a=i).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Tn(ta,1&ta.current|2),e.child}t=t.sibling}null!==a.tail&&$t()>Ul&&(e.flags|=128,r=!0,Gs(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ea(l))){if(e.flags|=128,r=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!no)return qs(e),null}else 2*$t()-a.renderingStartTime>Ul&&1073741824!==i&&(e.flags|=128,r=!0,Gs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(i=a.last)?i.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$t(),e.sibling=null,i=ta.current,Tn(ta,r?1&i|2:1&i),e):(qs(e),null);case 22:case 23:return hc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&zl)&&(qs(e),6&e.subtreeFlags&&(e.flags|=8192)):qs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Xs(t,e){switch(eo(e),e.tag){case 1:return zn(e.type)&&Ln(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return $o(),Cn(Mn),Cn(Pn),ra(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Qo(e),null;case 13:if(Cn(ta),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Cn(ta),null;case 4:return $o(),null;case 10:return Po(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Is=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},zs=function(){},Ls=function(t,e,i,r){var n=t.memoizedProps;if(n!==r){t=e.stateNode,Yo(qo.current);var o,a=null;switch(i){case"input":n=Y(t,n),r=Y(t,r),a=[];break;case"select":n=B({},n,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":n=rt(t,n),r=rt(t,r),a=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(t.onclick=Jr)}for(u in vt(i,r),i=null,n)if(!r.hasOwnProperty(u)&&n.hasOwnProperty(u)&&null!=n[u])if("style"===u){var l=n[u];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=n?n[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(i||(i={}),i[o]=c[o])}else i||(a||(a=[]),a.push(u,i)),i=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}i&&(a=a||[]).push("style",i);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Ds=function(t,e,i,r){i!==r&&(e.flags|=4)};var Ys=!1,Ks=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(t,e){var i=t.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(r){kc(t,e,r)}else i.current=null}function tl(t,e,i){try{i()}catch(r){kc(t,e,r)}}var el=!1;function il(t,e,i){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{if((n.tag&t)===t){var o=n.destroy;n.destroy=void 0,void 0!==o&&tl(e,i,o)}n=n.next}while(n!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function nl(t){var e=t.ref;if(null!==e){var i=t.stateNode;t.tag,t=i,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dn],delete e[pn],delete e[mn],delete e[gn],delete e[yn])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function sl(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,i){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(ll(t,e,i),t=t.sibling;null!==t;)ll(t,e,i),t=t.sibling}function cl(t,e,i){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,i),t=t.sibling;null!==t;)cl(t,e,i),t=t.sibling}var ul=null,hl=!1;function dl(t,e,i){for(i=i.child;null!==i;)pl(t,e,i),i=i.sibling}function pl(t,e,i){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ne,i)}catch(s){}switch(i.tag){case 5:Ks||Qs(i,e);case 6:var r=ul,n=hl;ul=null,dl(t,e,i),hl=n,null!==(ul=r)&&(hl?(t=ul,i=i.stateNode,8===t.nodeType?t.parentNode.removeChild(i):t.removeChild(i)):ul.removeChild(i.stateNode));break;case 18:null!==ul&&(hl?(t=ul,i=i.stateNode,8===t.nodeType?ln(t.parentNode,i):1===t.nodeType&&ln(t,i),Ue(t)):ln(ul,i.stateNode));break;case 4:r=ul,n=hl,ul=i.stateNode.containerInfo,hl=!0,dl(t,e,i),ul=r,hl=n;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=i.updateQueue)&&null!==(r=r.lastEffect))){n=r=r.next;do{var o=n,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tl(i,e,a),n=n.next}while(n!==r)}dl(t,e,i);break;case 1:if(!Ks&&(Qs(i,e),"function"===typeof(r=i.stateNode).componentWillUnmount))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(s){kc(i,e,s)}dl(t,e,i);break;case 21:dl(t,e,i);break;case 22:1&i.mode?(Ks=(r=Ks)||null!==i.memoizedState,dl(t,e,i),Ks=r):dl(t,e,i);break;default:dl(t,e,i)}}function fl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new $s),e.forEach((function(e){var r=Pc.bind(null,t,e);i.has(e)||(i.add(e),e.then(r,r))}))}}function ml(t,e){var i=e.deletions;if(null!==i)for(var r=0;r<i.length;r++){var n=i[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,n),ul=null,hl=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(u){kc(n,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&r){try{il(3,t,t.return),rl(3,t)}catch(g){kc(t,t.return,g)}try{il(5,t,t.return)}catch(g){kc(t,t.return,g)}}break;case 1:ml(e,t),yl(t),512&r&&null!==i&&Qs(i,i.return);break;case 5:if(ml(e,t),yl(t),512&r&&null!==i&&Qs(i,i.return),32&t.flags){var n=t.stateNode;try{dt(n,"")}catch(g){kc(t,t.return,g)}}if(4&r&&null!=(n=t.stateNode)){var a=t.memoizedProps,s=null!==i?i.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(n,a),xt(l,s);var u=xt(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?gt(n,d):"dangerouslySetInnerHTML"===h?ht(n,d):"children"===h?dt(n,d):x(n,h,d,u)}switch(l){case"input":J(n,a);break;case"textarea":ot(n,a);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?it(n,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?it(n,!!a.multiple,a.defaultValue,!0):it(n,!!a.multiple,a.multiple?[]:"",!1))}n[pn]=a}catch(g){kc(t,t.return,g)}}break;case 6:if(ml(e,t),yl(t),4&r){if(null===t.stateNode)throw Error(o(162));n=t.stateNode,a=t.memoizedProps;try{n.nodeValue=a}catch(g){kc(t,t.return,g)}}break;case 3:if(ml(e,t),yl(t),4&r&&null!==i&&i.memoizedState.isDehydrated)try{Ue(e.containerInfo)}catch(g){kc(t,t.return,g)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(n=t.child).flags&&(a=null!==n.memoizedState,n.stateNode.isHidden=a,!a||null!==n.alternate&&null!==n.alternate.memoizedState||(Vl=$t())),4&r&&fl(t);break;case 22:if(h=null!==i&&null!==i.memoizedState,1&t.mode?(Ks=(u=Ks)||h,ml(e,t),Ks=u):ml(e,t),yl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Js=t,h=t.child;null!==h;){for(d=Js=h;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,i=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){kc(r,i,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Js=f):bl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{n=d.stateNode,u?"function"===typeof(a=n.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=mt("display",s))}catch(g){kc(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){kc(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),yl(t),4&r&&fl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var i=t.return;null!==i;){if(al(i)){var r=i;break t}i=i.return}throw Error(o(160))}switch(r.tag){case 5:var n=r.stateNode;32&r.flags&&(dt(n,""),r.flags&=-33),cl(t,sl(t),n);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(t,sl(t),a);break;default:throw Error(o(161))}}catch(s){kc(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,i){Js=t,xl(t,e,i)}function xl(t,e,i){for(var r=0!==(1&t.mode);null!==Js;){var n=Js,o=n.child;if(22===n.tag&&r){var a=null!==n.memoizedState||Ys;if(!a){var s=n.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=a,(Ks=l)&&!c)for(Js=n;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?wl(n):null!==l?(l.return=a,Js=l):wl(n);for(;null!==o;)Js=o,xl(o,e,i),o=o.sibling;Js=n,Ys=s,Ks=c}_l(t)}else 0!==(8772&n.subtreeFlags)&&null!==o?(o.return=n,Js=o):_l(t)}}function _l(t){for(;null!==Js;){var e=Js;if(0!==(8772&e.flags)){var i=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ks||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ks)if(null===i)r.componentDidMount();else{var n=e.elementType===e.type?i.memoizedProps:is(e.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Ho(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(i=null,null!==e.child)switch(e.child.tag){case 5:case 1:i=e.child.stateNode}Ho(e,s,i)}break;case 5:var l=e.stateNode;if(null===i&&4&e.flags){i=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ue(d)}}}break;default:throw Error(o(163))}Ks||512&e.flags&&nl(e)}catch(p){kc(e,e.return,p)}}if(e===t){Js=null;break}if(null!==(i=e.sibling)){i.return=e.return,Js=i;break}Js=e.return}}function bl(t){for(;null!==Js;){var e=Js;if(e===t){Js=null;break}var i=e.sibling;if(null!==i){i.return=e.return,Js=i;break}Js=e.return}}function wl(t){for(;null!==Js;){var e=Js;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{rl(4,e)}catch(l){kc(e,i,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var n=e.return;try{r.componentDidMount()}catch(l){kc(e,n,l)}}var o=e.return;try{nl(e)}catch(l){kc(e,o,l)}break;case 5:var a=e.return;try{nl(e)}catch(l){kc(e,a,l)}}}catch(l){kc(e,e.return,l)}if(e===t){Js=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Js=s;break}Js=e.return}}var Sl,kl=Math.ceil,Cl=_.ReactCurrentDispatcher,Tl=_.ReactCurrentOwner,Al=_.ReactCurrentBatchConfig,Pl=0,Ml=null,El=null,Il=0,zl=0,Ll=kn(0),Dl=0,Rl=null,Ol=0,Bl=0,Fl=0,jl=null,Nl=null,Vl=0,Ul=1/0,Wl=null,Hl=!1,Gl=null,ql=null,Zl=!1,Xl=null,Yl=0,Kl=0,$l=null,Jl=-1,Ql=0;function tc(){return 0!==(6&Pl)?$t():-1!==Jl?Jl:Jl=$t()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Pl)&&0!==Il?Il&-Il:null!==go.transition?(0===Ql&&(Ql=me()),Ql):0!==(t=xe)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function ic(t,e,i,r){if(50<Kl)throw Kl=0,$l=null,Error(o(185));ye(t,i,r),0!==(2&Pl)&&t===Ml||(t===Ml&&(0===(2&Pl)&&(Bl|=i),4===Dl&&sc(t,Il)),rc(t,r),1===i&&0===Pl&&0===(1&e.mode)&&(Ul=$t()+500,jn&&Un()))}function rc(t,e){var i=t.callbackNode;!function(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,n=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=n[a];-1===l?0!==(s&i)&&0===(s&r)||(n[a]=pe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=de(t,t===Ml?Il:0);if(0===r)null!==i&&Xt(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=i&&Xt(i),1===e)0===t.tag?function(t){jn=!0,Vn(t)}(lc.bind(null,t)):Vn(lc.bind(null,t)),an((function(){0===(6&Pl)&&Un()})),i=null;else{switch(_e(r)){case 1:i=Qt;break;case 4:i=te;break;case 16:default:i=ee;break;case 536870912:i=re}i=Mc(i,nc.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function nc(t,e){if(Jl=-1,Ql=0,0!==(6&Pl))throw Error(o(327));var i=t.callbackNode;if(wc()&&t.callbackNode!==i)return null;var r=de(t,t===Ml?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gc(t,r);else{e=r;var n=Pl;Pl|=2;var a=fc();for(Ml===t&&Il===e||(Wl=null,Ul=$t()+500,dc(t,e));;)try{vc();break}catch(l){pc(t,l)}Ao(),Cl.current=a,Pl=n,null!==El?e=0:(Ml=null,Il=0,e=Dl)}if(0!==e){if(2===e&&(0!==(n=fe(t))&&(r=n,e=oc(t,n))),1===e)throw i=Rl,dc(t,0),sc(t,r),rc(t,$t()),i;if(6===e)sc(t,r);else{if(n=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var i=e.updateQueue;if(null!==i&&null!==(i=i.stores))for(var r=0;r<i.length;r++){var n=i[r],o=n.getSnapshot;n=n.value;try{if(!ar(o(),n))return!1}catch(s){return!1}}}if(i=e.child,16384&e.subtreeFlags&&null!==i)i.return=e,e=i;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(n)&&(2===(e=gc(t,r))&&(0!==(a=fe(t))&&(r=a,e=oc(t,a))),1===e))throw i=Rl,dc(t,0),sc(t,r),rc(t,$t()),i;switch(t.finishedWork=n,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:bc(t,Nl,Wl);break;case 3:if(sc(t,r),(130023424&r)===r&&10<(e=Vl+500-$t())){if(0!==de(t,0))break;if(((n=t.suspendedLanes)&r)!==r){tc(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=rn(bc.bind(null,t,Nl,Wl),e);break}bc(t,Nl,Wl);break;case 4:if(sc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,n=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>n&&(n=s),r&=~a}if(r=n,10<(r=(120>(r=$t()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){t.timeoutHandle=rn(bc.bind(null,t,Nl,Wl),r);break}bc(t,Nl,Wl);break;default:throw Error(o(329))}}}return rc(t,$t()),t.callbackNode===i?nc.bind(null,t):null}function oc(t,e){var i=jl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=gc(t,e))&&(e=Nl,Nl=i,null!==e&&ac(e)),t}function ac(t){null===Nl?Nl=t:Nl.push.apply(Nl,t)}function sc(t,e){for(e&=~Fl,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-ae(e),r=1<<i;t[i]=-1,e&=~r}}function lc(t){if(0!==(6&Pl))throw Error(o(327));wc();var e=de(t,0);if(0===(1&e))return rc(t,$t()),null;var i=gc(t,e);if(0!==t.tag&&2===i){var r=fe(t);0!==r&&(e=r,i=oc(t,r))}if(1===i)throw i=Rl,dc(t,0),sc(t,e),rc(t,$t()),i;if(6===i)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bc(t,Nl,Wl),rc(t,$t()),null}function cc(t,e){var i=Pl;Pl|=1;try{return t(e)}finally{0===(Pl=i)&&(Ul=$t()+500,jn&&Un())}}function uc(t){null!==Xl&&0===Xl.tag&&0===(6&Pl)&&wc();var e=Pl;Pl|=1;var i=Al.transition,r=xe;try{if(Al.transition=null,xe=1,t)return t()}finally{xe=r,Al.transition=i,0===(6&(Pl=e))&&Un()}}function hc(){zl=Ll.current,Cn(Ll)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,nn(i)),null!==El)for(i=El.return;null!==i;){var r=i;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ln();break;case 3:$o(),Cn(Mn),Cn(Pn),ra();break;case 5:Qo(r);break;case 4:$o();break;case 13:case 19:Cn(ta);break;case 10:Po(r.type._context);break;case 22:case 23:hc()}i=i.return}if(Ml=t,El=t=Lc(t.current,null),Il=zl=e,Dl=0,Rl=null,Fl=Bl=Ol=0,Nl=jl=null,null!==zo){for(e=0;e<zo.length;e++)if(null!==(r=(i=zo[e]).interleaved)){i.interleaved=null;var n=r.next,o=i.pending;if(null!==o){var a=o.next;o.next=n,r.next=a}i.pending=r}zo=null}return t}function pc(t,e){for(;;){var i=El;try{if(Ao(),na.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Tl.current=null,null===i||null===i.return){Dl=1,Rl=e,El=null;break}t:{var a=t,s=i.return,l=i,c=e;if(e=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,e),1&f.mode&&ms(a,u,e),c=u;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0===(1&e)){ms(a,u,e),mc();break t}c=Error(o(426))}else if(no&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,e),mo(cs(c,l));break t}}a=c=cs(c,l),4!==Dl&&(Dl=2),null===jl?jl=[a]:jl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Uo(a,ps(0,c,e));break t;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===ql||!ql.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e,Uo(a,fs(a,l,e));break t}}a=a.return}while(null!==a)}_c(i)}catch(_){e=_,El===i&&null!==i&&(El=i=i.return);continue}break}}function fc(){var t=Cl.current;return Cl.current=Ja,null===t?Ja:t}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ml||0===(268435455&Ol)&&0===(268435455&Bl)||sc(Ml,Il)}function gc(t,e){var i=Pl;Pl|=2;var r=fc();for(Ml===t&&Il===e||(Wl=null,dc(t,e));;)try{yc();break}catch(n){pc(t,n)}if(Ao(),Pl=i,Cl.current=r,null!==El)throw Error(o(261));return Ml=null,Il=0,Dl}function yc(){for(;null!==El;)xc(El)}function vc(){for(;null!==El&&!Yt();)xc(El)}function xc(t){var e=Sl(t.alternate,t,zl);t.memoizedProps=t.pendingProps,null===e?_c(t):El=e,Tl.current=null}function _c(t){var e=t;do{var i=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(i=Zs(i,e,zl)))return void(El=i)}else{if(null!==(i=Xs(i,e)))return i.flags&=32767,void(El=i);if(null===t)return Dl=6,void(El=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(El=e);El=e=t}while(null!==e);0===Dl&&(Dl=5)}function bc(t,e,i){var r=xe,n=Al.transition;try{Al.transition=null,xe=1,function(t,e,i,r){do{wc()}while(null!==Xl);if(0!==(6&Pl))throw Error(o(327));i=t.finishedWork;var n=t.finishedLanes;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var n=31-ae(i),o=1<<n;e[n]=0,r[n]=-1,t[n]=-1,i&=~o}}(t,a),t===Ml&&(El=Ml=null,Il=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Zl||(Zl=!0,Mc(ee,(function(){return wc(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=Al.transition,Al.transition=null;var s=xe;xe=1;var l=Pl;Pl|=4,Tl.current=null,function(t,e){if(Qr=He,dr(t=hr())){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(i=(i=t.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var n=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{i.nodeType,a.nodeType}catch(b){i=null;break t}var s=0,l=-1,c=-1,u=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==i||0!==n&&3!==d.nodeType||(l=s+n),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===i&&++u===n&&(l=s),p===a&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(tn={focusedElem:t,selectionRange:i},He=!1,Js=e;null!==Js;)if(t=(e=Js).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Js=t;else for(;null!==Js;){e=Js;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:is(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(b){kc(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Js=t;break}Js=e.return}m=el,el=!1}(t,i),gl(i,t),pr(tn),He=!!Qr,tn=Qr=null,t.current=i,vl(i,t,n),Kt(),Pl=l,xe=s,Al.transition=a}else t.current=i;if(Zl&&(Zl=!1,Xl=t,Yl=n),a=t.pendingLanes,0===a&&(ql=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ne,t,void 0,128===(128&t.current.flags))}catch(e){}}(i.stateNode),rc(t,$t()),null!==e)for(r=t.onRecoverableError,i=0;i<e.length;i++)n=e[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(Hl)throw Hl=!1,t=Gl,Gl=null,t;0!==(1&Yl)&&0!==t.tag&&wc(),a=t.pendingLanes,0!==(1&a)?t===$l?Kl++:(Kl=0,$l=t):Kl=0,Un()}(t,e,i,r)}finally{Al.transition=n,xe=r}return null}function wc(){if(null!==Xl){var t=_e(Yl),e=Al.transition,i=xe;try{if(Al.transition=null,xe=16>t?16:t,null===Xl)var r=!1;else{if(t=Xl,Xl=null,Yl=0,0!==(6&Pl))throw Error(o(331));var n=Pl;for(Pl|=4,Js=t.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:il(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var p=(h=Js).sibling,f=h.return;if(ol(h),h===u){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else t:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break t}Js=a.return}}var x=t.current;for(Js=x;null!==Js;){var _=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Js=_;else t:for(s=x;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){kc(l,l.return,w)}if(l===s){Js=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Js=b;break t}Js=l.return}}if(Pl=n,Un(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ne,t)}catch(w){}r=!0}return r}finally{xe=i,Al.transition=e}}return!1}function Sc(t,e,i){t=No(t,e=ps(0,e=cs(i,e),1),1),e=tc(),null!==t&&(ye(t,1,e),rc(t,e))}function kc(t,e,i){if(3===t.tag)Sc(t,t,i);else for(;null!==e;){if(3===e.tag){Sc(e,t,i);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){e=No(e,t=fs(e,t=cs(i,t),1),1),t=tc(),null!==e&&(ye(e,1,t),rc(e,t));break}}e=e.return}}function Cc(t,e,i){var r=t.pingCache;null!==r&&r.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&i,Ml===t&&(Il&i)===i&&(4===Dl||3===Dl&&(130023424&Il)===Il&&500>$t()-Vl?dc(t,0):Fl|=i),rc(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var i=tc();null!==(t=Ro(t,e))&&(ye(t,e,i),rc(t,i))}function Ac(t){var e=t.memoizedState,i=0;null!==e&&(i=e.retryLane),Tc(t,i)}function Pc(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,n=t.memoizedState;null!==n&&(i=n.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Tc(t,i)}function Mc(t,e){return Zt(t,e)}function Ec(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(t,e,i,r){return new Ec(t,e,i,r)}function zc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lc(t,e){var i=t.alternate;return null===i?((i=Ic(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Dc(t,e,i,r,n,a){var s=2;if(r=t,"function"===typeof t)zc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Rc(i.children,n,a,e);case k:s=8,n|=8;break;case C:return(t=Ic(12,i,e,2|n)).elementType=C,t.lanes=a,t;case M:return(t=Ic(13,i,e,n)).elementType=M,t.lanes=a,t;case E:return(t=Ic(19,i,e,n)).elementType=E,t.lanes=a,t;case L:return Oc(i,n,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case A:s=9;break t;case P:s=11;break t;case I:s=14;break t;case z:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Ic(s,i,e,n)).elementType=t,e.type=r,e.lanes=a,e}function Rc(t,e,i,r){return(t=Ic(7,t,r,e)).lanes=i,t}function Oc(t,e,i,r){return(t=Ic(22,t,r,e)).elementType=L,t.lanes=i,t.stateNode={isHidden:!1},t}function Bc(t,e,i){return(t=Ic(6,t,null,e)).lanes=i,t}function Fc(t,e,i){return(e=Ic(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jc(t,e,i,r,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Nc(t,e,i,r,n,o,a,s,l){return t=new jc(t,e,i,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Ic(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),t}function Vc(t){if(!t)return An;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var i=t.type;if(zn(i))return Rn(t,i,e)}return e}function Uc(t,e,i,r,n,o,a,s,l){return(t=Nc(i,r,!0,t,0,o,0,s,l)).context=Vc(null),i=t.current,(o=jo(r=tc(),n=ec(i))).callback=void 0!==e&&null!==e?e:null,No(i,o,n),t.current.lanes=n,ye(t,n,r),rc(t,r),t}function Wc(t,e,i,r){var n=e.current,o=tc(),a=ec(n);return i=Vc(i),null===e.context?e.context=i:e.pendingContext=i,(e=jo(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=No(n,e,a))&&(ic(t,n,a,o),Vo(t,n,a)),a}function Hc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function qc(t,e){Gc(t,e),(t=t.alternate)&&Gc(t,e)}Sl=function(t,e,i){if(null!==t)if(t.memoizedProps!==e.pendingProps||Mn.current)xs=!0;else{if(0===(t.lanes&i)&&0===(128&e.flags))return xs=!1,function(t,e,i){switch(e.tag){case 3:Ms(e),fo();break;case 5:Jo(e);break;case 1:zn(e.type)&&On(e);break;case 4:Ko(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,n=e.memoizedProps.value;Tn(So,r._currentValue),r._currentValue=n;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Tn(ta,1&ta.current),e.flags|=128,null):0!==(i&e.child.childLanes)?Bs(t,e,i):(Tn(ta,1&ta.current),null!==(t=Hs(t,e,i))?t.sibling:null);Tn(ta,1&ta.current);break;case 19:if(r=0!==(i&e.childLanes),0!==(128&t.flags)){if(r)return Us(t,e,i);e.flags|=128}if(null!==(n=e.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Tn(ta,ta.current),r)break;return null;case 22:case 23:return e.lanes=0,ks(t,e,i)}return Hs(t,e,i)}(t,e,i);xs=0!==(131072&t.flags)}else xs=!1,no&&0!==(1048576&e.flags)&&Qn(e,qn,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ws(t,e),t=e.pendingProps;var n=In(e,Pn.current);Eo(e,i),n=ga(null,e,r,t,n,i);var a=ya();return e.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(a=!0,On(e)):a=!1,e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Bo(e),n.updater=ns,e.stateNode=n,n._reactInternals=e,ls(e,r,t,i),e=Ps(null,e,r,!0,a,i)):(e.tag=0,no&&a&&to(e),_s(null,e,n,i),e=e.child),e;case 16:r=e.elementType;t:{switch(Ws(t,e),t=e.pendingProps,r=(n=r._init)(r._payload),e.type=r,n=e.tag=function(t){if("function"===typeof t)return zc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===P)return 11;if(t===I)return 14}return 2}(r),t=is(r,t),n){case 0:e=Ts(null,e,r,t,i);break t;case 1:e=As(null,e,r,t,i);break t;case 11:e=bs(null,e,r,t,i);break t;case 14:e=ws(null,e,r,is(r.type,t),i);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,n=e.pendingProps,Ts(t,e,r,n=e.elementType===r?n:is(r,n),i);case 1:return r=e.type,n=e.pendingProps,As(t,e,r,n=e.elementType===r?n:is(r,n),i);case 3:t:{if(Ms(e),null===t)throw Error(o(387));r=e.pendingProps,n=(a=e.memoizedState).element,Fo(t,e),Wo(e,r,null,i);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Es(t,e,r,i,n=cs(Error(o(423)),e));break t}if(r!==n){e=Es(t,e,r,i,n=cs(Error(o(424)),e));break t}for(ro=cn(e.stateNode.containerInfo.firstChild),io=e,no=!0,oo=null,i=wo(e,null,r,i),e.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fo(),r===n){e=Hs(t,e,i);break t}_s(t,e,r,i)}e=e.child}return e;case 5:return Jo(e),null===t&&co(e),r=e.type,n=e.pendingProps,a=null!==t?t.memoizedProps:null,s=n.children,en(r,n)?s=null:null!==a&&en(r,a)&&(e.flags|=32),Cs(t,e),_s(t,e,s,i),e.child;case 6:return null===t&&co(e),null;case 13:return Bs(t,e,i);case 4:return Ko(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=bo(e,null,r,i):_s(t,e,r,i),e.child;case 11:return r=e.type,n=e.pendingProps,bs(t,e,r,n=e.elementType===r?n:is(r,n),i);case 7:return _s(t,e,e.pendingProps,i),e.child;case 8:case 12:return _s(t,e,e.pendingProps.children,i),e.child;case 10:t:{if(r=e.type._context,n=e.pendingProps,a=e.memoizedProps,s=n.value,Tn(So,r._currentValue),r._currentValue=s,null!==a)if(ar(a.value,s)){if(a.children===n.children&&!Mn.current){e=Hs(t,e,i);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=jo(-1,i&-i)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=i,null!==(c=a.alternate)&&(c.lanes|=i),Mo(a.return,i,e),l.lanes|=i;break}c=c.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=i,null!==(l=s.alternate)&&(l.lanes|=i),Mo(s,i,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}_s(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,r=e.pendingProps.children,Eo(e,i),r=r(n=Io(n)),e.flags|=1,_s(t,e,r,i),e.child;case 14:return n=is(r=e.type,e.pendingProps),ws(t,e,r,n=is(r.type,n),i);case 15:return Ss(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:is(r,n),Ws(t,e),e.tag=1,zn(r)?(t=!0,On(e)):t=!1,Eo(e,i),as(e,r,n),ls(e,r,n,i),Ps(null,e,r,!0,t,i);case 19:return Us(t,e,i);case 22:return ks(t,e,i)}throw Error(o(156,e.tag))};var Zc="function"===typeof reportError?reportError:function(t){console.error(t)};function Xc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Kc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jc(){}function Qc(t,e,i,r,n){var o=i._reactRootContainer;if(o){var a=o;if("function"===typeof n){var s=n;n=function(){var t=Hc(a);s.call(t)}}Wc(e,a,t,n)}else a=function(t,e,i,r,n){if(n){if("function"===typeof r){var o=r;r=function(){var t=Hc(a);o.call(t)}}var a=Uc(e,r,t,0,null,!1,0,"",Jc);return t._reactRootContainer=a,t[fn]=a.current,Vr(8===t.nodeType?t.parentNode:t),uc(),a}for(;n=t.lastChild;)t.removeChild(n);if("function"===typeof r){var s=r;r=function(){var t=Hc(l);s.call(t)}}var l=Nc(t,0,!1,null,0,!1,0,"",Jc);return t._reactRootContainer=l,t[fn]=l.current,Vr(8===t.nodeType?t.parentNode:t),uc((function(){Wc(e,l,i,r)})),l}(i,e,t,n,r);return Hc(a)}Yc.prototype.render=Xc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Wc(t,e,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc((function(){Wc(null,t,null,null)})),e[fn]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=ke();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Le.length&&0!==e&&e<Le[i].priority;i++);Le.splice(i,0,t),0===i&&Be(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=he(e.pendingLanes);0!==i&&(ve(e,1|i),rc(e,$t()),0===(6&Pl)&&(Ul=$t()+500,Un()))}break;case 13:uc((function(){var e=Ro(t,1);if(null!==e){var i=tc();ic(e,t,1,i)}})),qc(t,1)}},we=function(t){if(13===t.tag){var e=Ro(t,134217728);if(null!==e)ic(e,t,134217728,tc());qc(t,134217728)}},Se=function(t){if(13===t.tag){var e=ec(t),i=Ro(t,e);if(null!==i)ic(i,t,e,tc());qc(t,e)}},ke=function(){return xe},Ce=function(t,e){var i=xe;try{return xe=t,e()}finally{xe=i}},wt=function(t,e,i){switch(e){case"input":if(J(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var n=bn(r);if(!n)throw Error(o(90));Z(r),J(r,n)}}}break;case"textarea":ot(t,i);break;case"select":null!=(e=i.value)&&it(t,!!i.multiple,e,!1)}},Pt=cc,Mt=uc;var tu={usingClientEntryPoint:!1,Events:[xn,_n,bn,Tt,At,cc]},eu={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ne=ru.inject(iu),oe=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(e))throw Error(o(200));return function(t,e,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:i}}(t,e,null,i)},e.createRoot=function(t,e){if(!Kc(t))throw Error(o(299));var i=!1,r="",n=Zc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(i=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(n=e.onRecoverableError)),e=Nc(t,1,!1,null,0,i,0,r,n),t[fn]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Xc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,i){if(!$c(e))throw Error(o(200));return Qc(null,t,e,!0,i)},e.hydrateRoot=function(t,e,i){if(!Kc(t))throw Error(o(405));var r=null!=i&&i.hydratedSources||null,n=!1,a="",s=Zc;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(n=!0),void 0!==i.identifierPrefix&&(a=i.identifierPrefix),void 0!==i.onRecoverableError&&(s=i.onRecoverableError)),e=Uc(e,null,t,1,null!=i?i:null,n,0,a,s),t[fn]=e.current,Vr(t),r)for(t=0;t<r.length;t++)n=(n=(i=r[t])._getVersion)(i._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[i,n]:e.mutableSourceEagerHydrationData.push(i,n);return new Yc(e)},e.render=function(t,e,i){if(!$c(e))throw Error(o(200));return Qc(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!$c(t))throw Error(o(40));return!!t._reactRootContainer&&(uc((function(){Qc(null,null,t,!1,(function(){t._reactRootContainer=null,t[fn]=null}))})),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!$c(i))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return Qc(t,e,i,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},391:(t,e,i)=>{"use strict";var r=i(950);e.H=r.createRoot,r.hydrateRoot},950:(t,e,i)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(730)},366:t=>{var e="undefined"!==typeof Element,i="function"===typeof Map,r="function"===typeof Set,n="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(!o(t[l],a[l]))return!1;return!0}if(i&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(u=t.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=t.entries();!(l=u.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(u=t.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(t[l]!==a[l])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf&&"function"===typeof t.valueOf&&"function"===typeof a.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString&&"function"===typeof t.toString&&"function"===typeof a.toString)return t.toString()===a.toString();if((s=(c=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(e&&t instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!t.$$typeof)&&!o(t[c[l]],a[c[l]]))return!1;return!0}return t!==t&&a!==a}t.exports=function(t,e){try{return o(t,e)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}}},153:(t,e,i)=>{"use strict";var r=i(43),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,i){var r,o={},c=null,u=null;for(r in void 0!==i&&(c=""+i),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:n,type:t,key:c,ref:u,props:o,_owner:s.current}}e.jsx=c,e.jsxs=c},202:(t,e)=>{"use strict";var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||f}function v(){}function x(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var _=x.prototype=new v;_.constructor=x,m(_,y.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,r){var n,o={},a=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,n)&&!k.hasOwnProperty(n)&&(o[n]=e[n]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:S.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var A=/\/+/g;function P(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function M(t,e,n,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+P(l,0):o,b(a)?(n="",null!=t&&(n=t.replace(A,"$&/")+"/"),M(a,e,n,"",(function(t){return t}))):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",b(t))for(var c=0;c<t.length;c++){var u=o+P(s=t[c],c);l+=M(s,e,n,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=M(s=s.value,e,n,u=o+P(s,c++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function E(t,e,i){if(null==t)return t;var r=[],n=0;return M(t,r,"","",(function(t){return e.call(i,t,n++)})),r}function I(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var z={current:null},L={transition:null},D={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:E,forEach:function(t,e,i){E(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return E(t,(function(){e++})),e},toArray:function(t){return E(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=n,e.Profiler=a,e.PureComponent=x,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.act=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!k.hasOwnProperty(c)&&(n[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:i,type:t.type,key:o,ref:a,props:n,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:I}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=R,e.useCallback=function(t,e){return z.current.useCallback(t,e)},e.useContext=function(t){return z.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return z.current.useDeferredValue(t)},e.useEffect=function(t,e){return z.current.useEffect(t,e)},e.useId=function(){return z.current.useId()},e.useImperativeHandle=function(t,e,i){return z.current.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return z.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return z.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return z.current.useMemo(t,e)},e.useReducer=function(t,e,i){return z.current.useReducer(t,e,i)},e.useRef=function(t){return z.current.useRef(t)},e.useState=function(t){return z.current.useState(t)},e.useSyncExternalStore=function(t,e,i){return z.current.useSyncExternalStore(t,e,i)},e.useTransition=function(){return z.current.useTransition()},e.version="18.3.1"},43:(t,e,i)=>{"use strict";t.exports=i(202)},579:(t,e,i)=>{"use strict";t.exports=i(153)},234:(t,e)=>{"use strict";function i(t,e){var i=t.length;t.push(e);t:for(;0<i;){var r=i-1>>>1,n=t[r];if(!(0<o(n,e)))break t;t[r]=e,t[i]=n,i=r}}function r(t){return 0===t.length?null:t[0]}function n(t){if(0===t.length)return null;var e=t[0],i=t.pop();if(i!==e){t[0]=i;t:for(var r=0,n=t.length,a=n>>>1;r<a;){var s=2*(r+1)-1,l=t[s],c=s+1,u=t[c];if(0>o(l,i))c<n&&0>o(u,l)?(t[r]=u,t[c]=i,r=c):(t[r]=l,t[s]=i,r=s);else{if(!(c<n&&0>o(u,i)))break t;t[r]=u,t[c]=i,r=c}}}return e}function o(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=r(u);null!==e;){if(null===e.callback)n(u);else{if(!(e.startTime<=t))break;n(u),e.sortIndex=e.expirationTime,i(c,e)}e=r(u)}}function b(t){if(g=!1,_(t),!m)if(null!==r(c))m=!0,L(w);else{var e=r(u);null!==e&&D(b,e.startTime-t)}}function w(t,i){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var o=p;try{for(_(i),d=r(c);null!==d&&(!(d.expirationTime>i)||t&&!M());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=i);i=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&n(c),_(i)}else n(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(b,h.startTime-i),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,T=-1,A=5,P=-1;function M(){return!(e.unstable_now()-P<A)}function E(){if(null!==C){var t=e.unstable_now();P=t;var i=!0;try{i=C(!0,t)}finally{i?S():(k=!1,C=null)}}else k=!1}if("function"===typeof x)S=function(){x(E)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,z=I.port2;I.port1.onmessage=E,S=function(){z.postMessage(null)}}else S=function(){y(E,0)};function L(t){C=t,k||(k=!0,S())}function D(t,i){T=y((function(){t(e.unstable_now())}),i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,L(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var i=p;p=e;try{return t()}finally{p=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=p;p=t;try{return e()}finally{p=i}},e.unstable_scheduleCallback=function(t,n,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:n,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,i(u,t),null===r(c)&&t===r(u)&&(g?(v(T),T=-1):g=!0,D(b,o-a))):(t.sortIndex=s,i(c,t),m||f||(m=!0,L(w))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(t){var e=p;return function(){var i=p;p=e;try{return t.apply(this,arguments)}finally{p=i}}}},853:(t,e,i)=>{"use strict";t.exports=i(234)},66:function(t){t.exports=function(){"use strict";var t={},e={};function i(i,r,n){if(e[i]=n,"index"===i){var o="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",a={};return e.shared(a),e.index(t,a),"undefined"!==typeof window&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),t}}return i("shared",["exports"],(function(t){function e(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"function"==typeof SuppressedError&&SuppressedError;var r=n;function n(t,e){this.x=t,this.y=e}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t};var o=i(r),a=s;function s(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=r}s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,r=0;r<8;r++){var n=this.sampleCurveX(i)-t;if(Math.abs(n)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=n/o}var a=0,s=1;for(i=t,r=0;r<20&&(n=this.sampleCurveX(i),!(Math.abs(n-t)<e));r++)t>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var l=i(a);let c,u;function h(){return null==c&&(c="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),c}function d(){if(null==u&&(u=!1,h())){const t=5,e=new OffscreenCanvas(t,t).getContext("2d",{willReadFrequently:!0});if(e){for(let r=0;r<t*t;r++){const i=4*r;e.fillStyle="rgb(".concat(i,",").concat(i+1,",").concat(i+2,")"),e.fillRect(r%t,Math.floor(r/t),1,1)}const i=e.getImageData(0,0,t,t).data;for(let e=0;e<t*t*4;e++)if(e%4!=3&&i[e]!==e){u=!0;break}}}return u||!1}function p(t,e,i,r){const n=new l(t,e,i,r);return t=>n.solve(t)}const f=p(.25,.1,.25,1);function m(t,e,i){return Math.min(i,Math.max(e,t))}function g(t,e,i){const r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function y(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];for(const n of i)for(const e in n)t[e]=n[e];return t}let v=1;function x(t,e,i){const r={};for(const n in t)r[n]=e.call(this,t[n],n,t);return r}function _(t,e,i){const r={};for(const n in t)e.call(this,t[n],n,t)&&(r[n]=t[n]);return r}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?x(t,b):t}const w={};function S(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function k(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function C(t){return"undefined"!=typeof WorkerGlobalScope&&void 0!==t&&t instanceof WorkerGlobalScope}let T=null;function A(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function M(t,i,r,n,o){return e(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const e=new VideoFrame(t,{timestamp:0});try{const a=null==e?void 0:e.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw new Error("Unrecognized format ".concat(a));const s=a.startsWith("BGR"),l=new Uint8ClampedArray(n*o*4);if(yield e.copyTo(l,function(t,e,i,r,n){const o=4*Math.max(-e,0),a=(Math.max(0,i)-i)*r*4+o,s=4*r,l=Math.max(0,e),c=Math.max(0,i);return{rect:{x:l,y:c,width:Math.min(t.width,e+r)-l,height:Math.min(t.height,i+n)-c},layout:[{offset:a,stride:s}]}}(t,i,r,n,o)),s)for(let t=0;t<l.length;t+=4){const e=l[t];l[t]=l[t+2],l[t+2]=e}return l}finally{e.close()}}))}let E,I;const z="AbortError";function L(){return new Error(z)}const D={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function R(t){return D.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))]}const O="global-dispatcher";class B extends Error{constructor(t,e,i,r){super("AJAXError: ".concat(e," (").concat(t,"): ").concat(i)),this.status=t,this.statusText=e,this.url=i,this.body=r}}const F=()=>C(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,j=function(t,i){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){const e=R(t.url);if(e)return e(t,i);if(C(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,targetMapId:O},i)}if(!(/^file:/.test(r=t.url)||/^file:/.test(F())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(t,i){return e(this,void 0,void 0,(function*(){const e=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,cache:t.cache,referrer:F(),signal:i.signal});"json"===t.type&&e.headers.set("Accept","application/json");const r=yield fetch(e);if(!r.ok){const e=yield r.blob();throw new B(r.status,r.statusText,t.url,e)}let n;n="arrayBuffer"===t.type||"image"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text();const o=yield n;if(i.signal.aborted)throw L();return{data:o,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}))}(t,i);if(C(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,mustQueue:!0,targetMapId:O},i)}var r;return function(t,e){return new Promise(((i,r)=>{const n=new XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"!==t.type&&"image"!==t.type||(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{r(new Error(n.statusText))},n.onload=()=>{if(!e.signal.aborted)if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let e=n.response;if("json"===t.type)try{e=JSON.parse(n.response)}catch(t){return void r(t)}i({data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")})}else{const e=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});r(new B(n.status,n.statusText,t.url,e))}},e.signal.addEventListener("abort",(()=>{n.abort(),r(L())})),n.send(t.body)}))}(t,i)};function N(t){if(!t||t.indexOf("://")<=0||0===t.indexOf("data:image/")||0===t.indexOf("blob:"))return!0;const e=new URL(t),i=window.location;return e.protocol===i.protocol&&e.host===i.host}function V(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function U(t,e,i){if(i&&i[t]){const r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}class W{constructor(t){y(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=t}}class H extends W{constructor(t){super("error",y({error:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class G{on(t,e){return this._listeners=this._listeners||{},V(t,e,this._listeners),this}off(t,e){return U(t,e,this._listeners),U(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},V(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new W(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const o of r)U(i,o,this._oneTimeListeners),o.call(this,t);const n=this._eventedParent;n&&(y(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(t))}else t instanceof H&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Z=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function X(t,e){const i={};for(const r in t)"ref"!==r&&(i[r]=t[r]);return Z.forEach((t=>{t in e&&(i[t]=e[t])})),i}function Y(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Y(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!Y(t[i],e[i]))return!1;return!0}return t===e}function K(t,e){t.push(e)}function $(t,e,i){K(i,{command:"addSource",args:[t,e[t]]})}function J(t,e,i){K(e,{command:"removeSource",args:[t]}),i[t]=!0}function Q(t,e,i,r){J(t,i,r),$(t,e,i)}function tt(t,e,i){let r;for(r in t[i])if(Object.prototype.hasOwnProperty.call(t[i],r)&&"data"!==r&&!Y(t[i][r],e[i][r]))return!1;for(r in e[i])if(Object.prototype.hasOwnProperty.call(e[i],r)&&"data"!==r&&!Y(t[i][r],e[i][r]))return!1;return!0}function et(t,e,i,r,n,o){t=t||{},e=e||{};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(Y(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(Y(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}))}function it(t){return t.id}function rt(t,e){return t[e.id]=e,t}class nt{constructor(t,e,i,r){this.message=(t?"".concat(t,": "):"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function ot(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];for(const n of i)for(const e in n)t[e]=n[e];return t}class at extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class st{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=t,this.bindings={};for(const[i,r]of e)this.bindings[i]=r}concat(t){return new st(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const lt={kind:"null"},ct={kind:"number"},ut={kind:"string"},ht={kind:"boolean"},dt={kind:"color"},pt={kind:"object"},ft={kind:"value"},mt={kind:"collator"},gt={kind:"formatted"},yt={kind:"padding"},vt={kind:"resolvedImage"},xt={kind:"variableAnchorOffsetCollection"};function _t(t,e){return{kind:"array",itemType:t,N:e}}function bt(t){if("array"===t.kind){const e=bt(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}const wt=[lt,ct,ut,ht,dt,gt,pt,_t(ft),yt,vt,xt];function St(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!St(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of wt)if(!St(t,e))return null}return"Expected ".concat(bt(t)," but found ").concat(bt(e)," instead.")}function kt(t,e){return e.some((e=>e.kind===t.kind))}function Ct(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function Tt(t,e){return"array"===t.kind&&"array"===e.kind?t.itemType.kind===e.itemType.kind&&"number"==typeof t.N:t.kind===e.kind}const At=.96422,Pt=.82521,Mt=4/29,Et=6/29,It=3*Et*Et,zt=Et*Et*Et,Lt=Math.PI/180,Dt=180/Math.PI;function Rt(t){return(t%=360)<0&&(t+=360),t}function Ot(t){let e,i,[r,n,o,a]=t;const s=Ft((.2225045*(r=Bt(r))+.7168786*(n=Bt(n))+.0606169*(o=Bt(o)))/1);r===n&&n===o?e=i=s:(e=Ft((.4360747*r+.3850649*n+.1430804*o)/At),i=Ft((.0139322*r+.0971045*n+.7141733*o)/Pt));const l=116*s-16;return[l<0?0:l,500*(e-s),200*(s-i),a]}function Bt(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ft(t){return t>zt?Math.pow(t,1/3):t/It+Mt}function jt(t){let[e,i,r,n]=t,o=(e+16)/116,a=isNaN(i)?o:o+i/500,s=isNaN(r)?o:o-r/200;return o=1*Vt(o),a=At*Vt(a),s=Pt*Vt(s),[Nt(3.1338561*a-1.6168667*o-.4906146*s),Nt(-.9787684*a+1.9161415*o+.033454*s),Nt(.0719453*a-.2289914*o+1.4052427*s),n]}function Nt(t){return(t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055)<0?0:t>1?1:t}function Vt(t){return t>Et?t*t*t:It*(t-Mt)}function Ut(t){return parseInt(t.padEnd(2,t),16)/255}function Wt(t,e){return Ht(e?t/100:t,0,1)}function Ht(t,e,i){return Math.min(Math.max(e,t),i)}function Gt(t){return!t.some(Number.isNaN)}const qt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Zt{constructor(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=t,this.g=e,this.b=i,this.a=r,n||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[t,e,i,r]))}static parse(t){if(t instanceof Zt)return t;if("string"!=typeof t)return;const e=function(t){if("transparent"===(t=t.toLowerCase().trim()))return[0,0,0,0];const e=qt[t];if(e){const[t,i,r]=e;return[t/255,i/255,r/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){const e=t.length<6?1:2;let i=1;return[Ut(t.slice(i,i+=e)),Ut(t.slice(i,i+=e)),Ut(t.slice(i,i+=e)),Ut(t.slice(i,i+e)||"ff")]}if(t.startsWith("rgb")){const e=t.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(e){const[t,i,r,n,o,a,s,l,c,u,h,d]=e,p=[n||" ",s||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const t=[r,a,c].join(""),e="%%%"===t?100:""===t?255:0;if(e){const t=[Ht(+i/e,0,1),Ht(+o/e,0,1),Ht(+l/e,0,1),h?Wt(+h,d):1];if(Gt(t))return t}}return}}const i=t.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(i){const[t,e,r,n,o,a,s,l,c]=i,u=[r||" ",o||" ",s].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const t=[+e,Ht(+n,0,100),Ht(+a,0,100),l?Wt(+l,c):1];if(Gt(t))return function(t){let[e,i,r,n]=t;function o(t){const n=(t+e/30)%12,o=i*Math.min(r,1-r);return r-o*Math.max(-1,Math.min(n-3,9-n,1))}return e=Rt(e),i/=100,r/=100,[o(0),o(8),o(4),n]}(t)}}}(t);return e?new Zt(...e,!1):void 0}get rgb(){const{r:t,g:e,b:i,a:r}=this,n=r||1/0;return this.overwriteGetter("rgb",[t/n,e/n,i/n,r])}get hcl(){return this.overwriteGetter("hcl",function(t){const[e,i,r,n]=Ot(t),o=Math.sqrt(i*i+r*r);return[Math.round(1e4*o)?Rt(Math.atan2(r,i)*Dt):NaN,o,e,n]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ot(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){const[t,e,i,r]=this.rgb;return"rgba(".concat([t,e,i].map((t=>Math.round(255*t))).join(","),",").concat(r,")")}}Zt.black=new Zt(0,0,0,1),Zt.white=new Zt(1,1,1,1),Zt.transparent=new Zt(0,0,0,0),Zt.red=new Zt(1,0,0,1);class Xt{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Yt{constructor(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n}}class Kt{constructor(t){this.sections=t}static fromString(t){return new Kt([new Yt(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Kt?t:Kt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class $t{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof $t)return t;if("number"==typeof t)return new $t([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new $t(t)}}toString(){return JSON.stringify(this.values)}}const Jt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qt{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Qt)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let e=0;e<t.length;e+=2){const i=t[e],r=t[e+1];if("string"!=typeof i||!Jt.has(i))return;if(!Array.isArray(r)||2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])return}return new Qt(t)}}toString(){return JSON.stringify(this.values)}}class te{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new te({name:t,available:!1}):null}}function ee(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,i,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function ie(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof Zt||t instanceof Xt||t instanceof Kt||t instanceof $t||t instanceof Qt||t instanceof te)return!0;if(Array.isArray(t)){for(const e of t)if(!ie(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!ie(t[e]))return!1;return!0}return!1}function re(t){if(null===t)return lt;if("string"==typeof t)return ut;if("boolean"==typeof t)return ht;if("number"==typeof t)return ct;if(t instanceof Zt)return dt;if(t instanceof Xt)return mt;if(t instanceof Kt)return gt;if(t instanceof $t)return yt;if(t instanceof Qt)return xt;if(t instanceof te)return vt;if(Array.isArray(t)){const e=t.length;let i;for(const r of t){const t=re(r);if(i){if(i===t)continue;i=ft;break}i=t}return _t(i||ft,e)}return pt}function ne(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Zt||t instanceof Kt||t instanceof $t||t instanceof Qt||t instanceof te?t.toString():JSON.stringify(t)}class oe{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!ie(t[1]))return e.error("invalid value");const i=t[1];let r=re(i);const n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new oe(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ae{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const se={string:ut,number:ct,boolean:ht,object:pt};class le{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,r=1;const n=t[0];if("array"===n){let n,o;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in se)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=se[i],r++}else n=ft;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}i=_t(n,o)}else{if(!se[n])throw new Error("Types doesn't contain name = ".concat(n));i=se[n]}const o=[];for(;r<t.length;r++){const i=e.parse(t[r],r,ft);if(!i)return null;o.push(i)}return new le(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!St(this.type,re(i)))return i;if(e===this.args.length-1)throw new ae("Expected value to be of type ".concat(bt(this.type),", but found ").concat(bt(re(i))," instead."))}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ce={"to-boolean":ht,"to-color":dt,"to-number":ct,"to-string":ut};class ue{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(!ce[i])throw new Error("Can't parse ".concat(i," as it is not part of the known types"));if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const r=ce[i],n=[];for(let o=1;o<t.length;o++){const i=e.parse(t[o],o,ft);if(!i)return null;n.push(i)}return new ue(r,n)}evaluate(t){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(t));case"color":{let e,i;for(const r of this.args){if(e=r.evaluate(t),i=null,e instanceof Zt)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):ee(e[0],e[1],e[2],e[3]),!i))return new Zt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ae(i||"Could not parse color from value '".concat("string"==typeof e?e:JSON.stringify(e),"'"))}case"padding":{let e;for(const i of this.args){e=i.evaluate(t);const r=$t.parse(e);if(r)return r}throw new ae("Could not parse padding from value '".concat("string"==typeof e?e:JSON.stringify(e),"'"))}case"variableAnchorOffsetCollection":{let e;for(const i of this.args){e=i.evaluate(t);const r=Qt.parse(e);if(r)return r}throw new ae("Could not parse variableAnchorOffsetCollection from value '".concat("string"==typeof e?e:JSON.stringify(e),"'"))}case"number":{let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new ae("Could not convert ".concat(JSON.stringify(e)," to number."))}case"formatted":return Kt.fromString(ne(this.args[0].evaluate(t)));case"resolvedImage":return te.fromString(ne(this.args[0].evaluate(t)));default:return ne(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const he=["Unknown","Point","LineString","Polygon"];class de{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?he[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Zt.parse(t)),e}}class pe{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new st,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=t,this.path=i,this.key=i.map((t=>"[".concat(t,"]"))).join(""),this.scope=n,this.errors=o,this.expectedType=r,this._isConstant=e}parse(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)}_parse(t,e){function i(t,e,i){return"assert"===i?new le(e,[t]):"coerce"===i?new ue(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const n=this.registry[r];if(n){let r=n.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,n=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==n.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==n.kind&&"string"!==n.kind)if("padding"!==t.kind||"value"!==n.kind&&"number"!==n.kind&&"array"!==n.kind)if("variableAnchorOffsetCollection"!==t.kind||"value"!==n.kind&&"array"!==n.kind){if(this.checkSubtype(t,n))return null}else r=i(r,t,e.typeAnnotation||"coerce");else r=i(r,t,e.typeAnnotation||"coerce");else r=i(r,t,e.typeAnnotation||"coerce");else r=i(r,t,e.typeAnnotation||"assert")}if(!(r instanceof oe)&&"resolvedImage"!==r.type.kind&&this._isConstant(r)){const e=new de;try{r=new oe(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}concat(t,e,i){const r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new pe(this.registry,this._isConstant,r,e||null,n,this.errors)}error(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];const n="".concat(this.key).concat(i.map((t=>"[".concat(t,"]"))).join(""));this.errors.push(new at(n,t))}checkSubtype(t,e){const i=St(t,e);return i&&this.error(i),i}}class fe{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));const i=[];for(let n=1;n<t.length-1;n+=2){const r=t[n];if("string"!=typeof r)return e.error("Expected string, but found ".concat(typeof r," instead."),n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;i.push([r,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return r?new fe(i,r):null}outputDefined(){return this.result.outputDefined()}}class me{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new me(i,e.scope.get(i)):e.error('Unknown variable "'.concat(i,'". Make sure "').concat(i,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class ge{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,ct),r=e.parse(t[2],2,_t(e.expectedType||ft));return i&&r?new ge(r.type.itemType,i,r):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ae("Array index out of bounds: ".concat(e," < 0."));if(e>=i.length)throw new ae("Array index out of bounds: ".concat(e," > ").concat(i.length-1,"."));if(e!==Math.floor(e))throw new ae("Array index must be an integer, but found ".concat(e," instead."));return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class ye{constructor(t,e){this.type=ht,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,ft),r=e.parse(t[2],2,ft);return i&&r?kt(i.type,[ht,ut,ct,lt,ft])?new ye(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(i.type)," instead")):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Ct(e,["boolean","string","number","null"]))throw new ae("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(re(e))," instead."));if(!Ct(i,["string","array"]))throw new ae("Expected second argument to be of type array or string, but found ".concat(bt(re(i))," instead."));return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class ve{constructor(t,e,i){this.type=ct,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,ft),r=e.parse(t[2],2,ft);if(!i||!r)return null;if(!kt(i.type,[ht,ut,ct,lt,ft]))return e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(i.type)," instead"));if(4===t.length){const n=e.parse(t[3],3,ct);return n?new ve(i,r,n):null}return new ve(i,r)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Ct(e,["boolean","string","number","null"]))throw new ae("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(re(e))," instead."));if(!Ct(i,["string","array"]))throw new ae("Expected second argument to be of type array or string, but found ".concat(bt(re(i))," instead."));if(this.fromIndex){const r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class xe{constructor(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n={},o=[];for(let l=2;l<t.length-1;l+=2){let a=t[l];const s=t[l+1];Array.isArray(a)||(a=[a]);const c=e.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,re(t)))return null}else i=re(t);if(void 0!==n[String(t)])return c.error("Branch labels must be unique.");n[String(t)]=o.length}const u=e.parse(s,l,r);if(!u)return null;r=r||u.type,o.push(u)}const a=e.parse(t[1],1,ft);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(i,a.type)?null:new xe(i,r,a,n,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class _e{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r=[];for(let o=1;o<t.length-1;o+=2){const n=e.parse(t[o],o,ht);if(!n)return null;const a=e.parse(t[o+1],o+1,i);if(!a)return null;r.push([n,a]),i=i||a.type}const n=e.parse(t[t.length-1],t.length-1,i);if(!n)return null;if(!i)throw new Error("Can't infer output type");return new _e(i,r,n)}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((t=>{let[e,i]=t;return i.outputDefined()}))&&this.otherwise.outputDefined()}}class be{constructor(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,ft),r=e.parse(t[2],2,ct);if(!i||!r)return null;if(!kt(i.type,[_t(ft),ut,ft]))return e.error("Expected first argument to be of type array or string, but found ".concat(bt(i.type)," instead"));if(4===t.length){const n=e.parse(t[3],3,ct);return n?new be(i.type,i,r,n):null}return new be(i.type,i,r)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Ct(e,["string","array"]))throw new ae("Expected first argument to be of type array or string, but found ".concat(bt(re(e))," instead."));if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function we(t,e){const i=t.length-1;let r,n,o=0,a=i,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],n=t[s+1],r<=e){if(s===i||e<n)return s;o=s+1}else{if(!(r>e))throw new ae("Input is not a number.");a=s-1}return 0}class Se{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,n]of i)this.labels.push(r),this.outputs.push(n)}static parse(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,ct);if(!i)return null;const r=[];let n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(let o=1;o<t.length;o+=2){const i=1===o?-1/0:t[o],a=t[o+1],s=o,l=o+1;if("number"!=typeof i)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=i)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,n);if(!c)return null;n=n||c.type,r.push([i,c])}return new Se(n,i,r)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[we(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function ke(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ce=Te;function Te(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=r}Te.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,r=0;r<8;r++){var n=this.sampleCurveX(i)-t;if(Math.abs(n)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=n/o}var a=0,s=1;for(i=t,r=0;r<20&&(n=this.sampleCurveX(i),!(Math.abs(n-t)<e));r++)t>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Ae=ke(Ce);function Pe(t,e,i){return t+i*(e-t)}function Me(t,e,i){return t.map(((t,r)=>Pe(t,e[r],i)))}const Ee={number:Pe,color:function(t,e,i){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[r,n,o,a]=Me(t.rgb,e.rgb,i);return new Zt(r,n,o,a,!1)}case"hcl":{const[r,n,o,a]=t.hcl,[s,l,c,u]=e.hcl;let h,d;if(isNaN(r)||isNaN(s))isNaN(r)?isNaN(s)?h=NaN:(h=s,1!==o&&0!==o||(d=l)):(h=r,1!==c&&0!==c||(d=n));else{let t=s-r;s>r&&t>180?t-=360:s<r&&r-s>180&&(t+=360),h=r+i*t}const[p,f,m,g]=function(t){let[e,i,r,n]=t;return e=isNaN(e)?0:e*Lt,jt([r,Math.cos(e)*i,Math.sin(e)*i,n])}([h,null!=d?d:Pe(n,l,i),Pe(o,c,i),Pe(a,u,i)]);return new Zt(p,f,m,g,!1)}case"lab":{const[r,n,o,a]=jt(Me(t.lab,e.lab,i));return new Zt(r,n,o,a,!1)}}},array:Me,padding:function(t,e,i){return new $t(Me(t.values,e.values,i))},variableAnchorOffsetCollection:function(t,e,i){const r=t.values,n=e.values;if(r.length!==n.length)throw new ae("Cannot interpolate values of different length. from: ".concat(t.toString(),", to: ").concat(e.toString()));const o=[];for(let a=0;a<r.length;a+=2){if(r[a]!==n[a])throw new ae("Cannot interpolate values containing mismatched anchors. from[".concat(a,"]: ").concat(r[a],", to[").concat(a,"]: ").concat(n[a]));o.push(r[a]);const[t,e]=r[a+1],[s,l]=n[a+1];o.push([Pe(t,s,i),Pe(e,l,i)])}return new Qt(o)}};class Ie{constructor(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of n)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,i,r){let n=0;if("exponential"===t.name)n=ze(e,t.base,i,r);else if("linear"===t.name)n=ze(e,1,i,r);else if("cubic-bezier"===t.name){const o=t.controlPoints;n=new Ae(o[0],o[1],o[2],o[3]).solve(ze(e,1,i,r))}return n}static parse(t,e){let[i,r,n,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type ".concat(String(r[0])),1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(n=e.parse(n,2,ct),!n)return null;const a=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=dt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],i=o[l+1],r=l+3,n=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(i,n,s);if(!c)return null;s=s||c.type,a.push([t,c])}return Tt(s,ct)||Tt(s,dt)||Tt(s,yt)||Tt(s,xt)||Tt(s,_t(ct))?new Ie(s,i,r,n,a):e.error("Type ".concat(bt(s)," is not interpolatable."))}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);const o=we(e,r),a=Ie.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);switch(this.operator){case"interpolate":return Ee[this.type.kind](s,l,a);case"interpolate-hcl":return Ee.color(s,l,a,"hcl");case"interpolate-lab":return Ee.color(s,l,a,"lab")}}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function ze(t,e,i,r){const n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}class Le{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const r=e.expectedType;r&&"value"!==r.kind&&(i=r);const n=[];for(const a of t.slice(1)){const t=e.parse(a,1+n.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,n.push(t)}if(!i)throw new Error("No output type");const o=r&&n.some((t=>St(r,t.type)));return new Le(o?ft:i,n)}evaluate(t){let e,i=null,r=0;for(const n of this.args)if(r++,i=n.evaluate(t),i&&i instanceof te&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function De(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Re(t,e,i,r){return 0===r.compare(e,i)}function Oe(t,e,i){const r="=="!==t&&"!="!==t;return class n{constructor(t,e,i){this.type=ht,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let o=e.parse(t[1],1,ft);if(!o)return null;if(!De(i,o.type))return e.concat(1).error('"'.concat(i,"\" comparisons are not supported for type '").concat(bt(o.type),"'."));let a=e.parse(t[2],2,ft);if(!a)return null;if(!De(i,a.type))return e.concat(2).error('"'.concat(i,"\" comparisons are not supported for type '").concat(bt(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(bt(o.type),"' and '").concat(bt(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new le(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new le(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,mt),!s)return null}return new n(o,a,s)}evaluate(n){const o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const e=re(o),i=re(a);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new ae('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(e.kind,", ").concat(i.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){const t=re(o),i=re(a);if("string"!==t.kind||"string"!==i.kind)return e(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):e(n,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const Be=Oe("==",(function(t,e,i){return e===i}),Re),Fe=Oe("!=",(function(t,e,i){return e!==i}),(function(t,e,i,r){return!Re(0,e,i,r)})),je=Oe("<",(function(t,e,i){return e<i}),(function(t,e,i,r){return r.compare(e,i)<0})),Ne=Oe(">",(function(t,e,i){return e>i}),(function(t,e,i,r){return r.compare(e,i)>0})),Ve=Oe("<=",(function(t,e,i){return e<=i}),(function(t,e,i,r){return r.compare(e,i)<=0})),Ue=Oe(">=",(function(t,e,i){return e>=i}),(function(t,e,i,r){return r.compare(e,i)>=0}));class We{constructor(t,e,i){this.type=mt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,ht);if(!r)return null;const n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,ht);if(!n)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,ut),!o)?null:new We(r,n,o)}evaluate(t){return new Xt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class He{constructor(t,e,i,r,n){this.type=ut,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,ct);if(!i)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&(n=e.parse(r.locale,1,ut),!n))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,ut),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=e.parse(r["min-fraction-digits"],1,ct),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=e.parse(r["max-fraction-digits"],1,ct),!s)?null:new He(i,n,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Ge{constructor(t){this.type=gt,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const r=[];let n=!1;for(let o=1;o<=t.length-1;++o){const i=t[o];if(n&&"object"==typeof i&&!Array.isArray(i)){n=!1;let t=null;if(i["font-scale"]&&(t=e.parse(i["font-scale"],1,ct),!t))return null;let o=null;if(i["text-font"]&&(o=e.parse(i["text-font"],1,_t(ut)),!o))return null;let a=null;if(i["text-color"]&&(a=e.parse(i["text-color"],1,dt),!a))return null;const s=r[r.length-1];s.scale=t,s.font=o,s.textColor=a}else{const i=e.parse(t[o],1,ft);if(!i)return null;const a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:i,scale:null,font:null,textColor:null})}}return new Ge(r)}evaluate(t){return new Kt(this.sections.map((e=>{const i=e.content.evaluate(t);return re(i)===vt?new Yt("",i,null,null,null):new Yt(ne(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class qe{constructor(t){this.type=vt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,ut);return i?new qe(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=te.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}}class Ze{constructor(t){this.type=ct,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found ".concat(bt(i.type)," instead.")):new Ze(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ae("Expected value to be of type string or array, but found ".concat(bt(re(e))," instead."))}eachChild(t){t(this.input)}outputDefined(){return!1}}const Xe=8192;function Ye(t,e){const i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*Xe),Math.round(r*n*Xe)]}function Ke(t,e){const i=Math.pow(2,e.z);return[(n=(t[0]/Xe+e.x)/i,360*n-180),(r=(t[1]/Xe+e.y)/i,360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90)];var r,n}function $e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Je(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Qe(t,e,i){const r=t[0]-e[0],n=t[1]-e[1],o=t[0]-i[0],a=t[1]-i[1];return r*a-o*n==0&&r*o<=0&&n*a<=0}function ti(t,e,i,r){return 0!=(n=[r[0]-i[0],r[1]-i[1]])[0]*(o=[e[0]-t[0],e[1]-t[1]])[1]-n[1]*o[0]&&!(!ai(t,e,i,r)||!ai(i,r,t,e));var n,o}function ei(t,e,i){for(const r of i)for(let i=0;i<r.length-1;++i)if(ti(t,e,r[i],r[i+1]))return!0;return!1}function ii(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;for(const s of e)for(let e=0;e<s.length-1;e++){if(Qe(t,s[e],s[e+1]))return i;(o=s[e])[1]>(n=t)[1]!=(a=s[e+1])[1]>n[1]&&n[0]<(a[0]-o[0])*(n[1]-o[1])/(a[1]-o[1])+o[0]&&(r=!r)}var n,o,a;return r}function ri(t,e){for(const i of e)if(ii(t,i))return!0;return!1}function ni(t,e){for(const i of t)if(!ii(i,e))return!1;for(let i=0;i<t.length-1;++i)if(ei(t[i],t[i+1],e))return!1;return!0}function oi(t,e){for(const i of e)if(ni(t,i))return!0;return!1}function ai(t,e,i,r){const n=r[0]-i[0],o=r[1]-i[1],a=(t[0]-i[0])*o-n*(t[1]-i[1]),s=(e[0]-i[0])*o-n*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function si(t,e,i){const r=[];for(let n=0;n<t.length;n++){const o=[];for(let r=0;r<t[n].length;r++){const a=Ye(t[n][r],i);$e(e,a),o.push(a)}r.push(o)}return r}function li(t,e,i){const r=[];for(let n=0;n<t.length;n++){const o=si(t[n],e,i);r.push(o)}return r}function ci(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){const e=.5*r;let n=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===n&&(n=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=n}$e(e,t)}function ui(t,e,i,r){const n=Math.pow(2,r.z)*Xe,o=[r.x*Xe,r.y*Xe],a=[];for(const s of t)for(const t of s){const r=[t.x+o[0],t.y+o[1]];ci(r,e,i,n),a.push(r)}return a}function hi(t,e,i,r){const n=Math.pow(2,r.z)*Xe,o=[r.x*Xe,r.y*Xe],a=[];for(const l of t){const t=[];for(const i of l){const r=[i.x+o[0],i.y+o[1]];$e(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=n/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const r of t)ci(r,e,i,n)}var s;return a}class di{constructor(t,e){this.type=ht,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(ie(t[1])){const e=t[1];if("FeatureCollection"===e.type){const t=[];for(const i of e.features){const{type:e,coordinates:r}=i.geometry;"Polygon"===e&&t.push(r),"MultiPolygon"===e&&t.push(...r)}if(t.length)return new di(e,{type:"MultiPolygon",coordinates:t})}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new di(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new di(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){const o=si(e.coordinates,r,n),a=ui(t.geometry(),i,r,n);if(!Je(i,r))return!1;for(const t of a)if(!ii(t,o))return!1}if("MultiPolygon"===e.type){const o=li(e.coordinates,r,n),a=ui(t.geometry(),i,r,n);if(!Je(i,r))return!1;for(const t of a)if(!ri(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){const o=si(e.coordinates,r,n),a=hi(t.geometry(),i,r,n);if(!Je(i,r))return!1;for(const t of a)if(!ni(t,o))return!1}if("MultiPolygon"===e.type){const o=li(e.coordinates,r,n),a=hi(t.geometry(),i,r,n);if(!Je(i,r))return!1;for(const t of a)if(!oi(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let pi=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,r=e[t];for(;t>0;){const n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}_down(t){const{data:e,compare:i}=this,r=this.length>>1,n=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&i(e[a],o)<0&&(r=a,o=e[a]),i(o,n)>=0)break;e[t]=o,t=r}e[t]=n}};function fi(t,e){return t<e?-1:t>e?1:0}function mi(t,e,i,r,n){gi(t,e,i,r||t.length-1,n||vi)}function gi(t,e,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,a=e-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);gi(t,e,Math.max(i,Math.floor(e-a*l/o+c)),Math.min(r,Math.floor(e+(o-a)*l/o+c)),n)}var u=t[e],h=i,d=r;for(yi(t,i,e),n(t[r],u)>0&&yi(t,i,r);h<d;){for(yi(t,h,d),h++,d--;n(t[h],u)<0;)h++;for(;n(t[d],u)>0;)d--}0===n(t[i],u)?yi(t,i,d):yi(t,++d,r),d<=e&&(i=d+1),e<=d&&(r=d-1)}}function yi(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function vi(t,e){return t<e?-1:t>e?1:0}function xi(t,e){if(t.length<=1)return[t];const i=[];let r,n;for(const o of t){const t=bi(o);0!==t&&(o.area=Math.abs(t),void 0===n&&(n=t<0),n===t<0?(r&&i.push(r),r=[o]):r.push(o))}if(r&&i.push(r),e>1)for(let o=0;o<i.length;o++)i[o].length<=e||(mi(i[o],e,1,i[o].length-1,_i),i[o]=i[o].slice(0,e));return i}function _i(t,e){return e.area-t.area}function bi(t){let e=0;for(let i,r,n=0,o=t.length,a=o-1;n<o;a=n++)i=t[n],r=t[a],e+=(r.x-i.x)*(i.y+r.y);return e}const wi=1/298.257223563,Si=wi*(2-wi),ki=Math.PI/180;class Ci{constructor(t){const e=6378.137*ki*1e3,i=Math.cos(t*ki),r=1/(1-Si*(1-i*i)),n=Math.sqrt(r);this.kx=e*n*i,this.ky=e*n*r*(1-Si)}distance(t,e){const i=this.wrap(t[0]-e[0])*this.kx,r=(t[1]-e[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(t,e){let i,r,n,o,a=1/0;for(let s=0;s<t.length-1;s++){let l=t[s][0],c=t[s][1],u=this.wrap(t[s+1][0]-l)*this.kx,h=(t[s+1][1]-c)*this.ky,d=0;0===u&&0===h||(d=(this.wrap(e[0]-l)*this.kx*u+(e[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=t[s+1][0],c=t[s+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=this.wrap(e[0]-l)*this.kx,h=(e[1]-c)*this.ky;const p=u*u+h*h;p<a&&(a=p,i=l,r=c,n=s,o=d)}return{point:[i,r],index:n,t:Math.max(0,Math.min(1,o))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Ti(t,e){return e[0]-t[0]}function Ai(t){return t[1]-t[0]+1}function Pi(t,e){return t[1]>=t[0]&&t[1]<e}function Mi(t,e){if(t[0]>t[1])return[null,null];const i=Ai(t);if(e){if(2===i)return[t,null];const e=Math.floor(i/2);return[[t[0],t[0]+e],[t[0]+e,t[1]]]}if(1===i)return[t,null];const r=Math.floor(i/2)-1;return[[t[0],t[0]+r],[t[0]+r+1,t[1]]]}function Ei(t,e){if(!Pi(e,t.length))return[1/0,1/0,-1/0,-1/0];const i=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)$e(i,t[r]);return i}function Ii(t){const e=[1/0,1/0,-1/0,-1/0];for(const i of t)for(const t of i)$e(e,t);return e}function zi(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function Li(t,e,i){if(!zi(t)||!zi(e))return NaN;let r=0,n=0;return t[2]<e[0]&&(r=e[0]-t[2]),t[0]>e[2]&&(r=t[0]-e[2]),t[1]>e[3]&&(n=t[1]-e[3]),t[3]<e[1]&&(n=e[1]-t[3]),i.distance([0,0],[r,n])}function Di(t,e,i){const r=i.pointOnLine(e,t);return i.distance(t,r.point)}function Ri(t,e,i,r,n){const o=Math.min(Di(t,[i,r],n),Di(e,[i,r],n)),a=Math.min(Di(i,[t,e],n),Di(r,[t,e],n));return Math.min(o,a)}function Oi(t,e,i,r,n){if(!Pi(e,t.length)||!Pi(r,i.length))return 1/0;let o=1/0;for(let a=e[0];a<e[1];++a){const e=t[a],s=t[a+1];for(let t=r[0];t<r[1];++t){const r=i[t],a=i[t+1];if(ti(e,s,r,a))return 0;o=Math.min(o,Ri(e,s,r,a,n))}}return o}function Bi(t,e,i,r,n){if(!Pi(e,t.length)||!Pi(r,i.length))return NaN;let o=1/0;for(let a=e[0];a<=e[1];++a)for(let e=r[0];e<=r[1];++e)if(o=Math.min(o,n.distance(t[a],i[e])),0===o)return o;return o}function Fi(t,e,i){if(ii(t,e,!0))return 0;let r=1/0;for(const n of e){const e=n[0],o=n[n.length-1];if(e!==o&&(r=Math.min(r,Di(t,[o,e],i)),0===r))return r;const a=i.pointOnLine(n,t);if(r=Math.min(r,i.distance(t,a.point)),0===r)return r}return r}function ji(t,e,i,r){if(!Pi(e,t.length))return NaN;for(let o=e[0];o<=e[1];++o)if(ii(t[o],i,!0))return 0;let n=1/0;for(let o=e[0];o<e[1];++o){const e=t[o],a=t[o+1];for(const t of i)for(let i=0,o=t.length,s=o-1;i<o;s=i++){const o=t[s],l=t[i];if(ti(e,a,o,l))return 0;n=Math.min(n,Ri(e,a,o,l,r))}}return n}function Ni(t,e){for(const i of t)for(const t of i)if(ii(t,e,!0))return!0;return!1}function Vi(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const n=Ii(t),o=Ii(e);if(r!==1/0&&Li(n,o,i)>=r)return r;if(Je(n,o)){if(Ni(t,e))return 0}else if(Ni(e,t))return 0;let a=1/0;for(const s of t)for(let t=0,r=s.length,n=r-1;t<r;n=t++){const r=s[n],o=s[t];for(const t of e)for(let e=0,n=t.length,s=n-1;e<n;s=e++){const n=t[s],l=t[e];if(ti(r,o,n,l))return 0;a=Math.min(a,Ri(r,o,n,l,i))}}return a}function Ui(t,e,i,r,n,o){if(!o)return;const a=Li(Ei(r,o),n,i);a<e&&t.push([a,o,[0,0]])}function Wi(t,e,i,r,n,o,a){if(!o||!a)return;const s=Li(Ei(r,o),Ei(n,a),i);s<e&&t.push([s,o,a])}function Hi(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=Math.min(r.distance(t[0],i[0][0]),n);if(0===o)return o;const a=new pi([[0,[0,t.length-1],[0,0]]],Ti),s=Ii(i);for(;a.length>0;){const n=a.pop();if(n[0]>=o)continue;const l=n[1],c=e?50:100;if(Ai(l)<=c){if(!Pi(l,t.length))return NaN;if(e){const e=ji(t,l,i,r);if(isNaN(e)||0===e)return e;o=Math.min(o,e)}else for(let e=l[0];e<=l[1];++e){const n=Fi(t[e],i,r);if(o=Math.min(o,n),0===o)return 0}}else{const i=Mi(l,e);Ui(a,o,r,t,s,i[0]),Ui(a,o,r,t,s,i[1])}}return o}function Gi(t,e,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=Math.min(o,n.distance(t[0],i[0]));if(0===a)return a;const s=new pi([[0,[0,t.length-1],[0,i.length-1]]],Ti);for(;s.length>0;){const o=s.pop();if(o[0]>=a)continue;const l=o[1],c=o[2],u=e?50:100,h=r?50:100;if(Ai(l)<=u&&Ai(c)<=h){if(!Pi(l,t.length)&&Pi(c,i.length))return NaN;let o;if(e&&r)o=Oi(t,l,i,c,n),a=Math.min(a,o);else if(e&&!r){const e=t.slice(l[0],l[1]+1);for(let t=c[0];t<=c[1];++t)if(o=Di(i[t],e,n),a=Math.min(a,o),0===a)return a}else if(!e&&r){const e=i.slice(c[0],c[1]+1);for(let i=l[0];i<=l[1];++i)if(o=Di(t[i],e,n),a=Math.min(a,o),0===a)return a}else o=Bi(t,l,i,c,n),a=Math.min(a,o)}else{const o=Mi(l,e),u=Mi(c,r);Wi(s,a,n,t,i,o[0],u[0]),Wi(s,a,n,t,i,o[0],u[1]),Wi(s,a,n,t,i,o[1],u[0]),Wi(s,a,n,t,i,o[1],u[1])}}return a}function qi(t){return"MultiPolygon"===t.type?t.coordinates.map((t=>({type:"Polygon",coordinates:t}))):"MultiLineString"===t.type?t.coordinates.map((t=>({type:"LineString",coordinates:t}))):"MultiPoint"===t.type?t.coordinates.map((t=>({type:"Point",coordinates:t}))):[t]}class Zi{constructor(t,e){this.type=ct,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'distance' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(ie(t[1])){const e=t[1];if("FeatureCollection"===e.type)return new Zi(e,e.features.map((t=>qi(t.geometry))).flat());if("Feature"===e.type)return new Zi(e,qi(e.geometry));if("type"in e&&"coordinates"in e)return new Zi(e,qi(e))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=t.geometry(),r=i.flat().map((e=>Ke([e.x,e.y],t.canonical)));if(0===i.length)return NaN;const n=new Ci(r[0][1]);let o=1/0;for(const a of e){switch(a.type){case"Point":o=Math.min(o,Gi(r,!1,[a.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,Gi(r,!1,a.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,Hi(r,!1,a.coordinates,n,o))}if(0===o)return o}return o}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=t.geometry(),r=i.flat().map((e=>Ke([e.x,e.y],t.canonical)));if(0===i.length)return NaN;const n=new Ci(r[0][1]);let o=1/0;for(const a of e){switch(a.type){case"Point":o=Math.min(o,Gi(r,!0,[a.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,Gi(r,!0,a.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,Hi(r,!0,a.coordinates,n,o))}if(0===o)return o}return o}(t,this.geometries);if("Polygon"===t.geometryType())return function(t,e){const i=t.geometry();if(0===i.length||0===i[0].length)return NaN;const r=xi(i,0).map((e=>e.map((e=>e.map((e=>Ke([e.x,e.y],t.canonical))))))),n=new Ci(r[0][0][0][1]);let o=1/0;for(const a of e)for(const t of r){switch(a.type){case"Point":o=Math.min(o,Hi([a.coordinates],!1,t,n,o));break;case"LineString":o=Math.min(o,Hi(a.coordinates,!0,t,n,o));break;case"Polygon":o=Math.min(o,Vi(t,a.coordinates,n,o))}if(0===o)return o}return o}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Xi={"==":Be,"!=":Fe,">":Ne,"<":je,">=":Ue,"<=":Ve,array:le,at:ge,boolean:le,case:_e,coalesce:Le,collator:We,format:Ge,image:qe,in:ye,"index-of":ve,interpolate:Ie,"interpolate-hcl":Ie,"interpolate-lab":Ie,length:Ze,let:fe,literal:oe,match:xe,number:le,"number-format":He,object:le,slice:be,step:Se,string:le,"to-boolean":ue,"to-color":ue,"to-number":ue,"to-string":ue,var:me,within:di,distance:Zi};class Yi{constructor(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const i=t[0],r=Yi.definitions[i];if(!r)return e.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);const n=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((e=>{let[i]=e;return!Array.isArray(i)||i.length===t.length-1}));let s=null;for(const[l,c]of a){s=new pe(e.registry,tr,e.path,null,e.scope);const r=[];let o=!1;for(let e=1;e<t.length;e++){const i=t[e],n=Array.isArray(l)?l[e-1]:l.type,a=s.parse(i,1+r.length,n);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(r.length," instead."));else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,i=r[t];s.concat(t+1).checkSubtype(e,i.type)}if(0===s.errors.length)return new Yi(i,n,c,r)}}if(1===a.length)e.errors.push(...s.errors);else{const i=(a.length?a:o).map((t=>{let[e]=t;return i=e,Array.isArray(i)?"(".concat(i.map(bt).join(", "),")"):"(".concat(bt(i.type),"...)");var i})).join(" | "),r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],1+r.length);if(!i)return null;r.push(bt(i.type))}e.error("Expected arguments of type ".concat(i,", but found (").concat(r.join(", "),") instead."))}return null}static register(t,e){Yi.definitions=e;for(const i in e)t[i]=Yi}}function Ki(t,e){let[i,r,n,o]=e;i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const a=o?o.evaluate(t):1,s=ee(i,r,n,a);if(s)throw new ae(s);return new Zt(i/255,r/255,n/255,a,!1)}function $i(t,e){return t in e}function Ji(t,e){const i=e[t];return void 0===i?null:i}function Qi(t){return{type:t}}function tr(t){if(t instanceof me)return tr(t.boundExpression);if(t instanceof Yi&&"error"===t.name)return!1;if(t instanceof We)return!1;if(t instanceof di)return!1;if(t instanceof Zi)return!1;const e=t instanceof ue||t instanceof le;let i=!0;return t.eachChild((t=>{i=e?i&&tr(t):i&&t instanceof oe})),!!i&&er(t)&&rr(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function er(t){if(t instanceof Yi){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof di)return!1;if(t instanceof Zi)return!1;let e=!0;return t.eachChild((t=>{e&&!er(t)&&(e=!1)})),e}function ir(t){if(t instanceof Yi&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ir(t)&&(e=!1)})),e}function rr(t,e){if(t instanceof Yi&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!rr(t,e)&&(i=!1)})),i}function nr(t){return{result:"success",value:t}}function or(t){return{result:"error",value:t}}function ar(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function sr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function lr(t){return!!t.expression&&t.expression.interpolated}function cr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ur(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function hr(t){return t}function dr(t,e){const i="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],n=r||!(r||void 0!==t.property),o=t.type||(lr(e)?"exponential":"interval");if(i||"padding"===e.type){const r=i?Zt.parse:$t.parse;(t=ot({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],r(t[1])]))),t.default=r(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==(a=t.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error('Unknown color space: "'.concat(t.colorSpace,'"'));var a;let s,l,c;if("exponential"===o)s=gr;else if("interval"===o)s=mr;else if("categorical"===o){s=fr,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));s=yr}if(r){const i={},r=[];for(let e=0;e<t.stops.length;e++){const n=t.stops[e],o=n[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),i[o].stops.push([n[0].value,n[1]])}const n=[];for(const t of r)n.push([i[t].zoom,dr(i[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Ie.interpolationFactor.bind(void 0,o),zoomStops:n.map((t=>t[0])),evaluate:(i,r)=>{let{zoom:o}=i;return gr({stops:n,base:t.base},e,o).evaluate(o,r)}}}if(n){const i="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:Ie.interpolationFactor.bind(void 0,i),zoomStops:t.stops.map((t=>t[0])),evaluate:i=>{let{zoom:r}=i;return s(t,e,r,l,c)}}}return{kind:"source",evaluate(i,r){const n=r&&r.properties?r.properties[t.property]:void 0;return void 0===n?pr(t.default,e.default):s(t,e,n,l,c)}}}function pr(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function fr(t,e,i,r,n){return pr(typeof i===n?r[i]:void 0,t.default,e.default)}function mr(t,e,i){if("number"!==cr(i))return pr(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];const n=we(t.stops.map((t=>t[0])),i);return t.stops[n][1]}function gr(t,e,i){const r=void 0!==t.base?t.base:1;if("number"!==cr(i))return pr(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const o=we(t.stops.map((t=>t[0])),i),a=function(t,e,i,r){const n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],c=Ee[e.type]||hr;return"function"==typeof s.evaluate?{evaluate(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];const n=s.evaluate.apply(void 0,i),o=l.evaluate.apply(void 0,i);if(void 0!==n&&void 0!==o)return c(n,o,a,t.colorSpace)}}:c(s,l,a,t.colorSpace)}function yr(t,e,i){switch(e.type){case"color":i=Zt.parse(i);break;case"formatted":i=Kt.fromString(i.toString());break;case"resolvedImage":i=te.fromString(i.toString());break;case"padding":i=$t.parse(i);break;default:cr(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0)}return pr(i,t.default,e.default)}Yi.register(Xi,{error:[{kind:"error"},[ut],(t,e)=>{let[i]=e;throw new ae(i.evaluate(t))}],typeof:[ut,[ft],(t,e)=>{let[i]=e;return bt(re(i.evaluate(t)))}],"to-rgba":[_t(ct,4),[dt],(t,e)=>{let[i]=e;const[r,n,o,a]=i.evaluate(t).rgb;return[255*r,255*n,255*o,a]}],rgb:[dt,[ct,ct,ct],Ki],rgba:[dt,[ct,ct,ct,ct],Ki],has:{type:ht,overloads:[[[ut],(t,e)=>{let[i]=e;return $i(i.evaluate(t),t.properties())}],[[ut,pt],(t,e)=>{let[i,r]=e;return $i(i.evaluate(t),r.evaluate(t))}]]},get:{type:ft,overloads:[[[ut],(t,e)=>{let[i]=e;return Ji(i.evaluate(t),t.properties())}],[[ut,pt],(t,e)=>{let[i,r]=e;return Ji(i.evaluate(t),r.evaluate(t))}]]},"feature-state":[ft,[ut],(t,e)=>{let[i]=e;return Ji(i.evaluate(t),t.featureState||{})}],properties:[pt,[],t=>t.properties()],"geometry-type":[ut,[],t=>t.geometryType()],id:[ft,[],t=>t.id()],zoom:[ct,[],t=>t.globals.zoom],"heatmap-density":[ct,[],t=>t.globals.heatmapDensity||0],"line-progress":[ct,[],t=>t.globals.lineProgress||0],accumulated:[ft,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ct,Qi(ct),(t,e)=>{let i=0;for(const r of e)i+=r.evaluate(t);return i}],"*":[ct,Qi(ct),(t,e)=>{let i=1;for(const r of e)i*=r.evaluate(t);return i}],"-":{type:ct,overloads:[[[ct,ct],(t,e)=>{let[i,r]=e;return i.evaluate(t)-r.evaluate(t)}],[[ct],(t,e)=>{let[i]=e;return-i.evaluate(t)}]]},"/":[ct,[ct,ct],(t,e)=>{let[i,r]=e;return i.evaluate(t)/r.evaluate(t)}],"%":[ct,[ct,ct],(t,e)=>{let[i,r]=e;return i.evaluate(t)%r.evaluate(t)}],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(t,e)=>{let[i,r]=e;return Math.pow(i.evaluate(t),r.evaluate(t))}],sqrt:[ct,[ct],(t,e)=>{let[i]=e;return Math.sqrt(i.evaluate(t))}],log10:[ct,[ct],(t,e)=>{let[i]=e;return Math.log(i.evaluate(t))/Math.LN10}],ln:[ct,[ct],(t,e)=>{let[i]=e;return Math.log(i.evaluate(t))}],log2:[ct,[ct],(t,e)=>{let[i]=e;return Math.log(i.evaluate(t))/Math.LN2}],sin:[ct,[ct],(t,e)=>{let[i]=e;return Math.sin(i.evaluate(t))}],cos:[ct,[ct],(t,e)=>{let[i]=e;return Math.cos(i.evaluate(t))}],tan:[ct,[ct],(t,e)=>{let[i]=e;return Math.tan(i.evaluate(t))}],asin:[ct,[ct],(t,e)=>{let[i]=e;return Math.asin(i.evaluate(t))}],acos:[ct,[ct],(t,e)=>{let[i]=e;return Math.acos(i.evaluate(t))}],atan:[ct,[ct],(t,e)=>{let[i]=e;return Math.atan(i.evaluate(t))}],min:[ct,Qi(ct),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ct,Qi(ct),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ct,[ct],(t,e)=>{let[i]=e;return Math.abs(i.evaluate(t))}],round:[ct,[ct],(t,e)=>{let[i]=e;const r=i.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[ct,[ct],(t,e)=>{let[i]=e;return Math.floor(i.evaluate(t))}],ceil:[ct,[ct],(t,e)=>{let[i]=e;return Math.ceil(i.evaluate(t))}],"filter-==":[ht,[ut,ft],(t,e)=>{let[i,r]=e;return t.properties()[i.value]===r.value}],"filter-id-==":[ht,[ft],(t,e)=>{let[i]=e;return t.id()===i.value}],"filter-type-==":[ht,[ut],(t,e)=>{let[i]=e;return t.geometryType()===i.value}],"filter-<":[ht,[ut,ft],(t,e)=>{let[i,r]=e;const n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[ht,[ft],(t,e)=>{let[i]=e;const r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[ht,[ut,ft],(t,e)=>{let[i,r]=e;const n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[ht,[ft],(t,e)=>{let[i]=e;const r=t.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[ht,[ut,ft],(t,e)=>{let[i,r]=e;const n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[ht,[ft],(t,e)=>{let[i]=e;const r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[ht,[ut,ft],(t,e)=>{let[i,r]=e;const n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[ht,[ft],(t,e)=>{let[i]=e;const r=t.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[ht,[ft],(t,e)=>{let[i]=e;return i.value in t.properties()}],"filter-has-id":[ht,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ht,[_t(ut)],(t,e)=>{let[i]=e;return i.value.indexOf(t.geometryType())>=0}],"filter-id-in":[ht,[_t(ft)],(t,e)=>{let[i]=e;return i.value.indexOf(t.id())>=0}],"filter-in-small":[ht,[ut,_t(ft)],(t,e)=>{let[i,r]=e;return r.value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[ht,[ut,_t(ft)],(t,e)=>{let[i,r]=e;return function(t,e,i,r){for(;i<=r;){const n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:ht,overloads:[[[ht,ht],(t,e)=>{let[i,r]=e;return i.evaluate(t)&&r.evaluate(t)}],[Qi(ht),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:ht,overloads:[[[ht,ht],(t,e)=>{let[i,r]=e;return i.evaluate(t)||r.evaluate(t)}],[Qi(ht),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[ht,[ht],(t,e)=>{let[i]=e;return!i.evaluate(t)}],"is-supported-script":[ht,[ut],(t,e)=>{let[i]=e;const r=t.globals&&t.globals.isSupportedScript;return!r||r(i.evaluate(t))}],upcase:[ut,[ut],(t,e)=>{let[i]=e;return i.evaluate(t).toUpperCase()}],downcase:[ut,[ut],(t,e)=>{let[i]=e;return i.evaluate(t).toLowerCase()}],concat:[ut,Qi(ft),(t,e)=>e.map((e=>ne(e.evaluate(t)))).join("")],"resolved-locale":[ut,[mt],(t,e)=>{let[i]=e;return i.evaluate(t).resolvedLocale()}]});class vr{constructor(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new de,this._defaultValue=e?"color"===(i=e).type&&ur(i.default)?new Zt(0,0,0,0):"color"===i.type?Zt.parse(i.default)||null:"padding"===i.type?$t.parse(i.default)||null:"variableAnchorOffsetCollection"===i.type?Qt.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ae("Expected value to be one of ".concat(Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", "),", but found ").concat(JSON.stringify(t)," instead."));return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function xr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Xi}function _r(t,e){const i=new pe(Xi,tr,[],e?function(t){const e={color:dt,string:ut,number:ct,enum:ut,boolean:ht,formatted:gt,padding:yt,resolvedImage:vt,variableAnchorOffsetCollection:xt};return"array"===t.type?_t(e[t.value]||ft,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?nr(new vr(r,e)):or(i.errors)}class br{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ir(e.expression)}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)}evaluate(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)}}class wr{constructor(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ir(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)}evaluate(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)}interpolationFactor(t,e,i){return this.interpolationType?Ie.interpolationFactor(this.interpolationType,t,e,i):0}}function Sr(t,e){const i=_r(t,e);if("error"===i.result)return i;const r=i.value.expression,n=er(r);if(!n&&!ar(e))return or([new at("","data expressions not supported")]);const o=rr(r,["zoom"]);if(!o&&!sr(e))return or([new at("","zoom expressions not supported")]);const a=Cr(r);return a||o?a instanceof at?or([a]):a instanceof Ie&&!lr(e)?or([new at("",'"interpolate" expressions cannot be used with this property')]):nr(a?new wr(n?"camera":"composite",i.value,a.labels,a instanceof Ie?a.interpolation:void 0):new br(n?"constant":"source",i.value)):or([new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class kr{constructor(t,e){this._parameters=t,this._specification=e,ot(this,dr(this._parameters,this._specification))}static deserialize(t){return new kr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Cr(t){let e=null;if(t instanceof fe)e=Cr(t.result);else if(t instanceof Le){for(const i of t.args)if(e=Cr(i),e)break}else(t instanceof Se||t instanceof Ie)&&t.input instanceof Yi&&"zoom"===t.input.name&&(e=t);return e instanceof at||t.eachChild((t=>{const i=Cr(t);i instanceof at?e=i:!e&&i?e=new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new at("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Tr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Tr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Ar={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pr(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Tr(t)||(t=Ir(t));const e=_r(t,Ar);if("error"===e.result)throw new Error(e.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return{filter:(t,i,r)=>e.value.evaluate(t,i,{},r),needGeometry:Er(t)}}function Mr(t,e){return t<e?-1:t>e?1:0}function Er(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(let e=1;e<t.length;e++)if(Er(t[e]))return!0;return!1}function Ir(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?zr(t[1],t[2],"=="):"!="===e?Rr(zr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?zr(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(Ir))):"all"===e?["all"].concat(t.slice(1).map(Ir)):"none"===e?["all"].concat(t.slice(1).map(Ir).map(Rr)):"in"===e?Lr(t[1],t.slice(2)):"!in"===e?Rr(Lr(t[1],t.slice(2))):"has"===e?Dr(t[1]):"!has"!==e||Rr(Dr(t[1]));var i}function zr(t,e,i){switch(t){case"$type":return["filter-type-".concat(i),e];case"$id":return["filter-id-".concat(i),e];default:return["filter-".concat(i),t,e]}}function Lr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Mr)]]:["filter-in-small",t,["literal",e]]}}function Dr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Rr(t){return["!",t]}function Or(t){const e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){let e="[";for(const i of t)e+="".concat(Or(i),",");return"".concat(e,"]")}const i=Object.keys(t).sort();let r="{";for(let n=0;n<i.length;n++)r+="".concat(JSON.stringify(i[n]),":").concat(Or(t[i[n]]),",");return"".concat(r,"}")}function Br(t){let e="";for(const i of Z)e+="/".concat(Or(t[i]));return e}function Fr(t){const e=t.value;return e?[new nt(t.key,e,"constants have been deprecated as of v8")]:[]}function jr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Nr(t){if(Array.isArray(t))return t.map(Nr);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Nr(t[i]);return e}return jr(t)}function Vr(t){const e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=t.validateSpec;let l=[];const c=cr(i);if("object"!==c)return[new nt(e,i,"object expected, ".concat(c," found"))];for(const u in i){const t=u.split(".")[0],c=r[t]||r["*"];let h;if(n[t])h=n[t];else if(r[t])h=s;else if(n["*"])h=n["*"];else{if(!r["*"]){l.push(new nt(e,i[u],'unknown property "'.concat(u,'"')));continue}h=s}l=l.concat(h({key:(e?"".concat(e,"."):e)+u,value:i[u],valueSpec:c,style:o,styleSpec:a,object:i,objectKey:u,validateSpec:s},i))}for(const u in r)n[u]||r[u].required&&void 0===r[u].default&&void 0===i[u]&&l.push(new nt(e,i,'missing required property "'.concat(u,'"')));return l}function Ur(t){const e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||t.validateSpec;if("array"!==cr(e))return[new nt(o,e,"array expected, ".concat(cr(e)," found"))];if(i.length&&e.length!==i.length)return[new nt(o,e,"array length ".concat(i.length," expected, length ").concat(e.length," found"))];if(i["min-length"]&&e.length<i["min-length"])return[new nt(o,e,"array length at least ".concat(i["min-length"]," expected, length ").concat(e.length," found"))];let s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===cr(i.value)&&(s=i.value);let l=[];for(let c=0;c<e.length;c++)l=l.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,validateSpec:t.validateSpec,style:r,styleSpec:n,key:"".concat(o,"[").concat(c,"]")}));return l}function Wr(t){const e=t.key,i=t.value,r=t.valueSpec;let n=cr(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new nt(e,i,"number expected, ".concat(n," found"))]:"minimum"in r&&i<r.minimum?[new nt(e,i,"".concat(i," is less than the minimum value ").concat(r.minimum))]:"maximum"in r&&i>r.maximum?[new nt(e,i,"".concat(i," is greater than the maximum value ").concat(r.maximum))]:[]}function Hr(t){const e=t.valueSpec,i=jr(t.value.type);let r,n,o,a={};const s="categorical"!==i&&void 0===t.value.property,l=!s,c="array"===cr(t.value.stops)&&"array"===cr(t.value.stops[0])&&"object"===cr(t.value.stops[0][0]),u=Vr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new nt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(Ur({key:t.key,value:r,valueSpec:t.valueSpec,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===cr(r)&&0===r.length&&e.push(new nt(t.key,r,"array must have at least one stop")),e},default:function(t){return t.validateSpec({key:t.key,value:t.value,valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&u.push(new nt(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new nt(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!lr(t.valueSpec)&&u.push(new nt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!ar(t.valueSpec)?u.push(new nt(t.key,t.value,"property functions not supported")):s&&!sr(t.valueSpec)&&u.push(new nt(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||u.push(new nt(t.key,t.value,'"property" property is required')),u;function h(t){let i=[];const r=t.value,s=t.key;if("array"!==cr(r))return[new nt(s,r,"array expected, ".concat(cr(r)," found"))];if(2!==r.length)return[new nt(s,r,"array length 2 expected, length ".concat(r.length," found"))];if(c){if("object"!==cr(r[0]))return[new nt(s,r,"object expected, ".concat(cr(r[0])," found"))];if(void 0===r[0].zoom)return[new nt(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new nt(s,r,"object stop key must have value")];if(o&&o>jr(r[0].zoom))return[new nt(s,r[0].zoom,"stop zoom values must appear in ascending order")];jr(r[0].zoom)!==o&&(o=jr(r[0].zoom),n=void 0,a={}),i=i.concat(Vr({key:"".concat(s,"[0]"),value:r[0],valueSpec:{zoom:{}},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Wr,value:d}}))}else i=i.concat(d({key:"".concat(s,"[0]"),value:r[0],valueSpec:{},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec},r));return xr(Nr(r[1]))?i.concat([new nt("".concat(s,"[1]"),r[1],"expressions are not allowed in function stops.")]):i.concat(t.validateSpec({key:"".concat(s,"[1]"),value:r[1],valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=cr(t.value),l=jr(t.value),c=null!==t.value?t.value:o;if(r){if(s!==r)return[new nt(t.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(r))]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new nt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let r="number expected, ".concat(s," found");return ar(e)&&void 0===i&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(t.key,c,r)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==n&&l<n?[new nt(t.key,c,"stop domain values must appear in ascending order")]:(n=l,"categorical"===i&&l in a?[new nt(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new nt(t.key,c,"integer expected, found ".concat(l))]}}function Gr(t){const e=("property"===t.expressionContext?Sr:_r)(Nr(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new nt("".concat(t.key).concat(e.key),t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new nt(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ir(i))return[new nt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ir(i))return[new nt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!rr(i,["zoom","feature-state"]))return[new nt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!er(i))return[new nt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qr(t){const e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(jr(i))&&n.push(new nt(e,i,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(i)," found"))):-1===Object.keys(r.values).indexOf(jr(i))&&n.push(new nt(e,i,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(i)," found"))),n}function Zr(t){return Tr(Nr(t.value))?Gr(ot({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xr(t)}function Xr(t){const e=t.value,i=t.key;if("array"!==cr(e))return[new nt(i,e,"array expected, ".concat(cr(e)," found"))];const r=t.styleSpec;let n,o=[];if(e.length<1)return[new nt(i,e,"filter array must have at least 1 element")];switch(o=o.concat(qr({key:"".concat(i,"[0]"),value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),jr(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===jr(e[1])&&o.push(new nt(i,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new nt(i,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&(n=cr(e[1]),"string"!==n&&o.push(new nt("".concat(i,"[1]"),e[1],"string expected, ".concat(n," found"))));for(let a=2;a<e.length;a++)n=cr(e[a]),"$type"===jr(e[1])?o=o.concat(qr({key:"".concat(i,"[").concat(a,"]"),value:e[a],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new nt("".concat(i,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(n," found")));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(Xr({key:"".concat(i,"[").concat(r,"]"),value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=cr(e[1]),2!==e.length?o.push(new nt(i,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==n&&o.push(new nt("".concat(i,"[1]"),e[1],"string expected, ".concat(n," found")))}return o}function Yr(t,e){const i=t.key,r=t.validateSpec,n=t.style,o=t.styleSpec,a=t.value,s=t.objectKey,l=o["".concat(e,"_").concat(t.layerType)];if(!l)return[];const c=s.match(/^(.*)-transition$/);if("paint"===e&&c&&l[c[1]]&&l[c[1]].transition)return r({key:i,value:a,valueSpec:o.transition,style:n,styleSpec:o});const u=t.valueSpec||l[s];if(!u)return[new nt(i,a,'unknown property "'.concat(s,'"'))];let h;if("string"===cr(a)&&ar(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(a)))return[new nt(i,a,'"'.concat(s,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(h[1])," }`."))];const d=[];return"symbol"===t.layerType&&("text-field"===s&&n&&!n.glyphs&&d.push(new nt(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&ur(Nr(a))&&"identity"===jr(a.type)&&d.push(new nt(i,a,'"text-font" does not support identity functions'))),d.concat(r({key:t.key,value:a,valueSpec:u,style:n,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:s}))}function Kr(t){return Yr(t,"paint")}function $r(t){return Yr(t,"layout")}function Jr(t){let e=[];const i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new nt(r,i,'either "type" or "ref" is required'));let a=jr(i.type);const s=jr(i.ref);if(i.id){const o=jr(i.id);for(let a=0;a<t.arrayIndex;a++){const t=n.layers[a];jr(t.id)===o&&e.push(new nt(r,i.id,'duplicate layer id "'.concat(i.id,'", previously used at line ').concat(t.id.__line__)))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new nt(r,i[t],'"'.concat(t,'" is prohibited for ref layers')))})),n.layers.forEach((e=>{jr(e.id)===s&&(t=e)})),t?t.ref?e.push(new nt(r,i.ref,"ref cannot reference another ref layer")):a=jr(t.type):e.push(new nt(r,i.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a)if(i.source){const t=n.sources&&n.sources[i.source],o=t&&jr(t.type);t?"vector"===o&&"raster"===a?e.push(new nt(r,i.source,'layer "'.concat(i.id,'" requires a raster source'))):"raster-dem"!==o&&"hillshade"===a?e.push(new nt(r,i.source,'layer "'.concat(i.id,'" requires a raster-dem source'))):"raster"===o&&"raster"!==a?e.push(new nt(r,i.source,'layer "'.concat(i.id,'" requires a vector source'))):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new nt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new nt(r,i,'layer "'.concat(i.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new nt(r,i,'layer "'.concat(i.id,'" must specify a "source-layer"'))):e.push(new nt(r,i.source,'source "'.concat(i.source,'" not found')))}else e.push(new nt(r,i,'missing required property "source"'));return e=e.concat(Vr({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":()=>[],type:()=>t.validateSpec({key:"".concat(r,".type"),value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:i,objectKey:"type"}),filter:Zr,layout:t=>Vr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>$r(ot({layerType:a},t))}}),paint:t=>Vr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>Kr(ot({layerType:a},t))}})}})),e}function Qr(t){const e=t.value,i=t.key,r=cr(e);return"string"!==r?[new nt(i,e,"string expected, ".concat(r," found"))]:[]}const tn={promoteId:function(t){let{key:e,value:i}=t;if("string"===cr(i))return Qr({key:e,value:i});{const t=[];for(const r in i)t.push(...Qr({key:"".concat(e,".").concat(r),value:i[r]}));return t}}};function en(t){const e=t.value,i=t.key,r=t.styleSpec,n=t.style,o=t.validateSpec;if(!e.type)return[new nt(i,e,'"type" is required')];const a=jr(e.type);let s;switch(a){case"vector":case"raster":return s=Vr({key:i,value:e,valueSpec:r["source_".concat(a.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:tn,validateSpec:o}),s;case"raster-dem":return s=function(t){var e;const i=null!==(e=t.sourceName)&&void 0!==e?e:"",r=t.value,n=t.styleSpec,o=n.source_raster_dem,a=t.style;let s=[];const l=cr(r);if(void 0===r)return s;if("object"!==l)return s.push(new nt("source_raster_dem",r,"object expected, ".concat(l," found"))),s;const c="custom"===jr(r.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=t.value.encoding?'"'.concat(t.value.encoding,'"'):"Default";for(const d in r)!c&&u.includes(d)?s.push(new nt(d,r[d],'In "'.concat(i,'": "').concat(d,'" is only valid when "encoding" is set to "custom". ').concat(h," encoding found"))):o[d]?s=s.concat(t.validateSpec({key:d,value:r[d],valueSpec:o[d],validateSpec:t.validateSpec,style:a,styleSpec:n})):s.push(new nt(d,r[d],'unknown property "'.concat(d,'"')));return s}({sourceName:i,value:e,style:t.style,styleSpec:r,validateSpec:o}),s;case"geojson":if(s=Vr({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,validateSpec:o,objectElementValidators:tn}),e.cluster)for(const t in e.clusterProperties){const[r,n]=e.clusterProperties[t],a="string"==typeof r?[r,["accumulated"],["get",t]]:r;s.push(...Gr({key:"".concat(i,".").concat(t,".map"),value:n,validateSpec:o,expressionContext:"cluster-map"})),s.push(...Gr({key:"".concat(i,".").concat(t,".reduce"),value:a,validateSpec:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Vr({key:i,value:e,valueSpec:r.source_video,style:n,validateSpec:o,styleSpec:r});case"image":return Vr({key:i,value:e,valueSpec:r.source_image,style:n,validateSpec:o,styleSpec:r});case"canvas":return[new nt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qr({key:"".concat(i,".type"),value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,validateSpec:o,styleSpec:r})}}function rn(t){const e=t.value,i=t.styleSpec,r=i.light,n=t.style;let o=[];const a=cr(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new nt("light",e,"object expected, ".concat(a," found"))]),o;for(const s in e){const a=s.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?t.validateSpec({key:s,value:e[s],valueSpec:i.transition,validateSpec:t.validateSpec,style:n,styleSpec:i}):r[s]?t.validateSpec({key:s,value:e[s],valueSpec:r[s],validateSpec:t.validateSpec,style:n,styleSpec:i}):[new nt(s,e[s],'unknown property "'.concat(s,'"'))])}return o}function nn(t){const e=t.value,i=t.styleSpec,r=i.sky,n=t.style,o=cr(e);if(void 0===e)return[];if("object"!==o)return[new nt("sky",e,"object expected, ".concat(o," found"))];let a=[];for(const s in e)a=a.concat(r[s]?t.validateSpec({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i}):[new nt(s,e[s],'unknown property "'.concat(s,'"'))]);return a}function on(t){const e=t.value,i=t.styleSpec,r=i.terrain,n=t.style;let o=[];const a=cr(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new nt("terrain",e,"object expected, ".concat(a," found"))]),o;for(const s in e)o=o.concat(r[s]?t.validateSpec({key:s,value:e[s],valueSpec:r[s],validateSpec:t.validateSpec,style:n,styleSpec:i}):[new nt(s,e[s],'unknown property "'.concat(s,'"'))]);return o}function an(t){let e=[];const i=t.value,r=t.key;if(Array.isArray(i)){const n=[],o=[];for(const a in i)i[a].id&&n.includes(i[a].id)&&e.push(new nt(r,i,"all the sprites' ids must be unique, but ".concat(i[a].id," is duplicated"))),n.push(i[a].id),i[a].url&&o.includes(i[a].url)&&e.push(new nt(r,i,"all the sprites' URLs must be unique, but ".concat(i[a].url," is duplicated"))),o.push(i[a].url),e=e.concat(Vr({key:"".concat(r,"[").concat(a,"]"),value:i[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:t.validateSpec}));return e}return Qr({key:r,value:i})}const sn={"*":()=>[],array:Ur,boolean:function(t){const e=t.value,i=t.key,r=cr(e);return"boolean"!==r?[new nt(i,e,"boolean expected, ".concat(r," found"))]:[]},number:Wr,color:function(t){const e=t.key,i=t.value,r=cr(i);return"string"!==r?[new nt(e,i,"color expected, ".concat(r," found"))]:Zt.parse(String(i))?[]:[new nt(e,i,'color expected, "'.concat(i,'" found'))]},constants:Fr,enum:qr,filter:Zr,function:Hr,layer:Jr,object:Vr,source:en,light:rn,sky:nn,terrain:on,string:Qr,formatted:function(t){return 0===Qr(t).length?[]:Gr(t)},resolvedImage:function(t){return 0===Qr(t).length?[]:Gr(t)},padding:function(t){const e=t.key,i=t.value;if("array"===cr(i)){if(i.length<1||i.length>4)return[new nt(e,i,"padding requires 1 to 4 values; ".concat(i.length," values found"))];const r={type:"number"};let n=[];for(let o=0;o<i.length;o++)n=n.concat(t.validateSpec({key:"".concat(e,"[").concat(o,"]"),value:i[o],validateSpec:t.validateSpec,valueSpec:r}));return n}return Wr({key:e,value:i,valueSpec:{}})},variableAnchorOffsetCollection:function(t){const e=t.key,i=t.value,r=cr(i),n=t.styleSpec;if("array"!==r||i.length<1||i.length%2!=0)return[new nt(e,i,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<i.length;a+=2)o=o.concat(qr({key:"".concat(e,"[").concat(a,"]"),value:i[a],valueSpec:n.layout_symbol["text-anchor"]})),o=o.concat(Ur({key:"".concat(e,"[").concat(a+1,"]"),value:i[a+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:n}));return o},sprite:an};function ln(t){const e=t.value,i=t.valueSpec,r=t.styleSpec;return t.validateSpec=ln,i.expression&&ur(jr(e))?Hr(t):i.expression&&xr(Nr(e))?Gr(t):i.type&&sn[i.type]?sn[i.type](t):Vr(ot({},t,{valueSpec:i.type?r[i.type]:i}))}function cn(t){const e=t.value,i=t.key,r=Qr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new nt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new nt(i,e,'"glyphs" url must include a "{range}" token'))),r}function un(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q,i=[];return i=i.concat(ln({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:ln,objectElementValidators:{glyphs:cn,"*":()=>[]}})),t.constants&&(i=i.concat(Fr({key:"constants",value:t.constants,style:t,styleSpec:e,validateSpec:ln}))),dn(i)}function hn(t){return function(e){return t({...e,validateSpec:ln})}}function dn(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function pn(t){return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return dn(t.apply(this,i))}}un.source=pn(hn(en)),un.sprite=pn(hn(an)),un.glyphs=pn(hn(cn)),un.light=pn(hn(rn)),un.sky=pn(hn(nn)),un.terrain=pn(hn(on)),un.layer=pn(hn(Jr)),un.filter=pn(hn(Zr)),un.paintProperty=pn(hn(Kr)),un.layoutProperty=pn(hn($r));const fn=un,mn=fn.light,gn=fn.paintProperty,yn=fn.layoutProperty;function vn(t,e){let i=!1;if(e&&e.length)for(const r of e)t.fire(new H(new Error(r.message))),i=!0;return i}class xn{constructor(t,e,i){const r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(let t=0;t<this.d*this.d;t++){const e=n[3+t],i=n[3+t+1];r.push(e===i?null:n.subarray(e,i))}const o=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*i;for(let t=0;t<this.d*this.d;t++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;const n=i/e*t;this.min=-n,this.max=t+n}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,i,r,n,o){this.cells[n].push(o)}query(t,e,i,r,n){const o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(t,e,i,r,this._queryCell,o,{},n),o}}_queryCell(t,e,i,r,n,o,a,s){const l=this.cells[n];if(null!==l){const n=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===a[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):t<=c[l+2]&&e<=c[l+3]&&i>=c[l+0]&&r>=c[l+1])?(a[h]=!0,o.push(n[h])):a[h]=!1}}}}_forEachCell(t,e,i,r,n,o,a,s){const l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(i),h=this._convertToCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&n.call(this,t,e,i,r,c,o,a,s))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let i=0;for(let o=0;o<this.cells.length;o++)i+=this.cells[o].length;const r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let n=e;for(let o=0;o<t.length;o++){const e=t[o];r[3+o]=n,r.set(e,n),n+=e.length}return r[3+t.length]=n,r.set(this.keys,n),n+=this.keys.length,r[3+t.length+1]=n,r.set(this.bboxes,n),n+=this.bboxes.length,r.buffer}static serialize(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}}static deserialize(t){return new xn(t.buffer)}}const _n={};function bn(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(_n[t])throw new Error("".concat(t," is already registered."));Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),_n[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}bn("Object",Object),bn("TransferableGridIndex",xn),bn("Color",Zt),bn("Error",Error),bn("AJAXError",B),bn("ResolvedImage",te),bn("StylePropertyFunction",kr),bn("StyleExpression",vr,{omit:["_evaluator"]}),bn("ZoomDependentExpression",wr),bn("ZoomConstantExpression",br),bn("CompoundExpression",Yi,{omit:["_evaluate"]});for(const Rh in Xi)Xi[Rh]._classRegistryKey||bn("Expression_".concat(Rh),Xi[Rh]);function wn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Sn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||t instanceof Error)return t;if(wn(t))return e&&e.push(t),t;if(A(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const r of t)i.push(Sn(r,e));return i}if("object"==typeof t){const i=t.constructor,r=i._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class ".concat(i.name));if(!_n[r])throw new Error("".concat(r," is not registered."));const n=i.serialize?i.serialize(t,e):{};if(i.serialize){if(e&&n===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in t){if(!t.hasOwnProperty(i))continue;if(_n[r].omit.indexOf(i)>=0)continue;const o=t[i];n[i]=_n[r].shallow.indexOf(i)>=0?o:Sn(o,e)}t instanceof Error&&(n.message=t.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(n.$name=r),n}throw new Error("can't serialize object of type "+typeof t)}function kn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||t instanceof Error||wn(t)||A(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(kn);if("object"==typeof t){const e=t.$name||"Object";if(!_n[e])throw new Error("can't deserialize unregistered class ".concat(e));const{klass:i}=_n[e];if(!i)throw new Error("can't deserialize unregistered class ".concat(e));if(i.deserialize)return i.deserialize(t);const r=Object.create(i.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const i=t[n];r[n]=_n[e].shallow.indexOf(n)>=0?i:kn(i)}return r}throw new Error("can't deserialize object of type "+typeof t)}class Cn{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const Tn={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function An(t){for(const e of t)if(En(e.charCodeAt(0)))return!0;return!1}function Pn(t){for(const e of t)if(!Mn(e.charCodeAt(0)))return!1;return!0}function Mn(t){return!(Tn.Arabic(t)||Tn["Arabic Supplement"](t)||Tn["Arabic Extended-A"](t)||Tn["Arabic Presentation Forms-A"](t)||Tn["Arabic Presentation Forms-B"](t))}function En(t){return!(746!==t&&747!==t&&(t<4352||!(Tn["Bopomofo Extended"](t)||Tn.Bopomofo(t)||Tn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Tn["CJK Compatibility Ideographs"](t)||Tn["CJK Compatibility"](t)||Tn["CJK Radicals Supplement"](t)||Tn["CJK Strokes"](t)||!(!Tn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Tn["CJK Unified Ideographs Extension A"](t)||Tn["CJK Unified Ideographs"](t)||Tn["Enclosed CJK Letters and Months"](t)||Tn["Hangul Compatibility Jamo"](t)||Tn["Hangul Jamo Extended-A"](t)||Tn["Hangul Jamo Extended-B"](t)||Tn["Hangul Jamo"](t)||Tn["Hangul Syllables"](t)||Tn.Hiragana(t)||Tn["Ideographic Description Characters"](t)||Tn.Kanbun(t)||Tn["Kangxi Radicals"](t)||Tn["Katakana Phonetic Extensions"](t)||Tn.Katakana(t)&&12540!==t||!(!Tn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Tn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Tn["Unified Canadian Aboriginal Syllabics"](t)||Tn["Unified Canadian Aboriginal Syllabics Extended"](t)||Tn["Vertical Forms"](t)||Tn["Yijing Hexagram Symbols"](t)||Tn["Yi Syllables"](t)||Tn["Yi Radicals"](t))))}function In(t){return!(En(t)||function(t){return!!(Tn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Tn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Tn["Letterlike Symbols"](t)||Tn["Number Forms"](t)||Tn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Tn["Control Pictures"](t)&&9251!==t||Tn["Optical Character Recognition"](t)||Tn["Enclosed Alphanumerics"](t)||Tn["Geometric Shapes"](t)||Tn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Tn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Tn["CJK Symbols and Punctuation"](t)||Tn.Katakana(t)||Tn["Private Use Area"](t)||Tn["CJK Compatibility Forms"](t)||Tn["Small Form Variants"](t)||Tn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function zn(t){return t>=1424&&t<=2303||Tn["Arabic Presentation Forms-A"](t)||Tn["Arabic Presentation Forms-B"](t)}function Ln(t,e){return!(!e&&zn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Tn.Khmer(t))}function Dn(t){for(const e of t)if(zn(e.charCodeAt(0)))return!0;return!1}const Rn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(t){this.pluginStatus=t.pluginStatus,this.pluginURL=t.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(t){this.applyArabicShaping=t.applyArabicShaping,this.processBidirectionalText=t.processBidirectionalText,this.processStyledBidirectionalText=t.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class On{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Cn,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!Ln(i.charCodeAt(0),e))return!1;return!0}(t,"loaded"===Rn.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class Bn{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(ur(t))return new kr(t,e);if(xr(t)){const i=Sr(t,e);if("error"===i.result)throw new Error(i.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return i.value}{let i=t;return"color"===e.type&&"string"==typeof t?i=Zt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)?"variableAnchorOffsetCollection"===e.type&&Array.isArray(t)&&(i=Qt.parse(t)):i=$t.parse(t),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class Fn{constructor(t){this.property=t,this.value=new Bn(t,void 0)}transitioned(t,e){return new Nn(this.property,this.value,e,y({},t.transition,this.transition),t.now)}untransitioned(){return new Nn(this.property,this.value,null,{},0)}}class jn{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return b(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Fn(this._values[t].property)),this._values[t].value=new Bn(this._values[t].property,null===e?void 0:b(e))}getTransition(t){return b(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Fn(this._values[t].property)),this._values[t].transition=b(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const r=this.getTransition(e);void 0!==r&&(t["".concat(e,"-transition")]=r)}return t}transitioned(t,e){const i=new Vn(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].transitioned(t,e._values[r]);return i}untransitioned(){const t=new Vn(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Nn{constructor(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(a))}}return n}}class Vn{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const r=new Hn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Un{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return void 0!==this._values[t].value}getValue(t){return b(this._values[t].value)}setValue(t,e){this._values[t]=new Bn(this._values[t].property,null===e?void 0:b(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const r=new Hn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}}class Wn{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)}}class Hn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Gn{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,i){const r=Ee[this.specification.type];return r?r(t,e,i):t}}class qn{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,r){return new Wn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Wn(this,{kind:"constant",value:void 0},t.parameters);const r=Ee[this.specification.type];if(r){const n=r(t.value.value,e.value.value,i);return new Wn(this,{kind:"constant",value:n},t.parameters)}return t}evaluate(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)}}class Zn extends qn{possiblyEvaluate(t,e,i,r){if(void 0===t.value)return new Wn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,e);return new Wn(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Wn(this,{kind:"constant",value:i},e)}return new Wn(this,t.expression,e)}evaluate(t,e,i,r,n,o){if("source"===t.kind){const a=t.evaluate(e,i,r,n,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class Xn{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){const n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new On(Math.floor(e.zoom-1),e)),t.expression.evaluate(new On(Math.floor(e.zoom),e)),t.expression.evaluate(new On(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class Yn{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)}interpolate(){return!1}}class Kn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new Bn(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new Fn(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}bn("DataDrivenProperty",qn),bn("DataConstantProperty",Gn),bn("CrossFadedDataDrivenProperty",Zn),bn("CrossFadedProperty",Xn),bn("ColorRampProperty",Yn);const $n="-transition";class Jn extends G{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Un(e.layout)),e.paint)){this._transitionablePaint=new jn(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hn(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(yn,"layers.".concat(this.id,".layout.").concat(t),t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith($n)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(gn,"layers.".concat(this.id,".paint.").concat(t),t,e,i))return!1;if(t.endsWith($n))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],n=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||n||r||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!n||!1!==n.validate)&&vn(this,t.call(fn,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:q,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Wn&&ar(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const Qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class to{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class eo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function io(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0,r=0;return{members:t.map((t=>{const n=Qn[t.type].BYTES_PER_ELEMENT,o=i=ro(i,Math.max(e,n)),a=t.components||1;return r=Math.max(r,n),i+=n*a,{name:t.name,type:t.type,components:a,offset:o}})),size:ro(i,Math.max(r,e)),alignment:e}}function ro(t,e){return Math.ceil(t/e)*e}class no extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t}}no.prototype.bytesPerElement=4,bn("StructArrayLayout2i4",no);class oo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t}}oo.prototype.bytesPerElement=6,bn("StructArrayLayout3i6",oo);class ao extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,t}}ao.prototype.bytesPerElement=8,bn("StructArrayLayout4i8",ao);class so extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t}}so.prototype.bytesPerElement=12,bn("StructArrayLayout2i4i12",so);class lo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){const s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=n,this.uint8[l+6]=o,this.uint8[l+7]=a,t}}lo.prototype.bytesPerElement=8,bn("StructArrayLayout2i4ub8",lo);class co extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t}}co.prototype.bytesPerElement=8,bn("StructArrayLayout2f8",co);class uo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,r,n,o,a,s,l,c)}emplace(t,e,i,r,n,o,a,s,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=i,this.uint16[h+2]=r,this.uint16[h+3]=n,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}uo.prototype.bytesPerElement=20,bn("StructArrayLayout10ui20",uo);class ho extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,i,r,n,o,a,s,l,c,u,h)}emplace(t,e,i,r,n,o,a,s,l,c,u,h,d){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=i,this.int16[p+2]=r,this.int16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,t}}ho.prototype.bytesPerElement=24,bn("StructArrayLayout4i4ui4i24",ho);class po extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t}}po.prototype.bytesPerElement=12,bn("StructArrayLayout3f12",po);class fo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}fo.prototype.bytesPerElement=4,bn("StructArrayLayout1ul4",fo);class mo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,o,a,s,l)}emplace(t,e,i,r,n,o,a,s,l,c){const u=10*t,h=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=r,this.int16[u+3]=n,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,t}}mo.prototype.bytesPerElement=20,bn("StructArrayLayout6i1ul2ui20",mo);class go extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t}}go.prototype.bytesPerElement=12,bn("StructArrayLayout2i2i2i12",go);class yo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)}emplace(t,e,i,r,n,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,t}}yo.prototype.bytesPerElement=16,bn("StructArrayLayout2f1f2i16",yo);class vo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){const s=16*t,l=4*t,c=8*t;return this.uint8[s+0]=e,this.uint8[s+1]=i,this.float32[l+1]=r,this.float32[l+2]=n,this.int16[c+6]=o,this.int16[c+7]=a,t}}vo.prototype.bytesPerElement=16,bn("StructArrayLayout2ub2f2i16",vo);class xo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t}}xo.prototype.bytesPerElement=6,bn("StructArrayLayout3ui6",xo);class _o extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g)}emplace(t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y){const v=24*t,x=12*t,_=48*t;return this.int16[v+0]=e,this.int16[v+1]=i,this.uint16[v+2]=r,this.uint16[v+3]=n,this.uint32[x+2]=o,this.uint32[x+3]=a,this.uint32[x+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=c,this.uint16[v+12]=u,this.float32[x+7]=h,this.float32[x+8]=d,this.uint8[_+36]=p,this.uint8[_+37]=f,this.uint8[_+38]=m,this.uint32[x+10]=g,this.int16[v+22]=y,t}}_o.prototype.bytesPerElement=48,bn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_o);class bo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,x,_,b,w,S,k,C,T,A){const P=this.length;return this.resize(P+1),this.emplace(P,t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,x,_,b,w,S,k,C,T,A)}emplace(t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,x,_,b,w,S,k,C,T,A,P){const M=32*t,E=16*t;return this.int16[M+0]=e,this.int16[M+1]=i,this.int16[M+2]=r,this.int16[M+3]=n,this.int16[M+4]=o,this.int16[M+5]=a,this.int16[M+6]=s,this.int16[M+7]=l,this.uint16[M+8]=c,this.uint16[M+9]=u,this.uint16[M+10]=h,this.uint16[M+11]=d,this.uint16[M+12]=p,this.uint16[M+13]=f,this.uint16[M+14]=m,this.uint16[M+15]=g,this.uint16[M+16]=y,this.uint16[M+17]=v,this.uint16[M+18]=x,this.uint16[M+19]=_,this.uint16[M+20]=b,this.uint16[M+21]=w,this.uint16[M+22]=S,this.uint32[E+12]=k,this.float32[E+13]=C,this.float32[E+14]=T,this.uint16[M+30]=A,this.uint16[M+31]=P,t}}bo.prototype.bytesPerElement=64,bn("StructArrayLayout8i15ui1ul2f2ui64",bo);class wo extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}wo.prototype.bytesPerElement=4,bn("StructArrayLayout1f4",wo);class So extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.uint16[6*t+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t}}So.prototype.bytesPerElement=12,bn("StructArrayLayout1ui2f12",So);class ko extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t}}ko.prototype.bytesPerElement=8,bn("StructArrayLayout1ul2ui8",ko);class Co extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t}}Co.prototype.bytesPerElement=4,bn("StructArrayLayout2ui4",Co);class To extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}To.prototype.bytesPerElement=2,bn("StructArrayLayout1ui2",To);class Ao extends eo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,t}}Ao.prototype.bytesPerElement=16,bn("StructArrayLayout4f16",Ao);class Po extends to{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new o(this.anchorPointX,this.anchorPointY)}}Po.prototype.size=20;class Mo extends mo{get(t){return new Po(this,t)}}bn("CollisionBoxArray",Mo);class Eo extends to{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Eo.prototype.size=48;class Io extends _o{get(t){return new Eo(this,t)}}bn("PlacedSymbolArray",Io);class zo extends to{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}zo.prototype.size=64;class Lo extends bo{get(t){return new zo(this,t)}}bn("SymbolInstanceArray",Lo);class Do extends wo{getoffsetX(t){return this.float32[1*t+0]}}bn("GlyphOffsetArray",Do);class Ro extends oo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}bn("SymbolLineVertexArray",Ro);class Oo extends to{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Oo.prototype.size=12;class Bo extends So{get(t){return new Oo(this,t)}}bn("TextAnchorOffsetArray",Bo);class Fo extends to{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Fo.prototype.size=8;class jo extends ko{get(t){return new Fo(this,t)}}bn("FeatureIndexArray",jo);class No extends no{}class Vo extends no{}class Uo extends no{}class Wo extends so{}class Ho extends lo{}class Go extends co{}class qo extends uo{}class Zo extends ho{}class Xo extends po{}class Yo extends fo{}class Ko extends go{}class $o extends vo{}class Jo extends xo{}class Qo extends Co{}const ta=io([{name:"a_pos",components:2,type:"Int16"}],4),{members:ea}=ta;class ia{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=t}prepareSegment(t,e,i,r){let n=this.segments[this.segments.length-1];return t>ia.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is ".concat(ia.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!n||n.vertexLength+t>ia.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,r){return new ia([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}function ra(t,e){return 256*(t=m(Math.floor(t),0,255))+m(Math.floor(e),0,255)}ia.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,bn("SegmentVector",ia);const na=io([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var oa={exports:{}},aa={exports:{}};aa.exports=function(t,e){var i,r,n,o,a,s,l,c;for(r=t.length-(i=3&t.length),n=e,a=3432918353,s=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0};var sa=aa.exports,la={exports:{}};la.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0};var ca=sa,ua=la.exports;oa.exports=ca,oa.exports.murmur3=ca,oa.exports.murmur2=ua;var ha=i(oa.exports);class da{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,r){this.ids.push(pa(t)),this.positions.push(e,i,r)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=pa(t);let i=0,r=this.ids.length-1;for(;i<r;){const t=i+r>>1;this.ids[t]>=e?r=t:i=t+1}const n=[];for(;this.ids[i]===e;)n.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return n}static serialize(t,e){const i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return fa(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}}static deserialize(t){const e=new da;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function pa(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:ha(String(t))}function fa(t,e,i,r){for(;i<r;){const n=t[i+r>>1];let o=i-1,a=r+1;for(;;){do{o++}while(t[o]<n);do{a--}while(t[a]>n);if(o>=a)break;ma(t,o,a),ma(e,3*o,3*a),ma(e,3*o+1,3*a+1),ma(e,3*o+2,3*a+2)}a-i<r-a?(fa(t,e,i,a),i=a+1):(fa(t,e,a+1,r),r=a)}}function ma(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}bn("FeaturePositionMap",da);class ga{constructor(t,e){this.gl=t.gl,this.location=e}}class ya extends ga{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class va extends ga{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class xa extends ga{constructor(t,e){super(t,e),this.current=Zt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const _a=new Float32Array(16);function ba(t){return[ra(255*t.r,255*t.g),ra(255*t.b,255*t.a)]}class wa{constructor(t,e,i){this.value=t,this.uniformNames=e.map((t=>"u_".concat(t))),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new xa(t,e):new ya(t,e)}}class Sa{constructor(t,e){this.uniformNames=e.map((t=>"u_".concat(t))),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,r){const n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new va(t,e):new ya(t,e)}}class ka{constructor(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,i,r,n){const o=this.paintVertexArray.length,a=this.expression.evaluate(new On(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,i,r){const n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)}_setPaintValue(t,e,i){if("color"===this.type){const r=ba(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ca{constructor(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map((t=>"u_".concat(t,"_t"))),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,i,r,n){const o=this.expression.evaluate(new On(this.zoom),e,{},r,[],n),a=this.expression.evaluate(new On(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,i,r){const n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)}_setPaintValue(t,e,i,r){if("color"===this.type){const n=ba(i),o=ba(r);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1],o[0],o[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=m(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,i){return new ya(t,e)}}class Ta{constructor(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}populatePaintArray(t,e,i){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)}_setPaintValues(t,e,i,r){if(!r||!i)return;const{min:n,mid:o,max:a}=i,s=r[n],l=r[o],c=r[a];if(s&&l&&c)for(let u=t;u<e;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,na.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,na.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Aa{constructor(t,e,i){this.binders={},this._buffers=[];const r=[];for(const n in t.paint._values){if(!i(n))continue;const o=t.paint.get(n);if(!(o instanceof Wn&&ar(o.property.specification)))continue;const a=Ma(n,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[n]=h?new Sa(s.value,a):new wa(s.value,a,l),r.push("/u_".concat(n));else if("source"===s.kind||h){const i=Ea(n,l,"source");this.binders[n]=h?new Ta(s,l,c,e,i,t.id):new ka(s,a,l,i),r.push("/a_".concat(n))}else{const t=Ea(n,l,"composite");this.binders[n]=new Ca(s,a,l,c,e,t),r.push("/z_".concat(n))}}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof ka||e instanceof Ca?e.maxValue:0}populatePaintArrays(t,e,i,r,n){for(const o in this.binders){const a=this.binders[o];(a instanceof ka||a instanceof Ca||a instanceof Ta)&&a.populatePaintArray(t,e,i,r,n)}}setConstantPatternPositions(t,e){for(const i in this.binders){const r=this.binders[i];r instanceof Sa&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,r,n){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof ka||l instanceof Ca||l instanceof Ta)&&!0===l.expression.isStateDependent){const c=r.paint.get(i);l.expression=c.value,l.updatePaintArray(e.start,e.end,s,t[a],n),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof wa||i instanceof Sa)&&t.push(...i.uniformNames.map((t=>"#define HAS_UNIFORM_".concat(t))))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof ka||i instanceof Ca)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof Ta)for(let e=0;e<na.members.length;e++)t.push(na.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof wa||i instanceof Sa||i instanceof Ca)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof wa||n instanceof Sa||n instanceof Ca)for(const o of n.uniformNames)if(e[o]){const a=n.getBinding(t,e[o],o);i.push({name:o,property:r,binding:a})}}return i}setUniforms(t,e,i,r){for(const{name:n,property:o,binding:a}of e)this.binders[o].setUniform(a,r,i.get(o),n)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof Ta){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof ka||i instanceof Ca)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof ka||i instanceof Ca||i instanceof Ta)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof ka||e instanceof Ca||e instanceof Ta)&&e.destroy()}}}class Pa{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Aa(r,e,i);this.needsUpload=!1,this._featureMap=new da,this._bufferOffset=0}populatePaintArrays(t,e,i,r,n,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,r){for(const n of i)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(t,this._featureMap,e,n,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ma(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}function Ea(t,e,i){const r={color:{source:co,composite:Ao},number:{source:wo,composite:co}},n=function(t){return{"line-pattern":{source:qo,composite:qo},"fill-pattern":{source:qo,composite:qo},"fill-extrusion-pattern":{source:qo,composite:qo}}[t]}(t);return n&&n[i]||r[e][i]}bn("ConstantBinder",wa),bn("CrossFadedConstantBinder",Sa),bn("SourceExpressionBinder",ka),bn("CrossFadedCompositeBinder",Ta),bn("CompositeExpressionBinder",Ca),bn("ProgramConfiguration",Aa,{omit:["_buffers"]}),bn("ProgramConfigurationSet",Pa);const Ia=8192,za=Math.pow(2,14)-1,La=-za-1;function Da(t){const e=Ia/t.extent,i=t.loadGeometry();for(let r=0;r<i.length;r++){const t=i[r];for(let i=0;i<t.length;i++){const r=t[i],n=Math.round(r.x*e),o=Math.round(r.y*e);r.x=m(n,La,za),r.y=m(o,La,za),(n<r.x||n>r.x+1||o<r.y||o>r.y+1)&&S("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Ra(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Da(t):[]}}function Oa(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}class Ba{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Vo,this.indexArray=new Jo,this.segments=new ia,this.programConfigurations=new Pa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){const r=this.layers[0],n=[];let o=null,a=!1;"circle"===r.type&&(o=r.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:s,id:l,index:c,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Ra(s,t);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),e,i))continue;const r=a?o.evaluate(e,{},i):void 0,h={id:l,properties:s.properties,type:s.type,sourceLayerIndex:u,index:c,geometry:t?e.geometry:Da(s),patterns:{},sortKey:r};n.push(h)}a&&n.sort(((t,e)=>t.sortKey-e.sortKey));for(const s of n){const{geometry:r,index:n,sourceLayerIndex:o}=s,a=t[n].feature;this.addFeature(s,r,n,i),e.featureIndex.insert(a,r,n,o,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ea),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,r){for(const n of e)for(const e of n){const i=e.x,r=e.y;if(i<0||i>=Ia||r<0||r>=Ia)continue;const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=n.vertexLength;Oa(this.layoutVertexArray,i,r,-1,-1),Oa(this.layoutVertexArray,i,r,1,-1),Oa(this.layoutVertexArray,i,r,1,1),Oa(this.layoutVertexArray,i,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)}}function Fa(t,e){for(let i=0;i<t.length;i++)if(Za(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(Za(t,e[i]))return!0;return!!Ua(t,e)}function ja(t,e,i){return!!Za(t,e)||!!Ha(e,t,i)}function Na(t,e){if(1===t.length)return qa(e,t[0]);for(let i=0;i<e.length;i++){const r=e[i];for(let e=0;e<r.length;e++)if(Za(t,r[e]))return!0}for(let i=0;i<t.length;i++)if(qa(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(Ua(t,e[i]))return!0;return!1}function Va(t,e,i){if(t.length>1){if(Ua(t,e))return!0;for(let r=0;r<e.length;r++)if(Ha(e[r],t,i))return!0}for(let r=0;r<t.length;r++)if(Ha(t[r],e,i))return!0;return!1}function Ua(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const r=t[i],n=t[i+1];for(let t=0;t<e.length-1;t++)if(Wa(r,n,e[t],e[t+1]))return!0}return!1}function Wa(t,e,i,r){return k(t,i,r)!==k(e,i,r)&&k(t,e,i)!==k(t,e,r)}function Ha(t,e,i){const r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(let n=1;n<e.length;n++)if(Ga(t,e[n-1],e[n])<r)return!0;return!1}function Ga(t,e,i){const r=e.distSqr(i);if(0===r)return t.distSqr(e);const n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function qa(t,e){let i,r,n,o=!1;for(let a=0;a<t.length;a++){i=t[a];for(let t=0,a=i.length-1;t<i.length;a=t++)r=i[t],n=i[a],r.y>e.y!=n.y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o)}return o}function Za(t,e){let i=!1;for(let r=0,n=t.length-1;r<t.length;n=r++){const o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function Xa(t,e,i){const r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;const o=k(t,e,i[0]);return o!==k(t,e,i[1])||o!==k(t,e,i[2])||o!==k(t,e,i[3])}function Ya(t,e,i){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function Ka(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function $a(t,e,i,r,n){if(!e[0]&&!e[1])return t;const a=o.convert(e)._mult(n);"viewport"===i&&a._rotate(-r);const s=[];for(let o=0;o<t.length;o++)s.push(t[o].sub(a));return s}let Ja,Qa;bn("CircleBucket",Ba,{omit:["layers"]});var ts={get paint(){return Qa=Qa||new Kn({"circle-radius":new qn(q.paint_circle["circle-radius"]),"circle-color":new qn(q.paint_circle["circle-color"]),"circle-blur":new qn(q.paint_circle["circle-blur"]),"circle-opacity":new qn(q.paint_circle["circle-opacity"]),"circle-translate":new Gn(q.paint_circle["circle-translate"]),"circle-translate-anchor":new Gn(q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gn(q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gn(q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qn(q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qn(q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qn(q.paint_circle["circle-stroke-opacity"])})},get layout(){return Ja=Ja||new Kn({"circle-sort-key":new qn(q.layout_circle["circle-sort-key"])})}},es=1e-6,is="undefined"!=typeof Float32Array?Float32Array:Array;function rs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ns(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],x=i[0],_=i[1],b=i[2],w=i[3];return t[0]=x*r+_*s+b*h+w*m,t[1]=x*n+_*l+b*d+w*g,t[2]=x*o+_*c+b*p+w*y,t[3]=x*a+_*u+b*f+w*v,t[4]=(x=i[4])*r+(_=i[5])*s+(b=i[6])*h+(w=i[7])*m,t[5]=x*n+_*l+b*d+w*g,t[6]=x*o+_*c+b*p+w*y,t[7]=x*a+_*u+b*f+w*v,t[8]=(x=i[8])*r+(_=i[9])*s+(b=i[10])*h+(w=i[11])*m,t[9]=x*n+_*l+b*d+w*g,t[10]=x*o+_*c+b*p+w*y,t[11]=x*a+_*u+b*f+w*v,t[12]=(x=i[12])*r+(_=i[13])*s+(b=i[14])*h+(w=i[15])*m,t[13]=x*n+_*l+b*d+w*g,t[14]=x*o+_*c+b*p+w*y,t[15]=x*a+_*u+b*f+w*v,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var os,as=ns;function ss(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}os=new is(4),is!=Float32Array&&(os[0]=0,os[1]=0,os[2]=0,os[3]=0);class ls extends Jn{constructor(t){super(t,ts)}createBucket(t){return new Ba(t)}queryRadius(t){const e=t;return Ya("circle-radius",this,e)+Ya("circle-stroke-width",this,e)+Ka(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,r,n,o,a,s){const l=$a(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(t,e){return t.map((t=>cs(t,e)))}(l,s),d=u?c*a:c;for(const p of r)for(const t of p){const e=u?t:cs(t,s);let i=d;const r=ss([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?i*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(i*=o.cameraToCenterDistance/r[3]),ja(h,e,i))return!0}return!1}}function cs(t,e){const i=ss([],[t.x,t.y,0,1],e);return new o(i[0]/i[3],i[1]/i[3])}class us extends Ba{}let hs;bn("HeatmapBucket",us,{omit:["layers"]});var ds={get paint(){return hs=hs||new Kn({"heatmap-radius":new qn(q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qn(q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gn(q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yn(q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gn(q.paint_heatmap["heatmap-opacity"])})}};function ps(t,e,i,r){let{width:n,height:o}=e;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*o*i)throw new RangeError("mismatched image size. expected: ".concat(r.length," but got: ").concat(n*o*i))}else r=new Uint8Array(n*o*i);return t.width=n,t.height=o,t.data=r,t}function fs(t,e,i){let{width:r,height:n}=e;if(r===t.width&&n===t.height)return;const o=ps({},{width:r,height:n},i);ms(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,n)},i),t.width=r,t.height=n,t.data=o.data}function ms(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<n.height;l++){const c=((i.y+l)*t.width+i.x)*o,u=((r.y+l)*e.width+r.x)*o;for(let t=0;t<n.width*o;t++)s[u+t]=a[c+t]}return e}class gs{constructor(t,e){ps(this,t,1,e)}resize(t){fs(this,t,1)}clone(){return new gs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){ms(t,e,i,r,n,1)}}class ys{constructor(t,e){ps(this,t,4,e)}resize(t){fs(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ys({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){ms(t,e,i,r,n,4)}}function vs(t){const e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new ys({width:i,height:r});if(Math.log(i)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - ".concat(i));const o=(i,r,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*a.r/a.a),n.data[i+r+1]=Math.floor(255*a.g/a.a),n.data[i+r+2]=Math.floor(255*a.b/a.a),n.data[i+r+3]=Math.floor(255*a.a)};if(t.clips)for(let a=0,s=0;a<r;++a,s+=4*i)for(let e=0,r=0;e<i;e++,r+=4){const n=e/(i-1),{start:l,end:c}=t.clips[a];o(s,r,l*(1-n)+c*n)}else for(let a=0,s=0;a<i;a++,s+=4)o(0,s,a/(i-1));return n}bn("AlphaImage",gs),bn("RGBAImage",ys);class xs extends Jn{createBucket(t){return new us(t)}constructor(t){super(t,ds),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let _s;var bs={get paint(){return _s=_s||new Kn({"hillshade-illumination-direction":new Gn(q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Gn(q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gn(q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gn(q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gn(q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gn(q.paint_hillshade["hillshade-accent-color"])})}};class ws extends Jn{constructor(t){super(t,bs)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Ss=io([{name:"a_pos",components:2,type:"Int16"}],4),{members:ks}=Ss;var Cs={exports:{}};function Ts(t,e,i){i=i||2;var r,n,o,a,s,l,c,u=e&&e.length,h=u?e[0]*i:t.length,d=As(t,0,h,i,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,i,r){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=As(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Fs(a));for(s.sort(Ds),n=0;n<s.length;n++)i=Rs(s[n],i);return i}(t,e,d,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var f=i;f<h;f+=i)(s=t[f])<r&&(r=s),(l=t[f+1])<n&&(n=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-n))?32767/c:0}return Ms(d,p,i,r,n,c,0),p}function As(t,e,i,r,n){var o,a;if(n===$s(t,e,i,r)>0)for(o=e;o<i;o+=r)a=Xs(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=Xs(o,t[o],t[o+1],a);return a&&Us(a,a.next)&&(Ys(a),a=a.next),a}function Ps(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!Us(r,r.next)&&0!==Vs(r.prev,r,r.next))r=r.next;else{if(Ys(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function Ms(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;do{0===n.z&&(n.z=Bs(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,l,c=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,c*=2}while(a>1)}(n)}(t,r,n,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Is(t,r,n,o):Es(t))e.push(s.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),Ys(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Ms(t=zs(Ps(t),e,i),e,i,r,n,o,2):2===a&&Ls(t,e,i,r,n,o):Ms(Ps(t),e,i,r,n,o,1);break}}}function Es(t){var e=t.prev,i=t,r=t.next;if(Vs(e,i,r)>=0)return!1;for(var n=e.x,o=i.x,a=r.x,s=e.y,l=i.y,c=r.y,u=n<o?n<a?n:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=n>o?n>a?n:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==e;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&js(n,s,o,l,a,c,f.x,f.y)&&Vs(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Is(t,e,i,r){var n=t.prev,o=t,a=t.next;if(Vs(n,o,a)>=0)return!1;for(var s=n.x,l=o.x,c=a.x,u=n.y,h=o.y,d=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=Bs(p,f,e,i,r),v=Bs(m,g,e,i,r),x=t.prevZ,_=t.nextZ;x&&x.z>=y&&_&&_.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&js(s,u,l,h,c,d,x.x,x.y)&&Vs(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==n&&_!==a&&js(s,u,l,h,c,d,_.x,_.y)&&Vs(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;x&&x.z>=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&js(s,u,l,h,c,d,x.x,x.y)&&Vs(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==n&&_!==a&&js(s,u,l,h,c,d,_.x,_.y)&&Vs(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function zs(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!Us(n,o)&&Ws(n,r,r.next,o)&&qs(n,o)&&qs(o,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),Ys(r),Ys(r.next),r=t=o),r=r.next}while(r!==t);return Ps(r)}function Ls(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ns(a,s)){var l=Zs(a,s);return a=Ps(a,a.next),l=Ps(l,l.next),Ms(a,e,i,r,n,o,0),void Ms(l,e,i,r,n,o,0)}s=s.next}a=a.next}while(a!==t)}function Ds(t,e){return t.x-e.x}function Rs(t,e){var i=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,i=r.x<r.next.x?r:r.next,s===n))return i}r=r.next}while(r!==e);if(!i)return null;var l,c=i,u=i.x,h=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&js(o<h?n:a,o,u,h,o<h?a:n,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(n-r.x),qs(r,t)&&(l<d||l===d&&(r.x>i.x||r.x===i.x&&Os(i,r)))&&(i=r,d=l)),r=r.next}while(r!==c);return i}(t,e);if(!i)return e;var r=Zs(i,t);return Ps(r,r.next),Ps(i,i.next)}function Os(t,e){return Vs(t.prev,t,e.prev)<0&&Vs(e.next,t,t.next)<0}function Bs(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fs(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function js(t,e,i,r,n,o,a,s){return(n-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(i-a)*(e-s)&&(i-a)*(o-s)>=(n-a)*(r-s)}function Ns(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ws(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(qs(t,e)&&qs(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(Vs(t.prev,t,e.prev)||Vs(t,e.prev,e))||Us(t,e)&&Vs(t.prev,t,t.next)>0&&Vs(e.prev,e,e.next)>0)}function Vs(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Us(t,e){return t.x===e.x&&t.y===e.y}function Ws(t,e,i,r){var n=Gs(Vs(t,e,i)),o=Gs(Vs(t,e,r)),a=Gs(Vs(i,r,t)),s=Gs(Vs(i,r,e));return n!==o&&a!==s||!(0!==n||!Hs(t,i,e))||!(0!==o||!Hs(t,r,e))||!(0!==a||!Hs(i,t,r))||!(0!==s||!Hs(i,e,r))}function Hs(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Gs(t){return t>0?1:t<0?-1:0}function qs(t,e){return Vs(t.prev,t,t.next)<0?Vs(t,e,t.next)>=0&&Vs(t,t.prev,e)>=0:Vs(t,e,t.prev)<0||Vs(t,t.next,e)<0}function Zs(t,e){var i=new Ks(t.i,t.x,t.y),r=new Ks(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Xs(t,e,i,r){var n=new Ks(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Ys(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ks(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $s(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}Cs.exports=Ts,Cs.exports.default=Ts,Ts.deviation=function(t,e,i,r){var n=e&&e.length,o=Math.abs($s(t,0,n?e[0]*i:t.length,i));if(n)for(var a=0,s=e.length;a<s;a++)o-=Math.abs($s(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*i,u=r[a+1]*i,h=r[a+2]*i;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ts.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&i.holes.push(r+=t[n-1].length)}return i};var Js=i(Cs.exports);function Qs(t,e,i){const r=i.patternDependencies;let n=!1;for(const o of e){const e=o.paint.get("".concat(t,"-pattern"));e.isConstant()||(n=!0);const i=e.constantOr(null);i&&(n=!0,r[i.to]=!0,r[i.from]=!0)}return n}function tl(t,e,i,r,n){const o=n.patternDependencies;for(const a of e){const e=a.paint.get("".concat(t,"-pattern")).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},i,{},n.availableImages),s=e.evaluate({zoom:r},i,{},n.availableImages),l=e.evaluate({zoom:r+1},i,{},n.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,i.patterns[a.id]={min:t,mid:s,max:l}}}return i}class el{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Uo,this.indexArray=new Jo,this.indexArray2=new Qo,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new ia,this.segments2=new ia,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=Qs("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),n=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Ra(a,t);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),u,i))continue;const h=n?r.evaluate(u,{},i,e.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:Da(a),patterns:{},sortKey:h};o.push(d)}n&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:n,sourceLayerIndex:o}=a;if(this.hasPattern){const t=tl("fill",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,n,i,{});e.featureIndex.insert(t[n].feature,r,n,o,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ks),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,r,n){for(const o of xi(e,500)){let t=0;for(const s of o)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=e.vertexLength,r=[],n=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&n.push(r.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),r.push(s[0].x),r.push(s[0].y);for(let i=1;i<s.length;i++)this.layoutVertexArray.emplaceBack(s[i].x,s[i].y),this.indexArray2.emplaceBack(e+i-1,e+i),r.push(s[i].x),r.push(s[i].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const a=Js(r,n);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(i+a[o],i+a[o+1],i+a[o+2]);e.vertexLength+=t,e.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}let il,rl;bn("FillBucket",el,{omit:["layers","patternFeatures"]});var nl={get paint(){return rl=rl||new Kn({"fill-antialias":new Gn(q.paint_fill["fill-antialias"]),"fill-opacity":new qn(q.paint_fill["fill-opacity"]),"fill-color":new qn(q.paint_fill["fill-color"]),"fill-outline-color":new qn(q.paint_fill["fill-outline-color"]),"fill-translate":new Gn(q.paint_fill["fill-translate"]),"fill-translate-anchor":new Gn(q.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zn(q.paint_fill["fill-pattern"])})},get layout(){return il=il||new Kn({"fill-sort-key":new qn(q.layout_fill["fill-sort-key"])})}};class ol extends Jn{constructor(t){super(t,nl)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new el(t)}queryRadius(){return Ka(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,r,n,o,a){return Na($a(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}isTileClipped(){return!0}}const al=io([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),sl=io([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ll}=al;var cl={},ul=r,hl=dl;function dl(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(pl,this,e)}function pl(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function fl(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)r+=((i=t[a]).x-(e=t[n]).x)*(e.y+i.y);return r}dl.types=["Unknown","Point","LineString","Polygon"],dl.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=[];t.pos<i;){if(n<=0){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new ul(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},dl.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,c]},dl.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=dl.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=fl(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)u(l[r][n])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var ml=hl,gl=yl;function yl(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(vl,this,e),this.length=this._features.length}function vl(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}yl.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ml(this._pbf,e,this.extent,this._keys,this._values)};var xl=gl;function _l(t,e,i){if(3===t){var r=new xl(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}cl.VectorTile=function(t,e){this.layers=t.readFields(_l,{},e)},cl.VectorTileFeature=hl,cl.VectorTileLayer=gl;const bl=cl.VectorTileFeature.types,wl=Math.pow(2,13);function Sl(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*wl)+a,n*wl*2,o*wl*2,Math.round(s))}class kl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Wo,this.centroidVertexArray=new No,this.indexArray=new Jo,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new ia,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.features=[],this.hasPattern=Qs("fill-extrusion",this.layers,e);for(const{feature:r,id:n,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Ra(r,t);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),s,i))continue;const l={id:n,sourceLayerIndex:a,index:o,geometry:t?s.geometry:Da(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(tl("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,i,{}),e.featureIndex.insert(r,l.geometry,o,a,this.index,!0)}}addFeatures(t,e,i){for(const r of this.features){const{geometry:t}=r;this.addFeature(r,t,r.index,e,i)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ll),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,sl.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,i,r,n){const o={x:0,y:0,vertexCount:0};for(const a of xi(e,500)){let e=0;for(const t of a)e+=t.length;let i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of a){if(0===t.length)continue;if(Tl(t))continue;let e=0;for(let r=0;r<t.length;r++){const n=t[r];if(r>=1){const a=t[r-1];if(!Cl(n,a)){i.vertexLength+4>ia.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=n.sub(a)._perp()._unit(),r=a.dist(n);e+r>32768&&(e=0),Sl(this.layoutVertexArray,n.x,n.y,t.x,t.y,0,0,e),Sl(this.layoutVertexArray,n.x,n.y,t.x,t.y,0,1,e),o.x+=2*n.x,o.y+=2*n.y,o.vertexCount+=2,e+=r,Sl(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,0,e),Sl(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,1,e),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2;const s=i.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+e>ia.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==bl[t.type])continue;const r=[],n=[],s=i.vertexLength;for(const t of a)if(0!==t.length){t!==a[0]&&n.push(r.length/2);for(let e=0;e<t.length;e++){const i=t[e];Sl(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),o.x+=i.x,o.y+=i.y,o.vertexCount+=1,r.push(i.x),r.push(i.y)}}const l=Js(r,n);for(let t=0;t<l.length;t+=3)this.indexArray.emplaceBack(s+l[t],s+l[t+2],s+l[t+1]);i.primitiveLength+=l.length/3,i.vertexLength+=e}for(let a=0;a<o.vertexCount;a++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}function Cl(t,e){return t.x===e.x&&(t.x<0||t.x>Ia)||t.y===e.y&&(t.y<0||t.y>Ia)}function Tl(t){return t.every((t=>t.x<0))||t.every((t=>t.x>Ia))||t.every((t=>t.y<0))||t.every((t=>t.y>Ia))}let Al;bn("FillExtrusionBucket",kl,{omit:["layers","features"]});var Pl={get paint(){return Al=Al||new Kn({"fill-extrusion-opacity":new Gn(q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qn(q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gn(q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gn(q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zn(q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qn(q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qn(q["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gn(q["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ml extends Jn{constructor(t){super(t,Pl)}createBucket(t){return new kl(t)}queryRadius(){return Ka(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,i,r,n,a,s,l){const c=$a(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(e,i),h=this.paint.get("fill-extrusion-base").evaluate(e,i),d=function(t,e,i,r){const n=[];for(const a of t){const t=[a.x,a.y,0,1];ss(t,t,e),n.push(new o(t[0]/t[3],t[1]/t[3]))}return n}(c,l),p=function(t,e,i,r){const n=[],a=[],s=r[8]*e,l=r[9]*e,c=r[10]*e,u=r[11]*e,h=r[8]*i,d=r[9]*i,p=r[10]*i,f=r[11]*i;for(const m of t){const t=[],e=[];for(const i of m){const n=i.x,a=i.y,m=r[0]*n+r[4]*a+r[12],g=r[1]*n+r[5]*a+r[13],y=r[2]*n+r[6]*a+r[14],v=r[3]*n+r[7]*a+r[15],x=y+c,_=v+u,b=m+h,w=g+d,S=y+p,k=v+f,C=new o((m+s)/_,(g+l)/_);C.z=x/_,t.push(C);const T=new o(b/k,w/k);T.z=S/k,e.push(T)}n.push(t),a.push(e)}return[n,a]}(r,h,u,l);return function(t,e,i){let r=1/0;Na(i,e)&&(r=Il(i,e[0]));for(let n=0;n<e.length;n++){const o=e[n],a=t[n];for(let t=0;t<o.length-1;t++){const e=o[t],n=[e,o[t+1],a[t+1],a[t],e];Fa(i,n)&&(r=Math.min(r,Il(i,n)))}}return r!==1/0&&r}(p[0],p[1],d)}}function El(t,e){return t.x*e.x+t.y*e.y}function Il(t,e){if(1===t.length){let i=0;const r=e[i++];let n;for(;!n||r.equals(n);)if(n=e[i++],!n)return 1/0;for(;i<e.length;i++){const o=e[i],a=t[0],s=n.sub(r),l=o.sub(r),c=a.sub(r),u=El(s,s),h=El(s,l),d=El(l,l),p=El(c,s),f=El(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,v=r.z*(1-g-y)+n.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}const zl=io([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ll}=zl,Dl=io([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Rl}=Dl,Ol=cl.VectorTileFeature.types,Bl=Math.cos(Math.PI/180*37.5),Fl=Math.pow(2,14)/.5;class jl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Ho,this.layoutVertexArray2=new Go,this.indexArray=new Jo,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new ia,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=Qs("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),n=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Ra(a,t);if(!this.layers[0]._featureFilter.filter(new On(this.zoom),e,i))continue;const u=n?r.evaluate(e,{},i):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:t?e.geometry:Da(a),patterns:{},sortKey:u};o.push(h)}n&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:n,sourceLayerIndex:o}=a;if(this.hasPattern){const t=tl("line",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,n,i,{});e.featureIndex.insert(t[n].feature,r,n,o,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Rl)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ll),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,r,n){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const u of e)this.addLine(u,t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}addLine(t,e,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ol[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===i&&(n=1.05);const c=this.overscaling<=16?15*Ia/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?t[l+1]:void 0:t[g+1],p&&t[g].equals(p))continue;m&&(f=m),h&&(d=h),h=t[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let e=f.add(m);0===e.x&&0===e.y||e._unit();const y=f.x*m.x+f.y*m.y,v=e.x*m.x+e.y*m.y,x=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),b=v<Bl&&d&&p,w=f.x*m.y-f.y*m.x>0;if(b&&g>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,u),d=e}}const S=d&&p;let k=S?i:a?"butt":r;if(S&&"round"===k&&(x<o?k="miter":x<=2&&(k="fakeround")),"miter"===k&&x>n&&(k="bevel"),"bevel"===k&&(x>2&&(k="flipbevel"),x<n&&(k="miter")),d&&this.updateDistance(d,h),"miter"===k)e._mult(x),this.addCurrentVertex(h,e,0,0,u);else if("flipbevel"===k){if(x>100)e=m.mult(-1);else{const t=x*f.add(m).mag()/f.sub(m).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,u),this.addCurrentVertex(h,e.mult(-1),0,0,u)}else if("bevel"===k||"fakeround"===k){const t=-Math.sqrt(x*x-1),e=w?t:0,i=w?0:t;if(d&&this.addCurrentVertex(h,f,e,i,u),"fakeround"===k){const t=Math.round(180*_/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(i)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-e,-i,u)}else if("butt"===k)this.addCurrentVertex(h,e,0,0,u);else if("square"===k){const t=d?1:-1;this.addCurrentVertex(h,e,t,t,u)}else"round"===k&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(b&&g<s-1){const t=h.dist(p);if(t>2*c){const e=h.add(p.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,a,s,o,!0,-r,n),this.distance>Fl/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,e,i,r,n,o))}addHalfVertex(t,e,i,r,n,o,a){let{x:s,y:l}=t;const c=.5*(this.lineClips?this.scaledDistance*(Fl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}let Nl,Vl;bn("LineBucket",jl,{omit:["layers","patternFeatures"]});var Ul={get paint(){return Vl=Vl||new Kn({"line-opacity":new qn(q.paint_line["line-opacity"]),"line-color":new qn(q.paint_line["line-color"]),"line-translate":new Gn(q.paint_line["line-translate"]),"line-translate-anchor":new Gn(q.paint_line["line-translate-anchor"]),"line-width":new qn(q.paint_line["line-width"]),"line-gap-width":new qn(q.paint_line["line-gap-width"]),"line-offset":new qn(q.paint_line["line-offset"]),"line-blur":new qn(q.paint_line["line-blur"]),"line-dasharray":new Xn(q.paint_line["line-dasharray"]),"line-pattern":new Zn(q.paint_line["line-pattern"]),"line-gradient":new Yn(q.paint_line["line-gradient"])})},get layout(){return Nl=Nl||new Kn({"line-cap":new Gn(q.layout_line["line-cap"]),"line-join":new qn(q.layout_line["line-join"]),"line-miter-limit":new Gn(q.layout_line["line-miter-limit"]),"line-round-limit":new Gn(q.layout_line["line-round-limit"]),"line-sort-key":new qn(q.layout_line["line-sort-key"])})}};class Wl extends qn{possiblyEvaluate(t,e){return e=new On(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,r){return e=y({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,r)}}let Hl;class Gl extends Jn{constructor(t){super(t,Ul),this.gradientVersion=0,Hl||(Hl=new Wl(Ul.paint.properties["line-width"].specification),Hl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this.gradientExpression();this.stepInterpolant=!!function(t){return void 0!==t._styleExpression}(t)&&t._styleExpression.expression instanceof Se,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Hl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new jl(t)}queryRadius(t){const e=t,i=ql(Ya("line-width",this,e),Ya("line-gap-width",this,e)),r=Ya("line-offset",this,e);return i/2+Math.abs(r)+Ka(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,r,n,a,s){const l=$a(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*ql(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),u=this.paint.get("line-offset").evaluate(e,i);return u&&(r=function(t,e){const i=[];for(let r=0;r<t.length;r++){const n=t[r],a=[];for(let t=0;t<n.length;t++){const i=n[t-1],r=n[t],s=n[t+1],l=0===t?new o(0,0):r.sub(i)._unit()._perp(),c=t===n.length-1?new o(0,0):s.sub(r)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;0!==h&&u._mult(1/h),a.push(u._mult(e)._add(r))}i.push(a)}return i}(r,u*s)),function(t,e,i){for(let r=0;r<e.length;r++){const n=e[r];if(t.length>=3)for(let e=0;e<n.length;e++)if(Za(t,n[e]))return!0;if(Va(t,n,i))return!0}return!1}(l,r,c)}isTileClipped(){return!0}}function ql(t,e){return e>0?e+2*t:t}const Zl=io([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xl=io([{name:"a_projected_pos",components:3,type:"Float32"}],4);io([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Yl=io([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);io([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kl=io([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$l=io([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Jl(t,e,i){return t.sections.forEach((t=>{t.text=function(t,e,i){const r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Rn.applyArabicShaping&&(t=Rn.applyArabicShaping(t)),t}(t.text,e,i)})),t}io([{name:"triangle",components:3,type:"Uint16"}]),io([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),io([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),io([{type:"Float32",name:"offsetX"}]),io([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),io([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ql={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var tc=24,ec=nc,ic=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?n-1:0,d=i?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},rc=function(t,e,i,r,n,o){var a,s,l,c=8*o-n-1,u=(1<<c)-1,h=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,n),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[i+p]=255&s,p+=f,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;t[i+p]=255&a,p+=f,a/=256,c-=8);t[i+p-f]|=128*m};function nc(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}nc.Varint=0,nc.Fixed64=1,nc.Bytes=2,nc.Fixed32=5;var oc=4294967296,ac=1/oc,sc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function lc(t){return t.type===nc.Bytes?t.readVarint()+t.pos:t.pos+1}function cc(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function uc(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function hc(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function dc(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function pc(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function fc(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function mc(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function gc(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function yc(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function vc(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function xc(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function _c(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function bc(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function wc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}nc.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=_c(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=wc(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=_c(this.buf,this.pos)+_c(this.buf,this.pos+4)*oc;return this.pos+=8,t},readSFixed64:function(){var t=_c(this.buf,this.pos)+wc(this.buf,this.pos+4)*oc;return this.pos+=8,t},readFloat:function(){var t=ic(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ic(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return cc(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return cc(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return cc(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return cc(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return cc(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return cc(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&sc?function(t,e,i){return sc.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,l=t[n],c=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[n+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[n+2],128==(192&(o=t[n+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[n+2],s=t[n+3],128==(192&(o=t[n+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),n+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==nc.Bytes)return t.push(this.readVarint(e));var i=lc(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==nc.Bytes)return t.push(this.readSVarint());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==nc.Bytes)return t.push(this.readBoolean());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==nc.Bytes)return t.push(this.readFloat());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==nc.Bytes)return t.push(this.readDouble());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==nc.Bytes)return t.push(this.readFixed32());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==nc.Bytes)return t.push(this.readSFixed32());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==nc.Bytes)return t.push(this.readFixed64());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==nc.Bytes)return t.push(this.readSFixed64());var e=lc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===nc.Varint)for(;this.buf[this.pos++]>127;);else if(e===nc.Bytes)this.pos=this.readVarint()+this.pos;else if(e===nc.Fixed32)this.pos+=4;else{if(e!==nc.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),bc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),bc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),bc(this.buf,-1&t,this.pos),bc(this.buf,Math.floor(t*ac),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),bc(this.buf,-1&t,this.pos),bc(this.buf,Math.floor(t*ac),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&uc(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),rc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),rc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&uc(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,nc.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,hc,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,dc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,mc,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,pc,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,fc,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,gc,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,yc,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,vc,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,xc,e)},writeBytesField:function(t,e){this.writeTag(t,nc.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,nc.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,nc.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,nc.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,nc.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,nc.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,nc.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,nc.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,nc.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,nc.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Sc=i(ec);const kc=3;function Cc(t,e,i){1===t&&i.readMessage(Tc,e)}function Tc(t,e,i){if(3===t){const{id:t,bitmap:r,width:n,height:o,left:a,top:s,advance:l}=i.readMessage(Ac,{});e.push({id:t,bitmap:new gs({width:n+2*kc,height:o+2*kc},r),metrics:{width:n,height:o,left:a,top:s,advance:l}})}}function Ac(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}const Pc=kc;function Mc(t){let e=0,i=0;for(const a of t)e+=a.w*a.h,i=Math.max(i,a.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let n=0,o=0;for(const a of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(a.w>e.w||a.h>e.h)){if(a.x=e.x,a.y=e.y,o=Math.max(o,a.y+a.h),n=Math.max(n,a.x+a.w),a.w===e.w&&a.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else a.h===e.h?(e.x+=a.w,e.w-=a.w):a.w===e.w?(e.y+=a.h,e.h-=a.h):(r.push({x:e.x+a.w,y:e.y,w:e.w-a.w,h:a.h}),e.y+=a.h,e.h-=a.h);break}}return{w:n,h:o,fill:e/(n*o)||0}}const Ec=1;class Ic{constructor(t,e){let{pixelRatio:i,version:r,stretchX:n,stretchY:o,content:a,textFitWidth:s,textFitHeight:l}=e;this.paddedRect=t,this.pixelRatio=i,this.stretchX=n,this.stretchY=o,this.content=a,this.version=r,this.textFitWidth=s,this.textFitHeight=l}get tl(){return[this.paddedRect.x+Ec,this.paddedRect.y+Ec]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ec,this.paddedRect.y+this.paddedRect.h-Ec]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ec)/this.pixelRatio,(this.paddedRect.h-2*Ec)/this.pixelRatio]}}class zc{constructor(t,e){const i={},r={};this.haveRenderCallbacks=[];const n=[];this.addImages(t,i,n),this.addImages(e,r,n);const{w:o,h:a}=Mc(n),s=new ys({width:o||1,height:a||1});for(const l in t){const e=t[l],r=i[l].paddedRect;ys.copy(e.data,s,{x:0,y:0},{x:r.x+Ec,y:r.y+Ec},e.data)}for(const l in e){const t=e[l],i=r[l].paddedRect,n=i.x+Ec,o=i.y+Ec,a=t.data.width,c=t.data.height;ys.copy(t.data,s,{x:0,y:0},{x:n,y:o},t.data),ys.copy(t.data,s,{x:0,y:c-1},{x:n,y:o-1},{width:a,height:1}),ys.copy(t.data,s,{x:0,y:0},{x:n,y:o+c},{width:a,height:1}),ys.copy(t.data,s,{x:a-1,y:0},{x:n-1,y:o},{width:1,height:c}),ys.copy(t.data,s,{x:0,y:0},{x:n+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=i,this.patternPositions=r}addImages(t,e,i){for(const r in t){const n=t[r],o={x:0,y:0,w:n.data.width+2*Ec,h:n.data.height+2*Ec};i.push(o),e[r]=new Ic(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,n]=t.tl;i.update(e.data,void 0,{x:r,y:n})}}var Lc;bn("ImagePosition",Ic),bn("ImageAtlas",zc),t.ah=void 0,(Lc=t.ah||(t.ah={}))[Lc.none=0]="none",Lc[Lc.horizontal=1]="horizontal",Lc[Lc.vertical=2]="vertical",Lc[Lc.horizontalOnly=3]="horizontalOnly";const Dc=-17;class Rc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new Rc;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new Rc;return e.imageName=t,e}}class Oc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new Oc;for(let r=0;r<t.sections.length;r++){const n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&In(r)&&!Ql[t[i+1]]||n&&In(n)&&!Ql[t[i-1]]||!Ql[t[i]]?t[i]:Ql[t[i]]}return e}(this.text)}trim(){let t=0;for(let i=0;i<this.text.length&&Fc[this.text.charCodeAt(i)];i++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&Fc[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new Oc;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Rc.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void S("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Rc.forImage(e)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Bc(e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g){const y=Oc.fromFeature(e,o);let v;d===t.ah.vertical&&y.verticalizePunctuation();const{processBidirectionalText:x,processStyledBidirectionalText:_}=Rn;if(x&&1===y.sections.length){v=[];const t=x(y.toString(),Gc(y,u,a,i,n,f,m));for(const e of t){const t=new Oc;t.text=e,t.sections=y.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);v.push(t)}}else if(_){v=[];const t=_(y.text,y.sectionIndex,Gc(y,u,a,i,n,f,m));for(const e of t){const t=new Oc;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,v.push(t)}}else v=function(t,e){const i=[],r=t.text;let n=0;for(const o of e)i.push(t.substring(n,o)),n=o;return n<r.length&&i.push(t.substring(n,r.length)),i}(y,Gc(y,u,a,i,n,f,m));const b=[],w={positionedLines:b,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(e,i,r,n,o,a,s,l,c,u,h,d){let p=0,f=Dc,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let v=0;for(const S of o){S.trim();const o=S.getMaxScale(),s=(o-1)*tc,l={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=l;const _=l.positionedGlyphs;let b=0;if(!S.length()){f+=a,++v;continue}for(let a=0;a<S.length();a++){const l=S.getSection(a),m=S.getSectionIndex(a),g=S.getCharCode(a);let y=0,v=null,w=null,k=null,C=tc;const T=!(c===t.ah.horizontal||!h&&!En(g)||h&&(Fc[g]||(x=g,Tn.Arabic(x)||Tn["Arabic Supplement"](x)||Tn["Arabic Extended-A"](x)||Tn["Arabic Presentation Forms-A"](x)||Tn["Arabic Presentation Forms-B"](x))));if(l.imageName){const t=n[l.imageName];if(!t)continue;k=l.imageName,e.iconsInText=e.iconsInText||!0,w=t.paddedRect;const i=t.displaySize;l.scale=l.scale*tc/d,v={width:i[0],height:i[1],left:Ec,top:-Pc,advance:T?i[1]:i[0]},y=s+(tc-i[1]*l.scale),C=v.advance;const r=T?i[0]*l.scale-tc*o:i[1]*l.scale-tc*o;r>0&&r>b&&(b=r)}else{const t=r[l.fontStack],e=t&&t[g];if(e&&e.rect)w=e.rect,v=e.metrics;else{const t=i[l.fontStack],e=t&&t[g];if(!e)continue;v=e.metrics}y=(o-l.scale)*tc}T?(e.verticalizable=!0,_.push({glyph:g,imageName:k,x:p,y:f+y,vertical:T,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:w}),p+=C*l.scale+u):(_.push({glyph:g,imageName:k,x:p,y:f+y,vertical:T,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:w}),p+=v.advance*l.scale+u)}0!==_.length&&(m=Math.max(p-u,m),Zc(_,0,_.length-1,y,b)),p=0;const w=a*o+b;l.lineOffset=Math.max(b,s),f+=w,g=Math.max(w,g),++v}var x;const _=f-Dc,{horizontalAlign:b,verticalAlign:w}=qc(s);(function(t,e,i,r,n,o,a,s,l){const c=(e-i)*n;let u=0;u=o!==a?-s*r-Dc:(-r*l+.5)*a;for(const h of t)for(const t of h.positionedGlyphs)t.x+=c,t.y+=u})(e.positionedLines,y,b,w,m,g,a,_,o.length),e.top+=-w*_,e.bottom=e.top+_,e.left+=-b*m,e.right=e.left+m}(w,i,r,n,v,s,l,c,d,u,p,g),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&w}const Fc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Nc(t,e,i,r,n,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*tc/o+n:0}{const r=i[e.fontStack],o=r&&r[t];return o?o.metrics.advance*e.scale+n:0}}function Vc(t,e,i,r){const n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function Uc(t,e,i){let r=0;return 10===t&&(r-=1e4),i&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Wc(t,e,i,r,n,o){let a=null,s=Vc(e,i,n,o);for(const l of r){const t=Vc(e-l.x,i,n,o)+l.badness;t<=s&&(a=l,s=t)}return{index:t,x:e,priorBreak:a,badness:s}}function Hc(t){return t?Hc(t.priorBreak).concat(t.index):[]}function Gc(t,e,i,r,n,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,i,r,n,o){let a=0;for(let s=0;s<t.length();s++){const i=t.getSection(s);a+=Nc(t.getCharCode(s),i,r,n,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,r,n,a),c=t.text.indexOf("\u200b")>=0;let u=0;for(let d=0;d<t.length();d++){const i=t.getSection(d),o=t.getCharCode(d);if(Fc[o]||(u+=Nc(o,i,r,n,e,a)),d<t.length()-1){const e=!((h=o)<11904||!(Tn["Bopomofo Extended"](h)||Tn.Bopomofo(h)||Tn["CJK Compatibility Forms"](h)||Tn["CJK Compatibility Ideographs"](h)||Tn["CJK Compatibility"](h)||Tn["CJK Radicals Supplement"](h)||Tn["CJK Strokes"](h)||Tn["CJK Symbols and Punctuation"](h)||Tn["CJK Unified Ideographs Extension A"](h)||Tn["CJK Unified Ideographs"](h)||Tn["Enclosed CJK Letters and Months"](h)||Tn["Halfwidth and Fullwidth Forms"](h)||Tn.Hiragana(h)||Tn["Ideographic Description Characters"](h)||Tn["Kangxi Radicals"](h)||Tn["Katakana Phonetic Extensions"](h)||Tn.Katakana(h)||Tn["Vertical Forms"](h)||Tn["Yi Radicals"](h)||Tn["Yi Syllables"](h)));(jc[o]||e||i.imageName)&&s.push(Wc(d+1,u,l,s,Uc(o,t.getCharCode(d+1),e&&c),!1))}}var h;return Hc(Wc(t.length(),u,l,s,0,!0))}function qc(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Zc(t,e,i,r,n){if(!r&&!n)return;const o=t[i],a=(t[i].x+o.metrics.advance*o.scale)*r;for(let s=e;s<=i;s++)t[s].x-=a,t[s].y+=n}function Xc(t,e,i){const{horizontalAlign:r,verticalAlign:n}=qc(i),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*n;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Yc(t){var e,i;let r=t.left,n=t.top,o=t.right-r,a=t.bottom-n;const s=null!==(e=t.image.textFitWidth)&&void 0!==e?e:"stretchOrShrink",l=null!==(i=t.image.textFitHeight)&&void 0!==i?i:"stretchOrShrink",c=(t.image.content[2]-t.image.content[0])/(t.image.content[3]-t.image.content[1]);if("proportional"===l){if("stretchOnly"===s&&o/a<c||"proportional"===s){const t=Math.ceil(a*c);r*=t/o,o=t}}else if("proportional"===s&&"stretchOnly"===l&&0!==c&&o/a>c){const t=Math.ceil(o/c);n*=t/a,a=t}return{x1:r,y1:n,x2:r+o,y2:n+a}}function Kc(t,e,i,r,n,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,d,p;"width"===i||"both"===i?(p=n[0]+l-r[3],h=n[0]+c+r[1]):(p=n[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=e.top*o,m=e.bottom*o;return"height"===i||"both"===i?(u=n[1]+f-r[0],d=n[1]+m+r[2]):(u=n[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}const $c=255,Jc=128,Qc=$c*Jc;function tu(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new On(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=i;let n=0;for(;n<e.length&&e[n]<=t;)n++;n=Math.max(0,n-1);let o=n;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[n],s=e[o];return"composite"===i.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:i.evaluate(new On(a)),maxSize:i.evaluate(new On(s)),interpolationType:r}}}function eu(t,e,i){let r="never";const n=t.get(e);return n?r=n:t.get(i)&&(r="always"),r}const iu=cl.VectorTileFeature.types,ru=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nu(t,e,i,r,n,o,a,s,l,c,u,h,d){const p=s?Math.min(Qc,Math.round(s[0])):0,f=s?Math.min(Qc,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function ou(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function au(t){for(const e of t.sections)if(Dn(e.text))return!0;return!1}class su{constructor(t){this.layoutVertexArray=new Zo,this.indexArray=new Jo,this.programConfigurations=t,this.segments=new ia,this.dynamicLayoutVertexArray=new Xo,this.opacityVertexArray=new Yo,this.hasVisibleVertices=!1,this.placedSymbolArray=new Io}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Zl.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Xl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ru,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}bn("SymbolBuffers",su);class lu{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new ia,this.collisionVertexArray=new $o}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Yl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}bn("CollisionBuffers",lu);class cu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=rs([]),this.placementViewportMatrix=rs([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tu(this.zoom,i["text-size"]),this.iconSizeData=tu(this.zoom,i["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==eu(r,"text-overlap","text-allow-overlap")||"never"!==eu(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!n.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((e=>t.ah[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new su(new Pa(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new su(new Pa(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Do,this.lineVertexArray=new Ro,this.symbolInstances=new Lo,this.textAnchorOffsets=new Bo}calculateGlyphDependencies(t,e,i,r,n){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||r)&&n){const i=Ql[t.charAt(o)];i&&(e[i.charCodeAt(0)]=!0)}}populate(e,i,r){const n=this.layers[0],o=n.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Kt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=i.iconDependencies,p=i.glyphDependencies,f=i.availableImages,m=new On(this.zoom);for(const{feature:g,id:y,index:v,sourceLayerIndex:x}of e){const e=n._featureFilter.needGeometry,i=Ra(g,e);if(!n._featureFilter.filter(m,i,r))continue;let s,l;if(e||(i.geometry=Da(g)),c){const t=n.getValueAndResolveTokens("text-field",i,r,f),e=Kt.factory(t),o=this.hasRTLText=this.hasRTLText||au(e);(!o||"unavailable"===Rn.getRTLTextPluginStatus()||o&&Rn.isParsed())&&(s=Jl(e,n,i))}if(u){const t=n.getValueAndResolveTokens("icon-image",i,r,f);l=t instanceof te?t:te.fromString(t)}if(!s&&!l)continue;const _=this.sortFeaturesByKey?h.evaluate(i,{},r):void 0;if(this.features.push({id:y,text:s,icon:l,index:v,sourceLayerIndex:x,geometry:i.geometry,properties:g.properties,type:iu[g.type],sortKey:_}),l&&(d[l.name]=!0),s){const e=a.evaluate(i,{},r).join(","),n="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.ah.vertical)>=0;for(const t of s.sections)if(t.image)d[t.image.name]=!0;else{const i=An(s.toString()),r=t.fontStack||e,o=p[r]=p[r]||{};this.calculateGlyphDependencies(t.text,o,n,this.allowVerticalPlacement,i)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},i={},r=[];let n=0;function o(e){r.push(t[e]),n++}function a(t,e,n){const o=i[t];return delete i[t],i[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(t,i,n){const o=e[i];return delete e[i],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function l(t,e,i){const r=i?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(r.x,":").concat(r.y)}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in i&&f in e&&i[p]!==e[f]){const t=s(p,f,h),n=a(p,f,r[t].geometry);delete e[p],delete i[f],i[l(d,r[n].geometry,!0)]=n,r[t].geometry=null}else p in i?a(p,f,h):f in e?s(p,f,h):(o(c),e[p]=n-1,i[f]=n-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const n={};for(let o=t.segment+1;o<e.length;o++)n[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:i},o<e.length-1&&(i+=e[o+1].dist(e[o]));for(let o=t.segment||0;o>=0;o--)n[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:r},o>0&&(r+=e[o-1].dist(e[o]));for(let t=0;t<e.length;t++){const e=n[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,i,r,n,o,a,s,l,c,u,h,d){const p=e.indexArray,f=e.layoutVertexArray,m=e.segments.prepareSegment(4*i.length,f,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&s===t.ah.vertical?Math.PI/2:0,x=a.text&&a.text.sections;for(let t=0;t<i.length;t++){const{tl:n,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:_,glyphOffset:b,isSDF:w,sectionIndex:S}=i[t],k=m.vertexLength,C=b[1];nu(f,l.x,l.y,n.x,C+n.y,u.x,u.y,r,w,h.x,h.y,y,_),nu(f,l.x,l.y,o.x,C+o.y,u.x+u.w,u.y,r,w,g.x,h.y,y,_),nu(f,l.x,l.y,s.x,C+s.y,u.x,u.y+u.h,r,w,h.x,g.y,y,_),nu(f,l.x,l.y,c.x,C+c.y,u.x+u.w,u.y+u.h,r,w,g.x,g.y,y,_),ou(e.dynamicLayoutVertexArray,l,v),p.emplaceBack(k,k+1,k+2),p.emplaceBack(k+1,k+2,k+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),t!==i.length-1&&S===i[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,a,a.index,{},d,x&&x[S])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],s,0,!1,0,h)}_addCollisionDebugVertex(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,i,r,n,a,s){const l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=l.vertexLength,u=n.layoutVertexArray,h=n.collisionVertexArray,d=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,h,a,d,p,new o(t,e)),this._addCollisionDebugVertex(u,h,a,d,p,new o(i,e)),this._addCollisionDebugVertex(u,h,a,d,p,new o(i,r)),this._addCollisionDebugVertex(u,h,a,d,p,new o(t,r)),l.vertexLength+=4;const f=n.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(t,e,i,r){for(let n=t;n<e;n++){const t=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,r?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,i)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lu(Ko,Kl.members,Qo),this.iconCollisionBox=new lu(Ko,Kl.members,Qo);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,i,r,n,o,a,s,l){const c={};for(let u=e;u<i;u++){const e=t.get(u);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let u=r;u<n;u++){const e=t.get(u);c.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.verticalTextFeatureIndex=e.featureIndex;break}for(let u=o;u<a;u++){const e=t.get(u);c.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.iconFeatureIndex=e.featureIndex;break}for(let u=s;u<l;u++){const e=t.get(u);c.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.verticalIconFeatureIndex=e.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs;for(let n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const t=this.symbolInstances.get(a);r.push(0|Math.round(e*t.anchorX+i*t.anchorY)),n.push(t.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||n[e]-n[t])),o}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let uu,hu;bn("SymbolBucket",cu,{omit:["layers","collisionBoxArray","features","compareText"]}),cu.MAX_GLYPHS=65535,cu.addDynamicAttributes=ou;var du={get paint(){return hu=hu||new Kn({"icon-opacity":new qn(q.paint_symbol["icon-opacity"]),"icon-color":new qn(q.paint_symbol["icon-color"]),"icon-halo-color":new qn(q.paint_symbol["icon-halo-color"]),"icon-halo-width":new qn(q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qn(q.paint_symbol["icon-halo-blur"]),"icon-translate":new Gn(q.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gn(q.paint_symbol["icon-translate-anchor"]),"text-opacity":new qn(q.paint_symbol["text-opacity"]),"text-color":new qn(q.paint_symbol["text-color"],{runtimeType:dt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new qn(q.paint_symbol["text-halo-color"]),"text-halo-width":new qn(q.paint_symbol["text-halo-width"]),"text-halo-blur":new qn(q.paint_symbol["text-halo-blur"]),"text-translate":new Gn(q.paint_symbol["text-translate"]),"text-translate-anchor":new Gn(q.paint_symbol["text-translate-anchor"])})},get layout(){return uu=uu||new Kn({"symbol-placement":new Gn(q.layout_symbol["symbol-placement"]),"symbol-spacing":new Gn(q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gn(q.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qn(q.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gn(q.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Gn(q.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Gn(q.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Gn(q.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gn(q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gn(q.layout_symbol["icon-rotation-alignment"]),"icon-size":new qn(q.layout_symbol["icon-size"]),"icon-text-fit":new Gn(q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gn(q.layout_symbol["icon-text-fit-padding"]),"icon-image":new qn(q.layout_symbol["icon-image"]),"icon-rotate":new qn(q.layout_symbol["icon-rotate"]),"icon-padding":new qn(q.layout_symbol["icon-padding"]),"icon-keep-upright":new Gn(q.layout_symbol["icon-keep-upright"]),"icon-offset":new qn(q.layout_symbol["icon-offset"]),"icon-anchor":new qn(q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gn(q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gn(q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gn(q.layout_symbol["text-rotation-alignment"]),"text-field":new qn(q.layout_symbol["text-field"]),"text-font":new qn(q.layout_symbol["text-font"]),"text-size":new qn(q.layout_symbol["text-size"]),"text-max-width":new qn(q.layout_symbol["text-max-width"]),"text-line-height":new Gn(q.layout_symbol["text-line-height"]),"text-letter-spacing":new qn(q.layout_symbol["text-letter-spacing"]),"text-justify":new qn(q.layout_symbol["text-justify"]),"text-radial-offset":new qn(q.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gn(q.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qn(q.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qn(q.layout_symbol["text-anchor"]),"text-max-angle":new Gn(q.layout_symbol["text-max-angle"]),"text-writing-mode":new Gn(q.layout_symbol["text-writing-mode"]),"text-rotate":new qn(q.layout_symbol["text-rotate"]),"text-padding":new Gn(q.layout_symbol["text-padding"]),"text-keep-upright":new Gn(q.layout_symbol["text-keep-upright"]),"text-transform":new qn(q.layout_symbol["text-transform"]),"text-offset":new qn(q.layout_symbol["text-offset"]),"text-allow-overlap":new Gn(q.layout_symbol["text-allow-overlap"]),"text-overlap":new Gn(q.layout_symbol["text-overlap"]),"text-ignore-placement":new Gn(q.layout_symbol["text-ignore-placement"]),"text-optional":new Gn(q.layout_symbol["text-optional"])})}};class pu{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:lt,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}bn("FormatSectionOverride",pu,{omit:["defaultValue"]});class fu extends Jn{constructor(t){super(t,du)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,r){const n=this.layout.get(t).evaluate(e,{},i,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||xr(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,((e,i)=>t&&i in t?String(t[i]):""))}(e.properties,n)}createBucket(t){return new cu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of du.paint.overridableProperties){if(!fu.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new pu(e),r=new vr(i,e.property.specification);let n=null;n="constant"===e.value.kind||"source"===e.value.kind?new br("source",r):new wr("composite",r,e.value.zoomStops),this.paint._values[t]=new Wn(e.property,n,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&fu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),r=du.paint.properties[e];let n=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof Kt)o(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{n||(e instanceof oe&&re(e.value)===gt?o(e.value.sections):e instanceof Ge?o(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return n}}let mu;var gu={get paint(){return mu=mu||new Kn({"background-color":new Gn(q.paint_background["background-color"]),"background-pattern":new Xn(q.paint_background["background-pattern"]),"background-opacity":new Gn(q.paint_background["background-opacity"])})}};class yu extends Jn{constructor(t){super(t,gu)}}let vu;var xu={get paint(){return vu=vu||new Kn({"raster-opacity":new Gn(q.paint_raster["raster-opacity"]),"raster-hue-rotate":new Gn(q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gn(q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gn(q.paint_raster["raster-brightness-max"]),"raster-saturation":new Gn(q.paint_raster["raster-saturation"]),"raster-contrast":new Gn(q.paint_raster["raster-contrast"]),"raster-resampling":new Gn(q.paint_raster["raster-resampling"]),"raster-fade-duration":new Gn(q.paint_raster["raster-fade-duration"])})}};class _u extends Jn{constructor(t){super(t,xu)}}class bu extends Jn{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class wu{constructor(t){this._methodToThrottle=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Su=6371008.8;class ku{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(e,")"));if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ku(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(t){const e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Su*Math.acos(Math.min(n,1))}static convert(t){if(t instanceof ku)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ku(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ku(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Cu=2*Math.PI*Su;function Tu(t){return Cu*Math.cos(t*Math.PI/180)}function Au(t){return(180+t)/360}function Pu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Mu(t,e){return t/Tu(e)}function Eu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class Iu{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=ku.convert(t);return new Iu(Au(i.lng),Pu(i.lat),Mu(e,i.lat))}toLngLat(){return new ku(360*this.x-180,Eu(this.y))}toAltitude(){return this.z*Tu(Eu(this.y))}meterInMercatorCoordinateUnits(){return 1/Cu*(t=Eu(this.y),1/Math.cos(t*Math.PI/180));var t}}function zu(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class Lu{constructor(t,e,i){if(t<0||t>25||i<0||i>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))throw new Error("x=".concat(e,", y=").concat(i,", z=").concat(t," outside of bounds. 0<=x<").concat(Math.pow(2,t),", 0<=y<").concat(Math.pow(2,t)," 0<=z<=25 "));this.z=t,this.x=e,this.y=i,this.key=Ou(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,i){const r=(o=this.y,a=this.z,s=zu(256*(n=this.x),256*(o=Math.pow(2,a)-o-1),a),l=zu(256*(n+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var n,o,a,s,l;const c=function(t,e,i){let r,n="";for(let o=t;o>0;o--)r=1<<o-1,n+=(e&r?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new o((t.x*e-this.x)*Ia,(t.y*e-this.y)*Ia)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class Du{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Ou(t,e.z,e.z,e.x,e.y)}}class Ru{constructor(t,e,i,r,n){if(t<i)throw new Error("overscaledZ should be >= z; overscaledZ = ".concat(t,"; z = ").concat(i));this.overscaledZ=t,this.wrap=e,this.canonical=new Lu(i,+r,+n),this.key=Ou(e,t,i,r,n)}clone(){return new Ru(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(t,"; overscaledZ = ").concat(this.overscaledZ));const e=this.canonical.z-t;return t>this.canonical.z?new Ru(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ru(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(t,"; overscaledZ = ").concat(this.overscaledZ));const i=this.canonical.z-t;return t>this.canonical.z?Ou(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Ou(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Ru(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new Ru(e,this.wrap,e,i,r),new Ru(e,this.wrap,e,i+1,r),new Ru(e,this.wrap,e,i,r+1),new Ru(e,this.wrap,e,i+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Ru(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Ru(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Du(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}getTilePoint(t){return this.canonical.getTilePoint(new Iu(t.x-this.wrap,t.y))}}function Ou(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);const o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}bn("CanonicalTileID",Lu),bn("OverscaledTileID",Ru,{omit:["posMatrix"]});class Bu{constructor(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&!["mapbox","terrarium","custom"].includes(i))return void S('"'.concat(i,'" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".'));this.stride=e.height;const s=this.dim=e.height-2;switch(this.data=new Uint32Array(e.data.buffer),i){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=r,this.greenFactor=n,this.blueFactor=o,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<s;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(s,l)]=this.data[this._idx(s-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,s)]=this.data[this._idx(l,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<s;l++)for(let t=0;t<s;t++){const e=this.get(l,t);e>this.max&&(this.max=e),e<this.min&&(this.min=e)}}get(t,e){const i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return this.unpack(i[r],i[r+1],i[r+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}unpack(t,e,i){return t*this.redFactor+e*this.greenFactor+i*this.blueFactor-this.baseShift}getPixels(){return new ys({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-i*this.dim;for(let c=o;c<a;c++)for(let e=r;e<n;e++)this.data[this._idx(e,c)]=t.data[this._idx(e+s,c+l)]}}bn("DEMData",Bu);class Fu{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error("Out of bounds. Index requested n=".concat(t," can't be >= this._numberToString.length ").concat(this._numberToString.length));return this._numberToString[t]}}class ju{constructor(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class Nu{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new xn(Ia,16,0),this.grid3D=new xn(Ia,16,0),this.featureIndexArray=new jo,this.promoteId=e}insert(t,e,i,r,n,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);const s=o?this.grid3D:this.grid;for(let l=0;l<e.length;l++){const t=e[l],i=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];i[0]=Math.min(i[0],r.x),i[1]=Math.min(i[1],r.y),i[2]=Math.max(i[2],r.x),i[3]=Math.max(i[3],r.y)}i[0]<Ia&&i[1]<Ia&&i[2]>=0&&i[3]>=0&&s.insert(a,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cl.VectorTile(new Sc(this.rawTileData)).layers,this.sourceLayerCoder=new Fu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,r){this.loadVTLayers();const n=t.params||{},a=Ia/t.tileSize/t.scale,s=Pr(n.filter),l=t.queryGeometry,c=t.queryPadding*a,u=Uu(l),h=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),d=Uu(t.cameraQueryGeometry),p=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,((e,i,r,n)=>function(t,e,i,r,n){for(const o of t)if(e<=o.x&&i<=o.y&&r>=o.x&&n>=o.y)return!0;const a=[new o(e,i),new o(e,n),new o(r,n),new o(r,i)];if(t.length>2)for(const o of a)if(Za(t,o))return!0;for(let o=0;o<t.length-1;o++)if(Xa(t[o],t[o+1],a))return!0;return!1}(t.cameraQueryGeometry,e-c,i-c,r+c,n+c)));for(const o of p)h.push(o);h.sort(Wu);const f={};let m;for(let o=0;o<h.length;o++){const c=h[o];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,n.layers,n.availableImages,e,i,r,((e,i,r)=>(d||(d=Da(e)),i.queryIntersectsFeature(l,e,r,d,this.z,t.transform,a,t.pixelPosMatrix))))}return f}loadMatchingFeature(t,e,i,r,n,o,a,s,l,c,u){const h=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,h))return;const d=this.sourceLayerCoder.decode(i),p=this.vtLayers[d].feature(r);if(n.needGeometry){const t=Ra(p,!0);if(!n.filter(new On(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new On(this.tileID.overscaledZ),p))return;const f=this.getId(p,d);for(let m=0;m<h.length;m++){const e=h[m];if(o&&o.indexOf(e)<0)continue;const i=s[e];if(!i)continue;let n={};f&&c&&(n=c.getState(i.sourceLayer||"_geojsonTileLayer",f));const d=y({},l[e]);d.paint=Vu(d.paint,i.paint,p,n,a),d.layout=Vu(d.layout,i.layout,p,n,a);const g=!u||u(p,i,n);if(!g)continue;const v=new ju(p,this.z,this.x,this.y,f);v.layer=d;let x=t[e];void 0===x&&(x=t[e]=[]),x.push({featureIndex:r,feature:v,intersectionZ:g})}}lookupSymbolFeatures(t,e,i,r,n,o,a,s){const l={};this.loadVTLayers();const c=Pr(n);for(const u of t)this.loadMatchingFeature(l,i,r,u,c,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof i&&(i=Number(i))),i}}function Vu(t,e,i,r,n){return x(t,((t,o)=>{const a=e instanceof Hn?e.get(o):null;return a&&a.evaluate?a.evaluate(i,r,n):a}))}function Uu(t){let e=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of t)e=Math.min(e,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return{minX:e,minY:i,maxX:r,maxY:n}}function Wu(t,e){return e-t}function Hu(t,e,i,r,n){const a=[];for(let s=0;s<t.length;s++){const l=t[s];let c;for(let t=0;t<l.length-1;t++){let s=l[t],u=l[t+1];s.x<e&&u.x<e||(s.x<e?s=new o(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<e&&(u=new o(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<i&&u.y<i||(s.y<i?s=new o(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y<i&&(u=new o(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),s.x>=r&&u.x>=r||(s.x>=r?s=new o(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=r&&(u=new o(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=n&&u.y>=n||(s.y>=n?s=new o(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y>=n&&(u=new o(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}bn("FeatureIndex",Nu,{omit:["rawTileData","sourceLayerCoder"]});class Gu extends o{constructor(t,e,i,r){super(t,e),this.angle=i,void 0!==r&&(this.segment=r)}clone(){return new Gu(this.x,this.y,this.angle,this.segment)}}function qu(t,e,i,r,n){if(void 0===e.segment||0===i)return!0;let o=e,a=e.segment+1,s=0;for(;s>-i/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<i/2;){const e=t[a],i=t[a+1];if(!i)return!1;let o=t[a-1].angleTo(e)-e.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>n)return!1;a++,s+=e.dist(i)}return!0}function Zu(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Xu(t,e,i){return t?.6*e*i:0}function Yu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Ku(t,e,i,r,n,o){const a=Xu(i,n,o),s=Yu(i,r)*o;let l=0;const c=Zu(t)/2;for(let u=0;u<t.length-1;u++){const i=t[u],r=t[u+1],n=i.dist(r);if(l+n>c){const o=(c-l)/n,h=Ee.number(i.x,r.x,o),d=Ee.number(i.y,r.y,o),p=new Gu(h,d,r.angleTo(i),u);return p._round(),!a||qu(t,p,s,a,e)?p:void 0}l+=n}}function $u(t,e,i,r,n,o,a,s,l){const c=Xu(r,o,a),u=Yu(r,n),h=u*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Ju(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,c,i,h,d,!1,l)}function Ju(t,e,i,r,n,o,a,s,l){const c=o/2,u=Zu(t);let h=0,d=e-i,p=[];for(let f=0;f<t.length-1;f++){const e=t[f],a=t[f+1],s=e.dist(a),m=a.angleTo(e);for(;d+i<h+s;){d+=i;const g=(d-h)/s,y=Ee.number(e.x,a.x,g),v=Ee.number(e.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-c>=0&&d+c<=u){const e=new Gu(y,v,m,f);e._round(),r&&!qu(t,e,o,r,n)||p.push(e)}}h+=s}return s||p.length||a||(p=Ju(t,h/2,i,r,n,o,a,!0,l)),p}bn("Anchor",Gu);const Qu=Ec;function th(t,e,i,r){const n=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2*Qu,c=a.paddedRect.h-2*Qu;let u={x1:t.left,y1:t.top,x2:t.right,y2:t.bottom};const h=a.stretchX||[[0,l]],d=a.stretchY||[[0,c]],p=(t,e)=>t+e[1]-e[0],f=h.reduce(p,0),m=d.reduce(p,0),g=l-f,y=c-m;let v=0,x=f,_=0,b=m,w=0,S=g,k=0,C=y;if(a.content&&r){const e=a.content,i=e[2]-e[0],r=e[3]-e[1];(a.textFitWidth||a.textFitHeight)&&(u=Yc(t)),v=eh(h,0,e[0]),_=eh(d,0,e[1]),x=eh(h,e[0],e[2]),b=eh(d,e[1],e[3]),w=e[0]-v,k=e[1]-_,S=i-x,C=r-b}const T=u.x1,A=u.y1,P=u.x2-T,M=u.y2-A,E=(t,r,n,l)=>{const c=rh(t.stretch-v,x,P,T),u=nh(t.fixed-w,S,t.stretch,f),h=rh(r.stretch-_,b,M,A),d=nh(r.fixed-k,C,r.stretch,m),p=rh(n.stretch-v,x,P,T),g=nh(n.fixed-w,S,n.stretch,f),y=rh(l.stretch-_,b,M,A),E=nh(l.fixed-k,C,l.stretch,m),I=new o(c,h),z=new o(p,h),L=new o(p,y),D=new o(c,y),R=new o(u/s,d/s),O=new o(g/s,E/s),B=e*Math.PI/180;if(B){const t=Math.sin(B),e=Math.cos(B),i=[e,-t,t,e];I._matMult(i),z._matMult(i),D._matMult(i),L._matMult(i)}const F=t.stretch+t.fixed,j=r.stretch+r.fixed;return{tl:I,tr:z,bl:D,br:L,tex:{x:a.paddedRect.x+Qu+F,y:a.paddedRect.y+Qu+j,w:n.stretch+n.fixed-F,h:l.stretch+l.fixed-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:O,minFontScaleX:S/s/P,minFontScaleY:C/s/M,isSDF:i}};if(r&&(a.stretchX||a.stretchY)){const t=ih(h,g,f),e=ih(d,y,m);for(let i=0;i<t.length-1;i++){const r=t[i],o=t[i+1];for(let t=0;t<e.length-1;t++)n.push(E(r,e[t],o,e[t+1]))}}else n.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return n}function eh(t,e,i){let r=0;for(const n of t)r+=Math.max(e,Math.min(i,n[1]))-Math.max(e,Math.min(i,n[0]));return r}function ih(t,e,i){const r=[{fixed:-Qu,stretch:0}];for(const[n,o]of t){const t=r[r.length-1];r.push({fixed:n-t.stretch,stretch:t.stretch}),r.push({fixed:n-t.stretch,stretch:t.stretch+(o-n)})}return r.push({fixed:e+Qu,stretch:i}),r}function rh(t,e,i,r){return t/e*i+r}function nh(t,e,i,r){return t-e*i/r}class oh{constructor(t,e,i,r,n,a,s,l,c,u){var h;if(this.boxStartIndex=t.length,c){let t=a.top,e=a.bottom;const i=a.collisionPadding;i&&(t-=i[1],e+=i[3]);let r=e-t;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{const c=(null===(h=a.image)||void 0===h?void 0:h.content)&&(a.image.textFitWidth||a.image.textFitHeight)?Yc(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};c.y1=c.y1*s-l[0],c.y2=c.y2*s+l[2],c.x1=c.x1*s-l[3],c.x2=c.x2*s+l[1];const d=a.collisionPadding;if(d&&(c.x1-=d[0]*s,c.y1-=d[1]*s,c.x2+=d[2]*s,c.y2+=d[3]*s),u){const t=new o(c.x1,c.y1),e=new o(c.x2,c.y1),i=new o(c.x1,c.y2),r=new o(c.x2,c.y2),n=u*Math.PI/180;t._rotate(n),e._rotate(n),i._rotate(n),r._rotate(n),c.x1=Math.min(t.x,e.x,i.x,r.x),c.x2=Math.max(t.x,e.x,i.x,r.x),c.y1=Math.min(t.y,e.y,i.y,r.y),c.y2=Math.max(t.y,e.y,i.y,r.y)}t.emplaceBack(e.x,e.y,c.x1,c.y1,c.x2,c.y2,i,r,n)}this.boxEndIndex=t.length}}class ah{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sh;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,r=e[t];for(;t>0;){const n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}_down(t){const{data:e,compare:i}=this,r=this.length>>1,n=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&i(e[a],o)<0&&(r=a,o=e[a]),i(o,n)>=0)break;e[t]=o,t=r}e[t]=n}}function sh(t,e){return t<e?-1:t>e?1:0}function lh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,n=1/0,a=-1/0,s=-1/0;const l=t[0];for(let o=0;o<l.length;o++){const t=l[o];(!o||t.x<r)&&(r=t.x),(!o||t.y<n)&&(n=t.y),(!o||t.x>a)&&(a=t.x),(!o||t.y>s)&&(s=t.y)}const c=Math.min(a-r,s-n);let u=c/2;const h=new ah([],ch);if(0===c)return new o(r,n);for(let o=r;o<a;o+=c)for(let e=n;e<s;e+=c)h.push(new uh(o+u,e+u,u,t));let d=function(t){let e=0,i=0,r=0;const n=t[0];for(let o=0,a=n.length,s=a-1;o<a;s=o++){const t=n[o],a=n[s],l=t.x*a.y-a.x*t.y;i+=(t.x+a.x)*l,r+=(t.y+a.y)*l,e+=3*l}return new uh(i/e,r/e,0,t)}(t),p=h.length;for(;h.length;){const r=h.pop();(r.d>d.d||!d.d)&&(d=r,i&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-d.d<=e||(u=r.h/2,h.push(new uh(r.p.x-u,r.p.y-u,u,t)),h.push(new uh(r.p.x+u,r.p.y-u,u,t)),h.push(new uh(r.p.x-u,r.p.y+u,u,t)),h.push(new uh(r.p.x+u,r.p.y+u,u,t)),p+=4)}return i&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(d.d))),d.p}function ch(t,e){return e.max-t.max}function uh(t,e,i,r){this.p=new o(t,e),this.h=i,this.d=function(t,e){let i=!1,r=1/0;for(let n=0;n<e.length;n++){const o=e[n];for(let e=0,n=o.length,a=n-1;e<n;a=e++){const n=o[e],s=o[a];n.y>t.y!=s.y>t.y&&t.x<(s.x-n.x)*(t.y-n.y)/(s.y-n.y)+n.x&&(i=!i),r=Math.min(r,Ga(t,n,s))}}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var hh;t.aq=void 0,(hh=t.aq||(t.aq={}))[hh.center=1]="center",hh[hh.left=2]="left",hh[hh.right=3]="right",hh[hh.top=4]="top",hh[hh.bottom=5]="bottom",hh[hh["top-left"]=6]="top-left",hh[hh["top-right"]=7]="top-right",hh[hh["bottom-left"]=8]="bottom-left",hh[hh["bottom-right"]=9]="bottom-right";const dh=7,ph=Number.POSITIVE_INFINITY;function fh(t,e){return e[1]!==ph?function(t,e,i){let r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-dh;break;case"bottom-right":case"bottom-left":case"bottom":n=-i+dh}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){let i=0,r=0;e<0&&(e=0);const n=e/Math.SQRT2;switch(t){case"top-right":case"top-left":r=n-dh;break;case"bottom-right":case"bottom-left":r=-n+dh;break;case"bottom":r=-e+dh;break;case"top":r=e-dh}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function mh(t,e,i){var r;const n=t.layout,o=null===(r=n.get("text-variable-anchor-offset"))||void 0===r?void 0:r.evaluate(e,{},i);if(o){const t=o.values,e=[];for(let i=0;i<t.length;i+=2){const r=e[i]=t[i],n=t[i+1].map((t=>t*tc));r.startsWith("top")?n[1]-=dh:r.startsWith("bottom")&&(n[1]+=dh),e[i+1]=n}return new Qt(e)}const a=n.get("text-variable-anchor");if(a){let r;r=void 0!==t._unevaluatedLayout.getValue("text-radial-offset")?[n.get("text-radial-offset").evaluate(e,{},i)*tc,ph]:n.get("text-offset").evaluate(e,{},i).map((t=>t*tc));const o=[];for(const t of a)o.push(t,fh(t,r));return new Qt(o)}return null}function gh(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yh(e,i,r,n,o,a,s,l,c,u,h){let d=a.textMaxSize.evaluate(i,{});void 0===d&&(d=s);const p=e.layers[0].layout,f=p.get("icon-offset").evaluate(i,{},h),m=xh(r.horizontal),g=s/24,y=e.tilePixelRatio*g,v=e.tilePixelRatio*d/24,x=e.tilePixelRatio*l,_=e.tilePixelRatio*p.get("symbol-spacing"),b=p.get("text-padding")*e.tilePixelRatio,w=function(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=t.get("icon-padding").evaluate(e,{},i),o=n&&n.values;return[o[0]*r,o[1]*r,o[2]*r,o[3]*r]}(p,i,h,e.tilePixelRatio),k=p.get("text-max-angle")/180*Math.PI,C="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),T="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),A=p.get("symbol-placement"),P=_/2,M=p.get("icon-text-fit");let E;n&&"none"!==M&&(e.allowVerticalPlacement&&r.vertical&&(E=Kc(n,r.vertical,M,p.get("icon-text-fit-padding"),f,g)),m&&(n=Kc(n,m,M,p.get("icon-text-fit-padding"),f,g)));const I=(l,d)=>{d.x<0||d.x>=Ia||d.y<0||d.y>=Ia||function(e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,x,_,b,w,k,C,T){const A=e.addToLineVertexArray(i,r);let P,M,E,I,z=0,L=0,D=0,R=0,O=-1,B=-1;const F={};let j=ha("");if(e.allowVerticalPlacement&&n.vertical){const t=l.layout.get("text-rotate").evaluate(b,{},C)+90;E=new oh(c,i,u,h,d,n.vertical,p,f,m,t),s&&(I=new oh(c,i,u,h,d,s,y,v,m,t))}if(o){const r=l.layout.get("icon-rotate").evaluate(b,{}),n="none"!==l.layout.get("icon-text-fit"),a=th(o,r,k,n),p=s?th(s,r,k,n):void 0;M=new oh(c,i,u,h,d,o,y,v,!1,r),z=4*a.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[Jc*l.layout.get("icon-size").evaluate(b,{})],m[0]>Qc&&S("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat($c,'. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[Jc*w.compositeIconSizes[0].evaluate(b,{},C),Jc*w.compositeIconSizes[1].evaluate(b,{},C)],(m[0]>Qc||m[1]>Qc)&&S("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat($c,'. Reduce your "icon-size".'))),e.addSymbols(e.icon,a,m,_,x,b,t.ah.none,i,A.lineStartIndex,A.lineLength,-1,C),O=e.icon.placedSymbolArray.length-1,p&&(L=4*p.length,e.addSymbols(e.icon,p,m,_,x,b,t.ah.vertical,i,A.lineStartIndex,A.lineLength,-1,C),B=e.icon.placedSymbolArray.length-1)}const N=Object.keys(n.horizontal);for(const S of N){const r=n.horizontal[S];if(!P){j=ha(r.text);const t=l.layout.get("text-rotate").evaluate(b,{},C);P=new oh(c,i,u,h,d,r,p,f,m,t)}const o=1===r.positionedLines.length;if(D+=vh(e,i,r,a,l,m,b,g,A,n.vertical?t.ah.horizontal:t.ah.horizontalOnly,o?N:[S],F,O,w,C),o)break}n.vertical&&(R+=vh(e,i,n.vertical,a,l,m,b,g,A,t.ah.vertical,["vertical"],F,B,w,C));const V=P?P.boxStartIndex:e.collisionBoxArray.length,U=P?P.boxEndIndex:e.collisionBoxArray.length,W=E?E.boxStartIndex:e.collisionBoxArray.length,H=E?E.boxEndIndex:e.collisionBoxArray.length,G=M?M.boxStartIndex:e.collisionBoxArray.length,q=M?M.boxEndIndex:e.collisionBoxArray.length,Z=I?I.boxStartIndex:e.collisionBoxArray.length,X=I?I.boxEndIndex:e.collisionBoxArray.length;let Y=-1;const K=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;Y=K(P,Y),Y=K(E,Y),Y=K(M,Y),Y=K(I,Y);const $=Y>-1?1:0;$&&(Y*=T/tc),e.glyphOffsetArray.length>=cu.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey);const J=mh(l,b,C),[Q,tt]=function(e,i){const r=e.length,n=null==i?void 0:i.values;if((null==n?void 0:n.length)>0)for(let o=0;o<n.length;o+=2){const i=n[o+1];e.emplaceBack(t.aq[n[o]],i[0],i[1])}return[r,e.length]}(e.textAnchorOffsets,J);e.symbolInstances.emplaceBack(i.x,i.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,O,B,j,V,U,W,H,G,q,Z,X,u,D,R,z,L,$,0,p,Y,Q,tt)}(e,d,l,r,n,o,E,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,y,[b,b,b,b],C,c,x,w,T,f,i,a,u,h,s)};if("line"===A)for(const t of Hu(i.geometry,0,0,Ia,Ia)){const i=$u(t,_,k,r.vertical||m,n,24,v,e.overscaling,Ia);for(const r of i)m&&_h(e,m.text,P,r)||I(t,r)}else if("line-center"===A){for(const t of i.geometry)if(t.length>1){const e=Ku(t,k,r.vertical||m,n,24,v);e&&I(t,e)}}else if("Polygon"===i.type)for(const t of xi(i.geometry,0)){const e=lh(t,16);I(t[0],new Gu(e.x,e.y,0))}else if("LineString"===i.type)for(const t of i.geometry)I(t,new Gu(t[0].x,t[0].y,0));else if("Point"===i.type)for(const t of i.geometry)for(const e of t)I([e],new Gu(e.x,e.y,0))}function vh(t,e,i,r,n,a,s,l,c,u,h,d,p,f,m){const g=function(t,e,i,r,n,a,s,l){const c=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[];for(const h of e.positionedLines)for(const t of h.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let a=Pc+1,d=!0,p=1,f=0;const m=(n||l)&&t.vertical,g=t.metrics.advance*t.scale/2;if(l&&e.verticalizable&&(f=h.lineOffset/2-(t.imageName?-(tc-t.metrics.width*t.scale)/2:(t.scale-1)*tc)),t.imageName){const e=s[t.imageName];d=e.sdf,p=e.pixelRatio,a=Ec/p}const y=n?[t.x+g,t.y]:[0,0];let v=n?[0,0]:[t.x+g+i[0],t.y+i[1]-f],x=[0,0];m&&(x=v,v=[0,0]);const _=t.metrics.isDoubleResolution?2:1,b=(t.metrics.left-a)*t.scale-g+v[0],w=(-t.metrics.top-a)*t.scale+v[1],S=b+r.w/_*t.scale/p,k=w+r.h/_*t.scale/p,C=new o(b,w),T=new o(S,w),A=new o(b,k),P=new o(S,k);if(m){const e=new o(-g,g-Dc),i=-Math.PI/2,r=tc/2-g,n=new o(5-Dc-r,-(t.imageName?r:0)),a=new o(...x);C._rotateAround(i,e)._add(n)._add(a),T._rotateAround(i,e)._add(n)._add(a),A._rotateAround(i,e)._add(n)._add(a),P._rotateAround(i,e)._add(n)._add(a)}if(c){const t=Math.sin(c),e=Math.cos(c),i=[e,-t,t,e];C._matMult(i),T._matMult(i),A._matMult(i),P._matMult(i)}const M=new o(0,0),E=new o(0,0);u.push({tl:C,tr:T,bl:A,br:P,tex:r,writingMode:e.writingMode,glyphOffset:y,sectionIndex:t.sectionIndex,isSDF:d,pixelOffsetTL:M,pixelOffsetBR:E,minFontScaleX:0,minFontScaleY:0})}return u}(0,i,l,n,a,s,r,t.allowVerticalPlacement),y=t.textSizeData;let v=null;"source"===y.kind?(v=[Jc*n.layout.get("text-size").evaluate(s,{})],v[0]>Qc&&S("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat($c,'. Reduce your "text-size".'))):"composite"===y.kind&&(v=[Jc*f.compositeTextSizes[0].evaluate(s,{},m),Jc*f.compositeTextSizes[1].evaluate(s,{},m)],(v[0]>Qc||v[1]>Qc)&&S("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat($c,'. Reduce your "text-size".'))),t.addSymbols(t.text,g,v,l,a,s,u,e,c.lineStartIndex,c.lineLength,p,m);for(const o of h)d[o]=t.text.placedSymbolArray.length-1;return 4*g.length}function xh(t){for(const e in t)return t[e];return null}function _h(t,e,i,r){const n=t.compareText;if(e in n){const t=n[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<i)return!0}else n[e]=[];return n[e].push(r),!1}const bh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class wh{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,i]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const r=i>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v1."));const n=bh[15&i];if(!n)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new wh(a,o,n,t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const n=bh.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(n<0)throw new Error("Unexpected typed array class: ".concat(i,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=e,i}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return Sh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,i,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:a}=this,s=[0,n.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=t&&s<=i&&c>=e&&c<=r&&l.push(n[a])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=t&&p<=i&&f>=e&&f<=r&&l.push(n[d]),(0===c?t<=p:e<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?i>=p:r>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(t,e,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:n,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let i=h;i<=u;i++)Ah(n[2*i],n[2*i+1],t,e)<=l&&s.push(r[i]);continue}const d=h+u>>1,p=n[2*d],f=n[2*d+1];Ah(p,f,t,e)<=l&&s.push(r[d]),(0===c?t-i<=p:e-i<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?t+i>=p:e+i>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return s}}function Sh(t,e,i,r,n,o){if(n-r<=i)return;const a=r+n>>1;kh(t,e,a,r,n,o),Sh(t,e,i,r,a-1,1-o),Sh(t,e,i,a+1,n,1-o)}function kh(t,e,i,r,n,o){for(;n>r;){if(n-r>600){const a=n-r+1,s=i-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);kh(t,e,i,Math.max(r,Math.floor(i-s*c/a+u)),Math.min(n,Math.floor(i+(a-s)*c/a+u)),o)}const a=e[2*i+o];let s=r,l=n;for(Ch(t,e,r,i),e[2*n+o]>a&&Ch(t,e,r,n);s<l;){for(Ch(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?Ch(t,e,r,l):(l++,Ch(t,e,l,n)),l<=i&&(r=l+1),i<=l&&(n=l-1)}}function Ch(t,e,i,r){Th(t,i,r),Th(e,2*i,2*r),Th(e,2*i+1,2*r+1)}function Th(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function Ah(t,e,i,r){const n=t-i,o=e-r;return n*n+o*o}var Ph;t.be=void 0,(Ph=t.be||(t.be={})).create="create",Ph.load="load",Ph.fullLoad="fullLoad";let Mh=null,Eh=[];const Ih=1e3/60,zh="loadTime",Lh="fullLoadTime",Dh={mark(t){performance.mark(t)},frame(t){const e=t;null!=Mh&&Eh.push(e-Mh),Mh=e},clearMetrics(){Mh=null,Eh=[],performance.clearMeasures(zh),performance.clearMeasures(Lh);for(const e in t.be)performance.clearMarks(t.be[e])},getPerformanceMetrics(){performance.measure(zh,t.be.create,t.be.load),performance.measure(Lh,t.be.create,t.be.fullLoad);const e=performance.getEntriesByName(zh)[0].duration,i=performance.getEntriesByName(Lh)[0].duration,r=Eh.length,n=1/(Eh.reduce(((t,e)=>t+e),0)/r/1e3),o=Eh.filter((t=>t>Ih)).reduce(((t,e)=>t+(e-Ih)/Ih),0);return{loadTime:e,fullLoadTime:i,fps:n,percentDroppedFrames:o/(r+o)*100,totalFrames:r}}};t.$=ia,t.A=is,t.B=function(t){if(null==T){const e=t.navigator?t.navigator.userAgent:null;T=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return T},t.C=class{constructor(t,e){this.target=t,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new wu((()=>this.process())),this.subscription=function(t,e,i,r){return t.addEventListener(e,i,!1),{unsubscribe:()=>{t.removeEventListener(e,i,!1)}}}(this.target,"message",(t=>this.receive(t))),this.globalScope=C(self)?t:window}registerMessageHandler(t,e){this.messageHandlers[t]=e}sendAsync(t,e){return new Promise(((i,r)=>{const n=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[n]={resolve:i,reject:r},e&&e.signal.addEventListener("abort",(()=>{delete this.resolveRejects[n];const e={id:n,type:"<cancel>",origin:location.origin,targetMapId:t.targetMapId,sourceMapId:this.mapId};this.target.postMessage(e)}),{once:!0});const o=[],a=Object.assign(Object.assign({},t),{id:n,sourceMapId:this.mapId,origin:location.origin,data:Sn(t.data,o)});this.target.postMessage(a,{transfer:o})}))}receive(t){const e=t.data,i=e.id;if(!("file://"!==e.origin&&"file://"!==location.origin&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if("<cancel>"===e.type){delete this.tasks[i];const t=this.abortControllers[i];return delete this.abortControllers[i],void(t&&t.abort())}if(C(self)||e.mustQueue)return this.tasks[i]=e,this.taskQueue.push(i),void this.invoker.trigger();this.processTask(i,e)}}process(){if(0===this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,i){return e(this,void 0,void 0,(function*(){if("<response>"===i.type){const e=this.resolveRejects[t];if(delete this.resolveRejects[t],!e)return;return void(i.error?e.reject(kn(i.error)):e.resolve(kn(i.data)))}if(!this.messageHandlers[i.type])return void this.completeTask(t,new Error("Could not find a registered handler for ".concat(i.type,", map ID: ").concat(this.mapId,", available handlers: ").concat(Object.keys(this.messageHandlers).join(", "))));const e=kn(i.data),r=new AbortController;this.abortControllers[t]=r;try{const n=yield this.messageHandlers[i.type](i.sourceMapId,e,r);this.completeTask(t,null,n)}catch(e){this.completeTask(t,e)}}))}completeTask(t,e,i){const r=[];delete this.abortControllers[t];const n={id:t,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?Sn(e):null,data:Sn(i,r)};this.target.postMessage(n,{transfer:r})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},t.D=Gn,t.E=G,t.F=function(){var t=new is(16);return is!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.G=O,t.H=function(t,e,i){var r,n,o,a,s,l,c,u,h,d,p,f,m=i[0],g=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+s*g+h*y+e[12],t[13]=n*m+l*g+d*y+e[13],t[14]=o*m+c*g+p*y+e[14],t[15]=a*m+u*g+f*y+e[15]),t},t.I=Ic,t.J=function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.K=ns,t.L=function(t,e){const i={};for(let r=0;r<e.length;r++){const n=e[r];n in t&&(i[n]=t[n])}return i},t.M=ku,t.N=Au,t.O=Pu,t.P=o,t.Q=Ru,t.R=ys,t.S=h,t.T=jn,t.U=d,t.V=M,t.W=Ia,t.X=io,t.Y=Iu,t.Z=class extends ao{},t._=e,t.a=D,t.a$=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.a0=Lu,t.a1=nt,t.a2=t=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((i=>{e.onloadstart=()=>{i(e)};for(const r of t){const t=window.document.createElement("source");N(r)||(e.crossOrigin="Anonymous"),t.src=r,e.appendChild(t)}}))},t.a3=function(){return v++},t.a4=Mo,t.a5=cu,t.a6=Pr,t.a7=Ra,t.a8=On,t.a9=ju,t.aA=function(t){if("custom"===t.type)return new bu(t);switch(t.type){case"background":return new yu(t);case"circle":return new ls(t);case"fill":return new ol(t);case"fill-extrusion":return new Ml(t);case"heatmap":return new xs(t);case"hillshade":return new ws(t);case"line":return new Gl(t);case"raster":return new _u(t);case"symbol":return new fu(t)}},t.aB=b,t.aC=function(t,e){if(!t)return[{command:"setStyle",args:[e]}];let i=[];try{if(!Y(t.version,e.version))return[{command:"setStyle",args:[e]}];Y(t.center,e.center)||i.push({command:"setCenter",args:[e.center]}),Y(t.zoom,e.zoom)||i.push({command:"setZoom",args:[e.zoom]}),Y(t.bearing,e.bearing)||i.push({command:"setBearing",args:[e.bearing]}),Y(t.pitch,e.pitch)||i.push({command:"setPitch",args:[e.pitch]}),Y(t.sprite,e.sprite)||i.push({command:"setSprite",args:[e.sprite]}),Y(t.glyphs,e.glyphs)||i.push({command:"setGlyphs",args:[e.glyphs]}),Y(t.transition,e.transition)||i.push({command:"setTransition",args:[e.transition]}),Y(t.light,e.light)||i.push({command:"setLight",args:[e.light]}),Y(t.terrain,e.terrain)||i.push({command:"setTerrain",args:[e.terrain]}),Y(t.sky,e.sky)||i.push({command:"setSky",args:[e.sky]});const r={},n=[];!function(t,e,i,r){let n;for(n in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)||J(n,i,r));for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Object.prototype.hasOwnProperty.call(t,n)?Y(t[n],e[n])||("geojson"===t[n].type&&"geojson"===e[n].type&&tt(t,e,n)?K(i,{command:"setGeoJSONSourceData",args:[n,e[n].data]}):Q(n,e,i,r)):$(n,e,i))}(t.sources,e.sources,n,r);const o=[];t.layers&&t.layers.forEach((t=>{"source"in t&&r[t.source]?i.push({command:"removeLayer",args:[t.id]}):o.push(t)})),i=i.concat(n),function(t,e,i){e=e||[];const r=(t=t||[]).map(it),n=e.map(it),o=t.reduce(rt,{}),a=e.reduce(rt,{}),s=r.slice(),l=Object.create(null);let c,u,h,d,p;for(let f=0,m=0;f<r.length;f++)c=r[f],Object.prototype.hasOwnProperty.call(a,c)?m++:(K(i,{command:"removeLayer",args:[c]}),s.splice(s.indexOf(c,m),1));for(let f=0,m=0;f<n.length;f++)c=n[n.length-1-f],s[s.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(o,c)?(K(i,{command:"removeLayer",args:[c]}),s.splice(s.lastIndexOf(c,s.length-m),1)):m++,d=s[s.length-f],K(i,{command:"addLayer",args:[a[c],d]}),s.splice(s.length-f,0,c),l[c]=!0);for(let f=0;f<n.length;f++)if(c=n[f],u=o[c],h=a[c],!l[c]&&!Y(u,h))if(Y(u.source,h.source)&&Y(u["source-layer"],h["source-layer"])&&Y(u.type,h.type)){for(p in et(u.layout,h.layout,i,c,null,"setLayoutProperty"),et(u.paint,h.paint,i,c,null,"setPaintProperty"),Y(u.filter,h.filter)||K(i,{command:"setFilter",args:[c,h.filter]}),Y(u.minzoom,h.minzoom)&&Y(u.maxzoom,h.maxzoom)||K(i,{command:"setLayerZoomRange",args:[c,h.minzoom,h.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?et(u[p],h[p],i,c,p.slice(6),"setPaintProperty"):Y(u[p],h[p])||K(i,{command:"setLayerProperty",args:[c,p,h[p]]}));for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?et(u[p],h[p],i,c,p.slice(6),"setPaintProperty"):Y(u[p],h[p])||K(i,{command:"setLayerProperty",args:[c,p,h[p]]}))}else K(i,{command:"removeLayer",args:[c]}),d=s[s.lastIndexOf(c)+1],K(i,{command:"addLayer",args:[h,d]})}(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:"setStyle",args:[e]}]}return i},t.aD=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:"layers.".concat(i,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(i,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(i,': property "renderingMode" must be either "2d" or "3d"')}),e},t.aE=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const r in e)if(!t(e[r],i[r]))return!1;return!0}return e===i},t.aF=x,t.aG=_,t.aH=class extends ga{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.aI=ya,t.aJ=class extends ga{constructor(t,e){super(t,e),this.current=_a}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.aK=va,t.aL=class extends ga{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.aM=class extends ga{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.aN=xa,t.aO=function(t,e,i,r,n,o,a){var s=1/(e-i),l=1/(r-n),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*l,t[14]=(a+o)*c,t[15]=1,t},t.aP=Zt,t.aQ=as,t.aR=class extends yo{},t.aS=$l,t.aT=class extends xo{},t.aU=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.aV=vs,t.aW=No,t.aX=class extends To{},t.aY=Jo,t.aZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},t.a_=function(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=e[0],x=e[1],_=e[2],b=e[3],w=e[4],S=e[5],k=e[6],C=e[7],T=e[8],A=e[9],P=e[10],M=e[11],E=e[12],I=e[13],z=e[14],L=e[15];return Math.abs(i-v)<=es*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-x)<=es*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-_)<=es*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-b)<=es*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=es*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=es*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-k)<=es*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-C)<=es*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-T)<=es*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-A)<=es*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-P)<=es*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-M)<=es*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(f-E)<=es*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(m-I)<=es*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-z)<=es*Math.max(1,Math.abs(g),Math.abs(z))&&Math.abs(y-L)<=es*Math.max(1,Math.abs(y),Math.abs(L))},t.aa=function(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,i,r,n)=>{const o=r||n;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e},t.ab=function(t,e){const i=[];for(const r in t)r in e||i.push(r);return i},t.ac=m,t.ad=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+c*r,t[1]=a*n+u*r,t[2]=s*n+h*r,t[3]=l*n+d*r,t[4]=c*n-o*r,t[5]=u*n-a*r,t[6]=h*n-s*r,t[7]=d*n-l*r,t},t.ae=function(t){var e=new is(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.af=ss,t.ag=function(t,e){let i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:n,minZoom:o,maxZoom:a}=t,s=n?m(Ie.interpolationFactor(n,e,o,a),0,1):0;"camera"===t.kind?r=Ee.number(t.minSize,t.maxSize,s):i=s}return{uSizeT:i,uSize:r}},t.ai=function(t,e,i){let{uSize:r,uSizeT:n}=e,{lowerSize:o,upperSize:a}=i;return"source"===t.kind?o/Jc:"composite"===t.kind?Ee.number(o/Jc,a/Jc,n):r},t.aj=ou,t.ak=function(t,e,i,r){const n=e.y-t.y,a=e.x-t.x,s=r.y-i.y,l=r.x-i.x,c=s*a-l*n;if(0===c)return null;const u=(l*(t.y-i.y)-s*(t.x-i.x))/c;return new o(t.x+u*a,t.y+u*n)},t.al=Hu,t.am=Fa,t.an=rs,t.ao=function(t){let e=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of t)e=Math.min(e,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return[e,i,r,n]},t.ap=tc,t.ar=eu,t.as=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=i*s-r*a,x=i*l-n*a,_=i*c-o*a,b=r*l-n*s,w=r*c-o*s,S=n*c-o*l,k=u*m-h*f,C=u*g-d*f,T=u*y-p*f,A=h*g-d*m,P=h*y-p*m,M=d*y-p*g,E=v*M-x*P+_*A+b*T-w*C+S*k;return E?(t[0]=(s*M-l*P+c*A)*(E=1/E),t[1]=(n*P-r*M-o*A)*E,t[2]=(m*S-g*w+y*b)*E,t[3]=(d*w-h*S-p*b)*E,t[4]=(l*T-a*M-c*C)*E,t[5]=(i*M-n*T+o*C)*E,t[6]=(g*_-f*S-y*x)*E,t[7]=(u*S-d*_+p*x)*E,t[8]=(a*P-s*T+c*k)*E,t[9]=(r*T-i*P-o*k)*E,t[10]=(f*w-m*_+y*v)*E,t[11]=(h*_-u*w-p*v)*E,t[12]=(s*C-a*A-l*k)*E,t[13]=(i*A-r*C+n*k)*E,t[14]=(m*x-f*b-g*v)*E,t[15]=(u*b-h*x+d*v)*E,t):null},t.at=gh,t.au=qc,t.av=wh,t.aw=function(){const t={},e=q.$version;for(const i in q.$root){const r=q.$root[i];if(r.required){let n=null;n="version"===i?e:"array"===r.type?[]:{},null!=n&&(t[i]=n)}}return t},t.ax=Cn,t.ay=F,t.az=function(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=X(t[i],e[t[i].ref]));return t},t.b=A,t.b0=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},t.b1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.b2=g,t.b3=Du,t.b4=Mu,t.b5=function(t,e,i,r,n){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t},t.b6=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+c*r,t[5]=a*n+u*r,t[6]=s*n+h*r,t[7]=l*n+d*r,t[8]=c*n-o*r,t[9]=u*n-a*r,t[10]=h*n-s*r,t[11]=d*n-l*r,t},t.b7=p,t.b8=f,t.b9=function(t){return t*Math.PI/180},t.bA=_r,t.bB=Rn,t.ba=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.bb=class extends oo{},t.bc=Su,t.bd=Dh,t.bf=B,t.bg=function(t,e){D.REGISTERED_PROTOCOLS[t]=e},t.bh=function(t){delete D.REGISTERED_PROTOCOLS[t]},t.bi=function(t,e){const i={};for(let n=0;n<t.length;n++){const r=e&&e[t[n].id]||Br(t[n]);e&&(e[t[n].id]=r);let o=i[r];o||(o=i[r]=[]),o.push(t[n])}const r=[];for(const n in i)r.push(i[n]);return r},t.bj=bn,t.bk=Fu,t.bl=Nu,t.bm=zc,t.bn=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=Ia/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const i=e.bucket.layers[0],r=i.layout,n=i._unevaluatedLayout._values,o={layoutIconSize:n["icon-size"].possiblyEvaluate(new On(e.bucket.zoom+1),e.canonical),layoutTextSize:n["text-size"].possiblyEvaluate(new On(e.bucket.zoom+1),e.canonical),textMaxSize:n["text-size"].possiblyEvaluate(new On(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.bucket.textSizeData;o.compositeTextSizes=[n["text-size"].possiblyEvaluate(new On(t),e.canonical),n["text-size"].possiblyEvaluate(new On(i),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.bucket.iconSizeData;o.compositeIconSizes=[n["icon-size"].possiblyEvaluate(new On(t),e.canonical),n["icon-size"].possiblyEvaluate(new On(i),e.canonical)]}const a=r.get("text-line-height")*tc,s="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),l=r.get("text-keep-upright"),c=r.get("text-size");for(const u of e.bucket.features){const n=r.get("text-font").evaluate(u,{},e.canonical).join(","),h=c.evaluate(u,{},e.canonical),d=o.layoutTextSize.evaluate(u,{},e.canonical),p=o.layoutIconSize.evaluate(u,{},e.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,y=[0,0];if(m){const o=m.toString(),c=r.get("text-letter-spacing").evaluate(u,{},e.canonical)*tc,p=Pn(o)?c:0,g=r.get("text-anchor").evaluate(u,{},e.canonical),v=mh(i,u,e.canonical);if(!v){const t=r.get("text-radial-offset").evaluate(u,{},e.canonical);y=t?fh(g,[t*tc,ph]):r.get("text-offset").evaluate(u,{},e.canonical).map((t=>t*tc))}let x=s?"center":r.get("text-justify").evaluate(u,{},e.canonical);const _=r.get("symbol-placement"),b="point"===_?r.get("text-max-width").evaluate(u,{},e.canonical)*tc:0,w=()=>{e.bucket.allowVerticalPlacement&&An(o)&&(f.vertical=Bc(m,e.glyphMap,e.glyphPositions,e.imagePositions,n,b,a,g,"left",p,y,t.ah.vertical,!0,_,d,h))};if(!s&&v){const i=new Set;if("auto"===x)for(let t=0;t<v.values.length;t+=2)i.add(gh(v.values[t]));else i.add(x);let r=!1;for(const o of i)if(!f.horizontal[o])if(r)f.horizontal[o]=f.horizontal[0];else{const i=Bc(m,e.glyphMap,e.glyphPositions,e.imagePositions,n,b,a,"center",o,p,y,t.ah.horizontal,!1,_,d,h);i&&(f.horizontal[o]=i,r=1===i.positionedLines.length)}w()}else{"auto"===x&&(x=gh(g));const i=Bc(m,e.glyphMap,e.glyphPositions,e.imagePositions,n,b,a,g,x,p,y,t.ah.horizontal,!1,_,d,h);i&&(f.horizontal[x]=i),w(),An(o)&&s&&l&&(f.vertical=Bc(m,e.glyphMap,e.glyphPositions,e.imagePositions,n,b,a,g,x,p,y,t.ah.vertical,!1,_,d,h))}}let v=!1;if(u.icon&&u.icon.name){const t=e.imageMap[u.icon.name];t&&(g=Xc(e.imagePositions[u.icon.name],r.get("icon-offset").evaluate(u,{},e.canonical),r.get("icon-anchor").evaluate(u,{},e.canonical)),v=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=v:e.bucket.sdfIcons!==v&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}const x=xh(f.horizontal)||f.vertical;e.bucket.iconsInText=!!x&&x.iconsInText,(x||g)&&yh(e.bucket,u,f,g,e.imageMap,o,d,p,y,v,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.bo=jl,t.bp=el,t.bq=kl,t.br=cl,t.bs=Sc,t.bt=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.bu=function(t,i,r,n,o){return e(this,void 0,void 0,(function*(){if(d())try{return yield M(t,i,r,n,o)}catch(t){}return function(t,e,i,r,n){const o=t.width,a=t.height;E&&I||(E=new OffscreenCanvas(o,a),I=E.getContext("2d",{willReadFrequently:!0})),E.width=o,E.height=a,I.drawImage(t,0,0,o,a);const s=I.getImageData(e,i,r,n);return I.clearRect(0,0,o,a),s.data}(t,i,r,n,o)}))},t.bv=Bu,t.bw=i,t.bx=r,t.by=ec,t.bz=function(t){return t.message===z},t.c=L,t.d=t=>e(void 0,void 0,void 0,(function*(){if(0===t.byteLength)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(t)],{type:"image/png"});try{return createImageBitmap(e)}catch(t){throw new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}})),t.e=y,t.f=t=>new Promise(((e,i)=>{const r=new Image;r.onload=()=>{e(r),URL.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame((()=>{r.src=P}))},r.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const n=new Blob([new Uint8Array(t)],{type:"image/png"});r.src=t.byteLength?URL.createObjectURL(n):P})),t.g=R,t.h=(t,e)=>j(y(t,{type:"json"}),e),t.i=C,t.j=H,t.k=W,t.l=(t,e)=>j(y(t,{type:"arrayBuffer"}),e),t.m=j,t.n=function(t){return new Sc(t).readFields(Cc,[])},t.o=gs,t.p=Mc,t.q=Kn,t.r=mn,t.s=N,t.t=vn,t.u=Tn,t.v=q,t.w=S,t.x=fn,t.y=function(t){let[e,i,r]=t;return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(r),y:e*Math.sin(i)*Math.sin(r),z:e*Math.cos(r)}},t.z=Ee})),i("worker",["./shared"],(function(t){class e{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.aA(n);e._featureFilter=t.a6(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=t.bi(Object.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),i=e[0];if("none"===i.visibility)continue;const r=i.source||"";let n=this.familiesBySource[r];n||(n=this.familiesBySource[r]={});const o=i.sourceLayer||"_geojsonTileLayer";let a=n[o];a||(a=n[o]=[]),a.push(e)}}}class i{constructor(e){const i={},r=[];for(const t in e){const n=e[t],o=i[t]={};for(const t in n){const e=n[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};r.push(i),o[t]={rect:i,metrics:e.metrics}}}const{w:n,h:o}=t.p(r),a=new t.o({width:n||1,height:o||1});for(const s in e){const r=e[s];for(const e in r){const n=r[+e];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const o=i[s][e].rect;t.o.copy(n.bitmap,a,{x:0,y:0},{x:o.x+1,y:o.y+1},n.bitmap)}}this.image=a,this.positions=i}}t.bj("GlyphAtlas",i);class r{constructor(e){this.tileID=new t.Q(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.inFlightDependencies=[]}parse(e,r,o,a){return t._(this,void 0,void 0,(function*(){this.status="parsing",this.data=e,this.collisionBoxArray=new t.a4;const s=new t.bk(Object.keys(e.layers).sort()),l=new t.bl(this.tileID,this.promoteId);l.bucketLayerIDs=[];const c={},u={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},h=r.familiesBySource[this.source];for(const i in h){const r=e.layers[i];if(!r)continue;1===r.version&&t.w('Vector tile source "'.concat(this.source,'" layer "').concat(i,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const a=s.encode(i),d=[];for(let t=0;t<r.length;t++){const e=r.feature(t),n=l.getId(e,i);d.push({feature:e,id:n,index:t,sourceLayerIndex:a})}for(const e of h[i]){const i=e[0];i.source!==this.source&&t.w("layer.source = ".concat(i.source," does not equal this.source = ").concat(this.source)),i.minzoom&&this.zoom<Math.floor(i.minzoom)||i.maxzoom&&this.zoom>=i.maxzoom||"none"!==i.visibility&&(n(e,this.zoom,o),(c[i.id]=i.createBucket({index:l.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(d,u,this.tileID.canonical),l.bucketLayerIDs.push(e.map((t=>t.id))))}}const d=t.aF(u.glyphDependencies,(t=>Object.keys(t).map(Number)));this.inFlightDependencies.forEach((t=>null==t?void 0:t.abort())),this.inFlightDependencies=[];let p=Promise.resolve({});if(Object.keys(d).length){const t=new AbortController;this.inFlightDependencies.push(t),p=a.sendAsync({type:"GG",data:{stacks:d,source:this.source,tileID:this.tileID,type:"glyphs"}},t)}const f=Object.keys(u.iconDependencies);let m=Promise.resolve({});if(f.length){const t=new AbortController;this.inFlightDependencies.push(t),m=a.sendAsync({type:"GI",data:{icons:f,source:this.source,tileID:this.tileID,type:"icons"}},t)}const g=Object.keys(u.patternDependencies);let y=Promise.resolve({});if(g.length){const t=new AbortController;this.inFlightDependencies.push(t),y=a.sendAsync({type:"GI",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},t)}const[v,x,_]=yield Promise.all([p,m,y]),b=new i(v),w=new t.bm(x,_);for(const e in c){const i=c[e];i instanceof t.a5?(n(i.layers,this.zoom,o),t.bn({bucket:i,glyphMap:v,glyphPositions:b.positions,imageMap:x,imagePositions:w.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):i.hasPattern&&(i instanceof t.bo||i instanceof t.bp||i instanceof t.bq)&&(n(i.layers,this.zoom,o),i.addFeatures(u,this.tileID.canonical,w.patternPositions))}return this.status="done",{buckets:Object.values(c).filter((t=>!t.isEmpty())),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:b.image,imageAtlas:w,glyphMap:this.returnDependencies?v:null,iconMap:this.returnDependencies?x:null,glyphPositions:this.returnDependencies?b.positions:null}}))}}function n(e,i,r){const n=new t.a8(i);for(const t of e)t.recalculate(n,r)}class o{constructor(t,e,i){this.actor=t,this.layerIndex=e,this.availableImages=i,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(e,i){return t._(this,void 0,void 0,(function*(){const r=yield t.l(e.request,i);try{return{vectorTile:new t.br.VectorTile(new t.bs(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires}}catch(t){const n=new Uint8Array(r.data);let o="Unable to parse the tile at ".concat(e.request.url,", ");throw o+=31===n[0]&&139===n[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: ".concat(t.messge),new Error(o)}}))}loadTile(e){return t._(this,void 0,void 0,(function*(){const i=e.uid,n=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bt(e.request),o=new r(e);this.loading[i]=o;const a=new AbortController;o.abort=a;try{const r=yield this.loadVectorTile(e,a);if(delete this.loading[i],!r)return null;const s=r.rawData,l={};r.expires&&(l.expires=r.expires),r.cacheControl&&(l.cacheControl=r.cacheControl);const c={};if(n){const t=n.finish();t&&(c.resourceTiming=JSON.parse(JSON.stringify(t)))}o.vectorTile=r.vectorTile;const u=o.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[i]=o,this.fetching[i]={rawTileData:s,cacheControl:l,resourceTiming:c};try{const e=yield u;return t.e({rawTileData:s.slice(0)},e,l,c)}finally{delete this.fetching[i]}}catch(t){throw delete this.loading[i],o.status="done",this.loaded[i]=o,t}}))}reloadTile(e){return t._(this,void 0,void 0,(function*(){const i=e.uid;if(!this.loaded||!this.loaded[i])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const r=this.loaded[i];if(r.showCollisionBoxes=e.showCollisionBoxes,"parsing"===r.status){const e=yield r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor);let n;if(this.fetching[i]){const{rawTileData:r,cacheControl:o,resourceTiming:a}=this.fetching[i];delete this.fetching[i],n=t.e({rawTileData:r.slice(0)},e,o,a)}else n=e;return n}if("done"===r.status&&r.vectorTile)return r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){const t=this.loading,i=e.uid;t&&t[i]&&t[i].abort&&(t[i].abort.abort(),delete t[i])}))}removeTile(e){return t._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[e.uid]&&delete this.loaded[e.uid]}))}}class a{constructor(){this.loaded={}}loadTile(e){return t._(this,void 0,void 0,(function*(){const{uid:i,encoding:r,rawImageData:n,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=e,c=n.width+2,u=n.height+2,h=t.b(n)?new t.R({width:c,height:u},yield t.bu(n,-1,-1,c,u)):n,d=new t.bv(i,h,r,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[i]=d,d}))}removeTile(t){const e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]}}function s(t,e){if(0!==t.length){l(t[0],e);for(var i=1;i<t.length;i++)l(t[i],!e)}}function l(t,e){for(var i=0,r=0,n=0,o=t.length,a=o-1;n<o;a=n++){var s=(t[n][0]-t[a][0])*(t[a][1]+t[n][1]),l=i+s;r+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+r>=0!=!!e&&t.reverse()}var c=t.bw((function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)s(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)s(e.coordinates[r],i);return e}));const u=t.br.VectorTileFeature.prototype.toGeoJSON;var h={exports:{}},d=t.bx,p=t.br.VectorTileFeature,f=m;function m(t,e){this.options=e||{},this.features=t,this.length=t.length}function g(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}m.prototype.feature=function(t){return new g(this.features[t],this.options.extent)},g.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],r=[],n=0;n<i.length;n++)r.push(new d(i[n][0],i[n][1]));this.geometry.push(r)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[e,r,i,n]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var y=t.by,v=f;function x(t){var e=new y;return function(t,e){for(var i in t.layers)e.writeMessage(3,_,t.layers[i])}(t,e),e.finish()}function _(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,b,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var o=r.values;for(i=0;i<o.length;i++)e.writeMessage(4,T,o[i])}function b(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,w,t),e.writeVarintField(3,i.type),e.writeMessage(4,C,i)}function w(t,e){var i=t.feature,r=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=i.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(n.push(l),a[h]=d=n.length-1),e.writeVarint(d)}}}function S(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function C(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],c=1;1===r&&(c=l.length),e.writeVarint(S(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(S(2,u-1));var d=l[h].x-n,p=l[h].y-o;e.writeVarint(k(d)),e.writeVarint(k(p)),n+=d,o+=p}3===r&&e.writeVarint(S(7,1))}}function T(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}h.exports=x,h.exports.fromVectorTileJs=x,h.exports.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new v(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return x({layers:i})},h.exports.GeoJSONWrapper=v;var A=t.bw(h.exports);const P={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},M=Math.fround||(E=new Float32Array(1),t=>(E[0]=+t,E[0]));var E;const I=3,z=5,L=6;class D{constructor(t){this.options=Object.assign(Object.create(P),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:i,maxZoom:r}=this.options;e&&console.time("total time");const n="prepare ".concat(t.length," points");e&&console.time(n),this.points=t;const o=[];for(let s=0;s<t.length;s++){const e=t[s];if(!e.geometry)continue;const[i,r]=e.geometry.coordinates,n=M(B(i)),a=M(F(r));o.push(n,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);e&&console.timeEnd(n);for(let s=r;s>=i;s--){const t=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),e&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let n=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,n=180;else if(i>n){const t=this.getClusters([i,r,180,o],e),a=this.getClusters([-180,r,n,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(B(i),F(o),B(n),F(r)),l=a.data,c=[];for(const u of s){const t=this.stride*u;c.push(l[t+z]>1?R(l,t,this.clusterProps):this.points[l[t+I]])}return c}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);const o=n.data;if(e*this.stride>=o.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=n.within(o[e*this.stride],o[e*this.stride+1],a),l=[];for(const c of s){const e=c*this.stride;o[e+4]===t&&l.push(o[e+z]>1?R(o,e,this.clusterProps):this.points[o[e+I]])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,i){const r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r}getTile(t,e,i){const r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(i-s)/n,c=(i+1+s)/n,u={features:[]};return this._addTileFeatures(r.range((e-s)/n,l,(e+1+s)/n,c),r.data,e,i,n,u),0===e&&this._addTileFeatures(r.range(1-s/n,l,1,c),r.data,n,i,n,u),e===n-1&&this._addTileFeatures(r.range(0,l,s/n,c),r.data,-1,i,n,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,r,n){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?n+e.point_count<=r?n+=e.point_count:n=this._appendLeaves(t,e.cluster_id,i,r,n):n<r?n++:t.push(a),t.length===i)break}return n}_createTree(e){const i=new t.av(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)i.add(e[t],e[t+1]);return i.finish(),i.data=e,i}_addTileFeatures(t,e,i,r,n,o){for(const a of t){const t=a*this.stride,s=e[t+z]>1;let l,c,u;if(s)l=O(e,t,this.clusterProps),c=e[t],u=e[t+1];else{const i=this.points[e[t+I]];l=i.properties;const[r,n]=i.geometry.coordinates;c=B(r),u=F(n)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*n-i)),Math.round(this.options.extent*(u*n-r))]],tags:l};let d;d=s||this.options.generateId?e[t+I]:this.points[e[t+I]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:i,extent:r,reduce:n,minPoints:o}=this.options,a=i/(r*Math.pow(2,e)),s=t.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=e)continue;s[u+2]=e;const i=s[u],r=s[u+1],h=t.within(s[u],s[u+1],a),d=s[u+z];let p=d;for(const t of h){const i=t*c;s[i+2]>e&&(p+=s[i+z])}if(p>d&&p>=o){let t,o=i*d,a=r*d,f=-1;const m=(u/c<<5)+(e+1)+this.points.length;for(const i of h){const r=i*c;if(s[r+2]<=e)continue;s[r+2]=e;const l=s[r+z];o+=s[r]*l,a+=s[r+1]*l,s[r+4]=m,n&&(t||(t=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(t)),n(t,this._map(s,r)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),n&&l.push(f)}else{for(let t=0;t<c;t++)l.push(s[u+t]);if(p>1)for(const t of h){const i=t*c;if(!(s[i+2]<=e)){s[i+2]=e;for(let t=0;t<c;t++)l.push(s[i+t])}}}}return l}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,i){if(t[e+z]>1){const r=this.clusterProps[t[e+L]];return i?Object.assign({},r):r}const r=this.points[t[e+I]].properties,n=this.options.map(r);return i&&n===r?Object.assign({},n):n}}function R(t,e,i){return{type:"Feature",id:t[e+I],properties:O(t,e,i),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),j(t[e+1])]}};var r}function O(t,e,i){const r=t[e+z],n=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+L],a=-1===o?{}:Object.assign({},i[o]);return Object.assign(a,{cluster:!0,cluster_id:t[e+I],point_count:r,point_count_abbreviated:n})}function B(t){return t/360+.5}function F(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function j(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function N(t,e,i,r){for(var n,o=r,a=i-e>>1,s=i-e,l=t[e],c=t[e+1],u=t[i],h=t[i+1],d=e+3;d<i;d+=3){var p=V(t[d],t[d+1],l,c,u,h);if(p>o)n=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(n=d,s=f)}}o>r&&(n-e>3&&N(t,e,n,r),t[n+2]=o,i-n>3&&N(t,n,i,r))}function V(t,e,i,r,n,o){var a=n-i,s=o-r;if(0!==a||0!==s){var l=((t-i)*a+(e-r)*s)/(a*a+s*s);l>1?(i=n,r=o):l>0&&(i+=a*l,r+=s*l)}return(a=t-i)*a+(s=e-r)*s}function U(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)W(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)W(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)W(t,e[r][n])}(n),n}function W(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function H(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===o)G(n,s);else if("MultiPoint"===o)for(var c=0;c<n.length;c++)G(n[c],s);else if("LineString"===o)q(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<n.length;c++)q(n[c],s=[],a,!1),t.push(U(l,"LineString",s,e.properties));return}Z(n,s,a,!1)}else if("Polygon"===o)Z(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)H(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<n.length;c++){var u=[];Z(n[c],u,a,!0),s.push(u)}}t.push(U(l,o,s,e.properties))}}function G(t,e){e.push(X(t[0])),e.push(Y(t[1])),e.push(0)}function q(t,e,i,r){for(var n,o,a=0,s=0;s<t.length;s++){var l=X(t[s][0]),c=Y(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=r?(n*c-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(c-o,2))),n=l,o=c}var u=e.length-3;e[2]=1,N(e,0,u,i),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Z(t,e,i,r){for(var n=0;n<t.length;n++){var o=[];q(t[n],o,i,r),e.push(o)}}function X(t){return t/360+.5}function Y(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function K(t,e,i,r,n,o,a,s){if(r/=e,o>=(i/=e)&&a<r)return t;if(a<i||o>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,p=0===n?u.minX:u.minY,f=0===n?u.maxX:u.maxY;if(p>=i&&f<r)l.push(u);else if(!(f<i||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)$(h,m,i,r,n);else if("LineString"===d)J(h,m,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===d)tt(h,m,i,r,n,!1);else if("Polygon"===d)tt(h,m,i,r,n,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];tt(h[g],y,i,r,n,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(U(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(U(u.id,d,m,u.tags))}}}return l.length?l:null}function $(t,e,i,r,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];a>=i&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function J(t,e,i,r,n,o,a){for(var s,l,c=Q(t),u=0===n?it:rt,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3],y=t[d+4],v=0===n?p:f,x=0===n?g:y,_=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),v<i?x>i&&(l=u(c,p,f,g,y,i),a&&(c.start=h+s*l)):v>r?x<r&&(l=u(c,p,f,g,y,r),a&&(c.start=h+s*l)):et(c,p,f,m),x<i&&v>=i&&(l=u(c,p,f,g,y,i),_=!0),x>r&&v<=r&&(l=u(c,p,f,g,y,r),_=!0),!o&&_&&(a&&(c.end=h+s*l),e.push(c),c=Q(t)),a&&(h+=s)}var b=t.length-3;p=t[b],f=t[b+1],m=t[b+2],(v=0===n?p:f)>=i&&v<=r&&et(c,p,f,m),b=c.length-3,o&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&et(c,c[0],c[1],c[2]),c.length&&e.push(c)}function Q(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function tt(t,e,i,r,n,o){for(var a=0;a<t.length;a++)J(t[a],e,i,r,n,o,!1)}function et(t,e,i,r){t.push(e),t.push(i),t.push(r)}function it(t,e,i,r,n,o){var a=(o-e)/(r-e);return t.push(o),t.push(i+(n-i)*a),t.push(1),a}function rt(t,e,i,r,n,o){var a=(o-i)/(n-i);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function nt(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=ot(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(ot(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(ot(o.geometry[s][c],e));n.push(l)}i.push(U(o.id,a,n,o.tags))}return i}function ot(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function at(t,e){if(t.transformed)return t;var i,r,n,o=1<<t.z,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(st(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(n=0;n<c[r].length;n+=2)h.push(st(c[r][n],c[r][n+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function st(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}function lt(t,e,i,r,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,ct(a,t[s],o,n);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function ct(t,e,i,r){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)ut(a,n,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)ut(a,n[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var c=n[l];for(s=0;s<c.length;s++)ut(a,c[s],t,i,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=n.start/n.size,u.mapbox_clip_end=n.end/n.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function ut(t,e,i,r,n,o){var a=r*r;if(r>0&&e.size<(n?a:r))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,o=n-2;r<n;o=r,r+=2)i+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(i>0===e)for(r=0,n=t.length;r<n/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=a,t[n-1-r]=s}}(s,o),t.push(s)}}function ht(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)H(i,t.features[r],e,r);else H(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var i=e.buffer/e.extent,r=t,n=K(t,1,-1-i,i,0,-1,2,e),o=K(t,1,1-i,2+i,0,-1,2,e);return(n||o)&&(r=K(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=nt(n,1).concat(r)),o&&(r=r.concat(nt(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function dt(t,e,i){return 32*((1<<t)*i+e)+t}function pt(t,e){return e?t.properties[e]:t.id}function ft(t,e){if(null==t)return!0;if("Feature"===t.type)return null!=pt(t,e);if("FeatureCollection"===t.type){const i=new Set;for(const r of t.features){const t=pt(r,e);if(null==t)return!1;if(i.has(t))return!1;i.add(t)}return!0}return!1}function mt(t,e){const i=new Map;if(null==t);else if("Feature"===t.type)i.set(pt(t,e),t);else for(const r of t.features)i.set(pt(r,e),r);return i}ht.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ht.prototype.splitTile=function(t,e,i,r,n,o,a){for(var s=[t,e,i,r],l=this.options,c=l.debug;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=dt(e,i,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=lt(t,e,i,r,l),this.tileCoords.push({z:e,x:i,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,n){if(e===l.maxZoom||e===n)continue;var f=1<<n-e;if(i!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,y,v,x,_,b=.5*l.buffer/l.extent,w=.5-b,S=.5+b,k=1+b;m=g=y=v=null,x=K(t,u,i-b,i+S,0,d.minX,d.maxX,l),_=K(t,u,i+w,i+k,0,d.minX,d.maxX,l),t=null,x&&(m=K(x,u,r-b,r+S,1,d.minY,d.maxY,l),g=K(x,u,r+w,r+k,1,d.minY,d.maxY,l),x=null),_&&(y=K(_,u,r-b,r+S,1,d.minY,d.maxY,l),v=K(_,u,r+w,r+k,1,d.minY,d.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*i,2*r),s.push(g||[],e+1,2*i,2*r+1),s.push(y||[],e+1,2*i+1,2*r),s.push(v||[],e+1,2*i+1,2*r+1)}}},ht.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=dt(t,e=(e%a+a)%a,i);if(this.tiles[s])return at(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,u=e,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[dt(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?at(this.tiles[s],n):null):null};class gt extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(e,i){return t._(this,void 0,void 0,(function*(){const i=e.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return null;const n=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.W,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.W,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.P(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const r=[];for(const e of i)r.push(new t.P(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,i){return u.call(this,t,e,i)}}(this._features[e])}}(r.features);let o=A(n);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:n,rawData:o.buffer}}))}loadData(e){return t._(this,void 0,void 0,(function*(){var i;null===(i=this._pendingRequest)||void 0===i||i.abort();const r=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bt(e.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(e,this._pendingRequest),this._geoJSONIndex=e.cluster?new D(function(e){let{superclusterOptions:i,clusterProperties:r}=e;if(!r||!i)return i;const n={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const c of l){const[e,i]=r[c],a=t.bA(i),s=t.bA("string"==typeof e?[e,["accumulated"],["get",c]]:e);n[c]=a.value,o[c]=s.value}return i.map=t=>{s.properties=t;const e={};for(const i of l)e[i]=n[i].evaluate(a,s);return e},i.reduce=(t,e)=>{s.properties=e;for(const i of l)a.accumulated=t[i],t[i]=o[i].evaluate(a,s)},i}(e)).load((yield this._pendingData).features):new ht(yield this._pendingData,e.geojsonVtOptions),this.loaded={};const i={};if(r){const t=r.finish();t&&(i.resourceTiming={},i.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}return i}catch(e){if(delete this._pendingRequest,t.bz(e))return{abandoned:!0};throw e}}))}getData(){return t._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(t){const e=this.loaded;return e&&e[t.uid]?super.reloadTile(t):this.loadTile(t)}loadAndProcessGeoJSON(e,i){return t._(this,void 0,void 0,(function*(){let r=yield this.loadGeoJSON(e,i);if(delete this._pendingRequest,"object"!=typeof r)throw new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object."));if(c(r,!0),e.filter){const i=t.bA(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));const n=r.features.filter((t=>i.value.evaluate({zoom:0},t)));r={type:"FeatureCollection",features:n}}return r}))}loadGeoJSON(e,i){return t._(this,void 0,void 0,(function*(){const{promoteId:r}=e;if(e.request){const n=yield t.h(e.request,i);return this._dataUpdateable=ft(n.data,r)?mt(n.data,r):void 0,n.data}if("string"==typeof e.data)try{const t=JSON.parse(e.data);return this._dataUpdateable=ft(t,r)?mt(t,r):void 0,t}catch(t){throw new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object."))}if(!e.dataDiff)throw new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object."));if(!this._dataUpdateable)throw new Error("Cannot update existing geojson data in ".concat(e.source));return function(t,e,i){var r,n,o,a;if(e.removeAll&&t.clear(),e.remove)for(const s of e.remove)t.delete(s);if(e.add)for(const s of e.add){const e=pt(s,i);null!=e&&t.set(e,s)}if(e.update)for(const s of e.update){let e=t.get(s.id);if(null==e)continue;const i=!s.removeAllProperties&&((null===(r=s.removeProperties)||void 0===r?void 0:r.length)>0||(null===(n=s.addOrUpdateProperties)||void 0===n?void 0:n.length)>0);if((s.newGeometry||s.removeAllProperties||i)&&(e=Object.assign({},e),t.set(s.id,e),i&&(e.properties=Object.assign({},e.properties))),s.newGeometry&&(e.geometry=s.newGeometry),s.removeAllProperties)e.properties={};else if((null===(o=s.removeProperties)||void 0===o?void 0:o.length)>0)for(const t of s.removeProperties)Object.prototype.hasOwnProperty.call(e.properties,t)&&delete e.properties[t];if((null===(a=s.addOrUpdateProperties)||void 0===a?void 0:a.length)>0)for(const{key:t,value:r}of s.addOrUpdateProperties)e.properties[t]=r}}(this._dataUpdateable,e.dataDiff,r),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(e){return t._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(t){return this._geoJSONIndex.getClusterExpansionZoom(t.clusterId)}getClusterChildren(t){return this._geoJSONIndex.getChildren(t.clusterId)}getClusterLeaves(t){return this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset)}}class yt{constructor(e){this.self=e,this.actor=new t.C(e),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(t,e)=>{if(this.externalWorkerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));this.externalWorkerSourceTypes[t]=e},this.self.addProtocol=t.bg,this.self.removeProtocol=t.bh,this.self.registerRTLTextPlugin=e=>{if(t.bB.isParsed())throw new Error("RTL text plugin already registered.");t.bB.setMethods(e)},this.actor.registerMessageHandler("LDT",((t,e)=>this._getDEMWorkerSource(t,e.source).loadTile(e))),this.actor.registerMessageHandler("RDT",((e,i)=>t._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(e,i.source).removeTile(i)})))),this.actor.registerMessageHandler("GCEZ",((e,i)=>t._(this,void 0,void 0,(function*(){return this._getWorkerSource(e,i.type,i.source).getClusterExpansionZoom(i)})))),this.actor.registerMessageHandler("GCC",((e,i)=>t._(this,void 0,void 0,(function*(){return this._getWorkerSource(e,i.type,i.source).getClusterChildren(i)})))),this.actor.registerMessageHandler("GCL",((e,i)=>t._(this,void 0,void 0,(function*(){return this._getWorkerSource(e,i.type,i.source).getClusterLeaves(i)})))),this.actor.registerMessageHandler("LD",((t,e)=>this._getWorkerSource(t,e.type,e.source).loadData(e))),this.actor.registerMessageHandler("GD",((t,e)=>this._getWorkerSource(t,e.type,e.source).getData())),this.actor.registerMessageHandler("LT",((t,e)=>this._getWorkerSource(t,e.type,e.source).loadTile(e))),this.actor.registerMessageHandler("RT",((t,e)=>this._getWorkerSource(t,e.type,e.source).reloadTile(e))),this.actor.registerMessageHandler("AT",((t,e)=>this._getWorkerSource(t,e.type,e.source).abortTile(e))),this.actor.registerMessageHandler("RMT",((t,e)=>this._getWorkerSource(t,e.type,e.source).removeTile(e))),this.actor.registerMessageHandler("RS",((e,i)=>t._(this,void 0,void 0,(function*(){if(!this.workerSources[e]||!this.workerSources[e][i.type]||!this.workerSources[e][i.type][i.source])return;const t=this.workerSources[e][i.type][i.source];delete this.workerSources[e][i.type][i.source],void 0!==t.removeSource&&t.removeSource(i)})))),this.actor.registerMessageHandler("RM",(e=>t._(this,void 0,void 0,(function*(){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e]})))),this.actor.registerMessageHandler("SR",((e,i)=>t._(this,void 0,void 0,(function*(){this.referrer=i})))),this.actor.registerMessageHandler("SRPS",((t,e)=>this._syncRTLPluginState(t,e))),this.actor.registerMessageHandler("IS",((e,i)=>t._(this,void 0,void 0,(function*(){this.self.importScripts(i)})))),this.actor.registerMessageHandler("SI",((t,e)=>this._setImages(t,e))),this.actor.registerMessageHandler("UL",((e,i)=>t._(this,void 0,void 0,(function*(){this._getLayerIndex(e).update(i.layers,i.removedIds)})))),this.actor.registerMessageHandler("SL",((e,i)=>t._(this,void 0,void 0,(function*(){this._getLayerIndex(e).replace(i)}))))}_setImages(e,i){return t._(this,void 0,void 0,(function*(){this.availableImages[e]=i;for(const t in this.workerSources[e]){const r=this.workerSources[e][t];for(const t in r)r[t].availableImages=i}}))}_syncRTLPluginState(e,i){return t._(this,void 0,void 0,(function*(){if(t.bB.isParsed())return t.bB.getState();if("loading"!==i.pluginStatus)return t.bB.setState(i),i;const e=i.pluginURL;if(this.self.importScripts(e),t.bB.isParsed()){const i={pluginStatus:"loaded",pluginURL:e};return t.bB.setState(i),i}throw t.bB.setState({pluginStatus:"error",pluginURL:""}),new Error("RTL Text Plugin failed to import scripts from ".concat(e))}))}_getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}_getLayerIndex(t){let i=this.layerIndexes[t];return i||(i=this.layerIndexes[t]=new e),i}_getWorkerSource(t,e,i){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][i]){const r={sendAsync:(e,i)=>(e.targetMapId=t,this.actor.sendAsync(e,i))};switch(e){case"vector":this.workerSources[t][e][i]=new o(r,this._getLayerIndex(t),this._getAvailableImages(t));break;case"geojson":this.workerSources[t][e][i]=new gt(r,this._getLayerIndex(t),this._getAvailableImages(t));break;default:this.workerSources[t][e][i]=new this.externalWorkerSourceTypes[e](r,this._getLayerIndex(t),this._getAvailableImages(t))}}return this.workerSources[t][e][i]}_getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new a),this.demWorkerSources[t][e]}}return t.i(self)&&(self.worker=new yt(self)),yt})),i("index",["exports","./shared"],(function(t,e){var i="4.3.2";let r,n;const o={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:t=>new Promise(((i,r)=>{const n=requestAnimationFrame(i);t.signal.addEventListener("abort",(()=>{cancelAnimationFrame(n),r(e.c())}))})),getImageData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(t).getImageData(-e,-e,t.width+2*e,t.height+2*e)},getImageCanvasContext(t){const e=window.document.createElement("canvas"),i=e.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height),i},resolveURL:t=>(r||(r=document.createElement("a")),r.href=t,r.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==n&&(n=matchMedia("(prefers-reduced-motion: reduce)")),n.matches)}};class a{static testProp(t){if(!a.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in a.docStyle)return t[e];return t[0]}static create(t,e,i){const r=window.document.createElement(t);return void 0!==e&&(r.className=e),i&&i.appendChild(r),r}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(t,e){t.style[a.transformProp]=e}static addEventListener(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.addEventListener(e,i,"passive"in r?r:r.capture)}static removeEventListener(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.removeEventListener(e,i,"passive"in r?r:r.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",a.suppressClickInternal,!0)}),0)}static getScale(t){const e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}static getPoint(t,i,r){const n=i.boundingClientRect;return new e.P((r.clientX-n.left)/i.x-t.clientLeft,(r.clientY-n.top)/i.y-t.clientTop)}static mousePos(t,e){const i=a.getScale(t);return a.getPoint(t,i,e)}static touchPos(t,e){const i=[],r=a.getScale(t);for(let n=0;n<e.length;n++)i.push(a.getPoint(t,r,e[n]));return i}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);const s={supported:!1,testSupport:function(t){!u&&c&&(h?d(t):l=t)}};let l,c,u=!1,h=!1;function d(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,c),t.isContextLost())return;s.supported=!0}catch(t){}t.deleteTexture(e),u=!0}var p;"undefined"!=typeof document&&(c=document.createElement("img"),c.onload=()=>{l&&d(l),l=null,h=!0},c.onerror=()=>{u=!0,l=null},c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(t){let i,r,n,o;t.resetRequestQueue=()=>{i=[],r=0,n=0,o={}},t.addThrottleControl=t=>{const e=n++;return o[e]=t,e},t.removeThrottleControl=t=>{delete o[t],l()},t.getImage=function(t,r){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(((o,a)=>{s.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),e.e(t,{type:"image"}),i.push({abortController:r,requestParameters:t,supportImageRefresh:n,state:"queued",onError:t=>{a(t)},onSuccess:t=>{o(t)}}),l()}))};const a=t=>e._(this,void 0,void 0,(function*(){t.state="running";const{requestParameters:i,supportImageRefresh:n,onError:o,onSuccess:a,abortController:s}=t,u=!1===n&&!e.i(self)&&!e.g(i.url)&&(!i.headers||Object.keys(i.headers).reduce(((t,e)=>t&&"accept"===e),!0));r++;const h=u?c(i,s):e.m(i,s);try{const i=yield h;delete t.abortController,t.state="completed",i.data instanceof HTMLImageElement||e.b(i.data)?a(i):i.data&&a({data:yield(d=i.data,"function"==typeof createImageBitmap?e.d(d):e.f(d)),cacheControl:i.cacheControl,expires:i.expires})}catch(e){delete t.abortController,o(e)}finally{r--,l()}var d})),l=()=>{const t=(()=>{for(const t of Object.keys(o))if(o[t]())return!0;return!1})()?e.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:e.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let e=r;e<t&&i.length>0;e++){const t=i.shift();t.abortController.signal.aborted?e--:a(t)}},c=(t,i)=>new Promise(((r,n)=>{const o=new Image,a=t.url,s=t.credentials;s&&"include"===s?o.crossOrigin="use-credentials":(s&&"same-origin"===s||!e.s(a))&&(o.crossOrigin="anonymous"),i.signal.addEventListener("abort",(()=>{o.src="",n(e.c())})),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,r({data:o})},o.onerror=()=>{o.onerror=o.onload=null,i.signal.aborted||n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=a}))}(p||(p={})),p.resetRequestQueue();class f{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function m(t){var i=new e.A(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i}var g,y=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};g=new e.A(3),e.A!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0);var v=function(t){var e=t[0],i=t[1];return e*e+i*i};function x(t){const e=[];if("string"==typeof t)e.push({id:"default",url:t});else if(t&&t.length>0){const i=[];for(const{id:r,url:n}of t){const t="".concat(r).concat(n);-1===i.indexOf(t)&&(i.push(t),e.push({id:r,url:n}))}}return e}function _(t,e,i){const r=t.split("?");return r[0]+="".concat(e).concat(i),r.join("?")}!function(){var t=new e.A(2);e.A!=Float32Array&&(t[0]=0,t[1]=0)}();class b{constructor(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,i,r){const{width:n,height:o}=t,a=!(this.size&&this.size[0]===n&&this.size[1]===o||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),a)this.size=[n,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.b(t)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,n,o,0,this.format,l.UNSIGNED_BYTE,t.data);else{const{x:i,y:a}=r||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.b(t)?l.texSubImage2D(l.TEXTURE_2D,0,i,a,l.RGBA,l.UNSIGNED_BYTE,t):l.texSubImage2D(l.TEXTURE_2D,0,i,a,n,o,l.RGBA,l.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,i){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function w(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class S extends e.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,promiseResolve:e}of this.requestors)e(this._getImagesForIds(t));this.requestors=[]}}getImage(t){const i=this.images[t];if(i&&!i.data&&i.spriteData){const t=i.spriteData;i.data=new e.R({width:t.width,height:t.height},t.context.getImageData(t.x,t.y,t.width,t.height).data),i.spriteData=null}return i}addImage(t,e){if(this.images[t])throw new Error("Image id ".concat(t," already exist, use updateImage instead"));this._validate(t,e)&&(this.images[t]=e)}_validate(t,i){let r=!0;const n=i.data||i.spriteData;return this._validateStretch(i.stretchX,n&&n.width)||(this.fire(new e.j(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(i.stretchY,n&&n.height)||(this.fire(new e.j(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(i.content,i)||(this.fire(new e.j(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let i=0;for(const r of t){if(r[0]<i||r[1]<r[0]||e<r[1])return!1;i=r[1]}return!0}_validateContent(t,e){if(!t)return!0;if(4!==t.length)return!1;const i=e.spriteData,r=i&&i.width||e.data.width,n=i&&i.height||e.data.height;return!(t[0]<0||r<t[0]||t[1]<0||n<t[1]||t[2]<0||r<t[2]||t[3]<0||n<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.getImage(t);if(i&&(r.data.width!==e.data.width||r.data.height!==e.data.height))throw new Error("size mismatch between old image (".concat(r.data.width,"x").concat(r.data.height,") and new image (").concat(e.data.width,"x").concat(e.data.height,")."));e.version=r.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((e,i)=>{let r=!0;if(!this.isLoaded())for(const n of t)this.images[n]||(r=!1);this.isLoaded()||r?e(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:e})}))}_getImagesForIds(t){const i={};for(const r of t){let t=this.getImage(r);t||(this.fire(new e.k("styleimagemissing",{id:r})),t=this.getImage(r)),t?i[r]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,textFitWidth:t.textFitWidth,textFitHeight:t.textFitHeight,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.w('Image "'.concat(r,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}return i}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(t){const i=this.patterns[t],r=this.getImage(t);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{const i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},n=new e.I(i,r);this.patterns[t]={bin:i,position:n}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:i,h:r}=e.p(t),n=this.atlasImage;n.resize({width:i||1,height:r||1});for(const o in this.patterns){const{bin:t}=this.patterns[o],i=t.x+1,r=t.y+1,a=this.getImage(o).data,s=a.width,l=a.height;e.R.copy(a,n,{x:0,y:0},{x:i,y:r},{width:s,height:l}),e.R.copy(a,n,{x:0,y:l-1},{x:i,y:r-1},{width:s,height:1}),e.R.copy(a,n,{x:0,y:0},{x:i,y:r+l},{width:s,height:1}),e.R.copy(a,n,{x:s-1,y:0},{x:i-1,y:r},{width:1,height:l}),e.R.copy(a,n,{x:0,y:0},{x:i+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const i of t){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;const t=this.getImage(i);t||e.w('Image with ID: "'.concat(i,'" was not found')),w(t)&&this.updateImage(i,t)}}}const k=1e20;function C(t,e,i,r,n,o,a,s,l){for(let c=e;c<e+r;c++)T(t,i*o+c,o,n,a,s,l);for(let c=i;c<i+n;c++)T(t,c*o+e,1,r,a,s,l)}function T(t,e,i,r,n,o,a){o[0]=0,a[0]=-k,a[1]=k,n[0]=t[e];for(let s=1,l=0,c=0;s<r;s++){n[s]=t[e+s*i];const r=s*s;do{const t=o[l];c=(n[s]-n[t]+r-t*t)/(s-t)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=k}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;t[e+s*i]=n[r]+c*c}}class A{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return e._(this,void 0,void 0,(function*(){const e=[];for(const n in t)for(const i of t[n])e.push(this._getAndCacheGlyphsPromise(n,i));const i=yield Promise.all(e),r={};for(const{stack:t,id:n,glyph:o}of i)r[t]||(r[t]={}),r[t][n]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics};return r}))}_getAndCacheGlyphsPromise(t,i){return e._(this,void 0,void 0,(function*(){let e=this.entries[t];e||(e=this.entries[t]={glyphs:{},requests:{},ranges:{}});let r=e.glyphs[i];if(void 0!==r)return{stack:t,id:i,glyph:r};if(r=this._tinySDF(e,t,i),r)return e.glyphs[i]=r,{stack:t,id:i,glyph:r};const n=Math.floor(i/256);if(256*n>65535)throw new Error("glyphs > 65535 not supported");if(e.ranges[n])return{stack:t,id:i,glyph:r};if(!this.url)throw new Error("glyphsUrl is not set");if(!e.requests[n]){const i=A.loadGlyphRange(t,n,this.url,this.requestManager);e.requests[n]=i}const o=yield e.requests[n];for(const t in o)this._doesCharSupportLocalGlyph(+t)||(e.glyphs[+t]=o[+t]);return e.ranges[n]=!0,{stack:t,id:i,glyph:o[i]||null}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(e.u["CJK Unified Ideographs"](t)||e.u["Hangul Syllables"](t)||e.u.Hiragana(t)||e.u.Katakana(t))}_tinySDF(t,i,r){const n=this.localIdeographFontFamily;if(!n)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=t.tinySDF;if(!o){let e="400";/bold/i.test(i)?e="900":/medium/i.test(i)?e="500":/light/i.test(i)&&(e="200"),o=t.tinySDF=new A.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:n,fontWeight:e})}const a=o.draw(String.fromCharCode(r));return{id:r,bitmap:new e.o({width:a.width||60,height:a.height||60},a.data),metrics:{width:a.glyphWidth/2||24,height:a.glyphHeight/2||24,left:a.glyphLeft/2+.5||0,top:a.glyphTop/2-27.5||-8,advance:a.glyphAdvance/2||24,isDoubleResolution:!0}}}}A.loadGlyphRange=function(t,i,r,n){return e._(this,void 0,void 0,(function*(){const o=256*i,a=o+255,s=n.transformRequest(r.replace("{fontstack}",t).replace("{range}","".concat(o,"-").concat(a)),"Glyphs"),l=yield e.l(s,new AbortController);if(!l||!l.data)throw new Error("Could not load glyph range. range: ".concat(i,", ").concat(o,"-").concat(a));const c={};for(const t of e.n(l.data))c[t.id]=t;return c}))},A.TinySDF=class{constructor(){let{fontSize:t=24,buffer:e=3,radius:i=8,cutoff:r=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=i;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(t,"px ").concat(n),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(i),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-n))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(t,m,m+a);const v=f.getImageData(m,m,s,l);y.fill(k,0,h),g.fill(0,0,h);for(let x=0;x<l;x++)for(let t=0;t<s;t++){const e=v.data[4*(x*s+t)+3]/255;if(0===e)continue;const i=(x+m)*c+t+m;if(1===e)y[i]=0,g[i]=k;else{const t=.5-e;y[i]=t>0?t*t:0,g[i]=t<0?t*t:0}}C(y,0,0,c,u,c,this.f,this.v,this.z),C(g,m,m,s,l,c,this.f,this.v,this.z);for(let x=0;x<h;x++){const t=Math.sqrt(y[x])-Math.sqrt(g[x]);d[x]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};class P{constructor(){this.specification=e.v.light.position}possiblyEvaluate(t,i){return e.y(t.expression.evaluate(i))}interpolate(t,i,r){return{x:e.z.number(t.x,i.x,r),y:e.z.number(t.y,i.y,r),z:e.z.number(t.z,i.z,r)}}}let M;class E extends e.E{constructor(t){super(),M=M||new e.q({anchor:new e.D(e.v.light.anchor),position:new P,color:new e.D(e.v.light.color),intensity:new e.D(e.v.light.intensity)}),this._transitionable=new e.T(M),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.r,t,i))for(const e in t){const i=t[e];e.endsWith("-transition")?this._transitionable.setTransition(e.slice(0,-11),i):this._transitionable.setValue(e,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,i,r){return(!r||!1!==r.validate)&&e.t(this,t.call(e.x,{value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.v}))}}class I{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){const r=[];let n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){a=!a;const e=t[l];n=s*i,s+=e,o=s*i,r.push({left:n,right:o,isDash:a,zeroLength:0===e})}return r}addRoundDash(t,e,i){const r=e/2;for(let n=-i;n<=i;n++){const e=this.width*(this.nextRow+i+n);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=n/i*(r+1);if(a.isDash){const t=r-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+d*d);this.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t){for(let a=t.length-1;a>=0;--a){const e=t[a],i=t[a+1];e.zeroLength?t.splice(a,1):i&&i.isDash===e.isDash&&(i.left=e.left,t.splice(a,1))}const e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);const r=this.width*this.nextRow;let n=0,o=t[n];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++n]);const e=Math.abs(a-o.left),i=Math.abs(a-o.right),s=Math.min(e,i);this.data[r+a]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(t,i){const r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return e.w("LineAtlas out of space"),null;let o=0;for(let e=0;e<t.length;e++)o+=t[e];if(0!==o){const e=this.width/o,n=this.getDashRanges(t,this.width,e);i?this.addRoundDash(n,e,r):this.addRegularDash(n)}const a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=n,this.dirty=!0,a}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}const z="maplibre_preloaded_worker_pool";class L{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<L.workerCount;)this.workers.push(new Worker(e.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[z]}numActive(){return Object.keys(this.active).length}}const D=Math.floor(o.hardwareConcurrency/2);let R,O;function B(){return R||(R=new L),R}L.workerCount=e.B(globalThis)?Math.max(Math.min(D,3),1):1;class F{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=i;const r=this.workerPool.acquire(i);for(let n=0;n<r.length;n++){const t=new e.C(r[n],i);t.name="Worker ".concat(n),this.actors.push(t)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,e){const i=[];for(const r of this.actors)i.push(r.sendAsync({type:t,data:e}));return Promise.all(i)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach((t=>{t.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,e){for(const i of this.actors)i.registerMessageHandler(t,e)}}function j(){return O||(O=new F(B(),e.G),O.registerMessageHandler("GR",((t,i,r)=>e.m(i,r)))),O}function N(t,i){const r=e.F();return e.H(r,r,[1,1,0]),e.J(r,r,[.5*t.width,.5*t.height,1]),e.K(r,r,t.calculatePosMatrix(i.toUnwrapped()))}function V(t,e,i,r,n,o){const a=function(t,e,i){if(t)for(const r of t){const t=e[r];if(t&&t.source===i&&"fill-extrusion"===t.type)return!0}else for(const r in e){const t=e[r];if(t.source===i&&"fill-extrusion"===t.type)return!0}return!1}(n&&n.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(r,s,a);l.sort(U);const c=[];for(const h of l)c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,i,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,n,o,s,N(t.transform,h.tileID))});const u=function(t){const e={},i={};for(const r of t){const t=r.queryResults,n=r.wrappedTileID,o=i[n]=i[n]||{};for(const i in t){const r=t[i],n=o[i]=o[i]||{},a=e[i]=e[i]||[];for(const t of r)n[t.featureIndex]||(n[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const h in u)u[h].forEach((e=>{const i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return u}function U(t,e){const i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}function W(t,i,r){return e._(this,void 0,void 0,(function*(){let n=t;if(t.url?n=(yield e.h(i.transformRequest(t.url,"Source"),r)).data:yield o.frameAsync(r),!n)return null;const a=e.L(e.e(n,t),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in n&&n.vector_layers&&(a.vectorLayerIds=n.vector_layers.map((t=>t.id))),a}))}class H{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):Array.isArray(t)&&(4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof e.M?new e.M(t.lng,t.lat):e.M.convert(t),this}setSouthWest(t){return this._sw=t instanceof e.M?new e.M(t.lng,t.lat):e.M.convert(t),this}extend(t){const i=this._sw,r=this._ne;let n,o;if(t instanceof e.M)n=t,o=t;else{if(!(t instanceof H))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(H.convert(t)):this.extend(e.M.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(e.M.convert(t)):this;if(n=t._sw,o=t._ne,!n||!o)return this}return i||r?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),r.lng=Math.max(o.lng,r.lng),r.lat=Math.max(o.lat,r.lat)):(this._sw=new e.M(n.lng,n.lat),this._ne=new e.M(o.lng,o.lat)),this}getCenter(){return new e.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new e.M(this.getWest(),this.getNorth())}getSouthEast(){return new e.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:i,lat:r}=e.M.convert(t);let n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(t){return t instanceof H?t:t?new H(t):t}static fromLngLat(t){const i=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,r=i/Math.cos(Math.PI/180*t.lat);return new H(new e.M(t.lng-r,t.lat-i),new e.M(t.lng+r,t.lat+i))}}class G{constructor(t,e,i){this.bounds=H.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const i=Math.pow(2,t.z),r=Math.floor(e.N(this.bounds.getWest())*i),n=Math.floor(e.O(this.bounds.getNorth())*i),o=Math.ceil(e.N(this.bounds.getEast())*i),a=Math.ceil(e.O(this.bounds.getSouth())*i);return t.x>=r&&t.x<o&&t.y>=n&&t.y<a}}class q extends e.E{constructor(t,i,r,n){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.e(this,e.L(i,["url","scheme","tileSize","promoteId"])),this._options=e.e({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield W(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(e.e(this,t),t.bounds&&(this.tileBounds=new G(t.bounds,this.minzoom,this.maxzoom)),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new e.j(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return e.e({},this._options)}loadTile(t){return e._(this,void 0,void 0,(function*(){const e=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(e,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request.collectResourceTiming=this._collectResourceTiming;let r="RT";if(t.actor&&"expired"!==t.state){if("loading"===t.state)return new Promise(((e,i)=>{t.reloadPromise={resolve:e,reject:i}}))}else t.actor=this.dispatcher.getActor(),r="LT";t.abortController=new AbortController;try{const e=yield t.actor.sendAsync({type:r,data:i},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,e)}catch(e){if(delete t.abortController,t.aborted)return;if(e&&404!==e.status)throw e;this._afterTileLoadWorkerResponse(t,null)}}))}_afterTileLoadWorkerResponse(t,e){if(e&&e.resourceTiming&&(t.resourceTiming=e.resourceTiming),e&&this.map._refreshExpiredTiles&&t.setExpiryData(e),t.loadVectorData(e,this.map.painter),t.reloadPromise){const e=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(e.resolve).catch(e.reject)}}abortTile(t){return e._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Z extends e.E{constructor(t,i,r,n){super(),this.id=t,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.e({type:"raster"},i),e.e(this,e.L(i,["url","scheme","tileSize"]))}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield W(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(e.e(this,t),t.bounds&&(this.tileBounds=new G(t.bounds,this.minzoom,this.maxzoom)),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new e.j(t))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return e.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return e._(this,void 0,void 0,(function*(){const e=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const i=yield p.getImage(this.map._requestManager.transformRequest(e,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(i&&i.data){this.map._refreshExpiredTiles&&i.cacheControl&&i.expires&&t.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});const e=this.map.painter.context,r=e.gl,n=i.data;t.texture=this.map.painter.getTileTexture(n.width),t.texture?t.texture.update(n,{useMipmap:!0}):(t.texture=new b(e,n,r.RGBA,{useMipmap:!0}),t.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),e.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax)),t.state="loaded"}}catch(e){if(delete t.abortController,t.aborted)t.state="unloaded";else if(e)throw t.state="errored",e}}))}abortTile(t){return e._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class X extends Z{constructor(t,i,r,n){super(t,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=e.e({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox",this.redFactor=i.redFactor,this.greenFactor=i.greenFactor,this.blueFactor=i.blueFactor,this.baseShift=i.baseShift}loadTile(t){return e._(this,void 0,void 0,(function*(){const i=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r=this.map._requestManager.transformRequest(i,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const i=yield p.getImage(r,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(i&&i.data){const r=i.data;this.map._refreshExpiredTiles&&i.cacheControl&&i.expires&&t.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});const n=e.b(r)&&e.S()?r:yield this.readImageNow(r),o={type:this.type,uid:t.uid,source:this.id,rawImageData:n,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||"expired"===t.state){t.actor=this.dispatcher.getActor();const e=yield t.actor.sendAsync({type:"LDT",data:o});t.dem=e,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(e){if(delete t.abortController,t.aborted)t.state="unloaded";else if(e)throw t.state="errored",e}}))}readImageNow(t){return e._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&e.U()){const i=t.width+2,r=t.height+2;try{return new e.R({width:i,height:r},yield e.V(t,-1,-1,i,r))}catch(t){}}return o.getImageData(t,1)}))}_getNeighboringTiles(t){const i=t.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,o=0===i.x?t.wrap-1:t.wrap,a=(i.x+1+r)%r,s=i.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.Q(t.overscaledZ,o,i.z,n,i.y).key]={backfilled:!1},l[new e.Q(t.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new e.Q(t.overscaledZ,o,i.z,n,i.y-1).key]={backfilled:!1},l[new e.Q(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.Q(t.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new e.Q(t.overscaledZ,o,i.z,n,i.y+1).key]={backfilled:!1},l[new e.Q(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.Q(t.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}class Y extends e.E{constructor(t,i,r,n){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=e.e({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=e.W/this.tileSize;this.workerOptions=e.e({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:e.W,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.W,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return e._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return e._(this,void 0,void 0,(function*(){const t=e.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(void 0!==t.clusterRadius&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),void 0!==t.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,e,i){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:e,offset:i}})}_updateWorkerData(t){return e._(this,void 0,void 0,(function*(){const i=e.e({type:this.type},this.workerOptions);t?i.dataDiff=t:"string"==typeof this._data?(i.request=this.map._requestManager.transformRequest(o.resolveURL(this._data),"Source"),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new e.k("dataloading",{dataType:"source"}));try{const t=yield this.actor.sendAsync({type:"LD",data:i});if(this._pendingLoads--,this._removed||t.abandoned)return void this.fire(new e.k("dataabort",{dataType:"source"}));let r=null;t.resourceTiming&&t.resourceTiming[this.id]&&(r=t.resourceTiming[this.id].slice(0));const n={dataType:"source"};this._collectResourceTiming&&r&&r.length>0&&e.e(n,{resourceTiming:r}),this.fire(new e.k("data",Object.assign(Object.assign({},n),{sourceDataType:"metadata"}))),this.fire(new e.k("data",Object.assign(Object.assign({},n),{sourceDataType:"content"})))}catch(t){if(this._pendingLoads--,this._removed)return void this.fire(new e.k("dataabort",{dataType:"source"}));this.fire(new e.j(t))}}))}loaded(){return 0===this._pendingLoads}loadTile(t){return e._(this,void 0,void 0,(function*(){const e=t.actor?"RT":"LT";t.actor=this.actor;const i={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;const r=yield this.actor.sendAsync({type:e,data:i},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(r,this.map.painter,"RT"===e)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return e.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var K=e.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $ extends e.E{constructor(t,e,i,r){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(t){return e._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const e=yield p.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,e&&e.data&&(this.image=e.data,t&&(this.coordinates=t),this._finishLoading())}catch(t){this._request=null,this._loaded=!0,this.fire(new e.j(t))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const i=t.map(e.Y.fromLngLat);this.tileID=function(t){let i=1/0,r=1/0,n=-1/0,o=-1/0;for(const e of t)i=Math.min(i,e.x),r=Math.min(r,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y);const a=Math.max(n-i,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.a0(s,Math.floor((i+n)/2*l),Math.floor((r+o)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const r=i.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new e.Z,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,e.W,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,e.W),this._boundsArray.emplaceBack(r[2].x,r[2].y,e.W,e.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=e.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let r=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,r=!0)}r&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return e._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class J extends ${constructor(t,e,i,r){super(t,e,i,r),this.roundZoom=!0,this.type="video",this.options=e}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const e of t.urls)this.urls.push(this.map._requestManager.transformRequest(e,"Source").url);try{const t=yield e.a2(this.urls);if(this._loaded=!0,!t)return;this.video=t,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(t){this.fire(new e.j(t))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.j(new e.a1("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(i.start(0)," and ").concat(i.end(0),"-second mark.")))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=e.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new b(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let r=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,r=!0)}r&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Q extends ${constructor(t,i,r,n){super(t,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new e.j(new e.a1("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.j(new e.a1("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.j(new e.a1("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new e.j(new e.a1("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.j(new e.a1("sources.".concat(t),null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,r=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=e.$.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b(i,this.canvas,r.RGBA,{premultiply:!0});let n=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,n=!0)}n&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const tt={},et=t=>{switch(t){case"geojson":return Y;case"image":return $;case"raster":return Z;case"raster-dem":return X;case"vector":return q;case"video":return J;case"canvas":return Q}return tt[t]},it="RTLPluginLoaded";class rt extends e.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=j()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((t=>{throw this.status="error",t}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return e._(this,arguments,void 0,(function(t){var e=this;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(e.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(e.url=o.resolveURL(t),!e.url)throw new Error("requested url ".concat(t," is invalid"));if("unavailable"===e.status){if(!i)return e._requestImport();e.status="deferred",e._syncState(e.status)}else if("requested"===e.status)return e._requestImport()}()}))}_requestImport(){return e._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new e.k(it))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let nt=null;function ot(){return nt||(nt=new rt),nt}class at{constructor(t,i){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=e.a3(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,i,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)i[e.id]=r}}return i}(t.buckets,i.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const i=this.buckets[t];if(i instanceof e.a5){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const i=this.buckets[t];if(i instanceof e.a5&&i.hasRTLText){this.hasRTLText=!0,ot().lazyLoad();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(t).queryRadius(e))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.a4}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const i in this.buckets){const e=this.buckets[i];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new b(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new b(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,r,n,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,i):{}}querySourceFeatures(t,i){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),o=i&&i.sourceLayer?i.sourceLayer:"",a=n._geojsonTileLayer||n[o];if(!a)return;const s=e.a6(i&&i.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<a.length;d++){const i=a.feature(d);if(s.needGeometry){const t=e.a7(i,!0);if(!s.filter(new e.a8(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new e.a8(this.tileID.overscaledZ),i))continue;const n=r.getId(i,o),p=new e.a9(i,l,c,u,n);p.tile=h,t.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const i=this.expirationTime;if(t.cacheControl){const i=e.aa(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(i)if(this.expirationTime<i)e=!0;else{const r=this.expirationTime-i;r?this.expirationTime=t+Math.max(r,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=o.now()+t}setDependencies(t,e){const i={};for(const r of e)i[r]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}}class st{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const n={value:e,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout((()=>{this.remove(t,n)}),i)),this.data[r].push(n),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const r of this.data[i])t(r.value)||e.push(r);for(const i of e)this.remove(i.value.tileID,i)}}class lt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,i,r){const n=String(i);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},e.e(this.stateChanges[t][n],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null)}else for(const e in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(t,i){const r=String(i),n=e.e({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const e=this.deletedStates[t][i];if(null===e)return{};for(const t in e)delete n[t]}return n}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,i){const r={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const t={};for(const i in this.stateChanges[n])this.state[n][i]||(this.state[n][i]={}),e.e(this.state[n][i],this.stateChanges[n][i]),t[i]=this.state[n][i];r[n]=t}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const t={};if(null===this.deletedStates[n])for(const e in this.state[n])t[e]={},this.state[n][e]={};else for(const e in this.deletedStates[n]){if(null===this.deletedStates[n][e])this.state[n][e]={};else for(const t of Object.keys(this.deletedStates[n][e]))delete this.state[n][e][t];t[e]=this.state[n][e]}r[n]=r[n]||{},e.e(r[n],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const e in t)t[e].setFeatureState(r,i)}}class ct extends e.E{constructor(t,e,i){super(),this.id=t,this.dispatcher=i,this.on("data",(t=>this._dataHandler(t))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((t,e,i,r)=>{const n=new(et(e.type))(t,e,i,r);if(n.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(n.id));return n})(t,e,i,this),this._tiles={},this._cache=new st(0,(t=>this._unloadTile(t))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new lt,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,i,r){return e._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,i,r)}catch(i){t.state="errored",404!==i.status?this._source.fire(new e.j(i,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new e.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(ut).map((t=>t.key))}getRenderableIds(t){const i=[];for(const e in this._tiles)this._isIdRenderable(e,t)&&i.push(this._tiles[e]);return t?i.sort(((t,i)=>{const r=t.tileID,n=i.tileID,o=new e.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new e.P(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x})).map((t=>t.tileID.key)):i.map((t=>t.tileID)).sort(ut).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,i){return e._(this,void 0,void 0,(function*(){const e=this._tiles[t];e&&("loading"!==e.state&&(e.state=i),yield this._loadTile(e,t,i))}))}_tileLoaded(t,i,r){t.timeAdded=o.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new e.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){const e=this.getTileByID(n);i(t,e),i(e,t)}}function i(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,r){for(const n in this._tiles){let o=this._tiles[n];if(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),r=this._getLoadedTile(e);if(r)return r}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const i=Math.ceil(t.width/this._source.tileSize)+1,r=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(i*r*(null===this._maxTileCacheZoomLevels?e.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}_updateCoveredAndRetainedTiles(t,e,i,r,n,a){const s={},l={},c=Object.keys(t),u=o.now();for(const o of c){const i=t[o],r=this._tiles[o];if(!r||0!==r.fadeEndTime&&r.fadeEndTime<=u)continue;const n=this.findLoadedParent(i,e),a=this.findLoadedSibling(i),c=n||a||null;c&&(this._addTile(c.tileID),s[c.tileID.key]=c.tileID),l[o]=i}this._retainLoadedChildren(l,r,i,t);for(const o in s)t[o]||(this._coveredTiles[o]=!0,t[o]=s[o]);if(a){const e={},i={};for(const t of n)this._tiles[t.key].hasData()?e[t.key]=t:i[t.key]=t;for(const r in i){const n=i[r].children(this._source.maxzoom);this._tiles[n[0].key]&&this._tiles[n[1].key]&&this._tiles[n[2].key]&&this._tiles[n[3].key]&&(e[n[0].key]=t[n[0].key]=n[0],e[n[1].key]=t[n[1].key]=n[1],e[n[2].key]=t[n[2].key]=n[2],e[n[3].key]=t[n[3].key]=n[3],delete i[r])}for(const r in i){const n=i[r],o=this.findLoadedParent(n,this._source.minzoom),a=this.findLoadedSibling(n),s=o||a||null;if(s){e[s.tileID.key]=t[s.tileID.key]=s.tileID;for(const t in e)e[t].isChildOf(s.tileID)&&delete e[t]}}for(const t in this._tiles)e[t]||(this._coveredTiles[t]=!0)}}update(t,i){if(!this._sourceLoaded||this._paused)return;let r;this.transform=t,this.terrain=i,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new e.Q(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(r=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i}),this._source.hasTile&&(r=r.filter((t=>this._source.hasTile(t))))):r=[];const n=t.coveringZoomLevel(this._source),o=Math.max(n-ct.maxOverzooming,this._source.minzoom),a=Math.max(n+ct.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const t={};for(const e of r)if(e.canonical.z>this._source.minzoom){const i=e.scaledTo(e.canonical.z-1);t[i.key]=i;const r=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[r.key]=r}r=r.concat(Object.values(t))}const s=0===r.length&&!this._updated&&this._didEmitContent;this._updated=!0,s&&this.fire(new e.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(r,n);ht(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,a,n,r,i);for(const e in l)this._tiles[e].clearFadeHold();const c=e.ab(this._tiles,l);for(const e of c){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(e)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){var i;const r={},n={},o=Math.max(e-ct.maxOverzooming,this._source.minzoom),a=Math.max(e+ct.maxUnderzooming,this._source.minzoom),s={};for(const l of t){const t=this._addTile(l);r[l.key]=l,t.hasData()||e<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,e,a,r);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){r[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(r[t[0].key]&&r[t[1].key]&&r[t[2].key]&&r[t[3].key])continue}let a=t.wasRequested();for(let e=l.overscaledZ-1;e>=o;--e){const o=l.scaledTo(e);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&a&&(t=this._addTile(o)),t){const e=t.hasData();if((e||!(null===(i=this.map)||void 0===i?void 0:i.cancelPendingTileRequestsWhileZooming)||a)&&(r[o.key]=o),a=t.wasRequested(),e)break}}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(t),i)break;r=t}for(const t of e)this._loadedParentTiles[t]=i}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const e=this._tiles[t].tileID,i=this._getLoadedTile(e);this._loadedSiblingTiles[e.key]=i}}_addTile(t){let i=this._tiles[t.key];if(i)return i;i=this._cache.getAndRemove(t),i&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));const r=i;return i||(i=new at(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(i,t.key,i.state)),i.uses++,this._tiles[t.key]=i,r||this._source.fire(new e.k("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}_dataHandler(t){const e=t.sourceDataType;"source"===t.dataType&&"metadata"===e&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===e&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,i,r){const n=[],o=this.transform;if(!o)return n;const a=r?o.getCameraQueryGeometry(t):t,s=t.map((t=>o.pointCoordinate(t,this.terrain))),l=a.map((t=>o.pointCoordinate(t,this.terrain))),c=this.getIds();let u=1/0,h=1/0,d=-1/0,p=-1/0;for(const e of l)u=Math.min(u,e.x),h=Math.min(h,e.y),d=Math.max(d,e.x),p=Math.max(p,e.y);for(let f=0;f<c.length;f++){const t=this._tiles[c[f]];if(t.holdingForFade())continue;const r=t.tileID,a=Math.pow(2,o.zoom-t.tileID.overscaledZ),m=i*t.queryPadding*e.W/t.tileSize/a,g=[r.getTilePoint(new e.Y(u,h)),r.getTilePoint(new e.Y(d,p))];if(g[0].x-m<e.W&&g[0].y-m<e.W&&g[1].x+m>=0&&g[1].y+m>=0){const e=s.map((t=>r.getTilePoint(t))),i=l.map((t=>r.getTilePoint(t)));n.push({tile:t,tileID:r,queryGeometry:e,cameraQueryGeometry:i,scale:a})}}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const i of e)i.posMatrix=this.transform.calculatePosMatrix(i.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(ht(this._source.type)){const t=o.now();for(const e in this._tiles)if(this._tiles[e].fadeEndTime>=t)return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const r=this._tiles[t];r&&r.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((i=>!i.hasDependency(t,e)))}}function ut(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function ht(t){return"raster"===t||"image"===t||"video"===t}ct.maxOverzooming=10,ct.maxUnderzooming=3;class dt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.ac(t,0,1);let i=1,r=this._distances[i];const n=t*this.paddedLength+this.padding;for(;r<n&&i<this._distances.length;)r=this._distances[++i];const o=i-1,a=this._distances[o],s=r-a,l=s>0?(n-a)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}function pt(t,e){let i=!0;return"always"===t||"never"!==t&&"never"!==e||(i=!1),i}class ft{constructor(t,e,i){const r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}insertCircle(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)}_insertBoxCell(t,e,i,r,n,o){this.boxCells[n].push(o)}_insertCircleCell(t,e,i,r,n,o){this.circleCells[n].push(o)}_query(t,e,i,r,n,o,a){if(i<0||t>this.width||r<0||e>this.height)return[];const s=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return[{key:null,x1:t,y1:e,x2:i,y2:r}];for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],r=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-r,y1:i-r,x2:e+r,y2:i+r})}}else this._forEachCell(t,e,i,r,this._queryCell,s,{hitTest:n,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(t,e,i,r){return this._query(t,e,i,r,!1,null)}hitTest(t,e,i,r,n,o){return this._query(t,e,i,r,!0,n,o).length>0}hitTestCircle(t,e,i,r,n){const o=t-i,a=t+i,s=e-i,l=e+i;if(a<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),c.length>0}_queryCell(t,e,i,r,n,o,a,s){const{seenUids:l,hitTest:c,overlapMode:u}=a,h=this.boxCells[n];if(null!==h){const n=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,d=this.boxKeys[a];if(t<=n[h+2]&&e<=n[h+3]&&i>=n[h+0]&&r>=n[h+1]&&(!s||s(d))&&(!c||!pt(u,d.overlapMode))&&(o.push({key:d,x1:n[h],y1:n[h+1],x2:n[h+2],y2:n[h+3]}),c))return!0}}const d=this.circleCells[n];if(null!==d){const n=this.circles;for(const a of d)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,d=this.circleKeys[a];if(this._circleAndRectCollide(n[h],n[h+1],n[h+2],t,e,i,r)&&(!s||s(d))&&(!c||!pt(u,d.overlapMode))){const t=n[h],e=n[h+1],i=n[h+2];if(o.push({key:d,x1:t-i,y1:e-i,x2:t+i,y2:e+i}),c)return!0}}}return!1}_queryCellCircle(t,e,i,r,n,o,a,s){const{circle:l,seenUids:c,overlapMode:u}=a,h=this.boxCells[n];if(null!==h){const t=this.bboxes;for(const e of h)if(!c.box[e]){c.box[e]=!0;const i=4*e,r=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!s||s(r))&&!pt(u,r.overlapMode))return o.push(!0),!0}}const d=this.circleCells[n];if(null!==d){const t=this.circles;for(const e of d)if(!c.circle[e]){c.circle[e]=!0;const i=3*e,r=this.circleKeys[e];if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!s||s(r))&&!pt(u,r.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,i,r,n,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(n.call(this,t,e,i,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,r,n,o){const a=r-t,s=n-e,l=i+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,i,r,n,o,a){const s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+i)return!1;const c=(a-n)/2,u=Math.abs(e-(n+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=i*i}}function mt(t,i,r,n,o){const a=e.F();return i?(e.J(a,a,[1/o,1/o,1]),r||e.ad(a,a,n.angle)):e.K(a,n.labelPlaneMatrix,t),a}function gt(t,i,r,n,o){if(i){const i=e.ae(t);return e.J(i,i,[o,o,1]),r||e.ad(i,i,-n.angle),i}return n.glCoordMatrix}function yt(t,i,r){let n;r?(n=[t.x,t.y,r(t.x,t.y),1],e.af(n,n,i)):(n=[t.x,t.y,0,1],function(t,e,i){const r=e[0],n=e[1];t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15]}(n,n,i));const o=n[3];return{point:new e.P(n[0]/o,n[1]/o),signedDistanceFromCamera:o,isOccluded:!1}}function vt(t,e){return.5+t/e*.5}function xt(t,e){return t.x>=-e[0]&&t.x<=e[0]&&t.y>=-e[1]&&t.y<=e[1]}function _t(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m){const g=n?t.textSizeData:t.iconSizeData,y=e.ag(g,r.transform.zoom),v=[256/r.width*2+1,256/r.height*2+1],x=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;x.clear();const _=t.lineVertexArray,b=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,w=r.transform.width/r.transform.height;let S=!1;for(let k=0;k<b.length;k++){const n=b.get(k);if(n.hidden||n.writingMode===e.ah.vertical&&!S){It(n.numGlyphs,x);continue}S=!1;const C=yt(new e.P(n.anchorX,n.anchorY),i,m);if(!xt(C.point,v)){It(n.numGlyphs,x);continue}const T=vt(r.transform.cameraToCenterDistance,C.signedDistanceFromCamera),A=e.ai(g,y,n),P=s?A/T:A*T,M={getElevation:m,labelPlaneMatrix:o,lineVertexArray:_,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:u,tileAnchorPoint:new e.P(n.anchorX,n.anchorY),unwrappedTileID:h,width:d,height:p,translation:f},E=St(M,n,P,!1,l,i,a,t.glyphOffsetArray,x,w,c);S=E.useVertical,(E.notEnoughRoom||S||E.needsFlipping&&St(M,n,P,!0,l,i,a,t.glyphOffsetArray,x,w,c).notEnoughRoom)&&It(n.numGlyphs,x)}n?t.text.dynamicLayoutVertexBuffer.updateData(x):t.icon.dynamicLayoutVertexBuffer.updateData(x)}function bt(t,e,i,r,n,o,a,s){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,h=e.getoffsetX(o.glyphStartIndex),d=e.getoffsetX(l-1),p=Mt(t*h,i,r,n,o.segment,c,u,s,a);if(!p)return null;const f=Mt(t*d,i,r,n,o.segment,c,u,s,a);return f?s.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function wt(t,i,r,n){return t===e.ah.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(t===e.ah.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function St(t,i,r,n,o,a,s,l,c,u,h){const d=r/24,p=i.lineOffsetX*d,f=i.lineOffsetY*d;let m;if(i.numGlyphs>1){const e=i.glyphStartIndex+i.numGlyphs,r=i.lineStartIndex,a=i.lineStartIndex+i.lineLength,c=bt(d,l,p,f,n,i,h,t);if(!c)return{notEnoughRoom:!0};const g=yt(c.first.point,s,t.getElevation).point,y=yt(c.last.point,s,t.getElevation).point;if(o&&!n){const t=wt(i.writingMode,g,y,u);if(t)return t}m=[c.first];for(let o=i.glyphStartIndex+1;o<e-1;o++)m.push(Mt(d*l.getoffsetX(o),p,f,n,i.segment,r,a,t,h));m.push(c.last)}else{if(o&&!n){const r=yt(t.tileAnchorPoint,a,t.getElevation).point,n=i.lineStartIndex+i.segment+1,o=new e.P(t.lineVertexArray.getx(n),t.lineVertexArray.gety(n)),s=yt(o,a,t.getElevation),l=s.signedDistanceFromCamera>0?s.point:function(t,e,i,r,n,o){return kt(t,e,i,1,n,o)}(t.tileAnchorPoint,o,r,0,a,t),c=wt(i.writingMode,r,l,u);if(c)return c}const r=Mt(d*l.getoffsetX(i.glyphStartIndex),p,f,n,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,t,h);if(!r||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[r]}for(const g of m)e.aj(c,g.point,g.angle);return{}}function kt(t,e,i,r,n,o){const a=t.add(t.sub(e)._unit()),s=void 0!==n?yt(a,n,o.getElevation).point:Tt(a.x,a.y,o).point,l=i.sub(s);return i.add(l._mult(r/l.mag()))}function Ct(t,i,r){const n=i.projectionCache;if(n.projections[t])return n.projections[t];const o=new e.P(i.lineVertexArray.getx(t),i.lineVertexArray.gety(t)),a=Tt(o.x,o.y,i);if(a.signedDistanceFromCamera>0)return n.projections[t]=a.point,n.anyProjectionOccluded=n.anyProjectionOccluded||a.isOccluded,a.point;const s=t-r.direction;return function(t,e,i,r,n){return kt(t,e,i,r,void 0,n)}(0===r.distanceFromAnchor?i.tileAnchorPoint:new e.P(i.lineVertexArray.getx(s),i.lineVertexArray.gety(s)),o,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,i)}function Tt(t,i,r){const n=t+r.translation[0],o=i+r.translation[1];let a;return!r.pitchWithMap&&r.projection.useSpecialProjectionForSymbols?(a=r.projection.projectTileCoordinates(n,o,r.unwrappedTileID,r.getElevation),a.point.x=(.5*a.point.x+.5)*r.width,a.point.y=(.5*-a.point.y+.5)*r.height):(a=yt(new e.P(n,o),r.labelPlaneMatrix,r.getElevation),a.isOccluded=!1),a}function At(t,e,i){return t._unit()._perp()._mult(e*i)}function Pt(t,i,r,n,o,a,s,l,c){if(l.projectionCache.offsets[t])return l.projectionCache.offsets[t];const u=r.add(i);if(t+c.direction<n||t+c.direction>=o)return l.projectionCache.offsets[t]=u,u;const h=Ct(t+c.direction,l,c),d=At(h.sub(r),s,c.direction),p=r.add(d),f=h.add(d);return l.projectionCache.offsets[t]=e.ak(a,u,p,f)||u,l.projectionCache.offsets[t]}function Mt(t,e,i,r,n,o,a,s,l){const c=r?t-e:t+e;let u=c>0?1:-1,h=0;r&&(u*=-1,h=Math.PI),u<0&&(h+=Math.PI);let d,p=u>0?o+n:o+n+1;s.projectionCache.cachedAnchorPoint?d=s.projectionCache.cachedAnchorPoint:(d=Tt(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,s.projectionCache.cachedAnchorPoint=d);let f,m,g=d,y=d,v=0,x=0;const _=Math.abs(c),b=[];let w;for(;v+x<=_;){if(p+=u,p<o||p>=a)return null;v+=x,y=g,m=f;const t={absOffsetX:_,direction:u,distanceFromAnchor:v,previousVertex:y};if(g=Ct(p,s,t),0===i)b.push(y),w=g.sub(y);else{let e;const r=g.sub(y);e=0===r.mag()?At(Ct(p+u,s,t).sub(g),i,u):At(r,i,u),m||(m=y.add(e)),f=Pt(p,e,g,o,a,m,i,s,t),b.push(m),w=f.sub(m)}x=w.mag()}const S=w._mult((_-v)/x)._add(m||y),k=h+Math.atan2(g.y-y.y,g.x-y.x);return b.push(S),{point:S,angle:l?k:0,path:b}}const Et=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function It(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(Et,3*t)}}const zt=100;class Lt{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ft(t.width+200,t.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ft(t.width+200,t.height+200,25);this.transform=t,this.mapProjection=e,this.grid=i,this.ignoredGrid=r,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+zt,this.screenBottomBoundary=t.height+zt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,i,r,n,o,a,s,l,c,u){const h=t.anchorPointX+s[0],d=t.anchorPointY+s[1],p=this.projectAndGetPerspectiveRatio(r,h,d,n,c),f=this._projectCollisionBox(t,i,r,n,o,a,s,p,c,u),[m,g,y,v]=f.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?f.allPointsOccluded:this.mapProjection.isOccluded(h,d,n))||p.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(m,g,y,v)||"always"!==e&&this.grid.hitTest(m,g,y,v,e,l)?{box:[m,g,y,v],placeable:!1,offscreen:!1}:{box:[m,g,y,v],placeable:!0,offscreen:this.isOffscreen(m,g,y,v)}}placeCollisionCircles(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g){const y=[],v=new e.P(i.anchorX,i.anchorY),x=this.getPerspectiveRatio(a,v.x,v.y,s,g),_=(h?o/x:o*x)/e.ap,b={getElevation:g,labelPlaneMatrix:l,lineVertexArray:r,pitchWithMap:h,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:v,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:m},w=bt(_,n,i.lineOffsetX*_,i.lineOffsetY*_,!1,i,!1,b);let S=!1,k=!1,C=!0;if(w){const i=.5*p*x+f,r=new e.P(-100,-100),n=new e.P(this.screenRightBoundary,this.screenBottomBoundary),o=new dt,a=w.first,s=w.last;let l=[];for(let t=a.path.length-1;t>=1;t--)l.push(a.path[t]);for(let t=1;t<s.path.length;t++)l.push(s.path[t]);const h=2.5*i;if(c){const t=this.projectPathToScreenSpace(l,b,c);l=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let m=[];if(l.length>0){const t=l[0].clone(),i=l[0].clone();for(let e=1;e<l.length;e++)t.x=Math.min(t.x,l[e].x),t.y=Math.min(t.y,l[e].y),i.x=Math.max(i.x,l[e].x),i.y=Math.max(i.y,l[e].y);m=t.x>=r.x&&i.x<=n.x&&t.y>=r.y&&i.y<=n.y?[l]:i.x<r.x||t.x>n.x||i.y<r.y||t.y>n.y?[]:e.al([l],r.x,r.y,n.x,n.y)}for(const e of m){o.reset(e,.25*i);let r=0;r=o.length<=.5*i?1:Math.ceil(o.paddedLength/h)+1;for(let e=0;e<r;e++){const n=e/Math.max(r-1,1),a=o.lerp(n),s=a.x+zt,l=a.y+zt;y.push(s,l,i,0);const c=s-i,h=l-i,p=s+i,f=l+i;if(C=C&&this.isOffscreen(c,h,p,f),k=k||this.isInsideGrid(c,h,p,f),"always"!==t&&this.grid.hitTestCircle(s,l,i,t,d)&&(S=!0,!u))return{circles:[],offscreen:!1,collisionDetected:S}}}}return{circles:!u&&S||!k||x<this.perspectiveRatioCutoff?[]:y,offscreen:C,collisionDetected:S}}projectPathToScreenSpace(t,e,i){return t.map((t=>yt(t,i,e.getElevation)))}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let r=1/0,n=1/0,o=-1/0,a=-1/0;for(const u of t){const t=new e.P(u.x+zt,u.y+zt);r=Math.min(r,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),i.push(t)}const s=this.grid.query(r,n,o,a).concat(this.ignoredGrid.query(r,n,o,a)),l={},c={};for(const u of s){const t=u.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const r=[new e.P(u.x1,u.y1),new e.P(u.x2,u.y1),new e.P(u.x2,u.y2),new e.P(u.x1,u.y2)];e.am(i,r)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(t,e,i,r,n,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,r,n,o){const a=i?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:e};for(let l=0;l<t.length;l+=4)a.insertCircle(s,t[l],t[l+1],t[l+2])}projectAndGetPerspectiveRatio(t,i,r,n,o){const a=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(i,r,n,o):yt(new e.P(i,r),t,o);return{point:new e.P((a.point.x+1)/2*this.transform.width+zt,(1-a.point.y)/2*this.transform.height+zt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a.signedDistanceFromCamera*.5,isOccluded:a.isOccluded,signedDistanceFromCamera:a.signedDistanceFromCamera}}getPerspectiveRatio(t,i,r,n,o){const a=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(i,r,n,o):yt(new e.P(i,r),t,o);return.5+this.transform.cameraToCenterDistance/a.signedDistanceFromCamera*.5}isOffscreen(t,e,i,r){return i<zt||t>=this.screenRightBoundary||r<zt||e>this.screenBottomBoundary}isInsideGrid(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const t=e.an([]);return e.H(t,t,[-100,-100,0]),t}_projectCollisionBox(t,i,r,n,o,a,s,l,c,u){const h=i*l.perspectiveRatio;let d=new e.P(1,0),p=new e.P(0,1);const f=new e.P(t.anchorPointX+s[0],t.anchorPointY+s[1]);if(a&&!o){const t=this.projectAndGetPerspectiveRatio(r,f.x+1,f.y,n,c).point.sub(l.point).unit(),i=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0),o=Math.sin(i),a=Math.cos(i);d=new e.P(a,o),p=new e.P(-o,a)}else if(!a&&o){const t=-this.transform.angle,i=Math.sin(t),r=Math.cos(t);d=new e.P(r,i),p=new e.P(-i,r)}let m=l.point,g=h;if(o){m=f;const t=this.transform.zoom-Math.floor(this.transform.zoom);g=Math.pow(2,-t),g*=this.mapProjection.getPitchedTextCorrection(this.transform,f,n),u||(g*=e.ac(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}u&&(m=m.add(d.mult(u.x*g)).add(p.mult(u.y*g)));const y=t.x1*g,v=t.x2*g,x=(y+v)/2,_=t.y1*g,b=t.y2*g,w=(_+b)/2,S=[{offsetX:y,offsetY:_},{offsetX:x,offsetY:_},{offsetX:v,offsetY:_},{offsetX:v,offsetY:w},{offsetX:v,offsetY:b},{offsetX:x,offsetY:b},{offsetX:y,offsetY:b},{offsetX:y,offsetY:w}];let k=[];for(const{offsetX:T,offsetY:A}of S)k.push(new e.P(m.x+d.x*T+p.x*A,m.y+d.y*T+p.y*A));let C=!1;if(o){const t=k.map((t=>this.projectAndGetPerspectiveRatio(r,t.x,t.y,n,c)));C=t.some((t=>!t.isOccluded)),k=t.map((t=>t.point))}else C=!0;return{box:e.ao(k),allPointsOccluded:!C}}}function Dt(t,i,r){return i*(e.W/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}class Rt{constructor(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class Ot{constructor(t,e,i,r,n){this.text=new Rt(t?t.text:null,e,i,n),this.icon=new Rt(t?t.icon:null,e,r,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bt{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class Ft{constructor(){this.invProjMatrix=e.F(),this.viewportMatrix=e.F(),this.circles=[]}}class jt{constructor(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}}class Nt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Vt(t,i,r,n,o){const{horizontalAlign:a,verticalAlign:s}=e.au(t);return new e.P(-(a-.5)*i+n[0]*o,-(s-.5)*r+n[1]*o)}class Ut{constructor(t,e,i,r,n,o){this.transform=t.clone(),this.terrain=i,this.collisionIndex=new Lt(this.transform,e),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new Nt(n),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const e=this.terrain;return e?(i,r)=>e.getElevation(t,i,r):null}getBucketParts(t,i,r,n){const o=r.getBucket(i),a=r.latestFeatureIndex;if(!o||!a||i.id!==o.layerIds[0])return;const s=r.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),h=r.tileSize/e.W,d=r.tileID.toUnwrapped(),p=this.transform.calculatePosMatrix(d),f="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),g=Dt(r,1,this.transform.zoom),y=this.collisionIndex.mapProjection.translatePosition(this.transform,r,c.get("text-translate"),c.get("text-translate-anchor")),v=this.collisionIndex.mapProjection.translatePosition(this.transform,r,c.get("icon-translate"),c.get("icon-translate-anchor")),x=mt(p,f,m,this.transform,g);let _=null;if(f){const t=gt(p,f,m,this.transform,g);_=e.K([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new jt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const b={bucket:o,layout:l,translationText:y,translationIcon:v,posMatrix:p,unwrappedTileID:d,textLabelPlaneMatrix:x,labelToScreenMatrix:_,scale:u,textPixelRatio:h,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.ag(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(const e of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n}=e;t.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n,parameters:b})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:b})}attemptAnchorPlacement(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,x){const _=e.aq[t.textAnchor],b=[t.textOffset0,t.textOffset1],w=Vt(_,r,n,b,o),S=this.collisionIndex.placeCollisionBox(i,d,l,c,u,s,a,g,h.predicate,x,w);if((!v||this.collisionIndex.placeCollisionBox(v,d,l,c,u,s,a,y,h.predicate,x,w).placeable)&&S.placeable){let t;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(t=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:b,width:r,height:n,anchor:_,textBoxScale:o,prevAnchor:t},this.markUsedJustification(f,_,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(t,i,r){const{bucket:n,layout:o,translationText:a,translationIcon:s,posMatrix:l,unwrappedTileID:c,textLabelPlaneMatrix:u,labelToScreenMatrix:h,textPixelRatio:d,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:m,collisionGroup:g}=t.parameters,y=o.get("text-optional"),v=o.get("icon-optional"),x=e.ar(o,"text-overlap","text-allow-overlap"),_="always"===x,b=e.ar(o,"icon-overlap","icon-allow-overlap"),w="always"===b,S="map"===o.get("text-rotation-alignment"),k="map"===o.get("text-pitch-alignment"),C="none"!==o.get("icon-text-fit"),T="viewport-y"===o.get("symbol-z-order"),A=_&&(w||!n.hasIconData()||v),P=w&&(_||!n.hasTextData()||y);!n.collisionArrays&&f&&n.deserializeCollisionBoxes(f);const M=this._getTerrainElevationFunc(this.retainedQueryData[n.bucketInstanceId].tileID),E=(t,f,w)=>{var T,E;if(i[t.crossTileID])return;if(p)return void(this.placements[t.crossTileID]=new Bt(!1,!1,!1));let I=!1,z=!1,L=!0,D=null,R={box:null,placeable:!1,offscreen:null},O={box:null,placeable:!1,offscreen:null},B=null,F=null,j=null,N=0,V=0,U=0;f.textFeatureIndex?N=f.textFeatureIndex:t.useRuntimeCollisionCircles&&(N=t.featureIndex),f.verticalTextFeatureIndex&&(V=f.verticalTextFeatureIndex);const W=f.textBox;if(W){const i=i=>{let r=e.ah.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(n,r,t))}return r},o=(i,r)=>{if(n.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&f.verticalTextBox){for(const t of n.writingModes)if(t===e.ah.vertical?(R=r(),O=R):R=i(),R&&R.placeable)break}else R=i()},u=t.textAnchorOffsetStartIndex,h=t.textAnchorOffsetEndIndex;if(h===u){const r=(e,i)=>{const r=this.collisionIndex.placeCollisionBox(e,x,d,l,c,k,S,a,g.predicate,M);return r&&r.placeable&&(this.markUsedOrientation(n,i,t),this.placedOrientations[t.crossTileID]=i),r};o((()=>r(W,e.ah.horizontal)),(()=>{const i=f.verticalTextBox;return n.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?r(i,e.ah.vertical):{box:null,offscreen:null}})),i(R&&R.placeable)}else{let p=e.aq[null===(E=null===(T=this.prevPlacement)||void 0===T?void 0:T.variableOffsets[t.crossTileID])||void 0===E?void 0:E.anchor];const m=(i,o,f)=>{const m=i.x2-i.x1,y=i.y2-i.y1,v=t.textBoxScale,_=C&&"never"===b?o:null;let w=null,T="never"===x?1:2,A="never";p&&T++;for(let e=0;e<T;e++){for(let e=u;e<h;e++){const r=n.textAnchorOffsets.get(e);if(p&&r.textAnchor!==p)continue;const o=this.attemptAnchorPlacement(r,i,m,y,v,S,k,d,l,c,g,A,t,n,f,a,s,_,M);if(o&&(w=o.placedGlyphBoxes,w&&w.placeable))return I=!0,D=o.shift,w}p?p=null:A=x}return r&&!w&&(w={box:this.collisionIndex.placeCollisionBox(W,"always",d,l,c,k,S,a,g.predicate,M,new e.P(0,0)).box,offscreen:!1,placeable:!1}),w};o((()=>m(W,f.iconBox,e.ah.horizontal)),(()=>{const i=f.verticalTextBox;return n.allowVerticalPlacement&&(!R||!R.placeable)&&t.numVerticalGlyphVertices>0&&i?m(i,f.verticalIconBox,e.ah.vertical):{box:null,occluded:!0,offscreen:null}})),R&&(I=R.placeable,L=R.offscreen);const y=i(R&&R.placeable);if(!I&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(n,e.anchor,t,y))}}}if(B=R,I=B&&B.placeable,L=B&&B.offscreen,t.useRuntimeCollisionCircles){const i=n.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),s=e.ai(n.textSizeData,m,i),d=o.get("text-padding");F=this.collisionIndex.placeCollisionCircles(x,i,n.lineVertexArray,n.glyphOffsetArray,s,l,c,u,h,r,k,g.predicate,t.collisionCircleDiameter,d,a,M),F.circles.length&&F.collisionDetected&&!r&&e.w("Collisions detected, but collision boxes are not shown"),I=_||F.circles.length>0&&!F.collisionDetected,L=L&&F.offscreen}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const t=t=>this.collisionIndex.placeCollisionBox(t,b,d,l,c,k,S,s,g.predicate,M,C&&D?D:void 0);O&&O.placeable&&f.verticalIconBox?(j=t(f.verticalIconBox),z=j.placeable):(j=t(f.iconBox),z=j.placeable),L=L&&j.offscreen}const H=y||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,G=v||0===t.numIconVertices;H||G?G?H||(z=z&&I):I=z&&I:z=I=z&&I;const q=z&&j.placeable;if(I&&B.placeable&&this.collisionIndex.insertCollisionBox(B.box,x,o.get("text-ignore-placement"),n.bucketInstanceId,O&&O.placeable&&V?V:N,g.ID),q&&this.collisionIndex.insertCollisionBox(j.box,b,o.get("icon-ignore-placement"),n.bucketInstanceId,U,g.ID),F&&I&&this.collisionIndex.insertCollisionCircles(F.circles,x,o.get("text-ignore-placement"),n.bucketInstanceId,N,g.ID),r&&this.storeCollisionData(n.bucketInstanceId,w,f,B,j,F),0===t.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===n.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[t.crossTileID]=new Bt(I||A,z||P,L||n.justReloaded),i[t.crossTileID]=!0};if(T){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const e=n.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const i=e[t];E(n.symbolInstances.get(i),n.collisionArrays[i],i)}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)E(n.symbolInstances.get(e),n.collisionArrays[e],e);if(r&&n.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[n.bucketInstanceId];e.as(t.invProjMatrix,l),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1}storeCollisionData(t,e,i,r,n,o){if(i.textBox||i.iconBox){let o,a;this.collisionBoxArrays.has(t)?o=this.collisionBoxArrays.get(t):(o=new Map,this.collisionBoxArrays.set(t,o)),o.has(e)?a=o.get(e):(a={text:null,icon:null},o.set(e,a)),i.textBox&&(a.text=r.box),i.iconBox&&(a.icon=n.box)}if(o){let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Ft);for(let t=0;t<o.circles.length;t+=4)e.circles.push(o.circles[t+0]),e.circles.push(o.circles[t+1]),e.circles.push(o.circles[t+2]),e.circles.push(o.collisionDetected?1:0)}}markUsedJustification(t,i,r,n){let o;o=n===e.ah.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.at(i)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:r.crossTileID)}markUsedOrientation(t,i,r){const n=i===e.ah.horizontal||i===e.ah.horizontalOnly?i:0,o=i===e.ah.vertical?i:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=n[s];e?(this.opacities[s]=new Ot(e,r,t.text,t.icon),i=i||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new Ot(null,r,t.text,t.icon,t.skipFade),i=i||t.text||t.icon)}for(const s in n){const t=n[s];if(!this.opacities[s]){const e=new Ot(t,r,!1,!1);e.isHidden()||(this.opacities[s]=e,i=i||t.text.placed||t.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,r.tileID,i,r.collisionBoxArray)}}updateBucketOpacities(t,i,r,n){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const o=t.layers[0],a=o.layout,s=new Ot(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),c=a.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),h="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),f=new Ot(null,0,l&&(c||!t.hasIconData()||a.get("icon-optional")),c&&(l||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);const m=(t,e,i)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i);t.hasVisibleVertices=t.hasVisibleVertices||i!==Jt},g=this.collisionBoxArrays.get(t.bucketInstanceId);for(let y=0;y<t.symbolInstances.length;y++){const i=t.symbolInstances.get(y),{numHorizontalGlyphVertices:n,numVerticalGlyphVertices:o,crossTileID:a}=i;let l=this.opacities[a];r[a]?l=s:l||(l=f,this.opacities[a]=l),r[a]=!0;const c=i.numIconVertices>0,v=this.placedOrientations[i.crossTileID],x=v===e.ah.vertical,_=v===e.ah.horizontal||v===e.ah.horizontalOnly;if(n>0||o>0){const e=$t(l.text);m(t.text,n,x?Jt:e),m(t.text,o,_?Jt:e);const r=l.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=r||x?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=r||_?1:0);const a=this.variableOffsets[i.crossTileID];a&&this.markUsedJustification(t,a.anchor,i,v);const s=this.placedOrientations[i.crossTileID];s&&(this.markUsedJustification(t,"left",i,s),this.markUsedOrientation(t,s,i))}if(c){const e=$t(l.icon),r=!(p&&i.verticalPlacedIconSymbolIndex&&x);i.placedIconSymbolIndex>=0&&(m(t.icon,i.numIconVertices,r?e:Jt),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=l.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,i.numVerticalIconVertices,r?Jt:e),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const b=g&&g.has(y)?g.get(y):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[y];if(i){let r=new e.P(0,0);if(i.textBox||i.verticalTextBox){let e=!0;if(u){const t=this.variableOffsets[a];t?(r=Vt(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),h&&r._rotate(d?this.transform.angle:-this.transform.angle)):e=!1}if(i.textBox||i.verticalTextBox){let n;i.textBox&&(n=x),i.verticalTextBox&&(n=_),Wt(t.textCollisionBox.collisionVertexArray,l.text.placed,!e||n,b.text,r.x,r.y)}}if(i.iconBox||i.verticalIconBox){const e=Boolean(!_&&i.verticalIconBox);let n;i.iconBox&&(n=e),i.verticalIconBox&&(n=!e),Wt(t.iconCollisionBox.collisionVertexArray,l.icon.placed,n,b.icon,p?r.x:0,p?r.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error("bucket.text.opacityVertexArray.length (= ".concat(t.text.opacityVertexArray.length,") !== bucket.text.layoutVertexArray.length (= ").concat(t.text.layoutVertexArray.length,") / 4"));if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error("bucket.icon.opacityVertexArray.length (= ".concat(t.icon.opacityVertexArray.length,") !== bucket.icon.layoutVertexArray.length (= ").concat(t.icon.layoutVertexArray.length,") / 4"));if(t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function Wt(t,e,i,r,n,o){r&&0!==r.length||(r=[0,0,0,0]);const a=r[0]-zt,s=r[1]-zt,l=r[2]-zt,c=r[3]-zt;t.emplaceBack(e?1:0,i?1:0,n||0,o||0,a,s),t.emplaceBack(e?1:0,i?1:0,n||0,o||0,l,s),t.emplaceBack(e?1:0,i?1:0,n||0,o||0,l,c),t.emplaceBack(e?1:0,i?1:0,n||0,o||0,a,c)}const Ht=Math.pow(2,25),Gt=Math.pow(2,24),qt=Math.pow(2,17),Zt=Math.pow(2,16),Xt=Math.pow(2,9),Yt=Math.pow(2,8),Kt=Math.pow(2,1);function $t(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ht+e*Gt+i*qt+e*Zt+i*Xt+e*Yt+i*Kt+e}const Jt=0;function Qt(){return{isOccluded:(t,e,i)=>!1,getPitchedTextCorrection:(t,e,i)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(t,e,i,r){throw new Error("Not implemented.")},translatePosition:(t,e,i,r)=>function(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!i[0]&&!i[1])return[0,0];const o=n?"map"===r?t.angle:0:"viewport"===r?-t.angle:0;if(o){const t=Math.sin(o),e=Math.cos(o);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}return[n?i[0]:Dt(e,i[0],t.zoom),n?i[1]:Dt(e,i[1],t.zoom)]}(t,e,i,r),getCircleRadiusCorrection:t=>1}}class te{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,r,n){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1}}class ee{constructor(t,e,i,r,n,o,a,s){this.placement=new Ut(t,Qt(),e,o,a,s),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,e,i){const r=o.now(),n=()=>!this._forceFullPlacement&&o.now()-r>2;for(;this._currentPlacementIndex>=0;){const r=e[t[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===r.type&&(!r.minzoom||r.minzoom<=o)&&(!r.maxzoom||r.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new te(r)),this._inProgressLayer.continuePlacement(i[r.source],this.placement,this._showCollisionBoxes,r,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const ie=512/e.W/2;class re{constructor(t,i,r){this.tileID=t,this.bucketInstanceId=r,this._symbolsByKey={};const n=new Map;for(let e=0;e<i.length;e++){const t=i.get(e),r=t.key,o=n.get(r);o?o.push(t):n.set(r,[t])}for(const[o,a]of n){const t={positions:a.map((t=>({x:Math.floor(t.anchorX*ie),y:Math.floor(t.anchorY*ie)}))),crossTileIDs:a.map((t=>t.crossTileID))};if(t.positions.length>128){const i=new e.av(t.positions.length,16,Uint16Array);for(const{x:e,y:r}of t.positions)i.add(e,r);i.finish(),delete t.positions,t.index=i}this._symbolsByKey[o]=t}}getScaledCoordinates(t,i){const{x:r,y:n,z:o}=this.tileID.canonical,{x:a,y:s,z:l}=i.canonical,c=ie/Math.pow(2,l-o),u=(s*e.W+t.anchorY)*c,h=n*e.W*ie;return{x:Math.floor((a*e.W+t.anchorX)*c-r*e.W*ie),y:Math.floor(u-h)}}findMatches(t,e,i){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let n=0;n<t.length;n++){const o=t.get(n);if(o.crossTileID)continue;const a=this._symbolsByKey[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);if(a.index){const t=a.index.range(s.x-r,s.y-r,s.x+r,s.y+r).sort();for(const e of t){const t=a.crossTileIDs[e];if(!i[t]){i[t]=!0,o.crossTileID=t;break}}}else if(a.positions)for(let t=0;t<a.positions.length;t++){const e=a.positions[t],n=a.crossTileIDs[t];if(Math.abs(e.x-s.x)<=r&&Math.abs(e.y-s.y)<=r&&!i[n]){i[n]=!0,o.crossTileID=n;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((t=>{let{crossTileIDs:e}=t;return e}))}}class ne{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class oe{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const i in this.indexes){const t=this.indexes[i],r={};for(const i in t){const n=t[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=i[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let n=0;n<e.symbolInstances.length;n++){const t=e.symbolInstances.get(n);t.crossTileID||(t.crossTileID=i.generate(),r[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new re(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i of e.getCrossTileIDsLists())for(const e of i)delete this.usedCrossTileIDs[t][e]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const r=this.indexes[i];for(const n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e}}class ae{constructor(){this.layerIndexes={},this.crossTileIDs=new ne,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new oe);let n=!1;const o={};r.handleWrapJump(i);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(a.tileID,e,this.crossTileIDs)&&(n=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const i in this.layerIndexes)e[i]||delete this.layerIndexes[i]}}const se=(t,i)=>e.t(t,i&&i.filter((t=>"source.canvas"!==t.identifier))),le=e.aw();class ce extends e.E{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._rtlPluginLoaded=()=>{for(const t in this.sourceCaches){const e=this.sourceCaches[t].getSource().type;"vector"!==e&&"geojson"!==e||this.sourceCaches[t].reload()}},this.map=t,this.dispatcher=new F(B(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((t,e)=>this.getGlyphs(t,e))),this.dispatcher.registerMessageHandler("GI",((t,e)=>this.getImages(t,e))),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new A(t._requestManager,i.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new ae,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",e.ay()),ot().on(it,this._rtlPluginLoaded),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const i=e.getSource();if(i&&i.vectorLayerIds)for(const r in this._layers){const t=this._layers[r];t.source===i.id&&this._validateLayer(t)}}))}loadURL(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.fire(new e.k("dataloading",{dataType:"style"})),i.validate="boolean"!=typeof i.validate||i.validate;const n=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController,e.h(n,this._loadStyleRequest).then((t=>{this._loadStyleRequest=null,this._load(t.data,i,r)})).catch((t=>{this._loadStyleRequest=null,t&&this.fire(new e.j(t))}))}loadJSON(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.fire(new e.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,i.validate=!1!==i.validate,this._load(t,i,r)})).catch((()=>{}))}loadEmpty(){this.fire(new e.k("dataloading",{dataType:"style"})),this._load(le,{validate:!1})}_load(t,i,r){var n;const o=i.transformStyle?i.transformStyle(r,t):t;if(!i.validate||!se(this,e.x(o))){this._loaded=!0,this.stylesheet=o;for(const t in o.sources)this.addSource(t,o.sources[t],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new E(this.stylesheet.light),this.map.setTerrain(null!==(n=this.stylesheet.terrain)&&void 0!==n?n:null),this.fire(new e.k("data",{dataType:"style"})),this.fire(new e.k("style.load"))}}_createLayers(){const t=e.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map((t=>t.id)),this._layers={},this._serializedLayers=null;for(const i of t){const t=e.aA(i);t.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=t}}_loadSprite(t){let i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(t,i,r,n){return e._(this,void 0,void 0,(function*(){const a=x(t),s=r>1?"@2x":"",l={},c={};for(const{id:t,url:r}of a){const o=i.transformRequest(_(r,s,".json"),"SpriteJSON");l[t]=e.h(o,n);const a=i.transformRequest(_(r,s,".png"),"SpriteImage");c[t]=p.getImage(a,n)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(t,i){return e._(this,void 0,void 0,(function*(){const e={};for(const r in t){e[r]={};const n=o.getImageCanvasContext((yield i[r]).data),a=(yield t[r]).data;for(const t in a){const{width:i,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m}=a[t];e[r][t]={data:null,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:i,height:o,x:s,y:l,context:n}}}}return e}))}(l,c)}))}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((t=>{if(this._spriteRequest=null,t)for(const e in t){this._spritesImagesIds[e]=[];const i=this._spritesImagesIds[e]?this._spritesImagesIds[e].filter((e=>!(e in t))):[];for(const t of i)this.imageManager.removeImage(t),this._changedImages[t]=!0;for(const n in t[e]){const i="default"===e?n:"".concat(e,":").concat(n);this._spritesImagesIds[e].push(i),i in this.imageManager.images?this.imageManager.updateImage(i,t[e][n],!1):this.imageManager.addImage(i,t[e][n]),r&&(this._changedImages[i]=!0)}}})).catch((t=>{this._spriteRequest=null,i=t,this.fire(new e.j(i))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"})),n&&n(i)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}_validateLayer(t){const i=this.sourceCaches[t.source];if(!i)return;const r=t.sourceLayer;if(!r)return;const n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.j(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'".'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t){const e=this._serializedAllLayers();if(!t||0===t.length)return Object.values(e);const i=[];for(const r of t)e[r]&&i.push(e[r]);return i}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const e=Object.keys(this._layers);for(const i of e){const e=this._layers[i];"custom"!==e.type&&(t[i]=e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const i=this._changed;if(i){const e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(e.length||i.length)&&this._updateWorkerLayers(e,i);for(const t in this._updatedSources){const e=this._updatedSources[t];if("reload"===e)this._reloadSource(t);else{if("clear"!==e)throw new Error("Invalid action ".concat(e));this._clearSource(t)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this.sourceCaches){const t=this.sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const i=this._layers[e];i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)&&i.source&&(this.sourceCaches[i.source].used=!0)}for(const n in r){const t=this.sourceCaches[n];!!r[n]!=!!t.used&&t.fire(new e.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:n}))}this.light.recalculate(t),this.z=t.zoom,i&&this.fire(new e.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this._checkLoaded();const n=this.serialize();if(t=i.transformStyle?i.transformStyle(n,t):t,(null===(r=i.validate)||void 0===r||r)&&se(this,e.x(t)))return!1;(t=e.aB(t)).layers=e.az(t.layers);const o=e.aC(n,t),a=this._getOperationsToPerform(o);if(a.unimplemented.length>0)throw new Error("Unimplemented: ".concat(a.unimplemented.join(", "),"."));if(0===a.operations.length)return!1;for(const e of a.operations)e();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const e=[],i=[];for(const r of t)switch(r.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":e.push((()=>this.addLayer.apply(this,r.args)));break;case"removeLayer":e.push((()=>this.removeLayer.apply(this,r.args)));break;case"setPaintProperty":e.push((()=>this.setPaintProperty.apply(this,r.args)));break;case"setLayoutProperty":e.push((()=>this.setLayoutProperty.apply(this,r.args)));break;case"setFilter":e.push((()=>this.setFilter.apply(this,r.args)));break;case"addSource":e.push((()=>this.addSource.apply(this,r.args)));break;case"removeSource":e.push((()=>this.removeSource.apply(this,r.args)));break;case"setLayerZoomRange":e.push((()=>this.setLayerZoomRange.apply(this,r.args)));break;case"setLight":e.push((()=>this.setLight.apply(this,r.args)));break;case"setGeoJSONSourceData":e.push((()=>this.setGeoJSONSourceData.apply(this,r.args)));break;case"setGlyphs":e.push((()=>this.setGlyphs.apply(this,r.args)));break;case"setSprite":e.push((()=>this.setSprite.apply(this,r.args)));break;case"setTerrain":e.push((()=>this.map.setTerrain.apply(this,r.args)));break;case"setTransition":e.push((()=>{}));break;default:i.push(r.command)}return{operations:e,unimplemented:i}}addImage(t,i){if(this.getImage(t))return this.fire(new e.j(new Error('An image named "'.concat(t,'" already exists.'))));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new e.j(new Error('An image named "'.concat(t,'" does not exist.'))));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error('Source "'.concat(t,'" already exists.'));if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(i).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.x.source,"sources.".concat(t),i,null,r))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const n=this.sourceCaches[t]=new ct(t,i,this.dispatcher);n.style=this,n.setEventedParent(this,(()=>({isSourceLoaded:n.loaded(),source:n.serialize(),sourceId:t}))),n.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===t)return this.fire(new e.j(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(r,'" is using it.'))));const i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new e.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID=".concat(t));const i=this.sourceCaches[t].getSource();if("geojson"!==i.type)throw new Error("geojsonSource.type is ".concat(i.type,", which is !== 'geojson"));i.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=t.id;if(this.getLayer(n))return void this.fire(new e.j(new Error('Layer "'.concat(n,'" already exists on this map.'))));let o;if("custom"===t.type){if(se(this,e.aD(t)))return;o=e.aA(t)}else{if("source"in t&&"object"==typeof t.source&&(this.addSource(n,t.source),t=e.aB(t),t=e.e(t,{source:n})),this._validate(e.x.layer,"layers.".concat(n),t,{arrayIndex:-1},r))return;o=e.aA(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}})}const a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)this.fire(new e.j(new Error('Cannot add layer "'.concat(n,'" before non-existing layer "').concat(i,'".'))));else{if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=o,this._removedLayers[n]&&o.source&&"custom"!==o.type){const t=this._removedLayers[n];delete this._removedLayers[n],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.j(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))));if(t===i)return;const r=this._order.indexOf(t);this._order.splice(r,1);const n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new e.j(new Error('Cannot move layer "'.concat(t,'" before non-existing layer "').concat(i,'".')))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const i=this._layers[t];if(!i)return void this.fire(new e.j(new Error('Cannot remove non-existing layer "'.concat(t,'".'))));i.setEventedParent(null);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,i,r){this._checkLoaded();const n=this.getLayer(t);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new e.j(new Error('Cannot set the zoom range of non-existing layer "'.concat(t,'".'))))}setFilter(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=this.getLayer(t);if(n){if(!e.aE(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(e.x.filter,"layers.".concat(n.id,".filter"),i,null,r)||(n.filter=e.aB(i),this._updateLayer(n)))}else this.fire(new e.j(new Error('Cannot filter non-existing layer "'.concat(t,'".'))))}getFilter(t){return e.aB(this.getLayer(t).filter)}setLayoutProperty(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(t);o?e.aE(o.getLayoutProperty(i),r)||(o.setLayoutProperty(i,r,n),this._updateLayer(o)):this.fire(new e.j(new Error('Cannot style non-existing layer "'.concat(t,'".'))))}getLayoutProperty(t,i){const r=this.getLayer(t);if(r)return r.getLayoutProperty(i);this.fire(new e.j(new Error('Cannot get style of non-existing layer "'.concat(t,'".'))))}setPaintProperty(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(t);o?e.aE(o.getPaintProperty(i),r)||(o.setPaintProperty(i,r,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new e.j(new Error('Cannot style non-existing layer "'.concat(t,'".'))))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(t,i){this._checkLoaded();const r=t.source,n=t.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new e.j(new Error("The source '".concat(r,"' does not exist in the map's style."))));const a=o.getSource().type;"geojson"===a&&n?this.fire(new e.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?(void 0===t.id&&this.fire(new e.j(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,t.id,i)):this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,i){this._checkLoaded();const r=t.source,n=this.sourceCaches[r];if(void 0===n)return void this.fire(new e.j(new Error("The source '".concat(r,"' does not exist in the map's style."))));const o=n.getSource().type,a="vector"===o?t.sourceLayer:void 0;"vector"!==o||a?i&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.j(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(a,t.id,i):this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const i=t.source,r=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n)return"vector"!==n.getSource().type||r?(void 0===t.id&&this.fire(new e.j(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,t.id)):void this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new e.j(new Error("The source '".concat(i,"' does not exist in the map's style."))))}getTransition(){return e.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=e.aF(this.sourceCaches,(t=>t.serialize())),i=this._serializeByIds(this._order),r=this.map.getTerrain()||void 0,n=this.stylesheet;return e.aG({version:n.version,name:n.name,metadata:n.metadata,light:n.light,center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch,sprite:n.sprite,glyphs:n.glyphs,transition:n.transition,sources:t,layers:i,terrain:r},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},r=[];for(let o=this._order.length-1;o>=0;o--){const n=this._order[o];if(e(n)){i[n]=o;for(const e of t){const t=e[n];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const n=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(i[e.layer.id]<o)break;n.push(e),r.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)n.push(e.feature)}}return n}queryRenderedFeatures(t,i,r){i&&i.filter&&this._validate(e.x.filter,"queryRenderedFeatures.filter",i.filter,null,i);const n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.j(new Error("parameters.layers must be an Array."))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.j(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be queried for features.")))),[];n[i.source]=!0}}const o=[];i.availableImages=this._availableImages;const a=this._serializedAllLayers();for(const e in this.sourceCaches)i.layers&&!n[e]||o.push(V(this.sourceCaches[e],this._layers,a,t,i,r));return this.placement&&o.push(function(t,e,i,r,n,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(U);for(const u of c){const i=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],e,u.bucketIndex,u.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(const t in i){const e=s[t]=s[t]||[],r=i[t];r.sort(((t,e)=>{const i=u.featureSortOrder;if(i){const r=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const u in s)s[u].forEach((e=>{const r=e.feature,n=i[t[u].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n}));return s}(this._layers,a,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.x.filter,"querySourceFeatures.filter",i.filter,null,i);const r=this.sourceCaches[t];return r?function(t,e){const i=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],n={};for(let o=0;o<i.length;o++){const t=i[o],a=t.tileID.canonical.key;n[a]||(n[a]=!0,t.querySourceFeatures(r,e))}return r}(r,i):[]}getLight(){return this.light.getLight()}setLight(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const r=this.light.getLight();let n=!1;for(const o in t)if(!e.aE(t[o],r[o])){n=!0;break}if(!n)return;const a={now:o.now(),transition:e.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(a)}_validate(t,i,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&se(this,t.call(e.x,e.e({key:i,style:this.serialize(),value:r,styleSpec:e.v},n)))}_remove(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ot().off(it,this._rtlPluginLoaded);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this.sourceCaches){const t=this.sourceCaches[e];t.setEventedParent(null),t.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const o of this._order){const e=this._layers[o];if("symbol"!==e.type)continue;if(!l[e.source]){const t=this.sourceCaches[e.source];l[e.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(e,l[e.source],t.center.lng);a=a||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.now(),t.zoom))&&(this.pauseablePlacement=new ee(t,this.map.terrain,this._order,n,e,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const o of this._order){const t=this._layers[o];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,i){return e._(this,void 0,void 0,(function*(){const t=yield this.imageManager.getImages(i.icons);this._updateTilesForChangedImages();const e=this.sourceCaches[i.source];return e&&e.setDependencies(i.tileID.key,i.type,i.icons),t}))}getGlyphs(t,i){return e._(this,void 0,void 0,(function*(){const t=yield this.glyphManager.getGlyphs(i.stacks),e=this.sourceCaches[i.source];return e&&e.setDependencies(i.tileID.key,i.type,[""]),t}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),t&&this._validate(e.x.glyphs,"glyphs",t,null,i)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const o=[{id:t,url:i}],a=[...x(this.stylesheet.sprite),...o];this._validate(e.x.sprite,"sprite",a,null,r)||(this.stylesheet.sprite=a,this._loadSprite(o,!0,n))}removeSprite(t){this._checkLoaded();const i=x(this.stylesheet.sprite);if(i.find((e=>e.id===t))){if(this._spritesImagesIds[t])for(const e of this._spritesImagesIds[t])this.imageManager.removeImage(e),this._changedImages[e]=!0;i.splice(i.findIndex((e=>e.id===t)),1),this.stylesheet.sprite=i.length>0?i:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}else this.fire(new e.j(new Error('Sprite "'.concat(t,"\" doesn't exists on this map."))))}getSprite(){return x(this.stylesheet.sprite)}setSprite(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),t&&this._validate(e.x.sprite,"sprite",t,null,i)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,r):(this._unloadSprite(),r&&r(null)))}}var ue=e.X([{name:"a_pos",type:"Int16",components:2}]),he="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const de={prelude:pe("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:pe("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pe("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pe("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:pe("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pe("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:pe("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pe("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pe("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pe("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pe("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:pe("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:pe("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:pe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:pe("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:pe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:pe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pe("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pe("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:pe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:pe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:pe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:pe("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pe("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:pe("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:pe("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:pe("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",he),terrainDepth:pe("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",he),terrainCoords:pe("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",he)};function pe(t,e){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(i,((t,e,i,r,n)=>(s[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nvarying ").concat(i," ").concat(r," ").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n")))),vertexSource:e=e.replace(i,((t,e,i,r,n)=>{const o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nuniform lowp float u_").concat(n,"_t;\nattribute ").concat(i," ").concat(o," a_").concat(n,";\nvarying ").concat(i," ").concat(r," ").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(n," = a_").concat(n,";\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(n," = unpack_mix_").concat(a,"(a_").concat(n,", u_").concat(n,"_t);\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nuniform lowp float u_").concat(n,"_t;\nattribute ").concat(i," ").concat(o," a_").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = a_").concat(n,";\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = unpack_mix_").concat(a,"(a_").concat(n,", u_").concat(n,"_t);\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n")})),staticAttributes:r,staticUniforms:a}}class fe{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,r,n,o,a,s,l){this.context=t;let c=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!c&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(c=!0);!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||c||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(e,i,r,n,o,a,s,l):(t.bindVertexArray.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind(),l&&l.bind())}freshBind(t,e,i,r,n,o,a,s){const l=t.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s,e.enableAttributes(u,t);for(const h of i)h.enableAttributes(u,t);o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),s&&s.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,n);for(const h of i)h.bind(),h.setVertexAttribPointers(u,t,n);o&&(o.bind(),o.setVertexAttribPointers(u,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,n)),s&&(s.bind(),s.setVertexAttribPointers(u,t,n)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function me(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const r=t[i].split(" ");e.push(r.pop())}return e}class ge{constructor(t,i,r,n,o,a){const s=t.gl;this.program=s.createProgram();const l=me(i.staticAttributes),c=r?r.getBinderAttributes():[],u=l.concat(c),h=de.prelude.staticUniforms?me(de.prelude.staticUniforms):[],d=i.staticUniforms?me(i.staticUniforms):[],p=r?r.getBinderUniforms():[],f=h.concat(d).concat(p),m=[];for(const e of f)m.indexOf(e)<0&&m.push(e);const g=r?r.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;"),a&&g.push("#define TERRAIN3D;");const y=g.concat(de.prelude.fragmentSource,i.fragmentSource).join("\n"),v=g.concat(de.prelude.vertexSource,i.vertexSource).join("\n"),x=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(x,y),s.compileShader(x),!s.getShaderParameter(x,s.COMPILE_STATUS))throw new Error("Could not compile fragment shader: ".concat(s.getShaderInfoLog(x)));s.attachShader(this.program,x);const _=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(_,v),s.compileShader(_),!s.getShaderParameter(_,s.COMPILE_STATUS))throw new Error("Could not compile vertex shader: ".concat(s.getShaderInfoLog(_)));s.attachShader(this.program,_),this.attributes={};const b={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);if(s.linkProgram(this.program),!s.getProgramParameter(this.program,s.LINK_STATUS))throw new Error("Program failed to link: ".concat(s.getProgramInfoLog(this.program)));s.deleteShader(_),s.deleteShader(x);for(let e=0;e<m.length;e++){const t=m[e];if(t&&!b[t]){const e=s.getUniformLocation(this.program,t);e&&(b[t]=e)}}this.fixedUniforms=n(t,b),this.terrainUniforms=((t,i)=>({u_depth:new e.aH(t,i.u_depth),u_terrain:new e.aH(t,i.u_terrain),u_terrain_dim:new e.aI(t,i.u_terrain_dim),u_terrain_matrix:new e.aJ(t,i.u_terrain_matrix),u_terrain_unpack:new e.aK(t,i.u_terrain_unpack),u_terrain_exaggeration:new e.aI(t,i.u_terrain_exaggeration)}))(t,b),this.binderUniforms=r?r.getUniforms(t,b):[]}draw(t,e,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y){const v=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o),s){t.activeTexture.set(v.TEXTURE2),v.bindTexture(v.TEXTURE_2D,s.depthTexture),t.activeTexture.set(v.TEXTURE3),v.bindTexture(v.TEXTURE_2D,s.texture);for(const t in this.terrainUniforms)this.terrainUniforms[t].set(s[t])}for(const _ in this.fixedUniforms)this.fixedUniforms[_].set(a[_]);f&&f.setUniforms(t,this.binderUniforms,d,{zoom:p});let x=0;switch(e){case v.LINES:x=2;break;case v.TRIANGLES:x=3;break;case v.LINE_STRIP:x=1}for(const _ of h.get()){const i=_.vaos||(_.vaos={});(i[l]||(i[l]=new fe)).bind(t,this,c,f?f.getPaintVertexBuffers():[],u,_.vertexOffset,m,g,y),v.drawElements(e,_.primitiveLength*x,v.UNSIGNED_SHORT,_.primitiveOffset*x*2)}}}function ye(t,e,i){const r=1/Dt(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const ve=(t,i,r,n)=>{const o=i.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var t=new e.A(9);return e.A!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();"viewport"===o.properties.get("anchor")&&function(t,e){var i=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(l,-i.transform.angle),function(t,e,i){var r=e[0],n=e[1],o=e[2];t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8]}(s,s,l);const c=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:n}},xe=(t,i,r,n,o,a,s)=>e.e(ve(t,i,r,n),ye(a,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),_e=t=>({u_matrix:t}),be=(t,i,r,n)=>e.e(_e(t),ye(r,i,n)),we=(t,e)=>({u_matrix:t,u_world:e}),Se=(t,i,r,n,o)=>e.e(be(t,i,r,n),{u_world:o}),ke=(t,e,i,r)=>{const n=t.transform;let o,a;if("map"===r.paint.get("circle-pitch-alignment")){const t=Dt(i,1,n.zoom);o=!0,a=[t,t]}else o=!1,a=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:a}},Ce=(t,e,i)=>({u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}),Te=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Ae=t=>({u_matrix:t}),Pe=(t,e,i,r)=>({u_matrix:t,u_extrude_scale:Dt(e,1,i),u_intensity:r});function Me(t,i){const r=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new e.Y(0,n/r).toLngLat().lat,new e.Y(0,(n+1)/r).toLngLat().lat]}const Ee=(t,e,i,r)=>{const n=t.transform;return{u_matrix:Re(t,e,i,r),u_ratio:1/Dt(e,1,n.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Ie=(t,i,r,n,o)=>e.e(Ee(t,i,r,o),{u_image:0,u_image_height:n}),ze=(t,e,i,r,n)=>{const o=t.transform,a=De(e,o);return{u_matrix:Re(t,e,i,n),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Dt(e,1,o.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Le=(t,i,r,n,o,a)=>{const s=t.lineAtlas,l=De(i,t.transform),c="round"===r.layout.get("line-cap"),u=s.getDash(n.from,c),h=s.getDash(n.to,c),d=u.width*o.fromScale,p=h.width*o.toScale;return e.e(Ee(t,i,r,a),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,p)*t.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:o.t})};function De(t,e){return 1/Dt(t,1,e.tileZoom)}function Re(t,e,i,r){return t.translatePosMatrix(r?r.posMatrix:e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const Oe=(t,e,i,r,n)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Be(n.paint.get("raster-hue-rotate"))};var o,a};function Be(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const Fe=(t,e,i,r,n,o,a,s,l,c,u,h,d,p)=>{const f=a.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:f.width/f.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:c,u_is_text:+h,u_pitch_with_map:+r,u_is_along_line:n,u_is_variable_anchor:o,u_texsize:d,u_texture:0,u_translation:u,u_pitched_scale:p}},je=(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m)=>{const g=s.transform;return e.e(Fe(t,i,r,n,o,a,s,l,c,u,h,d,p,m),{u_gamma_scale:n?Math.cos(g._pitch)*g.cameraToCenterDistance:1,u_device_pixel_ratio:s.pixelRatio,u_is_halo:+f})},Ne=(t,i,r,n,o,a,s,l,c,u,h,d,p,f)=>e.e(je(t,i,r,n,o,a,s,l,c,u,h,!0,d,!0,f),{u_texsize_icon:p,u_texture_icon:1}),Ve=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),Ue=(t,i,r,n,o,a)=>e.e(function(t,e,i,r){const n=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),{width:a,height:s}=i.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/Dt(r,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(n,a,r,o),{u_matrix:t,u_opacity:i}),We={fillExtrusion:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_lightpos:new e.aL(t,i.u_lightpos),u_lightintensity:new e.aI(t,i.u_lightintensity),u_lightcolor:new e.aL(t,i.u_lightcolor),u_vertical_gradient:new e.aI(t,i.u_vertical_gradient),u_opacity:new e.aI(t,i.u_opacity)}),fillExtrusionPattern:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_lightpos:new e.aL(t,i.u_lightpos),u_lightintensity:new e.aI(t,i.u_lightintensity),u_lightcolor:new e.aL(t,i.u_lightcolor),u_vertical_gradient:new e.aI(t,i.u_vertical_gradient),u_height_factor:new e.aI(t,i.u_height_factor),u_image:new e.aH(t,i.u_image),u_texsize:new e.aM(t,i.u_texsize),u_pixel_coord_upper:new e.aM(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aM(t,i.u_pixel_coord_lower),u_scale:new e.aL(t,i.u_scale),u_fade:new e.aI(t,i.u_fade),u_opacity:new e.aI(t,i.u_opacity)}),fill:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix)}),fillPattern:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_image:new e.aH(t,i.u_image),u_texsize:new e.aM(t,i.u_texsize),u_pixel_coord_upper:new e.aM(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aM(t,i.u_pixel_coord_lower),u_scale:new e.aL(t,i.u_scale),u_fade:new e.aI(t,i.u_fade)}),fillOutline:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_world:new e.aM(t,i.u_world)}),fillOutlinePattern:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_world:new e.aM(t,i.u_world),u_image:new e.aH(t,i.u_image),u_texsize:new e.aM(t,i.u_texsize),u_pixel_coord_upper:new e.aM(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aM(t,i.u_pixel_coord_lower),u_scale:new e.aL(t,i.u_scale),u_fade:new e.aI(t,i.u_fade)}),circle:(t,i)=>({u_camera_to_center_distance:new e.aI(t,i.u_camera_to_center_distance),u_scale_with_map:new e.aH(t,i.u_scale_with_map),u_pitch_with_map:new e.aH(t,i.u_pitch_with_map),u_extrude_scale:new e.aM(t,i.u_extrude_scale),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_matrix:new e.aJ(t,i.u_matrix)}),collisionBox:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_pixel_extrude_scale:new e.aM(t,i.u_pixel_extrude_scale)}),collisionCircle:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_inv_matrix:new e.aJ(t,i.u_inv_matrix),u_camera_to_center_distance:new e.aI(t,i.u_camera_to_center_distance),u_viewport_size:new e.aM(t,i.u_viewport_size)}),debug:(t,i)=>({u_color:new e.aN(t,i.u_color),u_matrix:new e.aJ(t,i.u_matrix),u_overlay:new e.aH(t,i.u_overlay),u_overlay_scale:new e.aI(t,i.u_overlay_scale)}),clippingMask:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix)}),heatmap:(t,i)=>({u_extrude_scale:new e.aI(t,i.u_extrude_scale),u_intensity:new e.aI(t,i.u_intensity),u_matrix:new e.aJ(t,i.u_matrix)}),heatmapTexture:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_world:new e.aM(t,i.u_world),u_image:new e.aH(t,i.u_image),u_color_ramp:new e.aH(t,i.u_color_ramp),u_opacity:new e.aI(t,i.u_opacity)}),hillshade:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_image:new e.aH(t,i.u_image),u_latrange:new e.aM(t,i.u_latrange),u_light:new e.aM(t,i.u_light),u_shadow:new e.aN(t,i.u_shadow),u_highlight:new e.aN(t,i.u_highlight),u_accent:new e.aN(t,i.u_accent)}),hillshadePrepare:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_image:new e.aH(t,i.u_image),u_dimension:new e.aM(t,i.u_dimension),u_zoom:new e.aI(t,i.u_zoom),u_unpack:new e.aK(t,i.u_unpack)}),line:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_ratio:new e.aI(t,i.u_ratio),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.aM(t,i.u_units_to_pixels)}),lineGradient:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_ratio:new e.aI(t,i.u_ratio),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.aM(t,i.u_units_to_pixels),u_image:new e.aH(t,i.u_image),u_image_height:new e.aI(t,i.u_image_height)}),linePattern:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_texsize:new e.aM(t,i.u_texsize),u_ratio:new e.aI(t,i.u_ratio),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_image:new e.aH(t,i.u_image),u_units_to_pixels:new e.aM(t,i.u_units_to_pixels),u_scale:new e.aL(t,i.u_scale),u_fade:new e.aI(t,i.u_fade)}),lineSDF:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_ratio:new e.aI(t,i.u_ratio),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.aM(t,i.u_units_to_pixels),u_patternscale_a:new e.aM(t,i.u_patternscale_a),u_patternscale_b:new e.aM(t,i.u_patternscale_b),u_sdfgamma:new e.aI(t,i.u_sdfgamma),u_image:new e.aH(t,i.u_image),u_tex_y_a:new e.aI(t,i.u_tex_y_a),u_tex_y_b:new e.aI(t,i.u_tex_y_b),u_mix:new e.aI(t,i.u_mix)}),raster:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_tl_parent:new e.aM(t,i.u_tl_parent),u_scale_parent:new e.aI(t,i.u_scale_parent),u_buffer_scale:new e.aI(t,i.u_buffer_scale),u_fade_t:new e.aI(t,i.u_fade_t),u_opacity:new e.aI(t,i.u_opacity),u_image0:new e.aH(t,i.u_image0),u_image1:new e.aH(t,i.u_image1),u_brightness_low:new e.aI(t,i.u_brightness_low),u_brightness_high:new e.aI(t,i.u_brightness_high),u_saturation_factor:new e.aI(t,i.u_saturation_factor),u_contrast_factor:new e.aI(t,i.u_contrast_factor),u_spin_weights:new e.aL(t,i.u_spin_weights)}),symbolIcon:(t,i)=>({u_is_size_zoom_constant:new e.aH(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aH(t,i.u_is_size_feature_constant),u_size_t:new e.aI(t,i.u_size_t),u_size:new e.aI(t,i.u_size),u_camera_to_center_distance:new e.aI(t,i.u_camera_to_center_distance),u_pitch:new e.aI(t,i.u_pitch),u_rotate_symbol:new e.aH(t,i.u_rotate_symbol),u_aspect_ratio:new e.aI(t,i.u_aspect_ratio),u_fade_change:new e.aI(t,i.u_fade_change),u_matrix:new e.aJ(t,i.u_matrix),u_label_plane_matrix:new e.aJ(t,i.u_label_plane_matrix),u_coord_matrix:new e.aJ(t,i.u_coord_matrix),u_is_text:new e.aH(t,i.u_is_text),u_pitch_with_map:new e.aH(t,i.u_pitch_with_map),u_is_along_line:new e.aH(t,i.u_is_along_line),u_is_variable_anchor:new e.aH(t,i.u_is_variable_anchor),u_texsize:new e.aM(t,i.u_texsize),u_texture:new e.aH(t,i.u_texture),u_translation:new e.aM(t,i.u_translation),u_pitched_scale:new e.aI(t,i.u_pitched_scale)}),symbolSDF:(t,i)=>({u_is_size_zoom_constant:new e.aH(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aH(t,i.u_is_size_feature_constant),u_size_t:new e.aI(t,i.u_size_t),u_size:new e.aI(t,i.u_size),u_camera_to_center_distance:new e.aI(t,i.u_camera_to_center_distance),u_pitch:new e.aI(t,i.u_pitch),u_rotate_symbol:new e.aH(t,i.u_rotate_symbol),u_aspect_ratio:new e.aI(t,i.u_aspect_ratio),u_fade_change:new e.aI(t,i.u_fade_change),u_matrix:new e.aJ(t,i.u_matrix),u_label_plane_matrix:new e.aJ(t,i.u_label_plane_matrix),u_coord_matrix:new e.aJ(t,i.u_coord_matrix),u_is_text:new e.aH(t,i.u_is_text),u_pitch_with_map:new e.aH(t,i.u_pitch_with_map),u_is_along_line:new e.aH(t,i.u_is_along_line),u_is_variable_anchor:new e.aH(t,i.u_is_variable_anchor),u_texsize:new e.aM(t,i.u_texsize),u_texture:new e.aH(t,i.u_texture),u_gamma_scale:new e.aI(t,i.u_gamma_scale),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_is_halo:new e.aH(t,i.u_is_halo),u_translation:new e.aM(t,i.u_translation),u_pitched_scale:new e.aI(t,i.u_pitched_scale)}),symbolTextAndIcon:(t,i)=>({u_is_size_zoom_constant:new e.aH(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aH(t,i.u_is_size_feature_constant),u_size_t:new e.aI(t,i.u_size_t),u_size:new e.aI(t,i.u_size),u_camera_to_center_distance:new e.aI(t,i.u_camera_to_center_distance),u_pitch:new e.aI(t,i.u_pitch),u_rotate_symbol:new e.aH(t,i.u_rotate_symbol),u_aspect_ratio:new e.aI(t,i.u_aspect_ratio),u_fade_change:new e.aI(t,i.u_fade_change),u_matrix:new e.aJ(t,i.u_matrix),u_label_plane_matrix:new e.aJ(t,i.u_label_plane_matrix),u_coord_matrix:new e.aJ(t,i.u_coord_matrix),u_is_text:new e.aH(t,i.u_is_text),u_pitch_with_map:new e.aH(t,i.u_pitch_with_map),u_is_along_line:new e.aH(t,i.u_is_along_line),u_is_variable_anchor:new e.aH(t,i.u_is_variable_anchor),u_texsize:new e.aM(t,i.u_texsize),u_texsize_icon:new e.aM(t,i.u_texsize_icon),u_texture:new e.aH(t,i.u_texture),u_texture_icon:new e.aH(t,i.u_texture_icon),u_gamma_scale:new e.aI(t,i.u_gamma_scale),u_device_pixel_ratio:new e.aI(t,i.u_device_pixel_ratio),u_is_halo:new e.aH(t,i.u_is_halo),u_translation:new e.aM(t,i.u_translation),u_pitched_scale:new e.aI(t,i.u_pitched_scale)}),background:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_opacity:new e.aI(t,i.u_opacity),u_color:new e.aN(t,i.u_color)}),backgroundPattern:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_opacity:new e.aI(t,i.u_opacity),u_image:new e.aH(t,i.u_image),u_pattern_tl_a:new e.aM(t,i.u_pattern_tl_a),u_pattern_br_a:new e.aM(t,i.u_pattern_br_a),u_pattern_tl_b:new e.aM(t,i.u_pattern_tl_b),u_pattern_br_b:new e.aM(t,i.u_pattern_br_b),u_texsize:new e.aM(t,i.u_texsize),u_mix:new e.aI(t,i.u_mix),u_pattern_size_a:new e.aM(t,i.u_pattern_size_a),u_pattern_size_b:new e.aM(t,i.u_pattern_size_b),u_scale_a:new e.aI(t,i.u_scale_a),u_scale_b:new e.aI(t,i.u_scale_b),u_pixel_coord_upper:new e.aM(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aM(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.aI(t,i.u_tile_units_to_pixels)}),terrain:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_texture:new e.aH(t,i.u_texture),u_ele_delta:new e.aI(t,i.u_ele_delta)}),terrainDepth:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_ele_delta:new e.aI(t,i.u_ele_delta)}),terrainCoords:(t,i)=>({u_matrix:new e.aJ(t,i.u_matrix),u_texture:new e.aH(t,i.u_texture),u_terrain_coords_id:new e.aI(t,i.u_terrain_coords_id),u_ele_delta:new e.aI(t,i.u_ele_delta)})};class He{constructor(t,e,i){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ge={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class qe{constructor(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error("Length of new data is ".concat(t.length,", which doesn't match current length of ").concat(this.length));const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,i){for(let r=0;r<this.attributes.length;r++){const n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[Ge[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ze=new WeakMap;function Xe(t){var e;if(Ze.has(t))return Ze.get(t);{const i=null===(e=t.getParameter(t.VERSION))||void 0===e?void 0:e.startsWith("WebGL 2.0");return Ze.set(t,i),i}}class Ye{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ke extends Ye{getDefault(){return e.aP.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class $e extends Ye{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Je extends Ye{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Qe extends Ye{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ti extends Ye{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class ei extends Ye{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class ii extends Ye{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class ri extends Ye{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class ni extends Ye{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class oi extends Ye{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class ai extends Ye{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class si extends Ye{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class li extends Ye{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class ci extends Ye{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class ui extends Ye{getDefault(){return e.aP.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class hi extends Ye{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class di extends Ye{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class pi extends Ye{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class fi extends Ye{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class mi extends Ye{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class gi extends Ye{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class yi extends Ye{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class vi extends Ye{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class xi extends Ye{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class _i extends Ye{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class bi extends Ye{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class wi extends Ye{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Si extends Ye{getDefault(){return null}set(t){var e;if(t===this.current&&!this.dirty)return;const i=this.gl;Xe(i)?i.bindVertexArray(t):null===(e=i.getExtension("OES_vertex_array_object"))||void 0===e||e.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class ki extends Ye{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Ci extends Ye{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Ti extends Ye{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ai extends Ye{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class Pi extends Ai{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Mi extends Ai{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ei extends Ai{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ii{constructor(t,e,i,r,n){this.context=t,this.width=e,this.height=i;const o=t.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Pi(t,a),r)this.depthAttachment=n?new Ei(t,a):new Mi(t,a);else if(n)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class zi{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}zi.Replace=[1,0],zi.disabled=new zi(zi.Replace,e.aP.transparent,[!1,!1,!1,!1]),zi.unblended=new zi(zi.Replace,e.aP.transparent,[!0,!0,!0,!0]),zi.alphaBlended=new zi([1,771],e.aP.transparent,[!0,!0,!0,!0]);class Li{constructor(t){var e,i;if(this.gl=t,this.clearColor=new Ke(this),this.clearDepth=new $e(this),this.clearStencil=new Je(this),this.colorMask=new Qe(this),this.depthMask=new ti(this),this.stencilMask=new ei(this),this.stencilFunc=new ii(this),this.stencilOp=new ri(this),this.stencilTest=new ni(this),this.depthRange=new oi(this),this.depthTest=new ai(this),this.depthFunc=new si(this),this.blend=new li(this),this.blendFunc=new ci(this),this.blendColor=new ui(this),this.blendEquation=new hi(this),this.cullFace=new di(this),this.cullFaceSide=new pi(this),this.frontFace=new fi(this),this.program=new mi(this),this.activeTexture=new gi(this),this.viewport=new yi(this),this.bindFramebuffer=new vi(this),this.bindRenderbuffer=new xi(this),this.bindTexture=new _i(this),this.bindVertexBuffer=new bi(this),this.bindElementBuffer=new wi(this),this.bindVertexArray=new Si(this),this.pixelStoreUnpack=new ki(this),this.pixelStoreUnpackPremultiplyAlpha=new Ci(this),this.pixelStoreUnpackFlipY=new Ti(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Xe(t)){this.HALF_FLOAT=t.HALF_FLOAT;const r=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(e=t.RGBA16F)&&void 0!==e?e:null==r?void 0:r.RGBA16F_EXT,this.RGB16F=null!==(i=t.RGB16F)&&void 0!==i?i:null==r?void 0:r.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const e=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==e?void 0:e.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new He(this,t,e)}createVertexBuffer(t,e,i){return new qe(this,t,e,i)}createRenderbuffer(t,e,i){const r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n}createFramebuffer(t,e,i,r){return new Ii(this,t,e,i,r)}clear(t){let{color:e,depth:i,stencil:r}=t;const n=this.gl;let o=0;e&&(o|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(o|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),void 0!==r&&(o|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),n.clear(o)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){e.aE(t.blendFunction,zi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Xe(this.gl)?this.gl.createVertexArray():null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var e;return Xe(this.gl)?this.gl.deleteVertexArray(t):null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class Di{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}Di.ReadOnly=!1,Di.ReadWrite=!0,Di.disabled=new Di(519,Di.ReadOnly,[0,1]);const Ri=7680;class Oi{constructor(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o}}Oi.disabled=new Oi({func:519,mask:0},0,0,Ri,Ri,Ri);class Bi{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}let Fi;function ji(t,i,r,n,o){const a=t.context,s=a.gl,l=t.useProgram("collisionBox"),c=[];let u=0,h=0;for(let v=0;v<n.length;v++){const p=n[v],f=i.getTile(p).getBucket(r);if(!f)continue;const m=o?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;if(g.length>0){const i=e.F();e.aQ(i,f.placementInvProjMatrix,t.transform.glCoordMatrix),e.aQ(i,i,f.placementViewportMatrix),c.push({circleArray:g,circleOffset:h,transform:p.posMatrix,invTransform:i,coord:p}),u+=g.length/4,h=u}m&&l.draw(a,s.LINES,Di.disabled,Oi.disabled,t.colorModeForRenderPass(),Bi.disabled,{u_matrix:p.posMatrix,u_pixel_extrude_scale:[1/(d=t.transform).width,1/d.height]},t.style.map.terrain&&t.style.map.terrain.getTerrainData(p),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,t.transform.zoom,null,null,m.collisionVertexBuffer)}var d;if(!o||!c.length)return;const p=t.useProgram("collisionCircle"),f=new e.aR;f.resize(4*u),f._trim();let m=0;for(const e of c)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,r=e.circleArray[i+0],n=e.circleArray[i+1],o=e.circleArray[i+2],a=e.circleArray[i+3];f.emplace(m++,r,n,o,a,0),f.emplace(m++,r,n,o,a,1),f.emplace(m++,r,n,o,a,2),f.emplace(m++,r,n,o,a,3)}(!Fi||Fi.length<2*u)&&(Fi=function(t){const i=2*t,r=new e.aT;r.resize(i),r._trim();for(let e=0;e<i;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(u));const g=a.createIndexBuffer(Fi,!0),y=a.createVertexBuffer(f,e.aS.members,!0);for(const v of c){const i=Ce(v.transform,v.invTransform,t.transform);p.draw(a,s.TRIANGLES,Di.disabled,Oi.disabled,t.colorModeForRenderPass(),Bi.disabled,i,t.style.map.terrain&&t.style.map.terrain.getTerrainData(v.coord),r.id,y,g,e.$.simpleSegment(0,2*v.circleOffset,v.circleArray.length,v.circleArray.length/2),null,t.transform.zoom,null,null,null)}y.destroy(),g.destroy()}Bi.disabled=new Bi(!1,1029,2305),Bi.backCCW=new Bi(!0,1029,2305);const Ni=e.an(new Float32Array(16));function Vi(t,i,r,n,o,a){const{horizontalAlign:s,verticalAlign:l}=e.au(t);return new e.P((-(s-.5)*i/o+n[0])*a,(-(l-.5)*r/o+n[1])*a)}function Ui(t,i,r,n,o,a){const s=i.tileAnchorPoint.add(new e.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let t=n.mult(a);return r||(t=t.rotate(-o)),yt(s.add(t),i.labelPlaneMatrix,i.getElevation).point}if(r){const e=Tt(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(t),r=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0);return t.add(n.rotate(r))}return t.add(n)}function Wi(t,i,r,n,o,a,s,l,c,u,h,d,p,f){const m=t.text.placedSymbolArray,g=t.text.dynamicLayoutVertexArray,y=t.icon.dynamicLayoutVertexArray,v={};g.clear();for(let x=0;x<m.length;x++){const y=m.get(x),_=y.hidden||!y.crossTileID||t.allowVerticalPlacement&&!y.placedOrientation?null:n[y.crossTileID];if(_){const n=new e.P(y.anchorX,y.anchorY),m={getElevation:f,width:o.width,height:o.height,labelPlaneMatrix:a,lineVertexArray:null,pitchWithMap:r,projection:h,projectionCache:null,tileAnchorPoint:n,translation:d,unwrappedTileID:p},x=r?yt(n,s,f):Tt(n.x,n.y,m),b=vt(o.cameraToCenterDistance,x.signedDistanceFromCamera);let w=e.ai(t.textSizeData,c,y)*b/e.ap;r&&(w*=t.tilePixelRatio/l);const{width:S,height:k,anchor:C,textOffset:T,textBoxScale:A}=_,P=Vi(C,S,k,T,A,w),M=h.getPitchedTextCorrection(o,n.add(new e.P(d[0],d[1])),p),E=Ui(x.point,m,i,P,o.angle,M),I=t.allowVerticalPlacement&&y.placedOrientation===e.ah.vertical?Math.PI/2:0;for(let t=0;t<y.numGlyphs;t++)e.aj(g,E,I);u&&y.associatedIconIndex>=0&&(v[y.associatedIconIndex]={shiftedAnchor:E,angle:I})}else It(y.numGlyphs,g)}if(u){y.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const r=i.get(t);if(r.hidden)It(r.numGlyphs,y);else{const i=v[t];if(i)for(let t=0;t<r.numGlyphs;t++)e.aj(y,i.shiftedAnchor,i.angle);else It(r.numGlyphs,y)}}t.icon.dynamicLayoutVertexBuffer.updateData(y)}t.text.dynamicLayoutVertexBuffer.updateData(g)}function Hi(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Gi(t,i,r,n,o,a,s,l,c,u,h,d){const p=t.context,f=p.gl,m=t.transform,g=Qt(),y="map"===l,v="map"===c,x="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),_=y&&!v&&!x,b=!v&&x,w=!r.layout.get("symbol-sort-key").isConstant();let S=!1;const k=t.depthModeForSublayer(0,Di.ReadOnly),C=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),T=[],A=g.getCircleRadiusCorrection(m);for(const P of n){const n=i.getTile(P),l=n.getBucket(r);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const h=c.programConfigurations.get(r.id),d=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,k=v||0!==m.pitch,M=t.useProgram(Hi(d,o,l),h),E=e.ag(p,m.zoom),I=t.style.map.terrain&&t.style.map.terrain.getTerrainData(P);let z,L,D,R,O=[0,0],B=null;if(o)L=n.glyphAtlasTexture,D=f.LINEAR,z=n.glyphAtlasTexture.size,l.iconsInText&&(O=n.imageAtlasTexture.size,B=n.imageAtlasTexture,R=k||t.options.rotating||t.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const e=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;L=n.imageAtlasTexture,D=d||t.options.rotating||t.options.zooming||e||k?f.LINEAR:f.NEAREST,z=n.imageAtlasTexture.size}const F=Dt(n,1,t.transform.zoom),j=b?P.posMatrix:Ni,N=mt(j,v,y,t.transform,F),V=gt(j,v,y,t.transform,F),U=gt(P.posMatrix,v,y,t.transform,F),W=g.translatePosition(t.transform,n,a,s),H=C&&l.hasTextData(),G="none"!==r.layout.get("icon-text-fit")&&H&&l.hasIconData();if(x){const e=t.style.map.terrain?(e,i)=>t.style.map.terrain.getElevation(P,e,i):null,i="map"===r.layout.get("text-rotation-alignment");_t(l,P.posMatrix,t,o,N,U,v,u,i,g,P.toUnwrapped(),m.width,m.height,W,e)}const q=P.posMatrix,Z=o&&C||G,X=x||Z?Ni:N,Y=V,K=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let $;$=d?l.iconsInText?Ne(p.kind,E,_,v,x,Z,t,q,X,Y,W,z,O,A):je(p.kind,E,_,v,x,Z,t,q,X,Y,W,o,z,!0,A):Fe(p.kind,E,_,v,x,Z,t,q,X,Y,W,o,z,A);const J={program:M,buffers:c,uniformValues:$,atlasTexture:L,atlasTextureIcon:B,atlasInterpolation:D,atlasInterpolationIcon:R,isSDF:d,hasHalo:K};if(w&&l.canOverlap){S=!0;const t=c.segments.get();for(const i of t)T.push({segments:new e.$([i]),sortKey:i.sortKey,state:J,terrainData:I})}else T.push({segments:c.segments,sortKey:0,state:J,terrainData:I})}S&&T.sort(((t,e)=>t.sortKey-e.sortKey));for(const e of T){const i=e.state;if(p.activeTexture.set(f.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,f.CLAMP_TO_EDGE),i.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),i.isSDF){const n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,qi(i.buffers,e.segments,r,t,i.program,k,h,d,n,e.terrainData)),n.u_is_halo=0}qi(i.buffers,e.segments,r,t,i.program,k,h,d,i.uniformValues,e.terrainData)}}function qi(t,e,i,r,n,o,a,s,l,c){const u=r.context;n.draw(u,u.gl.TRIANGLES,o,a,s,Bi.disabled,l,c,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Zi(t,e,i,r,n){if(!i||!r||!r.imageAtlas)return;const o=r.imageAtlas.patternPositions;let a=o[i.to.toString()],s=o[i.from.toString()];if(!a&&s&&(a=s),!s&&a&&(s=a),!a||!s){const t=n.getPaintProperty(e);a=o[t],s=o[t]}a&&s&&t.setConstantPatternPositions(a,s)}function Xi(t,e,i,r,n,o,a){const s=t.context.gl,l="fill-pattern",c=i.paint.get(l),u=c&&c.constantOr(1),h=i.getCrossfadeParameters();let d,p,f,m,g;a?(p=u&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=s.LINES):(p=u?"fillPattern":"fill",d=s.TRIANGLES);const y=c.constantOr(null);for(const v of r){const r=e.getTile(v);if(u&&!r.patternsLoaded())continue;const c=r.getBucket(i);if(!c)continue;const x=c.programConfigurations.get(i.id),_=t.useProgram(p,x),b=t.style.map.terrain&&t.style.map.terrain.getTerrainData(v);u&&(t.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),x.updatePaintBuffers(h)),Zi(x,l,y,r,i);const w=b?v:null,S=t.translatePosMatrix(w?w.posMatrix:v.posMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){m=c.indexBuffer2,g=c.segments2;const e=[s.drawingBufferWidth,s.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Se(S,t,h,r,e):we(S,e)}else m=c.indexBuffer,g=c.segments,f=u?be(S,t,h,r):_e(S);_.draw(t.context,d,n,t.stencilModeForClipping(v),o,Bi.disabled,f,b,i.id,c.layoutVertexBuffer,m,g,i.paint,t.transform.zoom,x)}}function Yi(t,e,i,r,n,o,a){const s=t.context,l=s.gl,c="fill-extrusion-pattern",u=i.paint.get(c),h=u.constantOr(1),d=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),f=u.constantOr(null);for(const m of r){const r=e.getTile(m),u=r.getBucket(i);if(!u)continue;const g=t.style.map.terrain&&t.style.map.terrain.getTerrainData(m),y=u.programConfigurations.get(i.id),v=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",y);h&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(d)),Zi(y,c,f,r,i);const x=t.translatePosMatrix(m.posMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),_=i.paint.get("fill-extrusion-vertical-gradient"),b=h?xe(x,t,_,p,m,d,r):ve(x,t,_,p);v.draw(s,s.gl.TRIANGLES,n,o,a,Bi.backCCW,b,g,i.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,i.paint,t.transform.zoom,y,t.style.map.terrain&&u.centroidVertexBuffer)}}function Ki(t,e,i,r,n,o,a){const s=t.context,l=s.gl,c=i.fbo;if(!c)return;const u=t.useProgram("hillshade"),h=t.style.map.terrain&&t.style.map.terrain.getTerrainData(e);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,n,o,a,Bi.disabled,((t,e,i,r)=>{const n=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color");let s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r?r.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Me(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:o,u_accent:a}})(t,i,r,h?e:null),h,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function $i(t,i,r,n,o,a){const s=t.context,l=s.gl,c=i.dem;if(c&&c.data){const u=c.dim,h=c.stride,d=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(h),i.demTexture){const t=i.demTexture;t.update(d,{premultiply:!1}),t.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new b(s,d,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let p=i.fbo;if(!p){const t=new b(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=i.fbo=s.createFramebuffer(u,u,!0,!1),p.colorAttachment.set(t.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,n,o,a,Bi.disabled,((t,i)=>{const r=i.stride,n=e.F();return e.aO(n,0,e.W,-e.W,0,0,1),e.H(n,n,[0,-e.W,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:i.getUnpackVector()}})(i.tileID,c),null,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ji(t,i,r,n,a,s){const l=n.paint.get("raster-fade-duration");if(!s&&l>0){const n=o.now(),s=(n-t.timeAdded)/l,c=i?(n-i.timeAdded)/l:-1,u=r.getSource(),h=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),p=d&&t.refreshedUponExpiration?1:e.ac(d?s:1-c,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const Qi=new e.aP(1,0,0,1),tr=new e.aP(0,1,0,1),er=new e.aP(0,0,1,1),ir=new e.aP(1,0,1,1),rr=new e.aP(0,1,1,1);function nr(t,e,i,r){ar(t,0,e+i/2,t.transform.width,i,r)}function or(t,e,i,r){ar(t,e-i/2,0,i,t.transform.height,r)}function ar(t,e,i,r,n,o){const a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,i*t.pixelRatio,r*t.pixelRatio,n*t.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function sr(t,i,r){const n=t.context,o=n.gl,a=r.posMatrix,s=t.useProgram("debug"),l=Di.disabled,c=Oi.disabled,u=t.colorModeForRenderPass(),h="$debug",d=t.style.map.terrain&&t.style.map.terrain.getTerrainData(r);n.activeTexture.set(o.TEXTURE0);const p=i.getTileByID(r.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=i.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/t.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=" => ".concat(r.overscaledZ)),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,"".concat(y," ").concat(f,"kB")),s.draw(n,o.TRIANGLES,l,c,zi.alphaBlended,Bi.disabled,Te(a,e.aP.transparent,g),null,h,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments),s.draw(n,o.LINE_STRIP,l,c,u,Bi.disabled,Te(a,e.aP.red),d,h,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments)}function lr(t,e,i){const r=t.context,n=r.gl,o=t.colorModeForRenderPass(),a=new Di(n.LEQUAL,Di.ReadWrite,t.depthRangeFor3D),s=t.useProgram("terrain"),l=e.getTerrainMesh();r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height]);for(const c of i){const i=t.renderToTexture.getTexture(c),u=e.getTerrainData(c.tileID);r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.texture);const h={u_matrix:t.transform.calculatePosMatrix(c.tileID.toUnwrapped()),u_texture:0,u_ele_delta:e.getMeshFrameDelta(t.transform.zoom)};s.draw(r,n.TRIANGLES,a,Oi.disabled,o,Bi.backCCW,h,u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class cr{constructor(t,i){this.context=new Li(t),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:e.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ct.maxUnderzooming+ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ae}resize(t,e,i){if(this.width=Math.floor(t*i),this.height=Math.floor(e*i),this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const r of this.style._order)this.style._layers[r].resize()}setup(){const t=this.context,i=new e.aW;i.emplaceBack(0,0),i.emplaceBack(e.W,0),i.emplaceBack(0,e.W),i.emplaceBack(e.W,e.W),this.tileExtentBuffer=t.createVertexBuffer(i,ue.members),this.tileExtentSegments=e.$.simpleSegment(0,0,4,2);const r=new e.aW;r.emplaceBack(0,0),r.emplaceBack(e.W,0),r.emplaceBack(0,e.W),r.emplaceBack(e.W,e.W),this.debugBuffer=t.createVertexBuffer(r,ue.members),this.debugSegments=e.$.simpleSegment(0,0,4,5);const n=new e.Z;n.emplaceBack(0,0,0,0),n.emplaceBack(e.W,0,e.W,0),n.emplaceBack(0,e.W,0,e.W),n.emplaceBack(e.W,e.W,e.W,e.W),this.rasterBoundsBuffer=t.createVertexBuffer(n,K.members),this.rasterBoundsSegments=e.$.simpleSegment(0,0,4,2);const o=new e.aW;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,ue.members),this.viewportSegments=e.$.simpleSegment(0,0,4,2);const a=new e.aX;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);const s=new e.aY;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);const l=this.context.gl;this.stencilClearMode=new Oi({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=e.F();e.aO(r,0,this.width,this.height,0,0,1),e.J(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,Di.disabled,this.stencilClearMode,zi.disabled,Bi.disabled,Ae(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(zi.disabled),i.setDepthMode(Di.disabled);const n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const o of e){const t=this._tileClippingMaskIDs[o.key]=this.nextStencilID++,e=this.style.map.terrain&&this.style.map.terrain.getTerrainData(o);n.draw(i,r.TRIANGLES,Di.disabled,new Oi({func:r.ALWAYS,mask:0},t,255,r.KEEP,r.KEEP,r.REPLACE),zi.disabled,Bi.disabled,Ae(o.posMatrix),e,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new Oi({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new Oi({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,i=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,n=i[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const t={};for(let i=0;i<n;i++)t[i+r]=new Oi({func:e.GEQUAL,mask:255},i+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=n,[t,i]}return[{[r]:Oi.disabled},i]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new zi([t.CONSTANT_COLOR,t.ONE],new e.aP(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?zi.unblended:zi.alphaBlended}depthModeForSublayer(t,e,i){if(!this.opaquePassEnabledForLayer())return Di.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Di(i||this.context.gl.LEQUAL,e,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(o.now()),this.imageManager.beginFrame();const r=this.style._order,n=this.style.sourceCaches,a={},s={},l={};for(const e in n){const t=n[e];t.used&&t.prepare(this.context),a[e]=t.getVisibleCoordinates(),s[e]=a[e].slice().reverse(),l[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const e of r){const t=this.style._layers[e];if(!t.hasOffscreenPass()||t.isHidden(this.transform.zoom))continue;const i=s[t.source];("custom"===t.type||i.length)&&this.renderLayer(this,n[t.source],t,i)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.aP.black:e.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],e=n[t.source],i=a[t.source];this._renderTileClippingMasks(t,i),this.renderLayer(this,e,t,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],e=n[t.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(t))continue;const i=("symbol"===t.type?l:s)[t.source];this._renderTileClippingMasks(t,a[t.source]),this.renderLayer(this,e,t,i)}if(this.options.showTileBoundaries){const t=function(t,e){let i=null;const r=Object.values(t._layers).flatMap((i=>i.source&&!i.isHidden(e)?[t.sourceCaches[i.source]]:[])),n=r.filter((t=>"vector"===t.getSource().type)),o=r.filter((t=>"vector"!==t.getSource().type)),a=t=>{(!i||i.getSource().maxzoom<t.getSource().maxzoom)&&(i=t)};return n.forEach((t=>a(t))),i||o.forEach((t=>a(t))),i}(this.style,this.transform.zoom);t&&function(t,e,i){for(let r=0;r<i.length;r++)sr(t,e,i[r])}(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;nr(t,t.transform.height-(e.top||0),3,Qi),nr(t,e.bottom||0,3,tr),or(t,e.left||0,3,er),or(t,t.transform.width-(e.right||0),3,ir);const i=t.transform.centerPoint;!function(t,e,i,r){ar(t,e-1,i-10,2,20,r),ar(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,rr)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const i=this.terrainFacilitator.matrix,r=this.transform.projMatrix;let n=this.terrainFacilitator.dirty;n||(n=t?!e.aZ(i,r):!e.a_(i,r)),n||(n=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),n&&(e.a$(i,r),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(t,i){const r=t.context,n=r.gl,o=zi.unblended,a=new Di(n.LEQUAL,Di.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.sourceCache.getRenderableTiles(),c=t.useProgram("terrainDepth");r.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.aP.transparent,depth:1});for(const e of l){const l=i.getTerrainData(e.tileID),u={u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped()),u_ele_delta:i.getMeshFrameDelta(t.transform.zoom)};c.draw(r,n.TRIANGLES,a,Oi.disabled,o,Bi.backCCW,u,l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.map.terrain),function(t,i){const r=t.context,n=r.gl,o=zi.unblended,a=new Di(n.LEQUAL,Di.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.getCoordsTexture(),c=i.sourceCache.getRenderableTiles(),u=t.useProgram("terrainCoords");r.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.aP.transparent,depth:1}),i.coordsIndex=[];for(const e of c){const c=i.getTerrainData(e.tileID);r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,l.texture);const h={u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped()),u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0,u_ele_delta:i.getMeshFrameDelta(t.transform.zoom)};u.draw(r,n.TRIANGLES,a,Oi.disabled,o,Bi.backCCW,h,c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),i.coordsIndex.push(e.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.map.terrain))}renderLayer(t,i,r,n){if(!r.isHidden(this.transform.zoom)&&("background"===r.type||"custom"===r.type||(n||[]).length))switch(this.id=r.id,r.type){case"symbol":!function(t,i,r,n,o){if("translucent"!==t.renderPass)return;const a=Oi.disabled,s=t.colorModeForRenderPass();(r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(t,i,r,n,o,a,s,l,c){const u=i.transform,h=Qt(),d="map"===o,p="map"===a;for(const f of t){const t=n.getTile(f),o=t.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)continue;const a=e.ag(o.textSizeData,u.zoom),m=Dt(t,1,i.transform.zoom),g=mt(f.posMatrix,p,d,i.transform,m),y="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(a){const e=Math.pow(2,u.zoom-t.tileID.overscaledZ),r=i.style.map.terrain?(t,e)=>i.style.map.terrain.getElevation(f,t,e):null,n=h.translatePosition(u,t,s,l);Wi(o,d,p,c,u,g,f.posMatrix,e,a,y,h,n,f.toUnwrapped(),r)}}}(n,t,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Gi(t,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Gi(t,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),i.map.showCollisionBoxes&&(ji(t,i,r,n,!0),ji(t,i,r,n,!1))}(t,i,r,n,this.style.placement.variableOffsets);break;case"circle":!function(t,i,r,n){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.depthModeForSublayer(0,Di.ReadOnly),d=Oi.disabled,p=t.colorModeForRenderPass(),f=[];for(let m=0;m<n.length;m++){const o=n[m],a=i.getTile(o),s=a.getBucket(r);if(!s)continue;const c=s.programConfigurations.get(r.id),u=t.useProgram("circle",c),h=s.layoutVertexBuffer,d=s.indexBuffer,p=t.style.map.terrain&&t.style.map.terrain.getTerrainData(o),g={programConfiguration:c,program:u,layoutVertexBuffer:h,indexBuffer:d,uniformValues:ke(t,o,a,r),terrainData:p};if(l){const t=s.segments.get();for(const i of t)f.push({segments:new e.$([i]),sortKey:i.sortKey,state:g})}else f.push({segments:s.segments,sortKey:0,state:g})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const e of f){const{programConfiguration:i,program:n,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=e.state;n.draw(c,u.TRIANGLES,h,d,p,Bi.disabled,s,l,r.id,o,a,e.segments,r.paint,t.transform.zoom,i)}}(t,i,r,n);break;case"heatmap":!function(t,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=Oi.disabled,l=new zi([a.ONE,a.ONE],e.aP.transparent,[!0,!0,!0,!0]);!function(t,e,i){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1,!1),function(t,e,i,r){var n,o;const a=t.gl,s=null!==(n=t.HALF_FLOAT)&&void 0!==n?n:a.UNSIGNED_BYTE,l=null!==(o=t.RGBA16F)&&void 0!==o?o:a.RGBA;a.texImage2D(a.TEXTURE_2D,0,l,e.width/4,e.height/4,0,a.RGBA,s,null),r.colorAttachment.set(i)}(t,e,o,n)}}(o,t,r),o.clear({color:e.aP.transparent});for(let e=0;e<n.length;e++){const c=n[e];if(i.hasRenderableParent(c))continue;const u=i.getTile(c),h=u.getBucket(r);if(!h)continue;const d=h.programConfigurations.get(r.id),p=t.useProgram("heatmap",d),{zoom:f}=t.transform;p.draw(o,a.TRIANGLES,Di.disabled,s,l,Bi.disabled,Pe(c.posMatrix,u,f,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,t.transform.zoom,d)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const r=t.context,n=r.gl,o=i.heatmapFbo;if(!o)return;r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);let a=i.colorRampTexture;a||(a=i.colorRampTexture=new b(r,i.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,n.TRIANGLES,Di.disabled,Oi.disabled,t.colorModeForRenderPass(),Bi.disabled,((t,i,r,n)=>{const o=e.F();e.aO(o,0,t.width,t.height,0,0,1);const a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(t,i),null,i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}(t,r))}(t,i,r,n);break;case"line":!function(t,i,r,n){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,Di.ReadOnly),l=t.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),h=u.constantOr(1),d=r.paint.get("line-gradient"),p=r.getCrossfadeParameters(),f=h?"linePattern":c?"lineSDF":d?"lineGradient":"line",m=t.context,g=m.gl;let y=!0;for(const v of n){const n=i.getTile(v);if(h&&!n.patternsLoaded())continue;const o=n.getBucket(r);if(!o)continue;const a=o.programConfigurations.get(r.id),x=t.context.program.get(),_=t.useProgram(f,a),w=y||_.program!==x,S=t.style.map.terrain&&t.style.map.terrain.getTerrainData(v),k=u.constantOr(null);if(k&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[k.to.toString()],i=t.patternPositions[k.from.toString()];e&&i&&a.setConstantPatternPositions(e,i)}const C=S?v:null,T=h?ze(t,n,r,p,C):c?Le(t,n,r,c,p,C):d?Ie(t,n,r,o.lineClipsArray.length,C):Ee(t,n,r,C);if(h)m.activeTexture.set(g.TEXTURE0),n.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),a.updatePaintBuffers(p);else if(c&&(w||t.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),t.lineAtlas.bind(m);else if(d){const n=o.gradients[r.id];let a=n.texture;if(r.gradientVersion!==n.version){let s=256;if(r.stepInterpolant){const r=i.getSource().maxzoom,n=v.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-v.canonical.z):1;s=e.ac(e.aU(o.maxLineLength/e.W*1024*n),256,m.maxTextureSize)}n.gradient=e.aV({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:n.gradient||void 0,clips:o.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new b(m,n.gradient,g.RGBA),n.version=r.gradientVersion,a=n.texture}m.activeTexture.set(g.TEXTURE0),a.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}_.draw(m,g.TRIANGLES,s,t.stencilModeForClipping(v),l,Bi.disabled,T,S,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,a,o.layoutVertexBuffer2),y=!1}}(t,i,r,n);break;case"fill":!function(t,i,r,n){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.aP.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const e=t.depthModeForSublayer(1,"opaque"===t.renderPass?Di.ReadWrite:Di.ReadOnly);Xi(t,i,r,n,e,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const e=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Di.ReadOnly);Xi(t,i,r,n,e,s,!0)}}(t,i,r,n);break;case"fill-extrusion":!function(t,e,i,r){const n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){const o=new Di(t.context.gl.LEQUAL,Di.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))Yi(t,e,i,r,o,Oi.disabled,zi.disabled),Yi(t,e,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const n=t.colorModeForRenderPass();Yi(t,e,i,r,o,Oi.disabled,n)}}}(t,i,r,n);break;case"hillshade":!function(t,e,i,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const n=t.context,o=t.depthModeForSublayer(0,Di.ReadOnly),a=t.colorModeForRenderPass(),[s,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r];for(const c of l){const r=e.getTile(c);void 0!==r.needsHillshadePrepare&&r.needsHillshadePrepare&&"offscreen"===t.renderPass?$i(t,r,i,o,Oi.disabled,a):"translucent"===t.renderPass&&Ki(t,c,r,i,o,s[c.overscaledZ],a)}n.viewport.set([0,0,t.width,t.height])}(t,i,r,n);break;case"raster":!function(t,e,i,r){if("translucent"!==t.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),[c,u]=a instanceof $?[{},r]:t.stencilConfigForOverlap(r),h=u[u.length-1].overscaledZ,d=!t.options.moving;for(const p of u){const r=t.depthModeForSublayer(p.overscaledZ-h,1===i.paint.get("raster-opacity")?Di.ReadWrite:Di.ReadOnly,o.LESS),u=e.getTile(p);u.registerFadeDuration(i.paint.get("raster-fade-duration"));const f=e.findLoadedParent(p,0),m=e.findLoadedSibling(p),g=Ji(u,f||m||null,e,i,t.transform,t.style.map.terrain);let y,v;const x="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),u.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),f?(f.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,f.tileID.overscaledZ-u.tileID.overscaledZ),v=[u.tileID.canonical.x*y%1,u.tileID.canonical.y*y%1]):u.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const _=t.style.map.terrain&&t.style.map.terrain.getTerrainData(p),b=_?p:null,w=b?b.posMatrix:t.transform.calculatePosMatrix(p.toUnwrapped(),d),S=Oe(w,v||[0,0],y||1,g,i);a instanceof $?s.draw(n,o.TRIANGLES,r,Oi.disabled,l,Bi.disabled,S,_,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,r,c[p.overscaledZ],l,Bi.disabled,S,_,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}(t,i,r,n);break;case"background":!function(t,e,i,r){const n=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;const a=t.context,s=a.gl,l=t.transform,c=l.tileSize,u=i.paint.get("background-pattern");if(t.isPatternMissing(u))return;const h=!u&&1===n.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const d=Oi.disabled,p=t.depthModeForSublayer(0,"opaque"===h?Di.ReadWrite:Di.ReadOnly),f=t.colorModeForRenderPass(),m=t.useProgram(u?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:c,terrain:t.style.map.terrain});u&&(a.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));const y=i.getCrossfadeParameters();for(const v of g){const e=r?v.posMatrix:t.transform.calculatePosMatrix(v.toUnwrapped()),l=u?Ue(e,o,t,u,{tileID:v,tileSize:c},y):Ve(e,o,n),h=t.style.map.terrain&&t.style.map.terrain.getTerrainData(v);m.draw(a,s.TRIANGLES,p,d,f,Bi.disabled,l,h,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}(t,0,r,n);break;case"custom":!function(t,e,i){const r=t.context,n=i.implementation;if("offscreen"===t.renderPass){const e=n.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Oi.disabled);const e="3d"===n.renderingMode?new Di(t.context.gl.LEQUAL,Di.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Di.ReadOnly);r.setDepthMode(e),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}(t,0,r)}}translatePosMatrix(t,i,r,n,o){if(!r[0]&&!r[1])return t;const a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[o?r[0]:Dt(i,r[0],this.transform.zoom),o?r[1]:Dt(i,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.H(l,t,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}useProgram(t,e){this.cache=this.cache||{};const i=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new ge(this.context,de[t],e,We[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:e}=this.context.gl;return this.width!==t||this.height!==e}}class ur{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,i,r){const n=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const o=1/(r=e.af([],r,t))[3]/i*n;return e.b0(r,r,[o,o,1/r[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],l=i[2];return t[0]=n*l-o*s,t[1]=o*a-r*l,t[2]=r*s-n*a,t}([],y([],o[t[0]],o[t[1]]),y([],o[t[2]],o[t[1]]))),i=-((r=e)[0]*(n=o[t[1]])[0]+r[1]*n[1]+r[2]*n[2]);var r,n;return e.concat(i)}));return new ur(o,a)}}class hr{constructor(t,e){this.min=t,this.max=e,this.center=function(t,e,i){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}([],this.min,this.max))}quadrant(t){const e=[t%2==0,t<2],i=m(this.min),r=m(this.max);for(let n=0;n<e.length;n++)i[n]=e[n]?this.min[n]:this.center[n],r[n]=e[n]?this.center[n]:this.max[n];return r[2]=this.max[2],new hr(i,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let n=0;n<t.planes.length;n++){const o=t.planes[n];let a=0;for(let t=0;t<i.length;t++)e.b1(o,i[t])>=0&&a++;if(0===a)return 0;a!==i.length&&(r=!1)}if(r)return 2;for(let e=0;e<3;e++){let i=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let n=0;n<t.points.length;n++){const o=t.points[n][e]-this.min[e];i=Math.min(i,o),r=Math.max(r,o)}if(r<0||i>this.max[e]-this.min[e])return 0}return 1}}class dr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r}interpolate(t,i,r){return null!=i.top&&null!=t.top&&(this.top=e.z.number(t.top,i.top,r)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.z.number(t.bottom,i.bottom,r)),null!=i.left&&null!=t.left&&(this.left=e.z.number(t.left,i.left,r)),null!=i.right&&null!=t.right&&(this.right=e.z.number(t.right,i.right,r)),this}getCenter(t,i){const r=e.ac((this.left+t-this.right)/2,0,t),n=e.ac((this.top+i-this.bottom)/2,0,i);return new e.P(r,n)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new dr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const pr=85.051129;class fr{constructor(t,i,r,n,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new dr,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const t=new fr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const i=-e.b2(t,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=function(){var t=new e.A(4);return e.A!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}(),function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);t[0]=r*l+o*s,t[1]=n*l+a*s,t[2]=r*-s+o*l,t[3]=n*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.tileZoom=Math.max(0,Math.floor(e)),this.scale=this.zoomScale(e),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(t){const i=[new e.b3(0,t)];if(this._renderWorldCopies){const r=this.pointCoordinate(new e.P(0,0)),n=this.pointCoordinate(new e.P(this.width,0)),o=this.pointCoordinate(new e.P(this.width,this.height)),a=this.pointCoordinate(new e.P(0,this.height)),s=Math.floor(Math.min(r.x,n.x,o.x,a.x)),l=Math.floor(Math.max(r.x,n.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&i.push(new e.b3(u,t))}return i}coveringTiles(t){var i,r;let n=this.coveringZoomLevel(t);const o=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=e.Y.fromLngLat(this.center),l=Math.pow(2,n),c=[l*a.x,l*a.y,0],u=[l*s.x,l*s.y,0],h=ur.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n);let d=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=n);const p=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,f=t=>({aabb:new hr([t*l,0,0],[(t+1)*l,l,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),m=[],g=[],y=n,x=t.reparseOverscaled?o:n;if(this._renderWorldCopies)for(let e=1;e<=3;e++)m.push(f(-e)),m.push(f(e));for(m.push(f(0));m.length>0;){const n=m.pop(),o=n.x,a=n.y;let s=n.fullyVisible;if(!s){const t=n.aabb.intersects(h);if(0===t)continue;s=2===t}const l=t.terrain?c:u,f=n.aabb.distanceX(l),_=n.aabb.distanceY(l),b=Math.max(Math.abs(f),Math.abs(_));if(n.zoom===y||b>p+(1<<y-n.zoom)-2&&n.zoom>=d){const t=y-n.zoom,i=c[0]-.5-(o<<t),r=c[1]-.5-(a<<t);g.push({tileID:new e.Q(n.zoom===y?x:n.zoom,n.wrap,n.zoom,o,a),distanceSq:v([u[0]-.5-o,u[1]-.5-a]),tileDistanceToCamera:Math.sqrt(i*i+r*r)})}else for(let c=0;c<4;c++){const l=(o<<1)+c%2,u=(a<<1)+(c>>1),h=n.zoom+1;let d=n.aabb.quadrant(c);if(t.terrain){const o=new e.Q(h,n.wrap,h,l,u),a=t.terrain.getMinMaxElevation(o),s=null!==(i=a.minElevation)&&void 0!==i?i:this.elevation,c=null!==(r=a.maxElevation)&&void 0!==r?r:this.elevation;d=new hr([d.min[0],d.min[1],s],[d.max[0],d.max[1],c])}m.push({aabb:d,zoom:h,x:l,y:u,wrap:n.wrap,fullyVisible:s})}}return g.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const i=e.ac(t.lat,-85.051129,pr);return new e.P(e.N(t.lng)*this.worldSize,e.O(i)*this.worldSize)}unproject(t){return new e.Y(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const i=this.elevation,r=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,n=this.pointLocation(this.centerPoint,t),o=t.getElevationForLngLatZoom(n,this.tileZoom);if(!(this.elevation-o))return;const a=r+i-o,s=Math.cos(this._pitch)*this.cameraToCenterDistance/a/e.b4(1,n.lat),l=this.scaleZoom(s/this.tileSize);this._elevation=o,this._center=n,this.zoom=l}setLocationAtPoint(t,i){const r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.Y(o.x-(r.x-n.x),o.y-(r.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),e.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(t){return e.Y.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,i){if(i){const e=i.pointCoordinate(t);if(null!=e)return e}const r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];e.af(r,r,this.pixelMatrixInverse),e.af(n,n,this.pixelMatrixInverse);const o=r[3],a=n[3],s=r[1]/o,l=n[1]/a,c=r[2]/o,u=n[2]/a,h=c===u?0:(0-c)/(u-c);return new e.Y(e.z.number(r[0]/o,n[0]/a,h)/this.worldSize,e.z.number(s,l,h)/this.worldSize)}coordinatePoint(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix;const n=[t.x*this.worldSize,t.y*this.worldSize,i,1];return e.af(n,n,r),new e.P(n[0]/n[3],n[1]/n[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return(new H).extend(this.pointLocation(new e.P(0,t))).extend(this.pointLocation(new e.P(this.width,t))).extend(this.pointLocation(new e.P(this.width,this.height))).extend(this.pointLocation(new e.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new H([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,pr])}calculatePosMatrix(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];const o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,l=e.an(new Float64Array(16));return e.H(l,l,[s*a,o.y*a,0]),e.J(l,l,[a/e.W,a/e.W,1]),e.K(l,i?this.alignedProjMatrix:this.projMatrix,l),n[r]=new Float32Array(l),n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,i){i=e.ac(+i,this.minZoom,this.maxZoom);const r={center:new e.M(t.lng,t.lat),zoom:i};let n=this.lngRange;if(!this._renderWorldCopies&&null===n){const t=180-1e-10;n=[-t,t]}const o=this.tileSize*this.zoomScale(r.zoom);let a=0,s=o,l=0,c=o,u=0,h=0;const{x:d,y:p}=this.size;if(this.latRange){const t=this.latRange;a=e.O(t[1])*o,s=e.O(t[0])*o,s-a<p&&(u=p/(s-a))}n&&(l=e.b2(e.N(n[0])*o,0,o),c=e.b2(e.N(n[1])*o,0,o),c<l&&(c+=o),c-l<d&&(h=d/(c-l)));const{x:f,y:m}=this.project.call({worldSize:o},t);let g,y;const v=Math.max(h||0,u||0);if(v){const t=new e.P(h?(c+l)/2:f,u?(s+a)/2:m);return r.center=this.unproject.call({worldSize:o},t).wrap(),r.zoom+=this.scaleZoom(v),r}if(this.latRange){const t=p/2;m-t<a&&(y=a+t),m+t>s&&(y=s-t)}if(n){const t=(l+c)/2;let i=f;this._renderWorldCopies&&(i=e.b2(f,t-o/2,t+o/2));const r=d/2;i-r<l&&(g=l+r),i+r>c&&(g=c-r)}if(void 0!==g||void 0!==y){const t=new e.P(null!=g?g:f,null!=y?y:m);r.center=this.unproject.call({worldSize:o},t).wrap()}return r}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:e,zoom:i}=this.getConstrained(this.center,this.zoom);this.center=e,this.zoom=i,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,i=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=e.b4(1,this.center.lat)*this.worldSize;let n=e.an(new Float64Array(16));e.J(n,n,[this.width/2,-this.height/2,1]),e.H(n,n,[1,-1,0]),this.labelPlaneMatrix=n,n=e.an(new Float64Array(16)),e.J(n,n,[1,-1,1]),e.H(n,n,[-1,-1,0]),e.J(n,n,[2/this.width,2/this.height,1]),this.glCoordMatrix=n;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),a=Math.min(this.elevation,this.minElevationForCurrentTile),s=o-a*this._pixelPerMeter/Math.cos(this._pitch),l=a<0?s:o,c=Math.PI/2+this._pitch,u=this._fov*(.5+t.y/this.height),h=Math.sin(u)*l/Math.sin(e.ac(Math.PI-c-u,.01,Math.PI-.01)),d=this.getHorizon(),p=2*Math.atan(d/this.cameraToCenterDistance)*(.5+t.y/(2*d)),f=Math.sin(p)*l/Math.sin(e.ac(Math.PI-c-p,.01,Math.PI-.01)),m=Math.min(h,f),g=1.01*(Math.cos(Math.PI/2-this._pitch)*m+l),y=this.height/50;n=new Float64Array(16),e.b5(n,this._fov,this.width/this.height,y,g),n[8]=2*-t.x/this.width,n[9]=2*t.y/this.height,e.J(n,n,[1,-1,1]),e.H(n,n,[0,0,-this.cameraToCenterDistance]),e.b6(n,n,this._pitch),e.ad(n,n,this.angle),e.H(n,n,[-i,-r,0]),this.mercatorMatrix=e.J([],n,[this.worldSize,this.worldSize,this.worldSize]),e.J(n,n,[1,1,this._pixelPerMeter]),this.pixelMatrix=e.K(new Float64Array(16),this.labelPlaneMatrix,n),e.H(n,n,[0,0,-this.elevation]),this.projMatrix=n,this.invProjMatrix=e.as([],n),this.pixelMatrix3D=e.K(new Float64Array(16),this.labelPlaneMatrix,n);const v=this.width%2/2,x=this.height%2/2,_=Math.cos(this.angle),b=Math.sin(this.angle),w=i-Math.round(i)+_*v+b*x,S=r-Math.round(r)+_*x+b*v,k=new Float64Array(n);if(e.H(k,k,[w>.5?w-1:w,S>.5?S-1:S,0]),this.alignedProjMatrix=k,n=e.as(new Float64Array(16),this.pixelMatrix),!n)throw new Error("failed to invert matrix");this.pixelMatrixInverse=n,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new e.P(0,0)),i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.af(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.P(0,t))}getCameraQueryGeometry(t){const i=this.getCameraPoint();if(1===t.length)return[t[0],i];{let r=i.x,n=i.y,o=i.x,a=i.y;for(const e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y);return[new e.P(r,n),new e.P(o,n),new e.P(o,a),new e.P(r,a),new e.P(r,n)]}}lngLatToCameraDepth(t,i){const r=this.locationCoordinate(t),n=[r.x*this.worldSize,r.y*this.worldSize,i,1];return e.af(n,n,this.projMatrix),n[2]/n[3]}}function mr(t,e){var i=this;let r,n=!1,o=null,a=null;const s=()=>{o=null,n&&(t.apply(a,r),o=setTimeout(s,e),n=!1)};return function(){for(var t=arguments.length,e=new Array(t),l=0;l<t;l++)e[l]=arguments[l];return n=!0,a=i,r=e,o||s(),o}}class gr{constructor(t){this._getCurrentHash=()=>{const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")},this._onHashChange=()=>{const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}},this._updateHash=mr(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(e.lng*n)/n,a=Math.round(e.lat*n)/n,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=t?"/".concat(o,"/").concat(a,"/").concat(i):"".concat(i,"/").concat(a,"/").concat(o),(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/".concat(Math.round(l))),this._hashName){const t=this._hashName;let e=!1;const i=window.location.hash.slice(1).split("&").map((i=>{const r=i.split("=")[0];return r===t?(e=!0,"".concat(r,"=").concat(c)):i})).filter((t=>t));return e||i.push("".concat(t,"=").concat(c)),"#".concat(i.join("&"))}return"#".concat(c)}}const yr={linearity:.3,easing:e.b7(0,0,.3,1)},vr=e.e({deceleration:2500,maxSpeed:1400},yr),xr=e.e({deceleration:20,maxSpeed:1400},yr),_r=e.e({deceleration:1e3,maxSpeed:360},yr),br=e.e({deceleration:1e3,maxSpeed:90},yr);class wr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,e=o.now();for(;t.length>0&&e-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(i.pan.mag()){const o=kr(i.pan.mag(),r,e.e({},vr,t||{}));n.offset=i.pan.mult(o.amount/i.pan.mag()),n.center=this._map.transform.center,Sr(n,o)}if(i.zoom){const t=kr(i.zoom,r,xr);n.zoom=this._map.transform.zoom+t.amount,Sr(n,t)}if(i.bearing){const t=kr(i.bearing,r,_r);n.bearing=this._map.transform.bearing+e.ac(t.amount,-179,179),Sr(n,t)}if(i.pitch){const t=kr(i.pitch,r,br);n.pitch=this._map.transform.pitch+t.amount,Sr(n,t)}if(n.zoom||n.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;n.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),e.e(n,{noMoveStart:!0})}}function Sr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function kr(t,i,r){const{maxSpeed:n,linearity:o,deceleration:a}=r,s=e.ac(t*o/(i/1e3),-n,n),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class Cr extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=a.mousePos(i.getCanvas(),r),s=i.unproject(o);super(t,e.e({point:o,lngLat:s,originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}}class Tr extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,r){const n="touchend"===t?r.changedTouches:r.touches,o=a.touchPos(i.getCanvasContainer(),n),s=o.map((t=>i.unproject(t))),l=o.reduce(((t,e,i,r)=>t.add(e.div(r.length))),new e.P(0,0));super(t,{points:o,point:l,lngLats:s,lngLat:i.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class Ar extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}}class Pr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Ar(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new Cr(t.type,this._map,t))}mouseup(t){this._map.fire(new Cr(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Cr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Cr(t.type,this._map,t))}mouseover(t){this._map.fire(new Cr(t.type,this._map,t))}mouseout(t){this._map.fire(new Cr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Tr(t.type,this._map,t))}touchmove(t){this._map.fire(new Tr(t.type,this._map,t))}touchend(t){this._map.fire(new Tr(t.type,this._map,t))}touchcancel(t){this._map.fire(new Tr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Cr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Cr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Er{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(e.P.convert(t),this._map.terrain)}}class Ir{constructor(t,e){this._map=t,this._tr=new Er(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(a.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=i,this._box||(this._box=a.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const n=Math.min(r.x,i.x),o=Math.max(r.x,i.x),s=Math.min(r.y,i.y),l=Math.max(r.y,i.y);a.setTransform(this._box,"translate(".concat(n,"px,").concat(s,"px)")),this._box.style.width=o-n+"px",this._box.style.height=l-s+"px"}mouseupWindow(t,i){if(!this._active)return;if(0!==t.button)return;const r=this._startPos,n=i;if(this.reset(),a.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new e.k("boxzoomend",{originalEvent:t})),{cameraAnimation:t=>t.fitScreenCoordinates(r,n,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,i){return this._map.fire(new e.k(t,{originalEvent:i}))}}function zr(t,e){if(t.length!==e.length)throw new Error("The number of touches and points are not equal - touches ".concat(t.length,", points ").concat(e.length));const i={};for(let r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}class Lr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const i=new e.P(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=zr(r,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const r=zr(i,e);for(const n in this.touches){const t=r[n];(!t||t.dist(this.touches[n])>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class Dr{constructor(t){this.singleTap=new Lr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const r=this.singleTap.touchend(t,e,i);if(r){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(r)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Rr{constructor(t){this._tr=new Er(t),this._zoomIn=new Dr({numTouches:1,numTaps:2}),this._zoomOut=new Dr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const r=this._zoomIn.touchend(t,e,i),n=this._zoomOut.touchend(t,e,i),o=this._tr;return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(r)},{originalEvent:t})}):n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(n)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Or{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(){const t=this._moveFunction(...arguments);if(t.bearingDelta||t.pitchDelta||t.around||t.panDelta)return this._active=!0,t}dragStart(t,e){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=e.length?e[0]:e,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,e){if(!this.isEnabled())return;const i=this._lastPoint;if(!i)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const r=e.length?e[0]:e;return!this._moved&&r.dist(i)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=r,this._move(i,r))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&a.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Br={0:1,2:2};class Fr{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const e=a.mouseButton(t);this._eventButton=e}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(t,e){const i=Br[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton)}isValidEndEvent(t){return a.mouseButton(t)===this._eventButton}}class jr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return 1===t.targetTouches.length}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const Nr=t=>{t.mousedown=t.dragStart,t.mousemoveWindow=t.dragMove,t.mouseup=t.dragEnd,t.contextmenu=t=>{t.preventDefault()}},Vr=t=>{let{enable:e,clickTolerance:i,bearingDegreesPerPixelMoved:r=.8}=t;const n=new Fr({checkCorrectEvent:t=>0===a.mouseButton(t)&&t.ctrlKey||2===a.mouseButton(t)});return new Or({clickTolerance:i,move:(t,e)=>({bearingDelta:(e.x-t.x)*r}),moveStateManager:n,enable:e,assignEvents:Nr})},Ur=t=>{let{enable:e,clickTolerance:i,pitchDegreesPerPixelMoved:r=-.5}=t;const n=new Fr({checkCorrectEvent:t=>0===a.mouseButton(t)&&t.ctrlKey||2===a.mouseButton(t)});return new Or({clickTolerance:i,move:(t,e)=>({pitchDelta:(e.y-t.y)*r}),moveStateManager:n,enable:e,assignEvents:Nr})};class Wr{constructor(t,e){this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._active&&!(i.length<this.minTouchs()))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,i,r){r.length>0&&(this._active=!0);const n=zr(r,i),o=new e.P(0,0),a=new e.P(0,0);let s=0;for(const e in n){const t=n[e],i=this._touches[e];i&&(o._add(t),a._add(t.sub(i)),s++,n[e]=t)}if(this._touches=n,s<this.minTouchs()||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[r,n]=this._firstTwoTouches,o=Gr(i,e,r),a=Gr(i,e,n);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;const[r,n]=this._firstTwoTouches,o=Gr(i,e,r),s=Gr(i,e,n);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Gr(t,e,i){for(let r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function qr(t,e){return Math.log(t/e)/Math.LN2}class Zr extends Hr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(qr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qr(this._distance,i),pinchAround:e}}}function Xr(t,e){return 180*t.angleWith(e)/Math.PI}class Yr extends Hr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e,i){const r=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xr(this._vector,r),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=Xr(t,this._startVector);return Math.abs(i)<e}}function Kr(t){return Math.abs(t.y)>Math.abs(t.x)}class $r extends Hr{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,i){super.touchstart(t,e,i),this._currentTouchCount=i.length}_start(t){this._lastPoints=t,Kr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}):void 0}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,n=e.mag()>=2;if(!r&&!n)return;if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Kr(t)&&Kr(e)&&o}}const Jr={panStep:100,bearingStep:15,pitchStep:10};class Qr{constructor(t){this._tr=new Er(t);const e=Jr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,r=0,n=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:a=>{const s=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:tn,zoom:e?Math.round(s.zoom)+e*(t.shiftKey?2:1):s.zoom,bearing:s.bearing+i*this._bearingStep,pitch:s.pitch+r*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:s.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function tn(t){return t*(2-t)}const en=4.000244140625;class rn{constructor(t,e){this._onTimeout=t=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},this._map=t,this._tr=new Er(t),this._triggerRenderFrame=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map.cooperativeGestures.isEnabled()&&!t[this._map.cooperativeGestures._bypassKey])return;let e=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const i=o.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%en==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=a.mousePos(this._map.getCanvas(),t),r=this._tr;this._around=i.y>r.transform.height/2-r.transform.getHorizon()?e.M.convert(this._aroundCenter?r.center:r.unproject(i)):e.M.convert(r.center),this._aroundPoint=r.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._tr.transform;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>en?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==i&&(i=1/i);const r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:t.zoom,r=this._startZoom,n=this._easing;let a,s=!1;if("wheel"===this._type&&r&&n){const t=Math.min((o.now()-this._lastWheelEventTime)/200,1),l=n(t);a=e.z.number(r,i,l),t<1?this._frameId||(this._frameId=!0):s=!0}else a=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.b8;if(this._prevEase){const t=this._prevEase,r=(o.now()-t.start)/t.duration,n=t.easing(r+.01)-t.easing(r),a=.27/Math.sqrt(n*n+1e-4)*.01,s=Math.sqrt(.0729-a*a);i=e.b7(a,s,.25,1)}return this._prevEase={start:o.now(),duration:t,easing:i},i}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class nn{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class on{constructor(t){this._tr=new Er(t),this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class an{constructor(){this._tap=new Dr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,e,i){if(!this._swipePoint)if(this._tapTime){const r=e[0],n=t.timeStamp-this._tapTime<500,o=this._tapPoint.dist(r)<30;n&&o?i.length>0&&(this._swipePoint=r,this._swipeTouch=i[0].identifier):this.reset()}else this._tap.touchstart(t,e,i)}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){if(this._tapTime)this._swipePoint&&0===i.length&&this.reset();else{const r=this._tap.touchend(t,e,i);r&&(this._tapTime=t.timeStamp,this._tapPoint=r)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sn{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ln{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class cn{constructor(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class un{constructor(t,e){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=t,this._options=e,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=a.create("div","maplibregl-cooperative-gesture-screen",t);let e=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(e=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const i=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),r=document.createElement("div");r.className="maplibregl-desktop-message",r.textContent=e,this._container.appendChild(r);const n=document.createElement("div");n.className="maplibregl-mobile-message",n.textContent=i,this._container.appendChild(n),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(a.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(t){this._onCooperativeGesture(1===t.touches.length)}wheel(t){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!t[this._bypassKey])}_onCooperativeGesture(t){this._enabled&&t&&(this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const hn=t=>t.zoom||t.drag||t.pitch||t.rotate;class dn extends e.k{}function pn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class fn{constructor(t,e){this.handleWindowEvent=t=>{this.handleEvent(t,"".concat(t.type,"Window"))},this.handleEvent=(t,e)=>{if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},n={},o={},s=t.touches,l=s?this._getMapTouches(s):void 0,c=l?a.touchPos(this._map.getCanvas(),l):a.mousePos(this._map.getCanvas(),t);for(const{handlerName:a,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let s;this._blockedByActive(o,p,a)?d.reset():d[e||t.type]&&(s=d[e||t.type](t,c,l),this.mergeHandlerResult(r,n,s,a,i),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||d.isActive())&&(o[a]=d)}const u={};for(const a in this._previousActiveHandlers)o[a]||(u[a]=i);this._previousActiveHandlers=o,(Object.keys(u).length||pn(r))&&(this._changes.push([r,n,u]),this._triggerRenderFrame()),(Object.keys(o).length||pn(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wr(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[window,"blur",void 0]];for(const[r,n,o]of this._listeners)a.addEventListener(r,n,r===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[t,e,i]of this._listeners)a.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Pr(e,t));const r=e.boxZoom=new Ir(e,t);this._add("boxZoom",r),t.interactive&&t.boxZoom&&r.enable();const n=e.cooperativeGestures=new un(e,t.cooperativeGestures);this._add("cooperativeGestures",n),t.cooperativeGestures&&n.enable();const o=new Rr(e),s=new on(e);e.doubleClickZoom=new nn(s,o),this._add("tapZoom",o),this._add("clickZoom",s),t.interactive&&t.doubleClickZoom&&e.doubleClickZoom.enable();const l=new an;this._add("tapDragZoom",l);const c=e.touchPitch=new $r(e);this._add("touchPitch",c),t.interactive&&t.touchPitch&&e.touchPitch.enable(t.touchPitch);const u=Vr(t),h=Ur(t);e.dragRotate=new ln(t,u,h),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]),t.interactive&&t.dragRotate&&e.dragRotate.enable();const d=(t=>{let{enable:e,clickTolerance:i}=t;const r=new Fr({checkCorrectEvent:t=>0===a.mouseButton(t)&&!t.ctrlKey});return new Or({clickTolerance:i,move:(t,e)=>({around:e,panDelta:e.sub(t)}),activateOnStart:!0,moveStateManager:r,enable:e,assignEvents:Nr})})(t),p=new Wr(t,e);e.dragPan=new sn(i,d,p),this._add("mousePan",d),this._add("touchPan",p,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&e.dragPan.enable(t.dragPan);const f=new Yr,m=new Zr;e.touchZoomRotate=new cn(i,m,f,l),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&e.touchZoomRotate.enable(t.touchZoomRotate);const g=e.scrollZoom=new rn(e,(()=>this._triggerRenderFrame()));this._add("scrollZoom",g,["mousePan"]),t.interactive&&t.scrollZoom&&e.scrollZoom.enable(t.scrollZoom);const y=e.keyboard=new Qr(e);this._add("keyboard",y),t.interactive&&t.keyboard&&e.keyboard.enable(),this._add("blockableMapEvent",new Mr(e))}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(hn(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}mergeHandlerResult(t,i,r,n,o){if(!r)return;e.e(t,r);const a={handlerName:n,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(i.zoom=a),void 0!==r.panDelta&&(i.drag=a),void 0!==r.pitchDelta&&(i.pitch=a),void 0!==r.bearingDelta&&(i.rotate=a)}_applyChanges(){const t={},i={},r={};for(const[n,o,a]of this._changes)n.panDelta&&(t.panDelta=(t.panDelta||new e.P(0,0))._add(n.panDelta)),n.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(t.around=n.around),void 0!==n.pinchAround&&(t.pinchAround=n.pinchAround),n.noInertia&&(t.noInertia=n.noInertia),e.e(i,o),e.e(r,a);this._updateMapTransform(t,i,r),this._changes=[]}_updateMapTransform(t,e,i){const r=this._map,n=r._getTransformForUpdate(),o=r.terrain;if(!(pn(t)||o&&this._terrainMovement))return this._fireEvents(e,i,!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:c,around:u,pinchAround:h}=t;void 0!==h&&(u=h),r._stop(!0),u=u||r.transform.centerPoint;const d=n.pointLocation(a?u.sub(a):u);l&&(n.bearing+=l),c&&(n.pitch+=c),s&&(n.zoom+=s),o?this._terrainMovement||!e.drag&&!e.zoom?e.drag&&this._terrainMovement?n.center=n.pointLocation(n.centerPoint.sub(a)):n.setLocationAtPoint(d,u):(this._terrainMovement=!0,this._map._elevationFreeze=!0,n.setLocationAtPoint(d,u)):n.setLocationAtPoint(d,u),r._applyUpdatedTransform(n),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)}_fireEvents(t,i,r){const n=hn(this._eventsInProgress),a=hn(t),s={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(s["".concat(e,"start")]=i),this._eventsInProgress[e]=t[e]}!n&&a&&this._fireEvent("movestart",a.originalEvent);for(const e in s)this._fireEvent(e,s[e]);a&&this._fireEvent("move",a.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i)}const l={};let c;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],c=i[t]||r,l["".concat(e,"end")]=c)}for(const e in l)this._fireEvent(e,l[e]);const u=hn(this._eventsInProgress),h=(n||a)&&!u;if(h&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),r&&h){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;!t||!t.essential&&o.prefersReducedMotion?(this._map.fire(new e.k("moveend",{originalEvent:c})),i(this._map.getBearing())&&this._map.resetNorth()):(i(t.bearing||this._map.getBearing())&&(t.bearing=0),t.freezeElevation=!0,this._map.easeTo(t,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(t,i){this._map.fire(new e.k(t,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new dn("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class mn extends e.E{constructor(t,e){super(),this._renderFrameCallback=()=>{const t=Math.min((o.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new e.M(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(t,i,r){return t=e.P.convert(t).mult(-1),this.panTo(this.transform.center,e.e({offset:t},i),r)}panTo(t,i,r){return this.easeTo(e.e({center:t},i),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(t,i,r){return this.easeTo(e.e({zoom:t},i),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(t,i,r){return this.easeTo(e.e({bearing:t},i),r)}resetNorth(t,i){return this.rotateTo(0,e.e({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.e({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(t,e){t=H.convert(t);const i=e&&e.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),i,e)}_cameraForBoxAndBearing(t,i,r,n){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=e.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){const t=n.padding;n.padding={top:t,bottom:t,right:t,left:t}}n.padding=e.e(o,n.padding);const a=this.transform,s=a.padding,l=new H(t,i),c=a.project(l.getNorthWest()),u=a.project(l.getNorthEast()),h=a.project(l.getSouthEast()),d=a.project(l.getSouthWest()),p=e.b9(-r),f=c.rotate(p),m=u.rotate(p),g=h.rotate(p),y=d.rotate(p),v=new e.P(Math.max(f.x,m.x,y.x,g.x),Math.max(f.y,m.y,y.y,g.y)),x=new e.P(Math.min(f.x,m.x,y.x,g.x),Math.min(f.y,m.y,y.y,g.y)),_=v.sub(x),b=(a.width-(s.left+s.right+n.padding.left+n.padding.right))/_.x,w=(a.height-(s.top+s.bottom+n.padding.top+n.padding.bottom))/_.y;if(w<0||b<0)return void e.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const S=Math.min(a.scaleZoom(a.scale*Math.min(b,w)),n.maxZoom),k=e.P.convert(n.offset),C=new e.P((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(e.b9(r)),T=k.add(C).mult(a.scale/a.zoomScale(S));return{center:a.unproject(c.add(h).div(2).sub(T)),zoom:S,bearing:r}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}fitScreenCoordinates(t,i,r,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.P.convert(t)),this.transform.pointLocation(e.P.convert(i)),r,n),n,o)}_fitInternal(t,i,r){return t?(delete(i=e.e(t,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this}jumpTo(t,i){this.stop();const r=this._getTransformForUpdate();let n=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.M.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this._applyUpdatedTransform(r),this.fire(new e.k("movestart",i)).fire(new e.k("move",i)),n&&this.fire(new e.k("zoomstart",i)).fire(new e.k("zoom",i)).fire(new e.k("zoomend",i)),o&&this.fire(new e.k("rotatestart",i)).fire(new e.k("rotate",i)).fire(new e.k("rotateend",i)),a&&this.fire(new e.k("pitchstart",i)).fire(new e.k("pitch",i)).fire(new e.k("pitchend",i)),this.fire(new e.k("moveend",i))}calculateCameraOptionsFromTo(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=e.Y.fromLngLat(t,i),a=e.Y.fromLngLat(r,n),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:a.toLngLat(),zoom:d,pitch:f,bearing:p}}easeTo(t,i){var r;this._stop(!1,t.easeId),(!1===(t=e.e({offset:[0,0],duration:500,easing:e.b8},t)).animate||!t.essential&&o.prefersReducedMotion)&&(t.duration=0);const n=this._getTransformForUpdate(),a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="bearing"in t?this._normalizeBearing(t.bearing,s):s,h="pitch"in t?+t.pitch:l,d="padding"in t?t.padding:n.padding,p=e.P.convert(t.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),{center:g,zoom:y}=n.getConstrained(e.M.convert(t.center||m),null!==(r=t.zoom)&&void 0!==r?r:a);this._normalizeCenter(g);const v=n.project(m),x=n.project(g).sub(v),_=n.zoomScale(y-a);let b,w;t.around&&(b=e.M.convert(t.around),w=n.locationPoint(b));const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||y!==a,this._rotating=this._rotating||s!==u,this._pitching=this._pitching||h!==l,this._padding=!n.isPaddingEqual(d),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,S),this.terrain&&this._prepareElevation(g),this._ease((r=>{if(this._zooming&&(n.zoom=e.z.number(a,y,r)),this._rotating&&(n.bearing=e.z.number(s,u,r)),this._pitching&&(n.pitch=e.z.number(l,h,r)),this._padding&&(n.interpolatePadding(c,d,r),f=n.centerPoint.add(p)),this.terrain&&!t.freezeElevation&&this._updateElevation(r),b)n.setLocationAtPoint(b,w);else{const t=n.zoomScale(n.zoom-a),e=y>a?Math.min(2,_):Math.max(.5,_),i=Math.pow(e,1-r),o=n.unproject(v.add(x.mult(r*i)).mult(t));n.setLocationAtPoint(n.renderWorldCopies?o.wrap():o,f)}this._applyUpdatedTransform(n),this._fireMoveEvents(i)}),(e=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(i,e)}),t),this}_prepareEase(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,i||r.moving||this.fire(new e.k("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.k("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.k("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const i=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&i!==this._elevationTarget){const e=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(e-(i-(e*t+this._elevationStart))/(1-t)),this._elevationTarget=i}this.transform.elevation=e.z.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(t){if(!this.transformCameraUpdate)return;const e=t.clone(),{center:i,zoom:r,pitch:n,bearing:o,elevation:a}=this.transformCameraUpdate(e);i&&(e.center=i),void 0!==r&&(e.zoom=r),void 0!==n&&(e.pitch=n),void 0!==o&&(e.bearing=o),void 0!==a&&(e.elevation=a),this.transform.apply(e)}_fireMoveEvents(t){this.fire(new e.k("move",t)),this._zooming&&this.fire(new e.k("zoom",t)),this._rotating&&this.fire(new e.k("rotate",t)),this._pitching&&this.fire(new e.k("pitch",t))}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId;const r=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.k("zoomend",t)),n&&this.fire(new e.k("rotateend",t)),o&&this.fire(new e.k("pitchend",t)),this.fire(new e.k("moveend",t))}flyTo(t,i){var r;if(!t.essential&&o.prefersReducedMotion){const r=e.L(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),t=e.e({offset:[0,0],speed:1.2,curve:1.42,easing:e.b8},t);const n=this._getTransformForUpdate(),a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="bearing"in t?this._normalizeBearing(t.bearing,s):s,h="pitch"in t?+t.pitch:l,d="padding"in t?t.padding:n.padding,p=e.P.convert(t.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),{center:g,zoom:y}=n.getConstrained(e.M.convert(t.center||m),null!==(r=t.zoom)&&void 0!==r?r:a);this._normalizeCenter(g);const v=n.zoomScale(y-a),x=n.project(m),_=n.project(g).sub(x);let b=t.curve;const w=Math.max(n.width,n.height),S=w/v,k=_.mag();if("minZoom"in t){const i=e.ac(Math.min(t.minZoom,a,y),n.minZoom,n.maxZoom),r=w/n.zoomScale(i-a);b=Math.sqrt(r/k*2)}const C=b*b;function T(t){const e=(S*S-w*w+(t?-1:1)*C*C*k*k)/(2*(t?S:w)*C*k);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function P(t){return(Math.exp(t)+Math.exp(-t))/2}const M=T(!1);let E=function(t){return P(M)/P(M+b*t)},I=function(t){return w*((P(M)*(A(e=M+b*t)/P(e))-A(M))/C)/k;var e},z=(T(!0)-M)/b;if(Math.abs(k)<1e-6||!isFinite(z)){if(Math.abs(w-S)<1e-6)return this.easeTo(t,i);const e=S<w?-1:1;z=Math.abs(Math.log(S/w))/b,I=()=>0,E=t=>Math.exp(e*b*t)}return t.duration="duration"in t?+t.duration:1e3*z/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==u,this._pitching=h!==l,this._padding=!n.isPaddingEqual(d),this._prepareEase(i,!1),this.terrain&&this._prepareElevation(g),this._ease((r=>{const o=r*z,m=1/E(o);n.zoom=1===r?y:a+n.scaleZoom(m),this._rotating&&(n.bearing=e.z.number(s,u,r)),this._pitching&&(n.pitch=e.z.number(l,h,r)),this._padding&&(n.interpolatePadding(c,d,r),f=n.centerPoint.add(p)),this.terrain&&!t.freezeElevation&&this._updateElevation(r);const v=1===r?g:n.unproject(x.add(_.mult(I(o))).mult(m));n.setLocationAtPoint(n.renderWorldCopies?v.wrap():v,f),this._applyUpdatedTransform(n),this._fireMoveEvents(i)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(i)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){var i;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}return t||null===(i=this.handlers)||void 0===i||i.stop(!1),this}_ease(t,e,i){!1===i.animate||0===i.duration?(t(1),e()):(this._easeStart=o.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,i){t=e.b2(t,-180,180);const r=Math.abs(t-i);return Math.abs(t-360-i)<r&&(t-=360),Math.abs(t+360-i)<r&&(t+=360),t}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(e.M.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}const gn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class yn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=t=>{!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString("AttributionControl.".concat(e));t.title=i,t.setAttribute("aria-label",i)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const r in e){const i=e[r];if(i.used||i.usedForTerrain){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,i)=>{for(let r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));const i=t.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class vn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact"):e.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl");const e=a.create("a","maplibregl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class xn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const r of i)if(r.id===t)return void(r.cancelled=!0)}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var _n=e.X([{name:"a_pos3d",type:"Int16",components:3}]);class bn extends e.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,i){this.sourceCache.update(t,i),this._renderableTilesKeys=[];const r={};for(const n of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i}))r[n.key]=!0,this._renderableTilesKeys.push(n.key),this._tiles[n.key]||(n.posMatrix=new Float64Array(16),e.aO(n.posMatrix,0,e.W,0,e.W,0,1),this._tiles[n.key]=new at(n,this.tileSize));for(const e in this._tiles)r[e]||delete this._tiles[e]}freeRtt(t){for(const e in this._tiles){const i=this._tiles[e];(!t||i.tileID.equals(t)||i.tileID.isChildOf(t)||t.isChildOf(i.tileID))&&(i.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const i={};for(const r of this._renderableTilesKeys){const n=this._tiles[r].tileID;if(n.canonical.equals(t.canonical)){const n=t.clone();n.posMatrix=new Float64Array(16),e.aO(n.posMatrix,0,e.W,0,e.W,0,1),i[r]=n}else if(n.canonical.isChildOf(t.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const a=n.canonical.z-t.canonical.z,s=n.canonical.x-(n.canonical.x>>a<<a),l=n.canonical.y-(n.canonical.y>>a<<a),c=e.W>>a;e.aO(o.posMatrix,0,c,0,c,0,1),e.H(o.posMatrix,o.posMatrix,[-s*c,-l*c,0]),i[r]=o}else if(t.canonical.isChildOf(n.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const a=t.canonical.z-n.canonical.z,s=t.canonical.x-(t.canonical.x>>a<<a),l=t.canonical.y-(t.canonical.y>>a<<a),c=e.W>>a;e.aO(o.posMatrix,0,e.W,0,e.W,0,1),e.H(o.posMatrix,o.posMatrix,[s*c,l*c,0]),e.J(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),i[r]=o}}return i}getSourceTile(t,e){const i=this.sourceCache._source;let r=t.overscaledZ-this.deltaZoom;if(r>i.maxzoom&&(r=i.maxzoom),r<i.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(r).key);let n=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!n||!n.dem)&&e)for(;r>=i.minzoom&&(!n||!n.dem);)n=this.sourceCache.getTileByID(t.scaledTo(r--).key);return n}tilesAfterTime(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((e=>e.timeAdded>=t))}}class wn{constructor(t,e,i){this.painter=t,this.sourceCache=new bn(e),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.W;var o;if(!(i>=0&&i<n&&r>=0&&r<n))return 0;const a=this.getTerrainData(t),s=null===(o=a.tile)||void 0===o?void 0:o.dem;if(!s)return 0;const l=function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}([],[i/n*e.W,r/n*e.W],a.u_terrain_matrix),c=[l[0]*s.dim,l[1]*s.dim],u=Math.floor(c[0]),h=Math.floor(c[1]),d=c[0]-u,p=c[1]-h;return s.get(u,h)*(1-d)*(1-p)+s.get(u+1,h)*d*(1-p)+s.get(u,h+1)*(1-d)*p+s.get(u+1,h+1)*d*p}getElevationForLngLatZoom(t,i){const{tileID:r,mercatorX:n,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(t,i);return this.getElevation(r,n%e.W,o%e.W,e.W)}getElevation(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.W;return this.getDEMElevation(t,i,r,n)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const t=this.painter.context,i=new e.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new b(t,i,t.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new b(t,new e.R({width:1,height:1}),t.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=e.an([])}const i=this.sourceCache.getSourceTile(t,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){const t=this.painter.context;i.demTexture=this.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new b(t,i.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),i.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}const r=i&&i+i.tileID.key+t.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let n=t.canonical.z-i.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=r?n=t.canonical.z-r:e.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=t.canonical.x-(t.canonical.x>>n<<n),a=t.canonical.y-(t.canonical.y>>n<<n),s=e.ba(new Float64Array(16),[1/(e.W<<n),1/(e.W<<n),0]);e.H(s,s,[o*e.W,a*e.W,0]),this._demMatrixCache[t.key]={matrix:s,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getFramebuffer(t){const e=this.painter,i=e.width/devicePixelRatio,r=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new b(e.context,{width:i,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new b(e.context,{width:i,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(i,r,!0,!1),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,i,r))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let e=0,o=0;e<this._coordsTextureSize;e++)for(let t=0;t<this._coordsTextureSize;t++,o+=4)i[o+0]=255&t,i[o+1]=255&e,i[o+2]=t>>8<<4|e>>8,i[o+3]=0;const r=new e.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),n=new b(t,r,t.gl.RGBA,{premultiply:!1});return n.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=n,n}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const i=new Uint8Array(4),r=this.painter.context,n=r.gl,o=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),a=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),s=Math.round(this.painter.height/devicePixelRatio);r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),n.readPixels(o,s-a-1,1,1,n.RGBA,n.UNSIGNED_BYTE,i),r.bindFramebuffer.set(null);const l=i[0]+(i[2]>>4<<8),c=i[1]+((15&i[2])<<8),u=this.coordsIndex[255-i[3]],h=u&&this.sourceCache.getTileByID(u);if(!h)return null;const d=this._coordsTextureSize,p=(1<<h.tileID.canonical.z)*d;return new e.Y((h.tileID.canonical.x*d+l)/p+h.tileID.wrap,(h.tileID.canonical.y*d+c)/p,this.getElevation(h.tileID,l,c,d))}depthAtPoint(t){const e=new Uint8Array(4),i=this.painter.context,r=i.gl;return i.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),r.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,r.RGBA,r.UNSIGNED_BYTE,e),i.bindFramebuffer.set(null),(e[0]/16777216+e[1]/65536+e[2]/256+e[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,i=new e.bb,r=new e.aY,n=this.meshSize,o=e.W/n,a=n*n;for(let e=0;e<=n;e++)for(let t=0;t<=n;t++)i.emplaceBack(t*o,e*o,0);for(let e=0;e<a;e+=n+1)for(let t=0;t<n;t++)r.emplaceBack(t+e,n+t+e+1,n+t+e+2),r.emplaceBack(t+e,n+t+e+2,t+e+1);const s=i.length,l=s+2*(n+1);for(const h of[0,1])for(let t=0;t<=n;t++)for(const r of[0,1])i.emplaceBack(t*o,h*e.W,r);for(let e=0;e<2*n;e+=2)r.emplaceBack(l+e,l+e+1,l+e+3),r.emplaceBack(l+e,l+e+3,l+e+2),r.emplaceBack(s+e,s+e+3,s+e+1),r.emplaceBack(s+e,s+e+2,s+e+3);const c=i.length,u=c+2*(n+1);for(const h of[0,1])for(let t=0;t<=n;t++)for(const r of[0,1])i.emplaceBack(h*e.W,t*o,r);for(let e=0;e<2*n;e+=2)r.emplaceBack(c+e,c+e+1,c+e+3),r.emplaceBack(c+e,c+e+3,c+e+2),r.emplaceBack(u+e,u+e+3,u+e+1),r.emplaceBack(u+e,u+e+2,u+e+3);return this._mesh={indexBuffer:t.createIndexBuffer(r),vertexBuffer:t.createVertexBuffer(i,_n.members),segments:e.$.simpleSegment(0,0,i.length,r.length)},this._mesh}getMeshFrameDelta(t){return 2*Math.PI*e.bc/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,e){var i;const{tileID:r}=this._getOverscaledTileIDFromLngLatZoom(t,e);return null!==(i=this.getMinMaxElevation(r).minElevation)&&void 0!==i?i:0}getMinMaxElevation(t){const e=this.getTerrainData(t).tile,i={minElevation:null,maxElevation:null};return e&&e.dem&&(i.minElevation=e.dem.min*this.exaggeration,i.maxElevation=e.dem.max*this.exaggeration),i}_getOverscaledTileIDFromLngLatZoom(t,i){const r=e.Y.fromLngLat(t.wrap()),n=(1<<i)*e.W,o=r.x*n,a=r.y*n,s=Math.floor(o/e.W),l=Math.floor(a/e.W);return{tileID:new e.Q(i,0,i,s,l),mercatorX:o,mercatorY:a}}}class Sn{constructor(t,e,i){this._context=t,this._size=e,this._tileSize=i,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const e=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),i=new b(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return i.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),e.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),e.colorAttachment.set(i.texture),{id:t,fbo:e,texture:i,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((e=>t.id!==e)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const e of this._recentlyUsed)if(!this._objects[e].inUse)return this._objects[e];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((t=>!t.inUse))}}const kn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Cn{constructor(t,e){this.painter=t,this.terrain=e,this.pool=new Sn(t.context,30,e.sourceCache.tileSize*e.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,e){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter((i=>!t._layers[i].isHidden(e))),this._coordsDescendingInv={};for(const i in t.sourceCaches){this._coordsDescendingInv[i]={};const e=t.sourceCaches[i].getVisibleCoordinates();for(const t of e){const e=this.terrain.sourceCache.getTerrainCoords(t);for(const t in e)this._coordsDescendingInv[i][t]||(this._coordsDescendingInv[i][t]=[]),this._coordsDescendingInv[i][t].push(e[t])}}this._coordsDescendingInvStr={};for(const i of t._order){const e=t._layers[i],r=e.source;if(kn[e.type]&&!this._coordsDescendingInvStr[r]){this._coordsDescendingInvStr[r]={};for(const t in this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][t]=this._coordsDescendingInv[r][t].map((t=>t.key)).sort().join()}}for(const i of this._renderableTiles)for(const t in this._coordsDescendingInvStr){const e=this._coordsDescendingInvStr[t][i.tileID.key];e&&e!==i.rttCoords[t]&&(i.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const i=t.type,r=this.painter,n=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(kn[i]&&(this._prevType&&kn[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(t.id),!n))return!0;if(kn[this._prevType]||kn[i]&&n){this._prevType=i;const t=this._stacks.length-1,n=this._stacks[t]||[];for(const i of this._renderableTiles){if(this.pool.isFull()&&(lr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(i),i.rtt[t]){const e=this.pool.getObjectForId(i.rtt[t].id);if(e.stamp===i.rtt[t].stamp){this.pool.useObject(e);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),i.rtt[t]={id:o.id,stamp:o.stamp},r.context.bindFramebuffer.set(o.fbo.framebuffer),r.context.clear({color:e.aP.transparent,stencil:0}),r.currentStencilSource=void 0;for(let t=0;t<n.length;t++){const e=r.style._layers[n[t]],a=e.source?this._coordsDescendingInv[e.source][i.tileID.key]:[i.tileID];r.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),r._renderTileClippingMasks(e,a),r.renderLayer(r,r.style.sourceCaches[e.source],e,a),e.source&&(i.rttCoords[e.source]=this._coordsDescendingInvStr[e.source][i.tileID.key])}}return lr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),kn[i]}return!1}}const Tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},An=i,Pn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:gn,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:e.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Mn=t=>{t.touchstart=t.dragStart,t.touchmoveWindow=t.dragMove,t.touchend=t.dragEnd},En={showCompass:!0,showZoom:!0,visualizePitch:!1};class In{constructor(t,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=t=>{this.startMouse(e.e({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),a.mousePos(this.element,t)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=t=>{this.moveMouse(t,a.mousePos(this.element,t))},this.mouseup=t=>{this.mouseRotate.dragEnd(t),this.mousePitch&&this.mousePitch.dragEnd(t),this.offTemp()},this.touchstart=t=>{1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,t.targetTouches)[0],this.startTouch(t,this._startPos),a.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.addEventListener(window,"touchend",this.touchend))},this.touchmove=t=>{1!==t.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,t.targetTouches)[0],this.moveTouch(t,this._lastPos))},this.touchend=t=>{0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const n=t.dragRotate._mouseRotate.getClickTolerance(),o=t.dragRotate._mousePitch.getClickTolerance();this.element=i,this.mouseRotate=Vr({clickTolerance:n,enable:!0}),this.touchRotate=(t=>{let{enable:e,clickTolerance:i,bearingDegreesPerPixelMoved:r=.8}=t;const n=new jr;return new Or({clickTolerance:i,move:(t,e)=>({bearingDelta:(e.x-t.x)*r}),moveStateManager:n,enable:e,assignEvents:Mn})})({clickTolerance:n,enable:!0}),this.map=t,r&&(this.mousePitch=Ur({clickTolerance:o,enable:!0}),this.touchPitch=(t=>{let{enable:e,clickTolerance:i,pitchDegreesPerPixelMoved:r=-.5}=t;const n=new jr;return new Or({clickTolerance:i,move:(t,e)=>({pitchDelta:(e.y-t.y)*r}),moveStateManager:n,enable:e,assignEvents:Mn})})({clickTolerance:o,enable:!0})),a.addEventListener(i,"mousedown",this.mousedown),a.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(i,"touchcancel",this.reset)}startMouse(t,e){this.mouseRotate.dragStart(t,e),this.mousePitch&&this.mousePitch.dragStart(t,e),a.disableDrag()}startTouch(t,e){this.touchRotate.dragStart(t,e),this.touchPitch&&this.touchPitch.dragStart(t,e),a.disableDrag()}moveMouse(t,e){const i=this.map,{bearingDelta:r}=this.mouseRotate.dragMove(t,e)||{};if(r&&i.setBearing(i.getBearing()+r),this.mousePitch){const{pitchDelta:r}=this.mousePitch.dragMove(t,e)||{};r&&i.setPitch(i.getPitch()+r)}}moveTouch(t,e){const i=this.map,{bearingDelta:r}=this.touchRotate.dragMove(t,e)||{};if(r&&i.setBearing(i.getBearing()+r),this.touchPitch){const{pitchDelta:r}=this.touchPitch.dragMove(t,e)||{};r&&i.setPitch(i.getPitch()+r)}}off(){const t=this.element;a.removeEventListener(t,"mousedown",this.mousedown),a.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend),a.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend)}}let zn;function Ln(t,i,r){const n=new e.M(t.lng,t.lat);if(t=new e.M(t.lng,t.lat),i){const n=new e.M(t.lng-360,t.lat),o=new e.M(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(i);r.locationPoint(n).distSqr(i)<a?t=n:r.locationPoint(o).distSqr(i)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t.lng!==n.lng&&r.locationPoint(t).y>r.height/2-r.getHorizon()?t:n}const Dn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rn(t,e,i){const r=t.classList;for(const n in Dn)r.remove("maplibregl-".concat(i,"-anchor-").concat(n));r.add("maplibregl-".concat(i,"-anchor-").concat(e))}class On extends e.E{constructor(t){if(super(),this._onKeyPress=t=>{const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},this._onMapClick=t=>{const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},this._update=t=>{var e;if(!this._map)return;const i=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==t?void 0:t.type)||"render"===(null==t?void 0:t.type)&&!i)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ln(this._lngLat,this._flatPos,this._map.transform):null===(e=this._lngLat)||void 0===e?void 0:e.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let r="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?r="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(r="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX(".concat(this._map.getPitch(),"deg)")),t&&"moveend"!==t.type||(this._pos=this._pos.round()),a.setTransform(this._element,"".concat(Dn[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(n," ").concat(r)),o.frameAsync(new AbortController).then((()=>{this._updateOpacity(t&&"moveend"===t.type)})).catch((()=>{}))},this._onMove=t=>{if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.k("dragstart"))),this.fire(new e.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.k("dragend")),this._state="inactive"},this._addDragHandler=t=>{this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==t?void 0:t.opacity,null==t?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=e.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");const i=a.createNS("http://www.w3.org/2000/svg","svg"),r=41,n=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","".concat(r,"px")),i.setAttributeNS(null,"width","".concat(n,"px")),i.setAttributeNS(null,"viewBox","0 0 ".concat(n," ").concat(r));const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=a.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=a.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=a.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=a.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=a.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=a.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=a.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=a.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),i.appendChild(s),i.setAttributeNS(null,"height",r*this._scale+"px"),i.setAttributeNS(null,"width",n*this._scale+"px"),this._element.appendChild(i),this._offset=e.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),Rn(this._element,this._anchor,"marker"),t&&t.className)for(const e of t.className.split(" "))this._element.classList.add(e);this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.M.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,r=Math.abs(i)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-i+r)],"bottom-right":[-r,-1*(e-i+r)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var i,r;if(!(null===(i=this._map)||void 0===i?void 0:i.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const n=this._map,o=n.terrain.depthAtPoint(this._pos),a=n.terrain.getElevationForLngLatZoom(this._lngLat,n.transform.tileZoom);if(n.transform.lngLatToCameraDepth(this._lngLat,a)-o<.006)return void(this._element.style.opacity=this._opacity);const s=-this._offset.y/n.transform._pixelPerMeter,l=Math.sin(n.getPitch()*Math.PI/180)*s,c=n.terrain.depthAtPoint(new e.P(this._pos.x,this._pos.y-this._offset.y)),u=n.transform.lngLatToCameraDepth(this._lngLat,a+l)-c>.006;(null===(r=this._popup)||void 0===r?void 0:r.isOpen())&&u&&this._popup.remove(),this._element.style.opacity=u?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=e.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,e){return void 0===t&&void 0===e&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==t&&(this._opacity=t),void 0!==e&&(this._opacityWhenCovered=e),this._map&&this._updateOpacity(!0),this}}const Bn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Fn=0,jn=!1;const Nn={maxWidth:100,unit:"metric"};function Vn(t,e,i){const r=i&&i.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),a=t.unproject([r,n]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){const i=3.2808*s;i>5280?Un(e,r,i/5280,t._getUIString("ScaleControl.Miles")):Un(e,r,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Un(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Un(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Un(e,r,s,t._getUIString("ScaleControl.Meters"))}function Un(t,e,i,r){const n=function(t){const e=Math.pow(10,"".concat(Math.floor(t)).length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i),e*i}(i);t.style.width=e*(n/i)+"px",t.innerHTML="".concat(n,"&nbsp;").concat(r)}const Wn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Hn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gn(t){if(t){if("number"==typeof t){const i=Math.round(Math.abs(t)/Math.SQRT2);return{center:new e.P(0,0),top:new e.P(0,t),"top-left":new e.P(i,i),"top-right":new e.P(-i,i),bottom:new e.P(0,-t),"bottom-left":new e.P(i,-i),"bottom-right":new e.P(-i,-i),left:new e.P(t,0),right:new e.P(-t,0)}}if(t instanceof e.P||Array.isArray(t)){const i=e.P.convert(t);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.P.convert(t.center||[0,0]),top:e.P.convert(t.top||[0,0]),"top-left":e.P.convert(t["top-left"]||[0,0]),"top-right":e.P.convert(t["top-right"]||[0,0]),bottom:e.P.convert(t.bottom||[0,0]),"bottom-left":e.P.convert(t["bottom-left"]||[0,0]),"bottom-right":e.P.convert(t["bottom-right"]||[0,0]),left:e.P.convert(t.left||[0,0]),right:e.P.convert(t.right||[0,0])}}return Gn(new e.P(0,0))}const qn=i;t.AJAXError=e.bf,t.Evented=e.E,t.LngLat=e.M,t.MercatorCoordinate=e.Y,t.Point=e.P,t.addProtocol=e.bg,t.config=e.a,t.removeProtocol=e.bh,t.AttributionControl=yn,t.BoxZoomHandler=Ir,t.CanvasSource=Q,t.CooperativeGesturesHandler=un,t.DoubleClickZoomHandler=nn,t.DragPanHandler=sn,t.DragRotateHandler=ln,t.EdgeInsets=dr,t.FullscreenControl=class extends e.E{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var t;let e=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.fullscreenElement;)e=e.shadowRoot.fullscreenElement;e===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,t&&t.container&&(t.container instanceof HTMLElement?this._container=t.container:e.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const t=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new e.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new e.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},t.GeoJSONSource=Y,t.GeolocateControl=class extends e.E{constructor(t){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new e.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{const i=new e.M(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=this._map.getBearing(),o=e.e({bearing:n},this.options.fitBoundsOptions),a=H.fromLngLat(i,r);this._map.fitBounds(a,o,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const i=new e.M(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&jn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new e.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=t=>{if(this._map){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.w("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new On({element:this._dotElement}),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new On({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new e.k("trackuserlocationend")))}))}},this.options=e.e({},Bn,t)}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return e._(this,arguments,void 0,(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==zn&&!t)return zn;if(void 0===window.navigator.permissions)return zn=!!window.navigator.geolocation,zn;try{const t=yield window.navigator.permissions.query({name:"geolocation"});zn="denied"!==t.state}catch(t){zn=!!window.navigator.geolocation}return zn}()}))}().then((t=>this._setupUI(t))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fn=0,jn=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}}_updateCircleRadius(){const t=this._map.getBounds(),e=t.getSouthEast(),i=t.getNorthEast(),r=e.distanceTo(i),n=Math.ceil(this._accuracy/(r/this._map._container.clientHeight)*2);this._circleElement.style.width="".concat(n,"px"),this._circleElement.style.height="".concat(n,"px")}trigger(){if(!this._setup)return e.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fn--,jn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new e.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.k("trackuserlocationstart"));break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Fn++,Fn>1?(t={maximumAge:6e5,timeout:0},jn=!0):(t=this.options.positionOptions,jn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},t.Hash=gr,t.ImageSource=$,t.KeyboardHandler=Qr,t.LngLatBounds=H,t.LogoControl=vn,t.Map=class extends mn{constructor(t){if(e.bd.mark(e.be.create),null!=(t=e.e({},Pn,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new fr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._contextLost=t=>{t.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new e.k("webglcontextlost",{originalEvent:t}))},this._contextRestored=t=>{this._setupPainter(),this.resize(),this._update(),this.fire(new e.k("webglcontextrestored",{originalEvent:t}))},this._onMapScroll=t=>{if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._maxTileCacheZoomLevels=t.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new xn,this._controls=[],this._mapId=e.a3(),this._locale=e.e({},Tn,t.locale),this._clickTolerance=t.clickTolerance,this._overridePixelRatio=t.pixelRatio,this._maxCanvasSize=t.maxCanvasSize,this.transformCameraUpdate=t.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=t.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=p.addThrottleControl((()=>this.isMoving())),this._requestManager=new f(t.transformRequest),"string"==typeof t.container){if(this._container=document.getElementById(t.container),!this._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let t=!1;const e=mr((t=>{this._trackResize&&!this._removed&&this.resize(t)._update()}),50);this._resizeObserver=new ResizeObserver((i=>{t?e(i):t=!0})),this._resizeObserver.observe(this._container)}this.handlers=new fn(this,t),this._hash=t.hash&&new gr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.e({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,this._validateStyle=t.validateStyle,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new yn("boolean"==typeof t.attributionControl?void 0:t.attributionControl)),t.maplibreLogo&&this.addControl(new vn,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.k("".concat(t.dataType,"data"),t))})),this.on("dataloading",(t=>{this.fire(new e.k("".concat(t.dataType,"dataloading"),t))})),this.on("dataabort",(t=>{this.fire(new e.k("sourcedataabort",t))}))}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,i,r){return null==r&&this.terrain&&(r=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(t,e,i,r)}resize(t){var i;const r=this._containerDimensions(),n=r[0],o=r[1],a=this._getClampedPixelRatio(n,o);if(this._resizeCanvas(n,o,a),this.painter.resize(n,o,a),this.painter.overLimit()){const t=this.painter.context.gl;this._maxCanvasSize=[t.drawingBufferWidth,t.drawingBufferHeight];const e=this._getClampedPixelRatio(n,o);this._resizeCanvas(n,o,e),this.painter.resize(n,o,e)}this.transform.resize(n,o),null===(i=this._requestedCameraState)||void 0===i||i.resize(n,o);const s=!this._moving;return s&&(this.stop(),this.fire(new e.k("movestart",t)).fire(new e.k("move",t))),this.fire(new e.k("resize",t)),s&&this.fire(new e.k("moveend",t)),this}_getClampedPixelRatio(t,e){const{0:i,1:r}=this._maxCanvasSize,n=this.getPixelRatio(),o=t*n,a=e*n;return Math.min(o>i?i/o:1,a>r?r/a:1)*n}getPixelRatio(){var t;return null!==(t=this._overridePixelRatio)&&void 0!==t?t:devicePixelRatio}setPixelRatio(t){this._overridePixelRatio=t,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(H.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(t){return this.transform.locationPoint(e.M.convert(t),this.style&&this.terrain)}unproject(t){return this.transform.pointLocation(e.P.convert(t),this.terrain)}isMoving(){var t;return this._moving||(null===(t=this.handlers)||void 0===t?void 0:t.isMoving())}isZooming(){var t;return this._zooming||(null===(t=this.handlers)||void 0===t?void 0:t.isZooming())}isRotating(){var t;return this._rotating||(null===(t=this.handlers)||void 0===t?void 0:t.isRotating())}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let r=!1;const n=n=>{const o=this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[];o.length?r||(r=!0,i.call(this,new Cr(t,this,n.originalEvent,{features:o}))):r=!1};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const n=n=>{(this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,i.call(this,new Cr(t,this,n.originalEvent)))},o=e=>{r&&(r=!1,i.call(this,new Cr(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:o}}}{const r=t=>{const r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:r}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const r=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const n in r.delegates)this.on(n,r.delegates[n]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const r=this._createDelegatedListener(t,e,i);for(const n in r.delegates)this.once(n,r.delegates[n]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{const n=this._delegatedListeners[t];for(let t=0;t<n.length;t++){const r=n[t];if(r.layer===e&&r.listener===i){for(const t in r.delegates)this.off(t,r.delegates[t]);return n.splice(t,1),this}}})(),this)}queryRenderedFeatures(t,i){if(!this.style)return[];let r;const n=t instanceof e.P||Array.isArray(t),o=n?t:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(n?{}:t)||{},o instanceof e.P||"number"==typeof o[0])r=[e.P.convert(o)];else{const t=e.P.convert(o[0]),i=e.P.convert(o[1]);r=[t,new e.P(i.x,t.y),i,new e.P(t.x,i.y),t]}return this.style.queryRenderedFeatures(r,i,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(t,i){return!1!==(i=e.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}_updateStyle(t,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(t,e)));const i=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!t)),t?(this.style=new ce(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t,e,i):this.style.loadJSON(t,e,i),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ce(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,i){if("string"==typeof t){const r=this._requestManager.transformRequest(t,"Style");e.h(r,new AbortController).then((t=>{this._updateDiff(t.data,i)})).catch((t=>{t&&this.fire(new e.j(t))}))}else"object"==typeof t&&this._updateDiff(t,i)}_updateDiff(t,i){try{this.style.setState(t,i)&&this._update(!0)}catch(r){e.w("Unable to perform style diff: ".concat(r.message||r.error||r,".  Rebuilding the style from scratch.")),this._updateStyle(t,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.w("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){const i=this.style&&this.style.sourceCaches[t];if(void 0!==i)return i.loaded();this.fire(new e.j(new Error("There is no source with ID '".concat(t,"'"))))}setTerrain(t){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),t){const i=this.style.sourceCaches[t.source];if(!i)throw new Error("cannot load terrain, because there exists no source with ID: ".concat(t.source));null===this.terrain&&i.reload();for(const r in this.style._layers){const i=this.style._layers[r];"hillshade"===i.type&&i.source===t.source&&e.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wn(this.painter,i,t),this.painter.renderToTexture=new Cn(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=e=>{"style"===e.dataType?this.terrain.sourceCache.freeRtt():"source"===e.dataType&&e.tile&&(e.sourceId!==t.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(e.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new e.k("terrain",{terrain:t})),this}getTerrain(){var t,e;return null!==(e=null===(t=this.terrain)||void 0===t?void 0:t.options)&&void 0!==e?e:null}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:n=1,sdf:a=!1,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:h}=r;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||e.b(i))){if(void 0===i.width||void 0===i.height)return this.fire(new e.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:r,height:o,data:d}=i,p=i;return this.style.addImage(t,{data:new e.R({width:r,height:o},new Uint8Array(d)),pixelRatio:n,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:a,version:0,userImage:p}),p.onAdd&&p.onAdd(this,t),this}}{const{width:r,height:d,data:p}=o.getImageData(i);this.style.addImage(t,{data:new e.R({width:r,height:d},p),pixelRatio:n,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:a,version:0})}}updateImage(t,i){const r=this.style.getImage(t);if(!r)return this.fire(new e.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const n=i instanceof HTMLImageElement||e.b(i)?o.getImageData(i):i,{width:a,height:s,data:l}=n;if(void 0===a||void 0===s)return this.fire(new e.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==r.data.width||s!==r.data.height)return this.fire(new e.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(i instanceof HTMLImageElement||e.b(i));return r.data.replace(l,c),this.style.updateImage(t,r),this}getImage(t){return this.style.getImage(t)}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.j(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(t){return p.getImage(this._requestManager.transformRequest(t,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,i,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,i,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setGlyphs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(t,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(t,e,i,(t=>{t||this._update(!0)})),this}removeSprite(t){return this._lazyInitEmptyStyle(),this.style.removeSprite(t),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(t,e,(t=>{t||this._update(!0)})),this}setLight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map");const e=this._canvasContainer=a.create("div","maplibregl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions(),r=this._getClampedPixelRatio(i[0],i[1]);this._resizeCanvas(i[0],i[1],r);const n=this._controlContainer=a.create("div","maplibregl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{o[t]=a.create("div","maplibregl-ctrl-".concat(t," "),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,e,i){this._canvas.width=Math.floor(i*t),this._canvas.height=Math.floor(i*e),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(e,"px")}_setupPainter(){const t={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",(i=>{e={requestedAttributes:t},i&&(e.statusMessage=i.statusMessage,e.type=i.type)}),{once:!0});const i=this._canvas.getContext("webgl2",t)||this._canvas.getContext("webgl",t);if(!i){const t="Failed to initialize WebGL";throw e?(e.message=t,new Error(JSON.stringify(e))):new Error(t)}this.painter=new cr(i,this.transform),s.testSupport(i)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(t){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=o.now();this.style.zoomHistory.update(t,n);const a=new e.a8(t,{now:n,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=a.crossFadingFactor();1===s&&s===this._crossFadingFactor||(r=!0,this._crossFadingFactor=s),this.style.update(a)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new e.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,e.bd.mark(e.be.load),this.fire(new e.k("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const n=this._sourcesDirty||this._styleDirty||this._placementDirty;return n||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.k("idle")),!this._loaded||this._fullyLoaded||n||(this._fullyLoaded=!0,e.bd.mark(e.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var t;this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),p.removeThrottleControl(this._imageQueueHandle),null===(t=this._resizeObserver)||void 0===t||t.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),e.bd.clearMetrics(),this._removed=!0,this.fire(new e.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((t=>{e.bd.frame(t),this._frameRequest=null,this._render(t)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get version(){return An}getCameraTargetElevation(){return this.transform.elevation}},t.MapMouseEvent=Cr,t.MapTouchEvent=Tr,t.MapWheelEvent=Ar,t.Marker=On,t.NavigationControl=class{constructor(t){this._updateZoomButtons=()=>{const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=t},this._setButtonTitle=(t,e)=>{const i=this._map._getUIString("NavigationControl.".concat(e));t.title=i,t.setAttribute("aria-label",i)},this.options=e.e({},En,t),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),a.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),a.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=a.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new In(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const i=a.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}},t.Popup=class extends e.E{constructor(t){super(),this.remove=()=>(this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new e.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var e;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=a.create("div","maplibregl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const t of this.options.className.split(" "))this._container.classList.add(t);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ln(this._lngLat,this._flatPos,this._map.transform):null===(e=this._lngLat)||void 0===e?void 0:e.wrap(),this._trackPointer&&!t)return;const i=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let r=this.options.anchor;const n=Gn(this.options.offset);if(!r){const t=this._container.offsetWidth,e=this._container.offsetHeight;let o;o=i.y+n.bottom.y<e?["top"]:i.y>this._map.transform.height-e?["bottom"]:[],i.x<t/2?o.push("left"):i.x>this._map.transform.width-t/2&&o.push("right"),r=0===o.length?"bottom":o.join("-")}let o=i.add(n[r]);this.options.subpixelPositioning||(o=o.round()),a.setTransform(this._container,"".concat(Dn[r]," translate(").concat(o.x,"px,").concat(o.y,"px)")),Rn(this._container,r,"popup")},this._onClose=()=>{this.remove()},this.options=e.e(Object.create(Wn),t)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new e.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.M.convert(t),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),i=document.createElement("body");let r;for(i.innerHTML=t;r=i.firstChild,r;)e.appendChild(r);return this.setDOMContent(e)}getMaxWidth(){var t;return null===(t=this._container)||void 0===t?void 0:t.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){return this._container&&this._container.classList.add(t),this}removeClassName(t){return this._container&&this._container.classList.remove(t),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}setSubpixelPositioning(t){this.options.subpixelPositioning=t}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(Hn);t&&t.focus()}},t.RasterDEMTileSource=X,t.RasterTileSource=Z,t.ScaleControl=class{constructor(t){this._onMove=()=>{Vn(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Vn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Nn),t)}getDefaultPosition(){return"bottom-left"}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},t.ScrollZoomHandler=rn,t.Style=ce,t.TerrainControl=class{constructor(t){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=t}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},t.TwoFingersTouchPitchHandler=$r,t.TwoFingersTouchRotateHandler=Yr,t.TwoFingersTouchZoomHandler=Zr,t.TwoFingersTouchZoomRotateHandler=cn,t.VectorTileSource=q,t.VideoSource=J,t.addSourceType=(t,i)=>e._(void 0,void 0,void 0,(function*(){if(et(t))throw new Error('A source type called "'.concat(t,'" already exists.'));((t,e)=>{tt[t]=e})(t,i)})),t.clearPrewarmedResources=function(){const t=R;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(z),R=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},t.getMaxParallelImageRequests=function(){return e.a.MAX_PARALLEL_IMAGE_REQUESTS},t.getRTLTextPluginStatus=function(){return ot().getRTLTextPluginStatus()},t.getVersion=function(){return qn},t.getWorkerCount=function(){return L.workerCount},t.getWorkerUrl=function(){return e.a.WORKER_URL},t.importScriptInWorkers=function(t){return j().broadcast("IS",t)},t.prewarm=function(){B().acquire(z)},t.setMaxParallelImageRequests=function(t){e.a.MAX_PARALLEL_IMAGE_REQUESTS=t},t.setRTLTextPlugin=function(t,e){return ot().setRTLTextPlugin(t,e)},t.setWorkerCount=function(t){L.workerCount=t},t.setWorkerUrl=function(t){e.a.WORKER_URL=t}})),t}()}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;i.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var o=Object.create(null);i.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&n&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>r[t]));return a.default=()=>r,i.d(o,a),o}})(),i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,r)=>(i.f[r](t,e),e)),[])),i.u=t=>"static/js/"+t+".0ae0db25.chunk.js",i.miniCssF=t=>{},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="react-maplibre-highcharts:";i.l=(r,n,o,a)=>{if(t[r])t[r].push(n);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",e+o),s.src=r),t[r]=[n];var d=(e,i)=>{s.onerror=s.onload=null,clearTimeout(p);var n=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((t=>t(i))),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),i.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),i.p="/react-maplibre-highcharts/",(()=>{var t={792:0};i.f.j=(e,r)=>{var n=i.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((i,r)=>n=t[e]=[i,r]));r.push(n[2]=o);var a=i.p+i.u(e),s=new Error;i.l(a,(r=>{if(i.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}}),"chunk-"+e,e)}};var e=(e,r)=>{var n,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((e=>0!==t[e]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)l(i)}for(e&&e(r);c<a.length;c++)o=a[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunkreact_maplibre_highcharts=self.webpackChunkreact_maplibre_highcharts||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";var t=i(579),e=new Set(["dark","light","system"]);function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{initialColorMode:i="light",type:r="localStorage",storageKey:n="chakra-ui-color-mode"}=t,o=function(t){let i=t;return e.has(i)||(i="light"),i}(i),a="cookie"===r,s='(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="'.concat(o,'",r="').concat(n,'",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();\n  '),l='(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="'.concat(o,'",e="').concat(n,'",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();\n  ');return"!".concat(a?s:l).trim()}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nonce:i}=e;return(0,t.jsx)("script",{id:"chakra-script",nonce:i,dangerouslySetInnerHTML:{__html:r(e)}})}var o=i(43),a=i.t(o,2),s=i(391);function l(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var c=function(){function t(t){var e=this;this._insertTag=function(t){var i;i=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,i),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{i.insertRule(t,i.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),u=Math.abs,h=String.fromCharCode,d=Object.assign;function p(t){return t.trim()}function f(t,e,i){return t.replace(e,i)}function m(t,e){return t.indexOf(e)}function g(t,e){return 0|t.charCodeAt(e)}function y(t,e,i){return t.slice(e,i)}function v(t){return t.length}function x(t){return t.length}function _(t,e){return e.push(t),t}var b=1,w=1,S=0,k=0,C=0,T="";function A(t,e,i,r,n,o,a){return{value:t,root:e,parent:i,type:r,props:n,children:o,line:b,column:w,length:a,return:""}}function P(t,e){return d(A("",null,null,"",null,null,0),t,{length:-t.length},e)}function M(){return C=k>0?g(T,--k):0,w--,10===C&&(w=1,b--),C}function E(){return C=k<S?g(T,k++):0,w++,10===C&&(w=1,b++),C}function I(){return g(T,k)}function z(){return k}function L(t,e){return y(T,t,e)}function D(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(t){return b=w=1,S=v(T=t),k=0,[]}function O(t){return T="",t}function B(t){return p(L(k-1,N(91===t?t+2:40===t?t+1:t)))}function F(t){for(;(C=I())&&C<33;)E();return D(t)>2||D(C)>3?"":" "}function j(t,e){for(;--e&&E()&&!(C<48||C>102||C>57&&C<65||C>70&&C<97););return L(t,z()+(e<6&&32==I()&&32==E()))}function N(t){for(;E();)switch(C){case t:return k;case 34:case 39:34!==t&&39!==t&&N(C);break;case 40:41===t&&N(t);break;case 92:E()}return k}function V(t,e){for(;E()&&t+C!==57&&(t+C!==84||47!==I()););return"/*"+L(e,k-1)+"*"+h(47===t?t:E())}function U(t){for(;!D(I());)E();return L(t,k)}var W="-ms-",H="-moz-",G="-webkit-",q="comm",Z="rule",X="decl",Y="@keyframes";function K(t,e){for(var i="",r=x(t),n=0;n<r;n++)i+=e(t[n],n,t,e)||"";return i}function $(t,e,i,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case X:return t.return=t.return||t.value;case q:return"";case Y:return t.return=t.value+"{"+K(t.children,r)+"}";case Z:t.value=t.props.join(",")}return v(i=K(t.children,r))?t.return=t.value+"{"+i+"}":""}function J(t){return O(Q("",null,null,null,[""],t=R(t),0,[0],t))}function Q(t,e,i,r,n,o,a,s,l){for(var c=0,u=0,d=a,p=0,y=0,x=0,b=1,w=1,S=1,k=0,C="",T=n,A=o,P=r,L=C;w;)switch(x=k,k=E()){case 40:if(108!=x&&58==g(L,d-1)){-1!=m(L+=f(B(k),"&","&\f"),"&\f")&&(S=-1);break}case 34:case 39:case 91:L+=B(k);break;case 9:case 10:case 13:case 32:L+=F(x);break;case 92:L+=j(z()-1,7);continue;case 47:switch(I()){case 42:case 47:_(et(V(E(),z()),e,i),l);break;default:L+="/"}break;case 123*b:s[c++]=v(L)*S;case 125*b:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+u:-1==S&&(L=f(L,/\f/g,"")),y>0&&v(L)-d&&_(y>32?it(L+";",r,i,d-1):it(f(L," ","")+";",r,i,d-2),l);break;case 59:L+=";";default:if(_(P=tt(L,e,i,c,u,n,s,C,T=[],A=[],d),o),123===k)if(0===u)Q(L,e,P,P,T,o,d,s,A);else switch(99===p&&110===g(L,3)?100:p){case 100:case 108:case 109:case 115:Q(t,P,P,r&&_(tt(t,P,P,0,0,n,s,C,n,T=[],d),A),n,A,d,s,r?T:A);break;default:Q(L,P,P,P,[""],A,0,s,A)}}c=u=y=0,b=S=1,C=L="",d=a;break;case 58:d=1+v(L),y=x;default:if(b<1)if(123==k)--b;else if(125==k&&0==b++&&125==M())continue;switch(L+=h(k),k*b){case 38:S=u>0?1:(L+="\f",-1);break;case 44:s[c++]=(v(L)-1)*S,S=1;break;case 64:45===I()&&(L+=B(E())),p=I(),u=d=v(C=L+=U(z())),k++;break;case 45:45===x&&2==v(L)&&(b=0)}}return o}function tt(t,e,i,r,n,o,a,s,l,c,h){for(var d=n-1,m=0===n?o:[""],g=x(m),v=0,_=0,b=0;v<r;++v)for(var w=0,S=y(t,d+1,d=u(_=a[v])),k=t;w<g;++w)(k=p(_>0?m[w]+" "+S:f(S,/&\f/g,m[w])))&&(l[b++]=k);return A(t,e,i,0===n?Z:s,l,c,h)}function et(t,e,i){return A(t,e,i,q,h(C),y(t,2,-2),0)}function it(t,e,i,r){return A(t,e,i,X,y(t,0,r),y(t,r+1,-1),r)}var rt=function(t,e,i){for(var r=0,n=0;r=n,n=I(),38===r&&12===n&&(e[i]=1),!D(n);)E();return L(t,k)},nt=function(t,e){return O(function(t,e){var i=-1,r=44;do{switch(D(r)){case 0:38===r&&12===I()&&(e[i]=1),t[i]+=rt(k-1,e,i);break;case 2:t[i]+=B(r);break;case 4:if(44===r){t[++i]=58===I()?"&\f":"",e[i]=t[i].length;break}default:t[i]+=h(r)}}while(r=E());return t}(R(t),e))},ot=new WeakMap,at=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,i=t.parent,r=t.column===i.column&&t.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||ot.get(i))&&!r){ot.set(t,!0);for(var n=[],o=nt(e,n),a=i.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)t.props[l]=n[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},st=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function lt(t,e){switch(function(t,e){return 45^g(t,0)?(((e<<2^g(t,0))<<2^g(t,1))<<2^g(t,2))<<2^g(t,3):0}(t,e)){case 5103:return G+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return G+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return G+t+H+t+W+t+t;case 6828:case 4268:return G+t+W+t+t;case 6165:return G+t+W+"flex-"+t+t;case 5187:return G+t+f(t,/(\w+).+(:[^]+)/,G+"box-$1$2"+W+"flex-$1$2")+t;case 5443:return G+t+W+"flex-item-"+f(t,/flex-|-self/,"")+t;case 4675:return G+t+W+"flex-line-pack"+f(t,/align-content|flex-|-self/,"")+t;case 5548:return G+t+W+f(t,"shrink","negative")+t;case 5292:return G+t+W+f(t,"basis","preferred-size")+t;case 6060:return G+"box-"+f(t,"-grow","")+G+t+W+f(t,"grow","positive")+t;case 4554:return G+f(t,/([^-])(transform)/g,"$1"+G+"$2")+t;case 6187:return f(f(f(t,/(zoom-|grab)/,G+"$1"),/(image-set)/,G+"$1"),t,"")+t;case 5495:case 3959:return f(t,/(image-set\([^]*)/,G+"$1$`$1");case 4968:return f(f(t,/(.+:)(flex-)?(.*)/,G+"box-pack:$3"+W+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+G+t+t;case 4095:case 3583:case 4068:case 2532:return f(t,/(.+)-inline(.+)/,G+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(v(t)-1-e>6)switch(g(t,e+1)){case 109:if(45!==g(t,e+4))break;case 102:return f(t,/(.+:)(.+)-([^]+)/,"$1"+G+"$2-$3$1"+H+(108==g(t,e+3)?"$3":"$2-$3"))+t;case 115:return~m(t,"stretch")?lt(f(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==g(t,e+1))break;case 6444:switch(g(t,v(t)-3-(~m(t,"!important")&&10))){case 107:return f(t,":",":"+G)+t;case 101:return f(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+G+(45===g(t,14)?"inline-":"")+"box$3$1"+G+"$2$3$1"+W+"$2box$3")+t}break;case 5936:switch(g(t,e+11)){case 114:return G+t+W+f(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return G+t+W+f(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return G+t+W+f(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return G+t+W+t+t}return t}var ct=[function(t,e,i,r){if(t.length>-1&&!t.return)switch(t.type){case X:t.return=lt(t.value,t.length);break;case Y:return K([P(t,{value:f(t.value,"@","@"+G)})],r);case Z:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return K([P(t,{props:[f(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return K([P(t,{props:[f(e,/:(plac\w+)/,":"+G+"input-$1")]}),P(t,{props:[f(e,/:(plac\w+)/,":-moz-$1")]}),P(t,{props:[f(e,/:(plac\w+)/,W+"input-$1")]})],r)}return""}))}}],ut=function(t){var e=t.key;if("css"===e){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||ct;var n,o,a={},s=[];n=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),i=1;i<e.length;i++)a[e[i]]=!0;s.push(t)}));var l,u,h=[$,(u=function(t){l.insert(t)},function(t){t.root||(t=t.return)&&u(t)})],d=function(t){var e=x(t);return function(i,r,n,o){for(var a="",s=0;s<e;s++)a+=t[s](i,r,n,o)||"";return a}}([at,st].concat(r,h));o=function(t,e,i,r){l=i,function(t){K(J(t),d)}(t?t+"{"+e.styles+"}":e.styles),r&&(p.inserted[e.name]=!0)};var p={key:e,sheet:new c({key:e,container:n,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return p.sheet.hydrate(s),p};function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},ht.apply(null,arguments)}var dt=function(t){var e=new WeakMap;return function(i){if(e.has(i))return e.get(i);var r=t(i);return e.set(i,r),r}};var pt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ft(t){var e=Object.create(null);return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}var mt=/[A-Z]|^ms/g,gt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yt=function(t){return 45===t.charCodeAt(1)},vt=function(t){return null!=t&&"boolean"!==typeof t},xt=ft((function(t){return yt(t)?t:t.replace(mt,"-$&").toLowerCase()})),_t=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(gt,(function(t,e,i){return wt={name:e,styles:i,next:wt},e}))}return 1===pt[t]||yt(t)||"number"!==typeof e||0===e?e:e+"px"};function bt(t,e,i){if(null==i)return"";if(void 0!==i.__emotion_styles)return i;switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return wt={name:i.name,styles:i.styles,next:wt},i.name;if(void 0!==i.styles){var r=i.next;if(void 0!==r)for(;void 0!==r;)wt={name:r.name,styles:r.styles,next:wt},r=r.next;return i.styles+";"}return function(t,e,i){var r="";if(Array.isArray(i))for(var n=0;n<i.length;n++)r+=bt(t,e,i[n])+";";else for(var o in i){var a=i[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":vt(a)&&(r+=xt(o)+":"+_t(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=bt(t,e,a);switch(o){case"animation":case"animationName":r+=xt(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)vt(a[l])&&(r+=xt(o)+":"+_t(o,a[l])+";")}return r}(t,e,i);case"function":if(void 0!==t){var n=wt,o=i(t);return wt=n,bt(t,e,o)}}if(null==e)return i;var a=e[i];return void 0!==a?a:i}var wt,St=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var kt=function(t,e,i){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,n="";wt=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,n+=bt(i,e,o)):n+=o[0];for(var a=1;a<t.length;a++)n+=bt(i,e,t[a]),r&&(n+=o[a]);St.lastIndex=0;for(var s,l="";null!==(s=St.exec(n));)l+="-"+s[1];var c=function(t){for(var e,i=0,r=0,n=t.length;n>=4;++r,n-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),i=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(n){case 3:i^=(255&t.charCodeAt(r+2))<<16;case 2:i^=(255&t.charCodeAt(r+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(r)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)}(n)+l;return{name:c,styles:n,next:wt}},Ct=!!a.useInsertionEffect&&a.useInsertionEffect,Tt=Ct||function(t){return t()},At=Ct||o.useLayoutEffect,Pt=o.createContext("undefined"!==typeof HTMLElement?ut({key:"css"}):null);Pt.Provider;var Mt=function(t){return(0,o.forwardRef)((function(e,i){var r=(0,o.useContext)(Pt);return t(e,r,i)}))};var Et=o.createContext({});var It=dt((function(t){return dt((function(e){return function(t,e){return"function"===typeof e?e(t):ht({},t,e)}(t,e)}))})),zt=function(t){var e=o.useContext(Et);return t.theme!==e&&(e=It(e)(t.theme)),o.createElement(Et.Provider,{value:e},t.children)};var Lt=function(t,e,i){var r=t.key+"-"+e.name;!1===i&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},Dt=function(t,e,i){Lt(t,e,i);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var n=e;do{t.insert(e===n?"."+r:"",n,t.sheet,!0),n=n.next}while(void 0!==n)}},Rt=(i(219),Mt((function(t,e){var i=t.styles,r=kt([i],void 0,o.useContext(Et)),n=o.useRef();return At((function(){var t=e.key+"-global",i=new e.sheet.constructor({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,a=document.querySelector('style[data-emotion="'+t+" "+r.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),null!==a&&(o=!0,a.setAttribute("data-emotion",t),i.hydrate([a])),n.current=[i,o],function(){i.flush()}}),[e]),At((function(){var t=n.current,i=t[0];if(t[1])t[1]=!1;else{if(void 0!==r.next&&Dt(e,r.next,!0),i.tags.length){var o=i.tags[i.tags.length-1].nextElementSibling;i.before=o,i.flush()}e.insert("",r,i,!1)}}),[e,r.name]),null})));function Ot(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return kt(e)}var Bt,Ft;var jt=String.raw,Nt=jt(Bt||(Bt=l(["\n  :root,\n  :host {\n    --chakra-vh: 100vh;\n  }\n\n  @supports (height: -webkit-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -webkit-fill-available;\n    }\n  }\n\n  @supports (height: -moz-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -moz-fill-available;\n    }\n  }\n\n  @supports (height: 100dvh) {\n    :root,\n    :host {\n      --chakra-vh: 100dvh;\n    }\n  }\n"]))),Vt=()=>(0,t.jsx)(Rt,{styles:Nt}),Ut=e=>{let{scope:i=""}=e;return(0,t.jsx)(Rt,{styles:jt(Ft||(Ft=l(['\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        margin: 0;\n        font-feature-settings: "kern";\n      }\n\n      '," :where(*, *::before, *::after) {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n        word-wrap: break-word;\n      }\n\n      main {\n        display: block;\n      }\n\n      "," hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      "," :where(pre, code, kbd,samp) {\n        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      "," a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      "," abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      "," :where(b, strong) {\n        font-weight: bold;\n      }\n\n      "," small {\n        font-size: 80%;\n      }\n\n      "," :where(sub,sup) {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      "," sub {\n        bottom: -0.25em;\n      }\n\n      "," sup {\n        top: -0.5em;\n      }\n\n      "," img {\n        border-style: none;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      "," :where(button, input) {\n        overflow: visible;\n      }\n\n      "," :where(button, select) {\n        text-transform: none;\n      }\n\n      ",' :where(\n          button::-moz-focus-inner,\n          [type="button"]::-moz-focus-inner,\n          [type="reset"]::-moz-focus-inner,\n          [type="submit"]::-moz-focus-inner\n        ) {\n        border-style: none;\n        padding: 0;\n      }\n\n      '," fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      "," legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      "," progress {\n        vertical-align: baseline;\n      }\n\n      "," textarea {\n        overflow: auto;\n      }\n\n      ",' :where([type="checkbox"], [type="radio"]) {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      ',' input[type="number"]::-webkit-inner-spin-button,\n      ',' input[type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      ',' input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      ',' input[type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      ',' input[type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      '," ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      "," details {\n        display: block;\n      }\n\n      "," summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      "," :where(\n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre\n        ) {\n        margin: 0;\n      }\n\n      "," button {\n        background: transparent;\n        padding: 0;\n      }\n\n      "," fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," :where(ol, ul) {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," textarea {\n        resize: vertical;\n      }\n\n      ",' :where(button, [role="button"]) {\n        cursor: pointer;\n      }\n\n      '," button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      "," table {\n        border-collapse: collapse;\n      }\n\n      "," :where(h1, h2, h3, h4, h5, h6) {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      "," :where(img, svg, video, canvas, audio, iframe, embed, object) {\n        display: block;\n      }\n\n      "," :where(img, video) {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible]\n        :focus:not([data-focus-visible-added]):not(\n          [data-focus-visible-disabled]\n        ) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      "," select::-ms-expand {\n        display: none;\n      }\n\n      ","\n    "])),i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,Nt)})};function Wt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:e,strict:i=!0,hookName:r="useContext",providerName:n="Provider",errorMessage:a,defaultValue:s}=t,l=(0,o.createContext)(s);return l.displayName=e,[l.Provider,function t(){var e;const s=(0,o.useContext)(l);if(!s&&i){const i=new Error(null!=a?a:(c=n,"".concat(r," returned `undefined`. Seems you forgot to wrap component within ").concat(c)));throw i.name="ContextError",null==(e=Error.captureStackTrace)||e.call(Error,i,t),i}var c;return s},l]}var[Ht,Gt]=Wt({strict:!1,name:"PortalManagerContext"});function qt(e){const{children:i,zIndex:r}=e;return(0,t.jsx)(Ht,{value:{zIndex:r},children:i})}qt.displayName="PortalManager";var Zt=(0,o.createContext)({});function Xt(){const t=(0,o.useContext)(Zt);if(void 0===t)throw new Error("useColorMode must be used within a ColorModeProvider");return t}Zt.displayName="ColorModeContext";var Yt=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter(Boolean).join(" ")};function Kt(t){const e=typeof t;return null!=t&&("object"===e||"function"===e)&&!Array.isArray(t)}function $t(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return Jt(t)?t(...i):t}var Jt=t=>"function"===typeof t;var Qt=i(611),te=t=>"string"===typeof t?t.replace(/!(important)?$/,"").trim():t,ee=(t,e)=>i=>{const r=String(e),n=(t=>/!(important)?$/.test(t))(r),o=te(r),a=t?"".concat(t,".").concat(o):o;let s=Kt(i.__cssMap)&&a in i.__cssMap?i.__cssMap[a].varRef:e;return s=te(s),n?"".concat(s," !important"):s};function ie(t){const{scale:e,transform:i,compose:r}=t;return(t,n)=>{var o;const a=ee(e,t)(n);let s=null!=(o=null==i?void 0:i(a,n))?o:a;return r&&(s=r(s,n)),s}}var re=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return t=>e.reduce(((t,e)=>e(t)),t)};function ne(t,e){return i=>{const r={property:i,scale:t};return r.transform=ie({scale:t,transform:e}),r}}var oe=t=>{let{rtl:e,ltr:i}=t;return t=>"rtl"===t.direction?e:i};var ae=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var se={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},le={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var ce={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},ue={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},he=new Set(Object.values(ue)),de=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),pe=t=>t.trim();var fe=t=>"string"===typeof t&&t.includes("(")&&t.includes(")");var me=t=>e=>"".concat(t,"(").concat(e,")"),ge={filter:t=>"auto"!==t?t:se,backdropFilter:t=>"auto"!==t?t:le,ring:t=>function(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(ge.px(t)),bgClip:t=>"text"===t?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t},transform:t=>"auto"===t?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...ae].join(" "):"auto-gpu"===t?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...ae].join(" "):t,vh:t=>"$100vh"===t?"var(--chakra-vh)":t,px(t){if(null==t)return t;const{unitless:e}=(t=>{const e=parseFloat(t.toString()),i=t.toString().replace(String(e),"");return{unitless:!i,value:e,unit:i}})(t);return e||"number"===typeof t?"".concat(t,"px"):t},fraction:t=>"number"!==typeof t||t>1?t:"".concat(100*t,"%"),float:(t,e)=>"rtl"===e.direction?{left:"right",right:"left"}[t]:t,degree(t){if(function(t){return/^var\(--.+\)$/.test(t)}(t)||null==t)return t;const e="string"===typeof t&&!t.endsWith("deg");return"number"===typeof t||e?"".concat(t,"deg"):t},gradient:(t,e)=>function(t,e){if(null==t||de.has(t))return t;if(!fe(t)&&!de.has(t))return"url('".concat(t,"')");const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),r=null==i?void 0:i[1],n=null==i?void 0:i[2];if(!r||!n)return t;const o=r.includes("-gradient")?r:"".concat(r,"-gradient"),[a,...s]=n.split(",").map(pe).filter(Boolean);if(0===(null==s?void 0:s.length))return t;const l=a in ue?ue[a]:a;s.unshift(l);const c=s.map((t=>{if(he.has(t))return t;const i=t.indexOf(" "),[r,n]=-1!==i?[t.substr(0,i),t.substr(i+1)]:[t],o=fe(n)?n:n&&n.split(" "),a="colors.".concat(r),s=a in e.__cssMap?e.__cssMap[a].varRef:r;return o?[s,...Array.isArray(o)?o:[o]].join(" "):s}));return"".concat(o,"(").concat(c.join(", "),")")}(t,null!=e?e:{}),blur:me("blur"),opacity:me("opacity"),brightness:me("brightness"),contrast:me("contrast"),dropShadow:me("drop-shadow"),grayscale:me("grayscale"),hueRotate:t=>me("hue-rotate")(ge.degree(t)),invert:me("invert"),saturate:me("saturate"),sepia:me("sepia"),bgImage(t){if(null==t)return t;return fe(t)||de.has(t)?t:"url(".concat(t,")")},outline(t){const e="0"===String(t)||"none"===String(t);return null!==t&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:i,divide:r}=null!=(e=ce[t])?e:{},n={flexDirection:t};return i&&(n[i]=1),r&&(n[r]=1),n}},ye={borderWidths:ne("borderWidths"),borderStyles:ne("borderStyles"),colors:ne("colors"),borders:ne("borders"),gradients:ne("gradients",ge.gradient),radii:ne("radii",ge.px),space:ne("space",re(ge.vh,ge.px)),spaceT:ne("space",re(ge.vh,ge.px)),degreeT:t=>({property:t,transform:ge.degree}),prop:(t,e,i)=>({property:t,scale:e,...e&&{transform:ie({scale:e,transform:i})}}),propT:(t,e)=>({property:t,transform:e}),sizes:ne("sizes",re(ge.vh,ge.px)),sizesT:ne("sizes",re(ge.vh,ge.fraction)),shadows:ne("shadows"),logical:function(t){const{property:e,scale:i,transform:r}=t;return{scale:i,property:oe(e),transform:i?ie({scale:i,compose:r}):r}},blur:ne("blur",ge.blur)},ve={background:ye.colors("background"),backgroundColor:ye.colors("backgroundColor"),backgroundImage:ye.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:ge.bgClip},bgSize:ye.prop("backgroundSize"),bgPosition:ye.prop("backgroundPosition"),bg:ye.colors("background"),bgColor:ye.colors("backgroundColor"),bgPos:ye.prop("backgroundPosition"),bgRepeat:ye.prop("backgroundRepeat"),bgAttachment:ye.prop("backgroundAttachment"),bgGradient:ye.gradients("backgroundImage"),bgClip:{transform:ge.bgClip}};Object.assign(ve,{bgImage:ve.backgroundImage,bgImg:ve.backgroundImage});var xe={border:ye.borders("border"),borderWidth:ye.borderWidths("borderWidth"),borderStyle:ye.borderStyles("borderStyle"),borderColor:ye.colors("borderColor"),borderRadius:ye.radii("borderRadius"),borderTop:ye.borders("borderTop"),borderBlockStart:ye.borders("borderBlockStart"),borderTopLeftRadius:ye.radii("borderTopLeftRadius"),borderStartStartRadius:ye.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:ye.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:ye.radii("borderTopRightRadius"),borderStartEndRadius:ye.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:ye.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:ye.borders("borderRight"),borderInlineEnd:ye.borders("borderInlineEnd"),borderBottom:ye.borders("borderBottom"),borderBlockEnd:ye.borders("borderBlockEnd"),borderBottomLeftRadius:ye.radii("borderBottomLeftRadius"),borderBottomRightRadius:ye.radii("borderBottomRightRadius"),borderLeft:ye.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:ye.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:ye.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:ye.borders(["borderLeft","borderRight"]),borderInline:ye.borders("borderInline"),borderY:ye.borders(["borderTop","borderBottom"]),borderBlock:ye.borders("borderBlock"),borderTopWidth:ye.borderWidths("borderTopWidth"),borderBlockStartWidth:ye.borderWidths("borderBlockStartWidth"),borderTopColor:ye.colors("borderTopColor"),borderBlockStartColor:ye.colors("borderBlockStartColor"),borderTopStyle:ye.borderStyles("borderTopStyle"),borderBlockStartStyle:ye.borderStyles("borderBlockStartStyle"),borderBottomWidth:ye.borderWidths("borderBottomWidth"),borderBlockEndWidth:ye.borderWidths("borderBlockEndWidth"),borderBottomColor:ye.colors("borderBottomColor"),borderBlockEndColor:ye.colors("borderBlockEndColor"),borderBottomStyle:ye.borderStyles("borderBottomStyle"),borderBlockEndStyle:ye.borderStyles("borderBlockEndStyle"),borderLeftWidth:ye.borderWidths("borderLeftWidth"),borderInlineStartWidth:ye.borderWidths("borderInlineStartWidth"),borderLeftColor:ye.colors("borderLeftColor"),borderInlineStartColor:ye.colors("borderInlineStartColor"),borderLeftStyle:ye.borderStyles("borderLeftStyle"),borderInlineStartStyle:ye.borderStyles("borderInlineStartStyle"),borderRightWidth:ye.borderWidths("borderRightWidth"),borderInlineEndWidth:ye.borderWidths("borderInlineEndWidth"),borderRightColor:ye.colors("borderRightColor"),borderInlineEndColor:ye.colors("borderInlineEndColor"),borderRightStyle:ye.borderStyles("borderRightStyle"),borderInlineEndStyle:ye.borderStyles("borderInlineEndStyle"),borderTopRadius:ye.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:ye.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:ye.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:ye.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(xe,{rounded:xe.borderRadius,roundedTop:xe.borderTopRadius,roundedTopLeft:xe.borderTopLeftRadius,roundedTopRight:xe.borderTopRightRadius,roundedTopStart:xe.borderStartStartRadius,roundedTopEnd:xe.borderStartEndRadius,roundedBottom:xe.borderBottomRadius,roundedBottomLeft:xe.borderBottomLeftRadius,roundedBottomRight:xe.borderBottomRightRadius,roundedBottomStart:xe.borderEndStartRadius,roundedBottomEnd:xe.borderEndEndRadius,roundedLeft:xe.borderLeftRadius,roundedRight:xe.borderRightRadius,roundedStart:xe.borderInlineStartRadius,roundedEnd:xe.borderInlineEndRadius,borderStart:xe.borderInlineStart,borderEnd:xe.borderInlineEnd,borderTopStartRadius:xe.borderStartStartRadius,borderTopEndRadius:xe.borderStartEndRadius,borderBottomStartRadius:xe.borderEndStartRadius,borderBottomEndRadius:xe.borderEndEndRadius,borderStartRadius:xe.borderInlineStartRadius,borderEndRadius:xe.borderInlineEndRadius,borderStartWidth:xe.borderInlineStartWidth,borderEndWidth:xe.borderInlineEndWidth,borderStartColor:xe.borderInlineStartColor,borderEndColor:xe.borderInlineEndColor,borderStartStyle:xe.borderInlineStartStyle,borderEndStyle:xe.borderInlineEndStyle});var _e={color:ye.colors("color"),textColor:ye.colors("color"),fill:ye.colors("fill"),stroke:ye.colors("stroke")},be={boxShadow:ye.shadows("boxShadow"),mixBlendMode:!0,blendMode:ye.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:ye.prop("backgroundBlendMode"),opacity:!0};Object.assign(be,{shadow:be.boxShadow});var we={filter:{transform:ge.filter},blur:ye.blur("--chakra-blur"),brightness:ye.propT("--chakra-brightness",ge.brightness),contrast:ye.propT("--chakra-contrast",ge.contrast),hueRotate:ye.propT("--chakra-hue-rotate",ge.hueRotate),invert:ye.propT("--chakra-invert",ge.invert),saturate:ye.propT("--chakra-saturate",ge.saturate),dropShadow:ye.propT("--chakra-drop-shadow",ge.dropShadow),backdropFilter:{transform:ge.backdropFilter},backdropBlur:ye.blur("--chakra-backdrop-blur"),backdropBrightness:ye.propT("--chakra-backdrop-brightness",ge.brightness),backdropContrast:ye.propT("--chakra-backdrop-contrast",ge.contrast),backdropHueRotate:ye.propT("--chakra-backdrop-hue-rotate",ge.hueRotate),backdropInvert:ye.propT("--chakra-backdrop-invert",ge.invert),backdropSaturate:ye.propT("--chakra-backdrop-saturate",ge.saturate)},Se={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:ge.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:ye.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:ye.space("gap"),rowGap:ye.space("rowGap"),columnGap:ye.space("columnGap")};Object.assign(Se,{flexDir:Se.flexDirection});var ke={gridGap:ye.space("gridGap"),gridColumnGap:ye.space("gridColumnGap"),gridRowGap:ye.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Ce={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:ge.outline},outlineOffset:!0,outlineColor:ye.colors("outlineColor")},Te={width:ye.sizesT("width"),inlineSize:ye.sizesT("inlineSize"),height:ye.sizes("height"),blockSize:ye.sizes("blockSize"),boxSize:ye.sizes(["width","height"]),minWidth:ye.sizes("minWidth"),minInlineSize:ye.sizes("minInlineSize"),minHeight:ye.sizes("minHeight"),minBlockSize:ye.sizes("minBlockSize"),maxWidth:ye.sizes("maxWidth"),maxInlineSize:ye.sizes("maxInlineSize"),maxHeight:ye.sizes("maxHeight"),maxBlockSize:ye.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var i,r,n;const o=null!=(n=null==(r=null==(i=e.__breakpoints)?void 0:i.get(t))?void 0:r.minW)?n:t,a="@media screen and (min-width: ".concat(o,")");return{[a]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var i,r,n;const o=null!=(n=null==(r=null==(i=e.__breakpoints)?void 0:i.get(t))?void 0:r._minW)?n:t,a="@media screen and (max-width: ".concat(o,")");return{[a]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:ye.propT("float",ge.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Te,{w:Te.width,h:Te.height,minW:Te.minWidth,maxW:Te.maxWidth,minH:Te.minHeight,maxH:Te.maxHeight,overscroll:Te.overscrollBehavior,overscrollX:Te.overscrollBehaviorX,overscrollY:Te.overscrollBehaviorY});var Ae={listStyleType:!0,listStylePosition:!0,listStylePos:ye.prop("listStylePosition"),listStyleImage:!0,listStyleImg:ye.prop("listStyleImage")};var Pe=(t=>{const e=new WeakMap;return(i,r,n,o)=>{if("undefined"===typeof i)return t(i,r,n);e.has(i)||e.set(i,new Map);const a=e.get(i);if(a.has(r))return a.get(r);const s=t(i,r,n,o);return a.set(r,s),s}})((function(t,e,i,r){const n="string"===typeof e?e.split("."):[e];for(r=0;r<n.length&&t;r+=1)t=t[n[r]];return void 0===t?i:t})),Me={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Ee={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},Ie=(t,e,i)=>{const r={},n=Pe(t,e,{});for(const o in n){o in i&&null!=i[o]||(r[o]=n[o])}return r},ze={srOnly:{transform:t=>!0===t?Me:"focusable"===t?Ee:{}},layerStyle:{processResult:!0,transform:(t,e,i)=>Ie(e,"layerStyles.".concat(t),i)},textStyle:{processResult:!0,transform:(t,e,i)=>Ie(e,"textStyles.".concat(t),i)},apply:{processResult:!0,transform:(t,e,i)=>Ie(e,t,i)}},Le={position:!0,pos:ye.prop("position"),zIndex:ye.prop("zIndex","zIndices"),inset:ye.spaceT("inset"),insetX:ye.spaceT(["left","right"]),insetInline:ye.spaceT("insetInline"),insetY:ye.spaceT(["top","bottom"]),insetBlock:ye.spaceT("insetBlock"),top:ye.spaceT("top"),insetBlockStart:ye.spaceT("insetBlockStart"),bottom:ye.spaceT("bottom"),insetBlockEnd:ye.spaceT("insetBlockEnd"),left:ye.spaceT("left"),insetInlineStart:ye.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:ye.spaceT("right"),insetInlineEnd:ye.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Le,{insetStart:Le.insetInlineStart,insetEnd:Le.insetInlineEnd});var De={ring:{transform:ge.ring},ringColor:ye.colors("--chakra-ring-color"),ringOffset:ye.prop("--chakra-ring-offset-width"),ringOffsetColor:ye.colors("--chakra-ring-offset-color"),ringInset:ye.prop("--chakra-ring-inset")},Re={margin:ye.spaceT("margin"),marginTop:ye.spaceT("marginTop"),marginBlockStart:ye.spaceT("marginBlockStart"),marginRight:ye.spaceT("marginRight"),marginInlineEnd:ye.spaceT("marginInlineEnd"),marginBottom:ye.spaceT("marginBottom"),marginBlockEnd:ye.spaceT("marginBlockEnd"),marginLeft:ye.spaceT("marginLeft"),marginInlineStart:ye.spaceT("marginInlineStart"),marginX:ye.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:ye.spaceT("marginInline"),marginY:ye.spaceT(["marginTop","marginBottom"]),marginBlock:ye.spaceT("marginBlock"),padding:ye.space("padding"),paddingTop:ye.space("paddingTop"),paddingBlockStart:ye.space("paddingBlockStart"),paddingRight:ye.space("paddingRight"),paddingBottom:ye.space("paddingBottom"),paddingBlockEnd:ye.space("paddingBlockEnd"),paddingLeft:ye.space("paddingLeft"),paddingInlineStart:ye.space("paddingInlineStart"),paddingInlineEnd:ye.space("paddingInlineEnd"),paddingX:ye.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:ye.space("paddingInline"),paddingY:ye.space(["paddingTop","paddingBottom"]),paddingBlock:ye.space("paddingBlock")};Object.assign(Re,{m:Re.margin,mt:Re.marginTop,mr:Re.marginRight,me:Re.marginInlineEnd,marginEnd:Re.marginInlineEnd,mb:Re.marginBottom,ml:Re.marginLeft,ms:Re.marginInlineStart,marginStart:Re.marginInlineStart,mx:Re.marginX,my:Re.marginY,p:Re.padding,pt:Re.paddingTop,py:Re.paddingY,px:Re.paddingX,pb:Re.paddingBottom,pl:Re.paddingLeft,ps:Re.paddingInlineStart,paddingStart:Re.paddingInlineStart,pr:Re.paddingRight,pe:Re.paddingInlineEnd,paddingEnd:Re.paddingInlineEnd});var Oe={textDecorationColor:ye.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:ye.shadows("textShadow")},Be={clipPath:!0,transform:ye.propT("transform",ge.transform),transformOrigin:!0,translateX:ye.spaceT("--chakra-translate-x"),translateY:ye.spaceT("--chakra-translate-y"),skewX:ye.degreeT("--chakra-skew-x"),skewY:ye.degreeT("--chakra-skew-y"),scaleX:ye.prop("--chakra-scale-x"),scaleY:ye.prop("--chakra-scale-y"),scale:ye.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:ye.degreeT("--chakra-rotate")},Fe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:ye.prop("transitionDuration","transition.duration"),transitionProperty:ye.prop("transitionProperty","transition.property"),transitionTimingFunction:ye.prop("transitionTimingFunction","transition.easing")},je={fontFamily:ye.prop("fontFamily","fonts"),fontSize:ye.prop("fontSize","fontSizes",ge.px),fontWeight:ye.prop("fontWeight","fontWeights"),lineHeight:ye.prop("lineHeight","lineHeights"),letterSpacing:ye.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(!0===t)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Ne={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:ye.spaceT("scrollMargin"),scrollMarginTop:ye.spaceT("scrollMarginTop"),scrollMarginBottom:ye.spaceT("scrollMarginBottom"),scrollMarginLeft:ye.spaceT("scrollMarginLeft"),scrollMarginRight:ye.spaceT("scrollMarginRight"),scrollMarginX:ye.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:ye.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:ye.spaceT("scrollPadding"),scrollPaddingTop:ye.spaceT("scrollPaddingTop"),scrollPaddingBottom:ye.spaceT("scrollPaddingBottom"),scrollPaddingLeft:ye.spaceT("scrollPaddingLeft"),scrollPaddingRight:ye.spaceT("scrollPaddingRight"),scrollPaddingX:ye.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:ye.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Ve(t){return Kt(t)&&t.reference?t.reference:String(t)}var Ue=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.map(Ve).join(" ".concat(t," ")).replace(/calc/g,"")},We=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(Ue("+",...e),")")},He=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(Ue("-",...e),")")},Ge=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(Ue("*",...e),")")},qe=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(Ue("/",...e),")")},Ze=t=>{const e=Ve(t);return null==e||Number.isNaN(parseFloat(e))?Ge(e,-1):String(e).startsWith("-")?String(e).slice(1):"-".concat(e)},Xe=Object.assign((t=>({add:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return Xe(We(t,...i))},subtract:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return Xe(He(t,...i))},multiply:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return Xe(Ge(t,...i))},divide:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return Xe(qe(t,...i))},negate:()=>Xe(Ze(t)),toString:()=>t.toString()})),{add:We,subtract:He,multiply:Ge,divide:qe,negate:Ze});function Ye(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(/\s+/g,e)}(t.toString());return function(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(function(t){if(t.includes("\\."))return t;const e=!Number.isInteger(parseFloat(t.toString()));return e?t.replace(".","\\."):t}(e))}function Ke(t,e){return"var(".concat(t).concat(e?", ".concat(e):"",")")}function $e(t){return Ye("--".concat(function(t){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t].filter(Boolean).join("-")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")))}function Je(t,e,i){const r=$e(t,i);return{variable:r,reference:Ke(r,e)}}function Qe(t){const e=null==t?0:t.length;return e?t[e-1]:void 0}function ti(t){if(null==t)return t;const{unitless:e}=function(t){const e=parseFloat(t.toString()),i=t.toString().replace(String(e),"");return{unitless:!i,value:e,unit:i}}(t);return e||"number"===typeof t?"".concat(t,"px"):t}var ei=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,ii=t=>Object.fromEntries(Object.entries(t).sort(ei));function ri(t){const e=ii(t);return Object.assign(Object.values(e),e)}function ni(t){var e;if(!t)return t;t=null!=(e=ti(t))?e:t;return"number"===typeof t?"".concat(t+-.02):t.replace(/(\d+\.?\d*)/u,(t=>"".concat(parseFloat(t)+-.02)))}function oi(t,e){const i=["@media screen"];return t&&i.push("and","(min-width: ".concat(ti(t),")")),e&&i.push("and","(max-width: ".concat(ti(e),")")),i.join(" ")}function ai(t){var e;if(!t)return null;t.base=null!=(e=t.base)?e:"0px";const i=ri(t),r=Object.entries(t).sort(ei).map(((t,e,i)=>{let[r,n]=t;var o;let[,a]=null!=(o=i[e+1])?o:[];return a=parseFloat(a)>0?ni(a):void 0,{_minW:ni(n),breakpoint:r,minW:n,maxW:a,maxWQuery:oi(null,a),minWQuery:oi(n),minMaxQuery:oi(n,a)}})),n=function(t){const e=Object.keys(ii(t));return new Set(e)}(t),o=Array.from(n.values());return{keys:n,normalized:i,isResponsive(t){const e=Object.keys(t);return e.length>0&&e.every((t=>n.has(t)))},asObject:ii(t),asArray:ri(t),details:r,get:t=>r.find((e=>e.breakpoint===t)),media:[null,...i.map((t=>oi(t))).slice(1)],toArrayValue(t){if(!Kt(t))throw new Error("toArrayValue: value must be an object");const e=o.map((e=>{var i;return null!=(i=t[e])?i:null}));for(;null===Qe(e);)e.pop();return e},toObjectValue(t){if(!Array.isArray(t))throw new Error("toObjectValue: value must be an array");return t.reduce(((t,e,i)=>{const r=o[i];return null!=r&&null!=e&&(t[r]=e),t}),{})}}}var si=(t,e)=>"".concat(t,":hover ").concat(e,", ").concat(t,"[data-hover] ").concat(e),li=(t,e)=>"".concat(t,":focus ").concat(e,", ").concat(t,"[data-focus] ").concat(e),ci=(t,e)=>"".concat(t,":focus-visible ").concat(e),ui=(t,e)=>"".concat(t,":focus-within ").concat(e),hi=(t,e)=>"".concat(t,":active ").concat(e,", ").concat(t,"[data-active] ").concat(e),di=(t,e)=>"".concat(t,":disabled ").concat(e,", ").concat(t,"[data-disabled] ").concat(e),pi=(t,e)=>"".concat(t,":invalid ").concat(e,", ").concat(t,"[data-invalid] ").concat(e),fi=(t,e)=>"".concat(t,":checked ").concat(e,", ").concat(t,"[data-checked] ").concat(e),mi=(t,e)=>"".concat(t,":placeholder-shown ").concat(e),gi=t=>vi((e=>t(e,"&")),"[role=group]","[data-group]",".group"),yi=t=>vi((e=>t(e,"~ &")),"[data-peer]",".peer"),vi=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.map(t).join(", ")},xi={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:gi(si),_peerHover:yi(si),_groupFocus:gi(li),_peerFocus:yi(li),_groupFocusVisible:gi(ci),_peerFocusVisible:yi(ci),_groupActive:gi(hi),_peerActive:yi(hi),_groupDisabled:gi(di),_peerDisabled:yi(di),_groupInvalid:gi(pi),_peerInvalid:yi(pi),_groupChecked:gi(fi),_peerChecked:yi(fi),_groupFocusWithin:gi(ui),_peerFocusWithin:yi(ui),_peerPlaceholderShown:yi(mi),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},_i=Object.keys(xi);function bi(t,e){return Je(String(t).replace(/\./g,"-"),void 0,e)}function wi(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{stop:r,getKey:n}=i;return function t(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a;if(function(t){return"object"===typeof t&&null!=t&&!Array.isArray(t)}(i)||Array.isArray(i)){const s={};for(const[l,c]of Object.entries(i)){const u=null!=(a=null==n?void 0:n(l))?a:l,h=[...o,u];if(null==r?void 0:r(i,h))return e(i,o);s[u]=t(c,h)}return s}return e(i,o)}(t)}var Si=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];var ki=t=>_i.includes(t)||"default"===t;function Ci(t){var e;const i=function(t){const{__cssMap:e,__cssVars:i,__breakpoints:r,...n}=t;return n}(t),r=function(t){return function(t,e){const i={};for(const r of e)r in t&&(i[r]=t[r]);return i}(t,Si)}(i),n=function(t){return t.semanticTokens}(i),o=function(t){let{tokens:e,semanticTokens:i}=t;const r={};return wi(e,((t,e)=>{null!=t&&(r[e.join(".")]={isSemantic:!1,value:t})})),wi(i,((t,e)=>{null!=t&&(r[e.join(".")]={isSemantic:!0,value:t})}),{stop:t=>Object.keys(t).every(ki)}),r}({tokens:r,semanticTokens:n}),a=null==(e=i.config)?void 0:e.cssVarPrefix,{cssMap:s,cssVars:l}=function(t,e){let i={};const r={};for(const[n,o]of Object.entries(t)){const{isSemantic:a,value:s}=o,{variable:l,reference:c}=bi(n,null==e?void 0:e.cssVarPrefix);if(!a){if(n.startsWith("space")){const t=n.split("."),[e,...i]=t,o="".concat(e,".-").concat(i.join(".")),a=Xe.negate(s),u=Xe.negate(c);r[o]={value:a,var:l,varRef:u}}i[l]=s,r[n]={value:s,var:l,varRef:c};continue}const u=i=>{const r=[String(n).split(".")[0],i].join(".");if(!t[r])return i;const{reference:o}=bi(r,null==e?void 0:e.cssVarPrefix);return o},h=Kt(s)?s:{default:s};i=Qt(i,Object.entries(h).reduce(((t,e)=>{let[i,r]=e;var n,o;if(!r)return t;const a=u("".concat(r));return"default"===i?(t[l]=a,t):(t[null!=(o=null==(n=xi)?void 0:n[i])?o:i]={[l]:a},t)}),{})),r[n]={value:c,var:l,varRef:c}}return{cssVars:i,cssMap:r}}(o,{cssVarPrefix:a});return Object.assign(i,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...l},__cssMap:s,__breakpoints:ai(i.breakpoints)}),i}var Ti=Qt({},ve,xe,_e,Se,Te,we,De,Ce,ke,ze,Le,be,Re,Ne,je,Oe,Be,Ae,Fe),Ai=Object.assign({},Re,Te,Se,ke,Le),Pi=(Object.keys(Ai),[...Object.keys(Ti),..._i]),Mi={...Ti,...xi},Ei=t=>t in Mi;var Ii=(t,e)=>t.startsWith("--")&&"string"===typeof e&&!function(t){return/^var\(--.+\)$/.test(t)}(e),zi=(t,e)=>{var i,r;if(null==e)return e;const n=e=>{var i,r;return null==(r=null==(i=t.__cssMap)?void 0:i[e])?void 0:r.varRef},o=t=>{var e;return null!=(e=n(t))?e:t},[a,s]=function(t){const e=[];let i="",r=!1;for(let n=0;n<t.length;n++){const o=t[n];"("===o?(r=!0,i+=o):")"===o?(r=!1,i+=o):","!==o||r?i+=o:(e.push(i),i="")}return i=i.trim(),i&&e.push(i),e}(e);return e=null!=(r=null!=(i=n(a))?i:o(s))?r:o(e)};function Li(t){const{configs:e={},pseudos:i={},theme:r}=t,n=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a,s,l;const c=$t(t,r),u=(t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:i,toArrayValue:r,media:n}=e.__breakpoints,o={};for(const a in t){let s=$t(t[a],e);if(null==s)continue;if(s=Kt(s)&&i(s)?r(s):s,!Array.isArray(s)){o[a]=s;continue}const l=s.slice(0,n.length).length;for(let t=0;t<l;t+=1){const e=null==n?void 0:n[t];e?(o[e]=o[e]||{},null!=s[t]&&(o[e][a]=s[t])):o[a]=s[t]}}return o})(c)(r);let h={};for(let d in u){let t=$t(u[d],r);d in i&&(d=i[d]),Ii(d,t)&&(t=zi(r,t));let p=e[d];if(!0===p&&(p={property:d}),Kt(t)){h[d]=null!=(a=h[d])?a:{},h[d]=Qt({},h[d],n(t,!0));continue}let f=null!=(l=null==(s=null==p?void 0:p.transform)?void 0:s.call(p,t,r,c))?l:t;f=(null==p?void 0:p.processResult)?n(f,!0):f;const m=$t(null==p?void 0:p.property,r);if(!o&&(null==p?void 0:p.static)){const t=$t(p.static,r);h=Qt({},h,t)}if(m&&Array.isArray(m))for(const e of m)h[e]=f;else m?"&"===m&&Kt(f)?h=Qt({},h,f):h[m]=f:Kt(f)?h=Qt({},h,f):h[d]=f}return h};return n}var Di=t=>e=>Li({theme:e,pseudos:xi,configs:Ti})(t);function Ri(t){return{definePartsStyle:t=>t,defineMultiStyleConfig:e=>({parts:t,...e})}}function Oi(t,e){for(let i=e+1;i<t.length;i++)if(null!=t[i])return i;return-1}function Bi(t){const e=t.__breakpoints;return function(t,i,r,n){var o,a;if(!e)return;const s={},l=function(t,e){return Array.isArray(t)?t:Kt(t)?e(t):null!=t?[t]:void 0}(r,e.toArrayValue);if(!l)return s;const c=l.length,u=1===c,h=!!t.parts;for(let d=0;d<c;d++){const r=e.details[d],c=e.details[Oi(l,d)],p=oi(r.minW,null==c?void 0:c._minW),f=$t(null==(o=t[i])?void 0:o[l[d]],n);f&&(h?null==(a=t.parts)||a.forEach((t=>{Qt(s,{[t]:u?f[t]:{[p]:f[t]}})})):h?s[p]=f:u?Qt(s,f):s[p]=f)}return s}}function Fi(t){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=Object.assign({},t);for(const r of e)r in i&&delete i[r];return i}(t,["styleConfig","size","variant","colorScheme"])}var ji=(t=>{const e=new WeakMap;return(i,r,n,o)=>{if("undefined"===typeof i)return t(i,r,n);e.has(i)||e.set(i,new Map);const a=e.get(i);if(a.has(r))return a.get(r);const s=t(i,r,n,o);return a.set(r,s),s}})((function(t,e,i,r){const n="string"===typeof e?e.split("."):[e];for(r=0;r<n.length&&t;r+=1)t=t[n[r]];return void 0===t?i:t}));function Ni(t,e){const i={};return Object.keys(t).forEach((r=>{const n=t[r];e(n,r,t)&&(i[r]=n)})),i}var Vi=t=>Ni(t,(t=>null!==t&&void 0!==t));function Ui(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return"function"===typeof t?t(...i):t}function Wi(e){const{cssVarsRoot:i,theme:r,children:n}=e,a=(0,o.useMemo)((()=>Ci(r)),[r]);return(0,t.jsxs)(zt,{theme:a,children:[(0,t.jsx)(Hi,{root:i}),n]})}function Hi(e){let{root:i=":host, :root"}=e;const r=[i,"[data-theme]"].join(",");return(0,t.jsx)(Rt,{styles:t=>({[r]:t.__cssVars})})}var[Gi,qi]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{strict:e=!0,errorMessage:i="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=t,n=(0,o.createContext)(void 0);return n.displayName=r,[n.Provider,function t(){var r;const a=(0,o.useContext)(n);if(!a&&e){const e=new Error(i);throw e.name="ContextError",null==(r=Error.captureStackTrace)||r.call(Error,e,t),e}return a},n]}({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Zi(){const{colorMode:e}=Xt();return(0,t.jsx)(Rt,{styles:t=>{const i=Ui(ji(t,"styles.global"),{theme:t,colorMode:e});if(!i)return;return Di(i)(t)}})}var Xi={light:"chakra-ui-light",dark:"chakra-ui-dark"};var Yi="chakra-ui-color-mode";var Ki,$i=(Ki=Yi,{ssr:!1,type:"localStorage",get(t){if(!(null==globalThis?void 0:globalThis.document))return t;let e;try{e=localStorage.getItem(Ki)||t}catch(i){}return e||t},set(t){try{localStorage.setItem(Ki,t)}catch(e){}}});function Ji(t,e){const i=t.match(new RegExp("(^| )".concat(e,"=([^;]+)")));return null==i?void 0:i[2]}function Qi(t,e){return{ssr:!!e,type:"cookie",get:i=>e?Ji(e,t):(null==globalThis?void 0:globalThis.document)&&Ji(document.cookie,t)||i,set(e){document.cookie="".concat(t,"=").concat(e,"; max-age=31536000; path=/")}}}Qi(Yi);var tr=Boolean(null==globalThis?void 0:globalThis.document)?o.useLayoutEffect:o.useEffect,er=()=>{};function ir(t,e){return"cookie"===t.type&&t.ssr?t.get(e):e}function rr(e){const{value:i,children:r,options:{useSystemColorMode:n,initialColorMode:a,disableTransitionOnChange:s}={},colorModeManager:l=$i}=e,c="dark"===a?"dark":"light",[u,h]=(0,o.useState)((()=>ir(l,c))),[d,p]=(0,o.useState)((()=>ir(l))),{getSystemTheme:f,setClassName:m,setDataset:g,addListener:y}=(0,o.useMemo)((()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{preventTransition:e=!0}=t,i={setDataset:t=>{const r=e?i.preventTransition():void 0;document.documentElement.dataset.theme=t,document.documentElement.style.colorScheme=t,null==r||r()},setClassName(t){document.body.classList.add(t?Xi.dark:Xi.light),document.body.classList.remove(t?Xi.light:Xi.dark)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme(t){var e;return(null!=(e=i.query().matches)?e:"dark"===t)?"dark":"light"},addListener(t){const e=i.query(),r=e=>{t(e.matches?"dark":"light")};return"function"===typeof e.addListener?e.addListener(r):e.addEventListener("change",r),()=>{"function"===typeof e.removeListener?e.removeListener(r):e.removeEventListener("change",r)}},preventTransition(){const t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.head.removeChild(t)}))}))}}};return i}({preventTransition:s})),[s]),v="system"!==a||u?u:d,x=(0,o.useCallback)((t=>{const e="system"===t?f():t;h(e),m("dark"===e),g(e),l.set(e)}),[l,f,m,g]);tr((()=>{"system"===a&&p(f())}),[]),(0,o.useEffect)((()=>{const t=l.get();x(t||("system"!==a?c:"system"))}),[l,c,a,x]);const _=(0,o.useCallback)((()=>{x("dark"===v?"light":"dark")}),[v,x]);(0,o.useEffect)((()=>{if(n)return y(x)}),[n,y,x]);const b=(0,o.useMemo)((()=>({colorMode:null!=i?i:v,toggleColorMode:i?er:_,setColorMode:i?er:x,forced:void 0!==i})),[v,_,x,i]);return(0,t.jsx)(Zt.Provider,{value:b,children:r})}rr.displayName="ColorModeProvider";var nr=(0,o.createContext)({getDocument:()=>document,getWindow:()=>window});function or(e){const{children:i,environment:r,disabled:n}=e,a=(0,o.useRef)(null),s=(0,o.useMemo)((()=>r||{getDocument:()=>{var t,e;return null!=(e=null==(t=a.current)?void 0:t.ownerDocument)?e:document},getWindow:()=>{var t,e;return null!=(e=null==(t=a.current)?void 0:t.ownerDocument.defaultView)?e:window}}),[r]),l=!n||!r;return(0,t.jsxs)(nr.Provider,{value:s,children:[i,l&&(0,t.jsx)("span",{id:"__chakra_env",hidden:!0,ref:a})]})}nr.displayName="EnvironmentContext",or.displayName="EnvironmentProvider";var ar=e=>{const{children:i,colorModeManager:r,portalZIndex:n,resetScope:o,resetCSS:a=!0,theme:s={},environment:l,cssVarsRoot:c,disableEnvironment:u,disableGlobalStyle:h}=e,d=(0,t.jsx)(or,{environment:l,disabled:u,children:i});return(0,t.jsx)(Wi,{theme:s,cssVarsRoot:c,children:(0,t.jsxs)(rr,{colorModeManager:r,options:s.config,children:[a?(0,t.jsx)(Ut,{scope:o}):(0,t.jsx)(Vt,{}),!h&&(0,t.jsx)(Zi,{}),n?(0,t.jsx)(qt,{zIndex:n,children:d}):d]})})},sr={property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},lr={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},cr={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},ur={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},hr={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},dr={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},pr={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},fr={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},mr={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},gr={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},yr={...gr,max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},vr={breakpoints:ur,zIndices:lr,radii:dr,blur:fr,colors:hr,...mr,sizes:yr,shadows:pr,space:gr,borders:cr,transition:sr},{defineMultiStyleConfig:xr,definePartsStyle:_r}=Ri(["stepper","step","title","description","indicator","separator","icon","number"]),br=Je("stepper-indicator-size"),wr=Je("stepper-icon-size"),Sr=Je("stepper-title-font-size"),kr=Je("stepper-description-font-size"),Cr=Je("stepper-accent-color"),Tr=_r((t=>{let{colorScheme:e}=t;return{stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Cr.variable]:"colors.".concat(e,".500"),_dark:{[Cr.variable]:"colors.".concat(e,".200")}},title:{fontSize:Sr.reference,fontWeight:"medium"},description:{fontSize:kr.reference,color:"chakra-subtle-text"},number:{fontSize:Sr.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:wr.reference,height:wr.reference},indicator:{flexShrink:0,borderRadius:"full",width:br.reference,height:br.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Cr.reference},"&[data-status=complete]":{bg:Cr.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Cr.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:"calc(100% - ".concat(br.reference," - 8px)"),top:"calc(".concat(br.reference," + 4px)"),insetStart:"calc(".concat(br.reference," / 2 - 1px)")}}}})),Ar=xr({baseStyle:Tr,sizes:{xs:_r({stepper:{[br.variable]:"sizes.4",[wr.variable]:"sizes.3",[Sr.variable]:"fontSizes.xs",[kr.variable]:"fontSizes.xs"}}),sm:_r({stepper:{[br.variable]:"sizes.6",[wr.variable]:"sizes.4",[Sr.variable]:"fontSizes.sm",[kr.variable]:"fontSizes.xs"}}),md:_r({stepper:{[br.variable]:"sizes.8",[wr.variable]:"sizes.5",[Sr.variable]:"fontSizes.md",[kr.variable]:"fontSizes.sm"}}),lg:_r({stepper:{[br.variable]:"sizes.10",[wr.variable]:"sizes.6",[Sr.variable]:"fontSizes.lg",[kr.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Pr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1;function r(e){const i=(["container","root"].includes(null!=e?e:"")?[t]:[t,e]).filter(Boolean).join("__"),r="chakra-".concat(i);return{className:r,selector:".".concat(r),toString:()=>e}}return{parts:function(){!function(){if(i)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");i=!0}();for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];for(const t of o)e[t]=r(t);return Pr(t,e)},toPart:r,extend:function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];for(const t of n)t in e||(e[t]=r(t));return Pr(t,e)},selectors:function(){const t=Object.fromEntries(Object.entries(e).map((t=>{let[e,i]=t;return[e,i.selector]})));return t},classnames:function(){const t=Object.fromEntries(Object.entries(e).map((t=>{let[e,i]=t;return[e,i.className]})));return t},get keys(){return Object.keys(e)},__type:{}}}var Mr=Pr("accordion").parts("root","container","button","panel").extend("icon"),Er=Pr("alert").parts("title","description","container").extend("icon","spinner"),Ir=Pr("avatar").parts("label","badge","container").extend("excessLabel","group"),zr=Pr("breadcrumb").parts("link","item","container").extend("separator"),Lr=(Pr("button").parts(),Pr("checkbox").parts("control","icon","container").extend("label")),Dr=(Pr("progress").parts("track","filledTrack").extend("label"),Pr("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),Rr=Pr("editable").parts("preview","input","textarea"),Or=Pr("form").parts("container","requiredIndicator","helperText"),Br=Pr("formError").parts("text","icon"),Fr=Pr("input").parts("addon","field","element","group"),jr=Pr("list").parts("container","item","icon"),Nr=Pr("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),Vr=Pr("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Ur=Pr("numberinput").parts("root","field","stepperGroup","stepper"),Wr=(Pr("pininput").parts("field"),Pr("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),Hr=Pr("progress").parts("label","filledTrack","track"),Gr=Pr("radio").parts("container","control","label"),qr=Pr("select").parts("field","icon"),Zr=Pr("slider").parts("container","track","thumb","filledTrack","mark"),Xr=Pr("stat").parts("container","label","helpText","number","icon"),Yr=Pr("switch").parts("container","track","thumb","label"),Kr=Pr("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),$r=Pr("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Jr=Pr("tag").parts("container","label","closeButton"),Qr=Pr("card").parts("container","header","body","footer");Pr("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function tn(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(/\s+/g,e)}(t.toString());return e.includes("\\.")?t:function(t){return!Number.isInteger(parseFloat(t.toString()))}(t)?e.replace(".","\\."):t}function en(t,e){return"var(".concat(tn(t)).concat(e?", ".concat(e):"",")")}function rn(t){return"--".concat(function(t){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",tn(t)].filter(Boolean).join("-")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""))}function nn(t,e){const i=rn(t,null==e?void 0:e.prefix);return{variable:i,reference:en(i,on(null==e?void 0:e.fallback))}}function on(t){return"string"===typeof t?t:null==t?void 0:t.reference}function an(t){return Kt(t)&&t.reference?t.reference:String(t)}var sn=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.map(an).join(" ".concat(t," ")).replace(/calc/g,"")},ln=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(sn("+",...e),")")},cn=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(sn("-",...e),")")},un=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(sn("*",...e),")")},hn=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return"calc(".concat(sn("/",...e),")")},dn=t=>{const e=an(t);return null==e||Number.isNaN(parseFloat(e))?un(e,-1):String(e).startsWith("-")?String(e).slice(1):"-".concat(e)},pn=Object.assign((t=>({add:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return pn(ln(t,...i))},subtract:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return pn(cn(t,...i))},multiply:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return pn(un(t,...i))},divide:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return pn(hn(t,...i))},negate:()=>pn(dn(t)),toString:()=>t.toString()})),{add:ln,subtract:cn,multiply:un,divide:hn,negate:dn}),{defineMultiStyleConfig:fn,definePartsStyle:mn}=Ri(Yr.keys),gn=nn("switch-track-width"),yn=nn("switch-track-height"),vn=nn("switch-track-diff"),xn=pn.subtract(gn,yn),_n=nn("switch-thumb-x"),bn=nn("switch-bg"),wn=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[gn.reference],height:[yn.reference],transitionProperty:"common",transitionDuration:"fast",[bn.variable]:"colors.gray.300",_dark:{[bn.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[bn.variable]:"colors.".concat(e,".500"),_dark:{[bn.variable]:"colors.".concat(e,".200")}},bg:bn.reference}},Sn={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[yn.reference],height:[yn.reference],_checked:{transform:"translateX(".concat(_n.reference,")")}},kn=fn({baseStyle:mn((t=>({container:{[vn.variable]:xn,[_n.variable]:vn.reference,_rtl:{[_n.variable]:pn(vn).negate().toString()}},track:wn(t),thumb:Sn}))),sizes:{sm:mn({container:{[gn.variable]:"1.375rem",[yn.variable]:"sizes.3"}}),md:mn({container:{[gn.variable]:"1.875rem",[yn.variable]:"sizes.4"}}),lg:mn({container:{[gn.variable]:"2.875rem",[yn.variable]:"sizes.6"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Cn(t,e){return i=>"dark"===i.colorMode?e:t}function Tn(t){const{orientation:e,vertical:i,horizontal:r}=t;return e?"vertical"===e?i:r:{}}var{defineMultiStyleConfig:An,definePartsStyle:Pn}=Ri(Kr.keys),Mn=Pn({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),En={"&[data-is-numeric=true]":{textAlign:"end"}},In=Pn((t=>{const{colorScheme:e}=t;return{th:{color:Cn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Cn("".concat(e,".100"),"".concat(e,".700"))(t),...En},td:{borderBottom:"1px",borderColor:Cn("".concat(e,".100"),"".concat(e,".700"))(t),...En},caption:{color:Cn("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),zn=Pn((t=>{const{colorScheme:e}=t;return{th:{color:Cn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Cn("".concat(e,".100"),"".concat(e,".700"))(t),...En},td:{borderBottom:"1px",borderColor:Cn("".concat(e,".100"),"".concat(e,".700"))(t),...En},caption:{color:Cn("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Cn("".concat(e,".100"),"".concat(e,".700"))(t)},td:{background:Cn("".concat(e,".100"),"".concat(e,".700"))(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),Ln=An({baseStyle:Mn,variants:{simple:In,striped:zn,unstyled:{}},sizes:{sm:Pn({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Pn({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Pn({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function Dn(t,e,i){return Math.min(Math.max(t,i),e)}class Rn extends Error{constructor(t){super('Failed to parse color: "'.concat(t,'"'))}}var On=Rn;function Bn(t){if("string"!==typeof t)throw new On(t);if("transparent"===t.trim().toLowerCase())return[0,0,0,0];let e=t.trim();e=Gn.test(t)?function(t){const e=t.toLowerCase().trim(),i=jn[function(t){let e=5381,i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return(e>>>0)%2341}(e)];if(!i)throw new On(t);return"#".concat(i)}(t):t;const i=Vn.exec(e);if(i){const t=Array.from(i).slice(1);return[...t.slice(0,3).map((t=>parseInt(Nn(t,2),16))),parseInt(Nn(t[3]||"f",2),16)/255]}const r=Un.exec(e);if(r){const t=Array.from(r).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,16))),parseInt(t[3]||"ff",16)/255]}const n=Wn.exec(e);if(n){const t=Array.from(n).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,10))),parseFloat(t[3]||"1")]}const o=Hn.exec(e);if(o){const[e,i,r,n]=Array.from(o).slice(1).map(parseFloat);if(Dn(0,100,i)!==i)throw new On(t);if(Dn(0,100,r)!==r)throw new On(t);return[...Zn(e,i,r),Number.isNaN(n)?1:n]}throw new On(t)}const Fn=t=>parseInt(t.replace(/_/g,""),36),jn="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((t,e)=>{const i=Fn(e.substring(0,3)),r=Fn(e.substring(3)).toString(16);let n="";for(let o=0;o<6-r.length;o++)n+="0";return t[i]="".concat(n).concat(r),t}),{});const Nn=(t,e)=>Array.from(Array(e)).map((()=>t)).join(""),Vn=new RegExp("^#".concat(Nn("([a-f0-9])",3),"([a-f0-9])?$"),"i"),Un=new RegExp("^#".concat(Nn("([a-f0-9]{2})",3),"([a-f0-9]{2})?$"),"i"),Wn=new RegExp("^rgba?\\(\\s*(\\d+)\\s*".concat(Nn(",\\s*(\\d+)\\s*",2),"(?:,\\s*([\\d.]+))?\\s*\\)$"),"i"),Hn=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Gn=/^[a-z]+$/i,qn=t=>Math.round(255*t),Zn=(t,e,i)=>{let r=i/100;if(0===e)return[r,r,r].map(qn);const n=(t%360+360)%360/60,o=(1-Math.abs(2*r-1))*(e/100),a=o*(1-Math.abs(n%2-1));let s=0,l=0,c=0;n>=0&&n<1?(s=o,l=a):n>=1&&n<2?(s=a,l=o):n>=2&&n<3?(l=o,c=a):n>=3&&n<4?(l=a,c=o):n>=4&&n<5?(s=a,c=o):n>=5&&n<6&&(s=o,c=a);const u=r-o/2;return[s+u,l+u,c+u].map(qn)};function Xn(t,e,i,r){return"rgba(".concat(Dn(0,255,t).toFixed(),", ").concat(Dn(0,255,e).toFixed(),", ").concat(Dn(0,255,i).toFixed(),", ").concat(parseFloat(Dn(0,1,r).toFixed(3)),")")}function Yn(t,e){const[i,r,n,o]=Bn(t);return Xn(i,r,n,o-e)}var Kn=(t,e,i)=>{const r=function(t,e,i,r,n){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:n;return t===n?i:t}(t,"colors.".concat(e),e);try{return function(t){const[e,i,r,n]=Bn(t);let o=t=>{const e=Dn(0,255,t).toString(16);return 1===e.length?"0".concat(e):e};"#".concat(o(e)).concat(o(i)).concat(o(r)).concat(n<1?o(Math.round(255*n)):"")}(r),r}catch{return null!=i?i:"#000000"}},$n=t=>e=>{const i=(t=>{const[e,i,r]=Bn(t);return(299*e+587*i+114*r)/1e3})(Kn(e,t));return i<128?"dark":"light"},Jn=(t,e)=>i=>Yn(Kn(i,t),1-e);function Qn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(255, 255, 255, 0.15)";return{backgroundImage:"linear-gradient(\n    45deg,\n    ".concat(e," 25%,\n    transparent 25%,\n    transparent 50%,\n    ").concat(e," 50%,\n    ").concat(e," 75%,\n    transparent 75%,\n    transparent\n  )"),backgroundSize:"".concat(t," ").concat(t)}}function to(t){const e="#".concat(Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0"));return t&&(i=t,0!==Object.keys(i).length)?t.string&&t.colors?function(t,e){let i=0;if(0===t.length)return e[0];for(let r=0;r<t.length;r+=1)i=t.charCodeAt(r)+((i<<5)-i),i|=0;return i=(i%e.length+e.length)%e.length,e[i]}(t.string,t.colors):t.string&&!t.colors?function(t){let e=0;if(0===t.length)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e|=0;let i="#";for(let r=0;r<3;r+=1){i+="00".concat((e>>8*r&255).toString(16)).substr(-2)}return i}(t.string):t.colors&&!t.string?function(t){return t[Math.floor(Math.random()*t.length)]}(t.colors):e:e;var i}var eo=Je("tabs-color"),io=Je("tabs-bg"),ro=Je("tabs-border-color"),{defineMultiStyleConfig:no,definePartsStyle:oo}=Ri($r.keys),ao=t=>{const{orientation:e}=t;return{display:"vertical"===e?"flex":"block"}},so=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},lo=t=>{const{align:e="start",orientation:i}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:"vertical"===i?"column":"row"}},co={p:4},uo=oo((t=>({root:ao(t),tab:so(t),tablist:lo(t),tabpanel:co}))),ho={sm:oo({tab:{py:1,px:4,fontSize:"sm"}}),md:oo({tab:{fontSize:"md",py:2,px:4}}),lg:oo({tab:{fontSize:"lg",py:3,px:4}})},po=oo((t=>{const{colorScheme:e,orientation:i}=t,r="vertical"===i,n=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[n]:"2px solid",borderColor:"inherit"},tab:{[n]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[eo.variable]:"colors.".concat(e,".600"),_dark:{[eo.variable]:"colors.".concat(e,".300")},borderColor:"currentColor"},_active:{[io.variable]:"colors.gray.200",_dark:{[io.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:eo.reference,bg:io.reference}}})),fo=oo((t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[ro.variable]:"transparent",_selected:{[eo.variable]:"colors.".concat(e,".600"),[ro.variable]:"colors.white",_dark:{[eo.variable]:"colors.".concat(e,".300"),[ro.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:ro.reference},color:eo.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),mo=oo((t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[io.variable]:"colors.gray.50",_dark:{[io.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[io.variable]:"colors.white",[eo.variable]:"colors.".concat(e,".600"),_dark:{[io.variable]:"colors.gray.800",[eo.variable]:"colors.".concat(e,".300")},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:eo.reference,bg:io.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),go=oo((t=>{const{colorScheme:e,theme:i}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Kn(i,"".concat(e,".700")),bg:Kn(i,"".concat(e,".100"))}}}})),yo=oo((t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[eo.variable]:"colors.gray.600",_dark:{[eo.variable]:"inherit"},_selected:{[eo.variable]:"colors.white",[io.variable]:"colors.".concat(e,".600"),_dark:{[eo.variable]:"colors.gray.800",[io.variable]:"colors.".concat(e,".300")}},color:eo.reference,bg:io.reference}}})),vo=no({baseStyle:uo,sizes:ho,variants:{line:po,enclosed:fo,"enclosed-colored":mo,"soft-rounded":go,"solid-rounded":yo,unstyled:oo({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),xo=function(t,e){const i={};for(const r of e)if(Array.isArray(r)){const[e,n]=r;i[e]=Je("".concat(t,"-").concat(e),n)}else i[r]=Je("".concat(t,"-").concat(r));return i}("badge",["bg","color","shadow"]),_o=t=>{const{colorScheme:e,theme:i}=t,r=Jn("".concat(e,".500"),.6)(i);return{[xo.bg.variable]:"colors.".concat(e,".500"),[xo.color.variable]:"colors.white",_dark:{[xo.bg.variable]:r,[xo.color.variable]:"colors.whiteAlpha.800"}}},bo=t=>{const{colorScheme:e,theme:i}=t,r=Jn("".concat(e,".200"),.16)(i);return{[xo.bg.variable]:"colors.".concat(e,".100"),[xo.color.variable]:"colors.".concat(e,".800"),_dark:{[xo.bg.variable]:r,[xo.color.variable]:"colors.".concat(e,".200")}}},wo=t=>{const{colorScheme:e,theme:i}=t,r=Jn("".concat(e,".200"),.8)(i);return{[xo.color.variable]:"colors.".concat(e,".500"),_dark:{[xo.color.variable]:r},[xo.shadow.variable]:"inset 0 0 0px 1px ".concat(xo.color.reference)}},So={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:xo.bg.reference,color:xo.color.reference,boxShadow:xo.shadow.reference},variants:{solid:_o,subtle:bo,outline:wo},defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:ko,definePartsStyle:Co}=Ri(Jr.keys),To=Je("tag-bg"),Ao=Je("tag-color"),Po=Je("tag-shadow"),Mo=Je("tag-min-height"),Eo=Je("tag-min-width"),Io=Je("tag-font-size"),zo=Je("tag-padding-inline"),Lo=Co({container:{fontWeight:"medium",lineHeight:1.2,outline:0,[Ao.variable]:xo.color.reference,[To.variable]:xo.bg.reference,[Po.variable]:xo.shadow.reference,color:Ao.reference,bg:To.reference,boxShadow:Po.reference,borderRadius:"md",minH:Mo.reference,minW:Eo.reference,fontSize:Io.reference,px:zo.reference,_focusVisible:{[Po.variable]:"shadows.outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}}),Do={sm:Co({container:{[Mo.variable]:"sizes.5",[Eo.variable]:"sizes.5",[Io.variable]:"fontSizes.xs",[zo.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Co({container:{[Mo.variable]:"sizes.6",[Eo.variable]:"sizes.6",[Io.variable]:"fontSizes.sm",[zo.variable]:"space.2"}}),lg:Co({container:{[Mo.variable]:"sizes.8",[Eo.variable]:"sizes.8",[Io.variable]:"fontSizes.md",[zo.variable]:"space.3"}})},Ro={subtle:Co((t=>{var e;return{container:null==(e=So.variants)?void 0:e.subtle(t)}})),solid:Co((t=>{var e;return{container:null==(e=So.variants)?void 0:e.solid(t)}})),outline:Co((t=>{var e;return{container:null==(e=So.variants)?void 0:e.outline(t)}}))},Oo=ko({variants:Ro,baseStyle:Lo,sizes:Do,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Bo,defineMultiStyleConfig:Fo}=Ri(Fr.keys),jo=Je("input-height"),No=Je("input-font-size"),Vo=Je("input-padding"),Uo=Je("input-border-radius"),Wo=Bo({addon:{height:jo.reference,fontSize:No.reference,px:Vo.reference,borderRadius:Uo.reference},field:{width:"100%",height:jo.reference,fontSize:No.reference,px:Vo.reference,borderRadius:Uo.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Ho={lg:{[No.variable]:"fontSizes.lg",[Vo.variable]:"space.4",[Uo.variable]:"radii.md",[jo.variable]:"sizes.12"},md:{[No.variable]:"fontSizes.md",[Vo.variable]:"space.4",[Uo.variable]:"radii.md",[jo.variable]:"sizes.10"},sm:{[No.variable]:"fontSizes.sm",[Vo.variable]:"space.3",[Uo.variable]:"radii.sm",[jo.variable]:"sizes.8"},xs:{[No.variable]:"fontSizes.xs",[Vo.variable]:"space.2",[Uo.variable]:"radii.sm",[jo.variable]:"sizes.6"}},Go={lg:Bo({field:Ho.lg,group:Ho.lg}),md:Bo({field:Ho.md,group:Ho.md}),sm:Bo({field:Ho.sm,group:Ho.sm}),xs:Bo({field:Ho.xs,group:Ho.xs})};function qo(t){const{focusBorderColor:e,errorBorderColor:i}=t;return{focusBorderColor:e||Cn("blue.500","blue.300")(t),errorBorderColor:i||Cn("red.500","red.300")(t)}}var Zo,Xo,Yo,Ko,$o,Jo,Qo,ta,ea,ia,ra,na=Bo((t=>{const{theme:e}=t,{focusBorderColor:i,errorBorderColor:r}=qo(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Cn("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Kn(e,r),boxShadow:"0 0 0 1px ".concat(Kn(e,r))},_focusVisible:{zIndex:1,borderColor:Kn(e,i),boxShadow:"0 0 0 1px ".concat(Kn(e,i))}},addon:{border:"1px solid",borderColor:Cn("inherit","whiteAlpha.50")(t),bg:Cn("gray.100","whiteAlpha.300")(t)}}})),oa=Bo((t=>{const{theme:e}=t,{focusBorderColor:i,errorBorderColor:r}=qo(t);return{field:{border:"2px solid",borderColor:"transparent",bg:Cn("gray.100","whiteAlpha.50")(t),_hover:{bg:Cn("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Kn(e,r)},_focusVisible:{bg:"transparent",borderColor:Kn(e,i)}},addon:{border:"2px solid",borderColor:"transparent",bg:Cn("gray.100","whiteAlpha.50")(t)}}})),aa=Bo((t=>{const{theme:e}=t,{focusBorderColor:i,errorBorderColor:r}=qo(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Kn(e,r),boxShadow:"0px 1px 0px 0px ".concat(Kn(e,r))},_focusVisible:{borderColor:Kn(e,i),boxShadow:"0px 1px 0px 0px ".concat(Kn(e,i))}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}})),sa=Fo({baseStyle:Wo,sizes:Go,variants:{outline:na,filled:oa,flushed:aa,unstyled:Bo({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),la={...null==(Zo=sa.baseStyle)?void 0:Zo.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},ca={outline:t=>{var e,i;return null!=(i=null==(e=sa.variants)?void 0:e.outline(t).field)?i:{}},flushed:t=>{var e,i;return null!=(i=null==(e=sa.variants)?void 0:e.flushed(t).field)?i:{}},filled:t=>{var e,i;return null!=(i=null==(e=sa.variants)?void 0:e.filled(t).field)?i:{}},unstyled:null!=(Yo=null==(Xo=sa.variants)?void 0:Xo.unstyled.field)?Yo:{}},ua={baseStyle:la,sizes:{xs:null!=($o=null==(Ko=sa.sizes)?void 0:Ko.xs.field)?$o:{},sm:null!=(Qo=null==(Jo=sa.sizes)?void 0:Jo.sm.field)?Qo:{},md:null!=(ea=null==(ta=sa.sizes)?void 0:ta.md.field)?ea:{},lg:null!=(ra=null==(ia=sa.sizes)?void 0:ia.lg.field)?ra:{}},variants:ca,defaultProps:{size:"md",variant:"outline"}},ha=nn("tooltip-bg"),da=nn("tooltip-fg"),pa=nn("popper-arrow-bg"),fa={baseStyle:{bg:ha.reference,color:da.reference,[ha.variable]:"colors.gray.700",[da.variable]:"colors.whiteAlpha.900",_dark:{[ha.variable]:"colors.gray.300",[da.variable]:"colors.gray.900"},[pa.variable]:ha.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"}},{defineMultiStyleConfig:ma,definePartsStyle:ga}=Ri(Hr.keys),ya=t=>{const{colorScheme:e,theme:i,isIndeterminate:r,hasStripe:n}=t,o=Cn(Qn(),Qn("1rem","rgba(0,0,0,0.1)"))(t),a=Cn("".concat(e,".500"),"".concat(e,".200"))(t),s="linear-gradient(\n    to right,\n    transparent 0%,\n    ".concat(Kn(i,a)," 50%,\n    transparent 100%\n  )");return{...!r&&n&&o,...r?{bgImage:s}:{bgColor:a}}},va={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},xa=t=>({bg:Cn("gray.100","whiteAlpha.300")(t)}),_a=t=>({transitionProperty:"common",transitionDuration:"slow",...ya(t)}),ba=ga((t=>({label:va,filledTrack:_a(t),track:xa(t)}))),wa=ma({sizes:{xs:ga({track:{h:"1"}}),sm:ga({track:{h:"2"}}),md:ga({track:{h:"3"}}),lg:ga({track:{h:"4"}})},baseStyle:ba,defaultProps:{size:"md",colorScheme:"blue"}});function Sa(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return"function"===typeof t?t(...i):t}var ka,Ca,Ta,Aa,Pa,Ma,Ea,Ia,za,{definePartsStyle:La,defineMultiStyleConfig:Da}=Ri(Lr.keys),Ra=Je("checkbox-size"),Oa=t=>{const{colorScheme:e}=t;return{w:Ra.reference,h:Ra.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Cn("".concat(e,".500"),"".concat(e,".200"))(t),borderColor:Cn("".concat(e,".500"),"".concat(e,".200"))(t),color:Cn("white","gray.900")(t),_hover:{bg:Cn("".concat(e,".600"),"".concat(e,".300"))(t),borderColor:Cn("".concat(e,".600"),"".concat(e,".300"))(t)},_disabled:{borderColor:Cn("gray.200","transparent")(t),bg:Cn("gray.200","whiteAlpha.300")(t),color:Cn("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:Cn("".concat(e,".500"),"".concat(e,".200"))(t),borderColor:Cn("".concat(e,".500"),"".concat(e,".200"))(t),color:Cn("white","gray.900")(t)},_disabled:{bg:Cn("gray.100","whiteAlpha.100")(t),borderColor:Cn("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Cn("red.500","red.300")(t)}}},Ba={_disabled:{cursor:"not-allowed"}},Fa={userSelect:"none",_disabled:{opacity:.4}},ja={transitionProperty:"transform",transitionDuration:"normal"},Na=Da({baseStyle:La((t=>({icon:ja,container:Ba,control:Sa(Oa,t),label:Fa}))),sizes:{sm:La({control:{[Ra.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:La({control:{[Ra.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:La({control:{[Ra.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Va,definePartsStyle:Ua}=Ri(Gr.keys),Wa=t=>{var e;const i=null==(e=Sa(Na.baseStyle,t))?void 0:e.control;return{...i,borderRadius:"full",_checked:{...null==i?void 0:i._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Ha=Ua((t=>{var e,i,r,n;return{label:null==(i=(e=Na).baseStyle)?void 0:i.call(e,t).label,container:null==(n=(r=Na).baseStyle)?void 0:n.call(r,t).container,control:Wa(t)}})),Ga=Va({baseStyle:Ha,sizes:{md:Ua({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:Ua({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:Ua({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:qa,definePartsStyle:Za}=Ri(qr.keys),Xa=Je("select-bg"),Ya={paddingInlineEnd:"8"},Ka=qa({baseStyle:Za({field:{...null==(ka=sa.baseStyle)?void 0:ka.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Xa.reference,[Xa.variable]:"colors.white",_dark:{[Xa.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Xa.reference}},icon:{width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}}}),sizes:{lg:{...null==(Ca=sa.sizes)?void 0:Ca.lg,field:{...null==(Ta=sa.sizes)?void 0:Ta.lg.field,...Ya}},md:{...null==(Aa=sa.sizes)?void 0:Aa.md,field:{...null==(Pa=sa.sizes)?void 0:Pa.md.field,...Ya}},sm:{...null==(Ma=sa.sizes)?void 0:Ma.sm,field:{...null==(Ea=sa.sizes)?void 0:Ea.sm.field,...Ya}},xs:{...null==(Ia=sa.sizes)?void 0:Ia.xs,field:{...null==(za=sa.sizes)?void 0:za.xs.field,...Ya},icon:{insetEnd:"1"}}},variants:sa.variants,defaultProps:sa.defaultProps}),$a=Je("skeleton-start-color"),Ja=Je("skeleton-end-color"),Qa={baseStyle:{[$a.variable]:"colors.gray.100",[Ja.variable]:"colors.gray.400",_dark:{[$a.variable]:"colors.gray.800",[Ja.variable]:"colors.gray.600"},background:$a.reference,borderColor:Ja.reference,opacity:.7,borderRadius:"sm"}},ts=Je("skip-link-bg"),es={baseStyle:{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[ts.variable]:"colors.white",_dark:{[ts.variable]:"colors.gray.700"},bg:ts.reference}}},{defineMultiStyleConfig:is,definePartsStyle:rs}=Ri(Zr.keys),ns=Je("slider-thumb-size"),os=Je("slider-track-size"),as=Je("slider-bg"),ss=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Tn({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}})}},ls=t=>({...Tn({orientation:t.orientation,horizontal:{h:os.reference},vertical:{w:os.reference}}),overflow:"hidden",borderRadius:"sm",[as.variable]:"colors.gray.200",_dark:{[as.variable]:"colors.whiteAlpha.200"},_disabled:{[as.variable]:"colors.gray.300",_dark:{[as.variable]:"colors.whiteAlpha.300"}},bg:as.reference}),cs=t=>{const{orientation:e}=t;return{...Tn({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:ns.reference,h:ns.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},us=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[as.variable]:"colors.".concat(e,".500"),_dark:{[as.variable]:"colors.".concat(e,".200")},bg:as.reference}},hs=is({baseStyle:rs((t=>({container:ss(t),track:ls(t),thumb:cs(t),filledTrack:us(t)}))),sizes:{lg:rs({container:{[ns.variable]:"sizes.4",[os.variable]:"sizes.1"}}),md:rs({container:{[ns.variable]:"sizes.3.5",[os.variable]:"sizes.1"}}),sm:rs({container:{[ns.variable]:"sizes.2.5",[os.variable]:"sizes.0.5"}})},defaultProps:{size:"md",colorScheme:"blue"}}),ds=nn("spinner-size"),ps={baseStyle:{width:[ds.reference],height:[ds.reference]},sizes:{xs:{[ds.variable]:"sizes.3"},sm:{[ds.variable]:"sizes.4"},md:{[ds.variable]:"sizes.6"},lg:{[ds.variable]:"sizes.8"},xl:{[ds.variable]:"sizes.12"}},defaultProps:{size:"md"}},{defineMultiStyleConfig:fs,definePartsStyle:ms}=Ri(Xr.keys),gs=fs({baseStyle:ms({container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:"2"},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"}}),sizes:{md:ms({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),ys=Je("kbd-bg"),vs={baseStyle:{[ys.variable]:"colors.gray.100",_dark:{[ys.variable]:"colors.whiteAlpha.100"},bg:ys.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}},xs={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},{defineMultiStyleConfig:_s,definePartsStyle:bs}=Ri(jr.keys),ws=_s({baseStyle:bs({icon:{marginEnd:"2",display:"inline",verticalAlign:"text-bottom"}})}),{defineMultiStyleConfig:Ss,definePartsStyle:ks}=Ri(Nr.keys),Cs=Je("menu-bg"),Ts=Je("menu-shadow"),As=Ss({baseStyle:ks({button:{transitionProperty:"common",transitionDuration:"normal"},list:{[Cs.variable]:"#fff",[Ts.variable]:"shadows.sm",_dark:{[Cs.variable]:"colors.gray.700",[Ts.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Cs.reference,boxShadow:Ts.reference},item:{py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Cs.variable]:"colors.gray.100",_dark:{[Cs.variable]:"colors.whiteAlpha.100"}},_active:{[Cs.variable]:"colors.gray.200",_dark:{[Cs.variable]:"colors.whiteAlpha.200"}},_expanded:{[Cs.variable]:"colors.gray.100",_dark:{[Cs.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Cs.reference},groupTitle:{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},command:{opacity:.6},divider:{border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}})}),{defineMultiStyleConfig:Ps,definePartsStyle:Ms}=Ri(Vr.keys),Es=Je("modal-bg"),Is=Je("modal-shadow"),zs={bg:"blackAlpha.600",zIndex:"modal"},Ls=t=>{const{isCentered:e,scrollBehavior:i}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:"inside"===i?"hidden":"auto",overscrollBehaviorY:"none"}},Ds=t=>{const{isCentered:e,scrollBehavior:i}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:"inside"===i?"calc(100% - 7.5rem)":void 0,[Es.variable]:"colors.white",[Is.variable]:"shadows.lg",_dark:{[Es.variable]:"colors.gray.700",[Is.variable]:"shadows.dark-lg"},bg:Es.reference,boxShadow:Is.reference}},Rs={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Os={position:"absolute",top:"2",insetEnd:"3"},Bs=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:"inside"===e?"auto":void 0}},Fs={px:"6",py:"4"};function js(t){return Ms("full"===t?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var Ns=Ps({baseStyle:Ms((t=>({overlay:zs,dialogContainer:Sa(Ls,t),dialog:Sa(Ds,t),header:Rs,closeButton:Os,body:Sa(Bs,t),footer:Fs}))),sizes:{xs:js("xs"),sm:js("sm"),md:js("md"),lg:js("lg"),xl:js("xl"),"2xl":js("2xl"),"3xl":js("3xl"),"4xl":js("4xl"),"5xl":js("5xl"),"6xl":js("6xl"),full:js("full")},defaultProps:{size:"md"}}),{defineMultiStyleConfig:Vs,definePartsStyle:Us}=Ri(Ur.keys),Ws=nn("number-input-stepper-width"),Hs=nn("number-input-input-padding"),Gs=pn(Ws).add("0.5rem").toString(),qs=nn("number-input-bg"),Zs=nn("number-input-color"),Xs=nn("number-input-border-color"),Ys={[Ws.variable]:"sizes.6",[Hs.variable]:Gs},Ks=t=>{var e,i;return null!=(i=null==(e=Sa(sa.baseStyle,t))?void 0:e.field)?i:{}},$s={width:Ws.reference},Js={borderStart:"1px solid",borderStartColor:Xs.reference,color:Zs.reference,bg:qs.reference,[Zs.variable]:"colors.chakra-body-text",[Xs.variable]:"colors.chakra-border-color",_dark:{[Zs.variable]:"colors.whiteAlpha.800",[Xs.variable]:"colors.whiteAlpha.300"},_active:{[qs.variable]:"colors.gray.200",_dark:{[qs.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Qs=Us((t=>{var e;return{root:Ys,field:null!=(e=Sa(Ks,t))?e:{},stepperGroup:$s,stepper:Js}}));function tl(t){var e,i,r;const n=null==(e=sa.sizes)?void 0:e[t],o={lg:"md",md:"md",sm:"sm",xs:"sm"},a=null!=(r=null==(i=n.field)?void 0:i.fontSize)?r:"md",s=mr.fontSizes[a];return Us({field:{...n.field,paddingInlineEnd:Hs.reference,verticalAlign:"top"},stepper:{fontSize:pn(s).multiply(.75).toString(),_first:{borderTopEndRadius:o[t]},_last:{borderBottomEndRadius:o[t],mt:"-1px",borderTopWidth:1}}})}var el,il,rl,nl=Vs({baseStyle:Qs,sizes:{xs:tl("xs"),sm:tl("sm"),md:tl("md"),lg:tl("lg")},variants:sa.variants,defaultProps:sa.defaultProps}),ol={...null==(el=sa.baseStyle)?void 0:el.field,textAlign:"center"},al={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},sl={outline:t=>{var e,i,r;return null!=(r=null==(i=Sa(null==(e=sa.variants)?void 0:e.outline,t))?void 0:i.field)?r:{}},flushed:t=>{var e,i,r;return null!=(r=null==(i=Sa(null==(e=sa.variants)?void 0:e.flushed,t))?void 0:i.field)?r:{}},filled:t=>{var e,i,r;return null!=(r=null==(i=Sa(null==(e=sa.variants)?void 0:e.filled,t))?void 0:i.field)?r:{}},unstyled:null!=(rl=null==(il=sa.variants)?void 0:il.unstyled.field)?rl:{}},ll={baseStyle:ol,sizes:al,variants:sl,defaultProps:sa.defaultProps},{defineMultiStyleConfig:cl,definePartsStyle:ul}=Ri(Wr.keys),hl=nn("popper-bg"),dl=nn("popper-arrow-bg"),pl=nn("popper-arrow-shadow-color"),fl=cl({baseStyle:ul({popper:{zIndex:10},content:{[hl.variable]:"colors.white",bg:hl.reference,[dl.variable]:hl.reference,[pl.variable]:"colors.gray.200",_dark:{[hl.variable]:"colors.gray.700",[pl.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},header:{px:3,py:2,borderBottomWidth:"1px"},body:{px:3,py:2},footer:{px:3,py:2,borderTopWidth:"1px"},closeButton:{position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2}})}),{definePartsStyle:ml,defineMultiStyleConfig:gl}=Ri(Dr.keys),yl=Je("drawer-bg"),vl=Je("drawer-box-shadow");function xl(t){return ml("full"===t?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var _l={bg:"blackAlpha.600",zIndex:"modal"},bl={display:"flex",zIndex:"modal",justifyContent:"center"},wl=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[yl.variable]:"colors.white",[vl.variable]:"shadows.lg",_dark:{[yl.variable]:"colors.gray.700",[vl.variable]:"shadows.dark-lg"},bg:yl.reference,boxShadow:vl.reference}},Sl={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},kl={position:"absolute",top:"2",insetEnd:"3"},Cl={px:"6",py:"2",flex:"1",overflow:"auto"},Tl={px:"6",py:"4"},Al=gl({baseStyle:ml((t=>({overlay:_l,dialogContainer:bl,dialog:Sa(wl,t),header:Sl,closeButton:kl,body:Cl,footer:Tl}))),sizes:{xs:xl("xs"),sm:xl("md"),md:xl("lg"),lg:xl("2xl"),xl:xl("4xl"),full:xl("full")},defaultProps:{size:"xs"}}),{definePartsStyle:Pl,defineMultiStyleConfig:Ml}=Ri(Rr.keys),El=Ml({baseStyle:Pl({preview:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}})}),{definePartsStyle:Il,defineMultiStyleConfig:zl}=Ri(Or.keys),Ll=Je("form-control-color"),Dl=zl({baseStyle:Il({container:{width:"100%",position:"relative"},requiredIndicator:{marginStart:"1",[Ll.variable]:"colors.red.500",_dark:{[Ll.variable]:"colors.red.300"},color:Ll.reference},helperText:{mt:"2",[Ll.variable]:"colors.gray.600",_dark:{[Ll.variable]:"colors.whiteAlpha.600"},color:Ll.reference,lineHeight:"normal",fontSize:"sm"}})}),{definePartsStyle:Rl,defineMultiStyleConfig:Ol}=Ri(Br.keys),Bl=Je("form-error-color"),Fl=Ol({baseStyle:Rl({text:{[Bl.variable]:"colors.red.500",_dark:{[Bl.variable]:"colors.red.300"},color:Bl.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},icon:{marginEnd:"0.5em",[Bl.variable]:"colors.red.500",_dark:{[Bl.variable]:"colors.red.300"},color:Bl.reference}})}),jl={baseStyle:{fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},Nl={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},{defineMultiStyleConfig:Vl,definePartsStyle:Ul}=Ri(zr.keys),Wl=Je("breadcrumb-link-decor"),Hl=Vl({baseStyle:Ul({link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:Wl.reference,[Wl.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[Wl.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}}})}),Gl=t=>{const{colorScheme:e,theme:i}=t;if("gray"===e)return{color:Cn("gray.800","whiteAlpha.900")(t),_hover:{bg:Cn("gray.100","whiteAlpha.200")(t)},_active:{bg:Cn("gray.200","whiteAlpha.300")(t)}};const r=Jn("".concat(e,".200"),.12)(i),n=Jn("".concat(e,".200"),.24)(i);return{color:Cn("".concat(e,".600"),"".concat(e,".200"))(t),bg:"transparent",_hover:{bg:Cn("".concat(e,".50"),r)(t)},_active:{bg:Cn("".concat(e,".100"),n)(t)}}},ql=t=>{const{colorScheme:e}=t,i=Cn("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:"gray"===e?i:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Sa(Gl,t)}},Zl={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Xl=t=>{var e;const{colorScheme:i}=t;if("gray"===i){const e=Cn("gray.100","whiteAlpha.200")(t);return{bg:e,color:Cn("gray.800","whiteAlpha.900")(t),_hover:{bg:Cn("gray.200","whiteAlpha.300")(t),_disabled:{bg:e}},_active:{bg:Cn("gray.300","whiteAlpha.400")(t)}}}const{bg:r="".concat(i,".500"),color:n="white",hoverBg:o="".concat(i,".600"),activeBg:a="".concat(i,".700")}=null!=(e=Zl[i])?e:{},s=Cn(r,"".concat(i,".200"))(t);return{bg:s,color:Cn(n,"gray.800")(t),_hover:{bg:Cn(o,"".concat(i,".300"))(t),_disabled:{bg:s}},_active:{bg:Cn(a,"".concat(i,".400"))(t)}}},Yl=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Cn("".concat(e,".500"),"".concat(e,".200"))(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Cn("".concat(e,".700"),"".concat(e,".500"))(t)}}},Kl={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:Gl,outline:ql,solid:Xl,link:Yl,unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}},sizes:{lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:$l,defineMultiStyleConfig:Jl}=Ri(Qr.keys),Ql=Je("card-bg"),tc=Je("card-padding"),ec=Je("card-shadow"),ic=Je("card-radius"),rc=Je("card-border-width","0"),nc=Je("card-border-color"),oc=$l({container:{[Ql.variable]:"colors.chakra-body-bg",backgroundColor:Ql.reference,boxShadow:ec.reference,borderRadius:ic.reference,color:"chakra-body-text",borderWidth:rc.reference,borderColor:nc.reference},body:{padding:tc.reference,flex:"1 1 0%"},header:{padding:tc.reference},footer:{padding:tc.reference}}),ac={sm:$l({container:{[ic.variable]:"radii.base",[tc.variable]:"space.3"}}),md:$l({container:{[ic.variable]:"radii.md",[tc.variable]:"space.5"}}),lg:$l({container:{[ic.variable]:"radii.xl",[tc.variable]:"space.7"}})},sc=Jl({baseStyle:oc,variants:{elevated:$l({container:{[ec.variable]:"shadows.base",_dark:{[Ql.variable]:"colors.gray.700"}}}),outline:$l({container:{[rc.variable]:"1px",[nc.variable]:"colors.chakra-border-color"}}),filled:$l({container:{[Ql.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[tc.variable]:0},header:{[tc.variable]:0},footer:{[tc.variable]:0}}},sizes:ac,defaultProps:{variant:"elevated",size:"md"}}),lc=nn("close-button-size"),cc=nn("close-button-bg"),uc={baseStyle:{w:[lc.reference],h:[lc.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[cc.variable]:"colors.blackAlpha.100",_dark:{[cc.variable]:"colors.whiteAlpha.100"}},_active:{[cc.variable]:"colors.blackAlpha.200",_dark:{[cc.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:cc.reference},sizes:{lg:{[lc.variable]:"sizes.10",fontSize:"md"},md:{[lc.variable]:"sizes.8",fontSize:"xs"},sm:{[lc.variable]:"sizes.6",fontSize:"2xs"}},defaultProps:{size:"md"}},{variants:hc,defaultProps:dc}=So,pc={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:xo.bg.reference,color:xo.color.reference,boxShadow:xo.shadow.reference},variants:hc,defaultProps:dc},fc={baseStyle:{w:"100%",mx:"auto",maxW:"prose",px:"4"}},mc={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},{definePartsStyle:gc,defineMultiStyleConfig:yc}=Ri(Mr.keys),vc=yc({baseStyle:gc({container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},panel:{pt:"2",px:"4",pb:"5"},icon:{fontSize:"1.25em"}})}),{definePartsStyle:xc,defineMultiStyleConfig:_c}=Ri(Er.keys),bc=Je("alert-fg"),wc=Je("alert-bg"),Sc=xc({container:{bg:wc.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:bc.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:bc.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function kc(t){const{theme:e,colorScheme:i}=t,r=Jn("".concat(i,".200"),.16)(e);return{light:"colors.".concat(i,".100"),dark:r}}var Cc=xc((t=>{const{colorScheme:e}=t,i=kc(t);return{container:{[bc.variable]:"colors.".concat(e,".600"),[wc.variable]:i.light,_dark:{[bc.variable]:"colors.".concat(e,".200"),[wc.variable]:i.dark}}}})),Tc=xc((t=>{const{colorScheme:e}=t,i=kc(t);return{container:{[bc.variable]:"colors.".concat(e,".600"),[wc.variable]:i.light,_dark:{[bc.variable]:"colors.".concat(e,".200"),[wc.variable]:i.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:bc.reference}}})),Ac=xc((t=>{const{colorScheme:e}=t,i=kc(t);return{container:{[bc.variable]:"colors.".concat(e,".600"),[wc.variable]:i.light,_dark:{[bc.variable]:"colors.".concat(e,".200"),[wc.variable]:i.dark},pt:"2",borderTopWidth:"4px",borderTopColor:bc.reference}}})),Pc=xc((t=>{const{colorScheme:e}=t;return{container:{[bc.variable]:"colors.white",[wc.variable]:"colors.".concat(e,".600"),_dark:{[bc.variable]:"colors.gray.900",[wc.variable]:"colors.".concat(e,".200")},color:bc.reference}}})),Mc=_c({baseStyle:Sc,variants:{subtle:Cc,"left-accent":Tc,"top-accent":Ac,solid:Pc},defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:Ec,defineMultiStyleConfig:Ic}=Ri(Ir.keys),zc=Je("avatar-border-color"),Lc=Je("avatar-bg"),Dc=Je("avatar-font-size"),Rc=Je("avatar-size"),Oc={borderRadius:"full",border:"0.2em solid",borderColor:zc.reference,[zc.variable]:"white",_dark:{[zc.variable]:"colors.gray.800"}},Bc={bg:Lc.reference,fontSize:Dc.reference,width:Rc.reference,height:Rc.reference,lineHeight:"1",[Lc.variable]:"colors.gray.200",_dark:{[Lc.variable]:"colors.whiteAlpha.400"}},Fc=t=>{const{name:e,theme:i}=t,r=e?to({string:e}):"colors.gray.400",n=(t=>e=>"dark"===$n(t)(e))(r)(i);let o="white";return n||(o="gray.800"),{bg:Lc.reference,fontSize:Dc.reference,color:o,borderColor:zc.reference,verticalAlign:"top",width:Rc.reference,height:Rc.reference,"&:not([data-loaded])":{[Lc.variable]:r},[zc.variable]:"colors.white",_dark:{[zc.variable]:"colors.gray.800"}}},jc={fontSize:Dc.reference,lineHeight:"1"};function Nc(t){const e="100%"!==t?yr[t]:void 0;return Ec({container:{[Rc.variable]:null!=e?e:t,[Dc.variable]:"calc(".concat(null!=e?e:t," / 2.5)")},excessLabel:{[Rc.variable]:null!=e?e:t,[Dc.variable]:"calc(".concat(null!=e?e:t," / 2.5)")}})}var Vc={Accordion:vc,Alert:Mc,Avatar:Ic({baseStyle:Ec((t=>({badge:Sa(Oc,t),excessLabel:Sa(Bc,t),container:Sa(Fc,t),label:jc}))),sizes:{"2xs":Nc(4),xs:Nc(6),sm:Nc(8),md:Nc(12),lg:Nc(16),xl:Nc(24),"2xl":Nc(32),full:Nc("100%")},defaultProps:{size:"md"}}),Badge:So,Breadcrumb:Hl,Button:Kl,Checkbox:Na,CloseButton:uc,Code:pc,Container:fc,Divider:mc,Drawer:Al,Editable:El,Form:Dl,FormError:Fl,FormLabel:jl,Heading:Nl,Input:sa,Kbd:vs,Link:xs,List:ws,Menu:As,Modal:Ns,NumberInput:nl,PinInput:ll,Popover:fl,Progress:wa,Radio:Ga,Select:Ka,Skeleton:Qa,SkipLink:es,Slider:hs,Spinner:ps,Stat:gs,Switch:kn,Table:Ln,Tabs:vo,Tag:Oo,Textarea:ua,Tooltip:fa,Card:sc,Stepper:Ar},Uc={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Wc={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Hc={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},Gc={semanticTokens:Uc,direction:"ltr",...vr,components:Vc,styles:Wc,config:Hc},qc={semanticTokens:Uc,direction:"ltr",components:{},...vr,styles:Wc,config:Hc},Zc=(t,e)=>t.find((t=>t.id===e));function Xc(t,e){const i=Yc(t,e);return{position:i,index:i?t[i].findIndex((t=>t.id===e)):-1}}function Yc(t,e){for(const[i,r]of Object.entries(t))if(Zc(r,e))return i}function Kc(t){return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===t||"bottom"===t?"0 auto":void 0,top:t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:t.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}function $c(t,e){const i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=(0,o.useRef)(t);return(0,o.useEffect)((()=>{i.current=t})),(0,o.useCallback)((function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==(t=i.current)?void 0:t.call(i,...r)}),e)}(t);(0,o.useEffect)((()=>{if(null==e)return;let t=null;return t=window.setTimeout((()=>{i()}),e),()=>{t&&window.clearTimeout(t)}}),[e,i])}function Jc(t,e){const i=(0,o.useRef)(!1),r=(0,o.useRef)(!1);(0,o.useEffect)((()=>{if(i.current&&r.current)return t();r.current=!0}),e),(0,o.useEffect)((()=>(i.current=!0,()=>{i.current=!1})),[])}var Qc=(0,o.createContext)(null);function tu(t){var e=(0,o.useRef)(null);return null===e.current&&(e.current=t()),e.current}var eu=0,iu=function(){return eu++},ru=function(){return tu(iu)};function nu(){var t=(0,o.useContext)(Qc);if(null===t)return[!0,null];var e=t.isPresent,i=t.onExitComplete,r=t.register,n=ru();(0,o.useEffect)((function(){return r(n)}),[]);return!e&&i?[!1,function(){return null===i||void 0===i?void 0:i(n)}]:[!0]}function ou(){return null===(t=(0,o.useContext)(Qc))||t.isPresent;var t}var au=function(t,e){return au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},au(t,e)};function su(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}au(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var lu=function(){return lu=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},lu.apply(this,arguments)};function cu(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}Object.create;function uu(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hu(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){n={error:s}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function du(t,e,i){if(i||2===arguments.length)for(var r,n=0,o=e.length;n<o;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var pu="production",fu=function(t){return{isEnabled:function(e){return t.some((function(t){return!!e[t]}))}}},mu={measureLayout:fu(["layout","layoutId","drag"]),animation:fu(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:fu(["exit"]),drag:fu(["drag","dragControls"]),focus:fu(["whileFocus"]),hover:fu(["whileHover","onHoverStart","onHoverEnd"]),tap:fu(["whileTap","onTap","onTapStart","onTapCancel"]),pan:fu(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:fu(["whileInView","onViewportEnter","onViewportLeave"])};var gu=function(){},yu=function(){};var vu=(0,o.createContext)({strict:!1}),xu=Object.keys(mu),_u=xu.length;var bu=(0,o.createContext)({transformPagePoint:function(t){return t},isStatic:!1,reducedMotion:"never"}),wu=(0,o.createContext)({});var Su="undefined"!==typeof document,ku=Su?o.useLayoutEffect:o.useEffect,Cu={current:null},Tu=!1;function Au(){return!Tu&&function(){if(Tu=!0,Su)if(window.matchMedia){var t=window.matchMedia("(prefers-reduced-motion)"),e=function(){return Cu.current=t.matches};t.addListener(e),e()}else Cu.current=!1}(),hu((0,o.useState)(Cu.current),1)[0]}function Pu(t,e,i,r){var n=(0,o.useContext)(vu),a=(0,o.useContext)(wu).visualElement,s=(0,o.useContext)(Qc),l=function(){var t=Au(),e=(0,o.useContext)(bu).reducedMotion;return"never"!==e&&("always"===e||t)}(),c=(0,o.useRef)(void 0);r||(r=n.renderer),!c.current&&r&&(c.current=r(t,{visualState:e,parent:a,props:i,presenceId:null===s||void 0===s?void 0:s.id,blockInitialAnimation:!1===(null===s||void 0===s?void 0:s.initial),shouldReduceMotion:l}));var u=c.current;return ku((function(){null===u||void 0===u||u.syncRender()})),(0,o.useEffect)((function(){var t;null===(t=null===u||void 0===u?void 0:u.animationState)||void 0===t||t.animateChanges()})),ku((function(){return function(){return null===u||void 0===u?void 0:u.notifyUnmount()}}),[]),u}function Mu(t){return"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function Eu(t){return Array.isArray(t)}function Iu(t){return"string"===typeof t||Eu(t)}function zu(t,e,i,r,n){var o;return void 0===r&&(r={}),void 0===n&&(n={}),"function"===typeof e&&(e=e(null!==i&&void 0!==i?i:t.custom,r,n)),"string"===typeof e&&(e=null===(o=t.variants)||void 0===o?void 0:o[e]),"function"===typeof e&&(e=e(null!==i&&void 0!==i?i:t.custom,r,n)),e}function Lu(t,e,i){var r=t.getProps();return zu(r,e,null!==i&&void 0!==i?i:r.custom,function(t){var e={};return t.forEachValue((function(t,i){return e[i]=t.get()})),e}(t),function(t){var e={};return t.forEachValue((function(t,i){return e[i]=t.getVelocity()})),e}(t))}function Du(t){var e;return"function"===typeof(null===(e=t.animate)||void 0===e?void 0:e.start)||Iu(t.initial)||Iu(t.animate)||Iu(t.whileHover)||Iu(t.whileDrag)||Iu(t.whileTap)||Iu(t.whileFocus)||Iu(t.exit)}function Ru(t){return Boolean(Du(t)||t.variants)}function Ou(t){var e=function(t,e){if(Du(t)){var i=t.initial,r=t.animate;return{initial:!1===i||Iu(i)?i:void 0,animate:Iu(r)?r:void 0}}return!1!==t.inherit?e:{}}(t,(0,o.useContext)(wu)),i=e.initial,r=e.animate;return(0,o.useMemo)((function(){return{initial:i,animate:r}}),[Bu(i),Bu(r)])}function Bu(t){return Array.isArray(t)?t.join(" "):t}var Fu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ju=1;var Nu=(0,o.createContext)({}),Vu=(0,o.createContext)({});var Uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return su(e,t),e.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},e.prototype.componentDidUpdate=function(){},e.prototype.updateProps=function(){var t=this.props,e=t.visualElement,i=t.props;e&&e.setProps(i)},e.prototype.render=function(){return this.props.children},e}(o.Component);function Wu(t){var e=t.preloadedFeatures,i=t.createVisualElement,r=t.projectionNodeConstructor,n=t.useRender,a=t.useVisualState,s=t.Component;return e&&function(t){for(var e in t)null!==t[e]&&("projectionNodeConstructor"===e?mu.projectionNodeConstructor=t[e]:mu[e].Component=t[e])}(e),(0,o.forwardRef)((function(t,l){var c=function(t){var e,i=t.layoutId,r=null===(e=(0,o.useContext)(Nu))||void 0===e?void 0:e.id;return r&&void 0!==i?r+"-"+i:i}(t);t=lu(lu({},t),{layoutId:c});var u=(0,o.useContext)(bu),h=null,d=Ou(t),p=u.isStatic?void 0:tu((function(){if(Fu.hasEverUpdated)return ju++})),f=a(t,u.isStatic);return!u.isStatic&&Su&&(d.visualElement=Pu(s,f,lu(lu({},u),t),i),function(t,e,i,r){var n,a=e.layoutId,s=e.layout,l=e.drag,c=e.dragConstraints,u=e.layoutScroll,h=(0,o.useContext)(Vu);r&&i&&!(null===i||void 0===i?void 0:i.projection)&&(i.projection=new r(t,i.getLatestValues(),null===(n=i.parent)||void 0===n?void 0:n.projection),i.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:Boolean(l)||c&&Mu(c),visualElement:i,scheduleRender:function(){return i.scheduleRender()},animationType:"string"===typeof s?s:"both",initialPromotionConfig:h,layoutScroll:u}))}(p,t,d.visualElement,r||mu.projectionNodeConstructor),h=function(t,e,i){var r=[],n=(0,o.useContext)(vu);if(!e)return null;"production"!==pu&&i&&n.strict&&yu(!1,"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.");for(var a=0;a<_u;a++){var s=xu[a],l=mu[s],c=l.isEnabled,u=l.Component;c(t)&&u&&r.push(o.createElement(u,lu({key:s},t,{visualElement:e})))}return r}(t,d.visualElement,e)),o.createElement(Uu,{visualElement:d.visualElement,props:lu(lu({},u),t)},h,o.createElement(wu.Provider,{value:d},n(s,t,p,function(t,e,i){return(0,o.useCallback)((function(r){var n;r&&(null===(n=t.mount)||void 0===n||n.call(t,r)),e&&(r?e.mount(r):e.unmount()),i&&("function"===typeof i?i(r):Mu(i)&&(i.current=r))}),[e])}(f,d.visualElement,l),f,u.isStatic,d.visualElement)))}))}function Hu(t){function e(e,i){return void 0===i&&(i={}),Wu(t(e,i))}if("undefined"===typeof Proxy)return e;var i=new Map;return new Proxy(e,{get:function(t,r){return i.has(r)||i.set(r,e(r)),i.get(r)}})}var Gu=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function qu(t){return"string"===typeof t&&!t.includes("-")&&!!(Gu.indexOf(t)>-1||/[A-Z]/.test(t))}var Zu={};var Xu=["","X","Y","Z"],Yu=["transformPerspective","x","y","z"];function Ku(t,e){return Yu.indexOf(t)-Yu.indexOf(e)}["translate","scale","rotate","skew"].forEach((function(t){return Xu.forEach((function(e){return Yu.push(t+e)}))}));var $u=new Set(Yu);function Ju(t){return $u.has(t)}var Qu=new Set(["originX","originY","originZ"]);function th(t){return Qu.has(t)}function eh(t,e){var i=e.layout,r=e.layoutId;return Ju(t)||th(t)||(i||void 0!==r)&&(!!Zu[t]||"opacity"===t)}var ih=function(t){return Boolean(null!==t&&"object"===typeof t&&t.getVelocity)},rh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function nh(t){return t.startsWith("--")}var oh=function(t,e){return e&&"number"===typeof t?e.transform(t):t};const ah=(t,e)=>i=>Math.max(Math.min(i,e),t),sh=t=>t%1?Number(t.toFixed(5)):t,lh=/(-)?([\d]*\.?[\d])+/g,ch=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,uh=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function hh(t){return"string"===typeof t}const dh=t=>({test:e=>hh(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>"".concat(e).concat(t)}),ph=dh("deg"),fh=dh("%"),mh=dh("px"),gh=dh("vh"),yh=dh("vw"),vh=Object.assign(Object.assign({},fh),{parse:t=>fh.parse(t)/100,transform:t=>fh.transform(100*t)}),xh={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},_h=Object.assign(Object.assign({},xh),{transform:ah(0,1)}),bh=Object.assign(Object.assign({},xh),{default:1});var wh=lu(lu({},xh),{transform:Math.round}),Sh={borderWidth:mh,borderTopWidth:mh,borderRightWidth:mh,borderBottomWidth:mh,borderLeftWidth:mh,borderRadius:mh,radius:mh,borderTopLeftRadius:mh,borderTopRightRadius:mh,borderBottomRightRadius:mh,borderBottomLeftRadius:mh,width:mh,maxWidth:mh,height:mh,maxHeight:mh,size:mh,top:mh,right:mh,bottom:mh,left:mh,padding:mh,paddingTop:mh,paddingRight:mh,paddingBottom:mh,paddingLeft:mh,margin:mh,marginTop:mh,marginRight:mh,marginBottom:mh,marginLeft:mh,rotate:ph,rotateX:ph,rotateY:ph,rotateZ:ph,scale:bh,scaleX:bh,scaleY:bh,scaleZ:bh,skew:ph,skewX:ph,skewY:ph,distance:mh,translateX:mh,translateY:mh,translateZ:mh,x:mh,y:mh,z:mh,perspective:mh,transformPerspective:mh,opacity:_h,originX:vh,originY:vh,originZ:mh,zIndex:wh,fillOpacity:_h,strokeOpacity:_h,numOctaves:wh};function kh(t,e,i,r){var n,o=t.style,a=t.vars,s=t.transform,l=t.transformKeys,c=t.transformOrigin;l.length=0;var u=!1,h=!1,d=!0;for(var p in e){var f=e[p];if(nh(p))a[p]=f;else{var m=Sh[p],g=oh(f,m);if(Ju(p)){if(u=!0,s[p]=g,l.push(p),!d)continue;f!==(null!==(n=m.default)&&void 0!==n?n:0)&&(d=!1)}else th(p)?(c[p]=g,h=!0):o[p]=g}}u?o.transform=function(t,e,i,r){var n=t.transform,o=t.transformKeys,a=e.enableHardwareAcceleration,s=void 0===a||a,l=e.allowTransformNone,c=void 0===l||l,u="";o.sort(Ku);for(var h=!1,d=o.length,p=0;p<d;p++){var f=o[p];u+="".concat(rh[f]||f,"(").concat(n[f],") "),"z"===f&&(h=!0)}return!h&&s?u+="translateZ(0)":u=u.trim(),r?u=r(n,i?"":u):c&&i&&(u="none"),u}(t,i,d,r):r?o.transform=r({},""):!e.transform&&o.transform&&(o.transform="none"),h&&(o.transformOrigin=function(t){var e=t.originX,i=void 0===e?"50%":e,r=t.originY,n=void 0===r?"50%":r,o=t.originZ,a=void 0===o?0:o;return"".concat(i," ").concat(n," ").concat(a)}(c))}var Ch=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Th(t,e,i){for(var r in e)ih(e[r])||eh(r,i)||(t[r]=e[r])}function Ah(t,e,i){var r={};return Th(r,t.style||{},t),Object.assign(r,function(t,e,i){var r=t.transformTemplate;return(0,o.useMemo)((function(){var t=Ch();kh(t,e,{enableHardwareAcceleration:!i},r);var n=t.vars,o=t.style;return lu(lu({},n),o)}),[e])}(t,e,i)),t.transformValues&&(r=t.transformValues(r)),r}function Ph(t,e,i){var r={},n=Ah(t,e,i);return Boolean(t.drag)&&!1!==t.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),r.style=n,r}var Mh=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function Eh(t){return Mh.has(t)}var Ih,zh=function(t){return!Eh(t)};try{(Ih=require("@emotion/is-prop-valid").default)&&(zh=function(t){return t.startsWith("on")?!Eh(t):Ih(t)})}catch(Zo){}function Lh(t,e,i){return"string"===typeof t?t:mh.transform(e+i*t)}var Dh={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rh={offset:"strokeDashoffset",array:"strokeDasharray"};function Oh(t,e,i,r){var n=e.attrX,o=e.attrY,a=e.originX,s=e.originY,l=e.pathLength,c=e.pathSpacing,u=void 0===c?1:c,h=e.pathOffset,d=void 0===h?0:h;kh(t,cu(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),i,r),t.attrs=t.style,t.style={};var p=t.attrs,f=t.style,m=t.dimensions;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==a||void 0!==s||f.transform)&&(f.transformOrigin=function(t,e,i){var r=Lh(e,t.x,t.width),n=Lh(i,t.y,t.height);return"".concat(r," ").concat(n)}(m,void 0!==a?a:.5,void 0!==s?s:.5)),void 0!==n&&(p.x=n),void 0!==o&&(p.y=o),void 0!==l&&function(t,e,i,r,n){void 0===i&&(i=1),void 0===r&&(r=0),void 0===n&&(n=!0),t.pathLength=1;var o=n?Dh:Rh;t[o.offset]=mh.transform(-r);var a=mh.transform(e),s=mh.transform(i);t[o.array]="".concat(a," ").concat(s)}(p,l,u,d,!1)}var Bh=function(){return lu(lu({},Ch()),{attrs:{}})};function Fh(t,e){var i=(0,o.useMemo)((function(){var i=Bh();return Oh(i,e,{enableHardwareAcceleration:!1},t.transformTemplate),lu(lu({},i.attrs),{style:lu({},i.style)})}),[e]);if(t.style){var r={};Th(r,t.style,t),i.style=lu(lu({},r),i.style)}return i}function jh(t){void 0===t&&(t=!1);return function(e,i,r,n,a,s){var l=a.latestValues,c=(qu(e)?Fh:Ph)(i,l,s),u=function(t,e,i){var r={};for(var n in t)(zh(n)||!0===i&&Eh(n)||!e&&!Eh(n)||t.draggable&&n.startsWith("onDrag"))&&(r[n]=t[n]);return r}(i,"string"===typeof e,t),h=lu(lu(lu({},u),c),{ref:n});return r&&(h["data-projection-id"]=r),(0,o.createElement)(e,h)}}var Nh=/([a-z])([A-Z])/g,Vh=function(t){return t.replace(Nh,"$1-$2").toLowerCase()};function Uh(t,e,i,r){var n=e.style,o=e.vars;for(var a in Object.assign(t.style,n,r&&r.getProjectionStyles(i)),o)t.style.setProperty(a,o[a])}var Wh=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function Hh(t,e,i,r){for(var n in Uh(t,e,void 0,r),e.attrs)t.setAttribute(Wh.has(n)?n:Vh(n),e.attrs[n])}function Gh(t){var e=t.style,i={};for(var r in e)(ih(e[r])||eh(r,t))&&(i[r]=e[r]);return i}function qh(t){var e=Gh(t);for(var i in t){if(ih(t[i]))e["x"===i||"y"===i?"attr"+i.toUpperCase():i]=t[i]}return e}function Zh(t){return"object"===typeof t&&"function"===typeof t.start}var Xh=function(t){return Array.isArray(t)},Yh=function(t){return Boolean(t&&"object"===typeof t&&t.mix&&t.toValue)},Kh=function(t){return Xh(t)?t[t.length-1]||0:t};function $h(t){var e=ih(t)?t.get():t;return Yh(e)?e.toValue():e}function Jh(t,e,i,r){var n=t.scrapeMotionValuesFromProps,o=t.createRenderState,a=t.onMount,s={latestValues:td(e,i,r,n),renderState:o()};return a&&(s.mount=function(t){return a(e,t,s)}),s}var Qh=function(t){return function(e,i){var r=(0,o.useContext)(wu),n=(0,o.useContext)(Qc);return i?Jh(t,e,r,n):tu((function(){return Jh(t,e,r,n)}))}};function td(t,e,i,r){var n={},o=!1===(null===i||void 0===i?void 0:i.initial),a=r(t);for(var s in a)n[s]=$h(a[s]);var l=t.initial,c=t.animate,u=Du(t),h=Ru(t);e&&h&&!u&&!1!==t.inherit&&(null!==l&&void 0!==l||(l=e.initial),null!==c&&void 0!==c||(c=e.animate));var d=o||!1===l,p=d?c:l;p&&"boolean"!==typeof p&&!Zh(p)&&(Array.isArray(p)?p:[p]).forEach((function(e){var i=zu(t,e);if(i){var r=i.transitionEnd;i.transition;var o=cu(i,["transitionEnd","transition"]);for(var a in o){var s=o[a];if(Array.isArray(s))s=s[d?s.length-1:0];null!==s&&(n[a]=s)}for(var a in r)n[a]=r[a]}}));return n}var ed,id={useVisualState:Qh({scrapeMotionValuesFromProps:qh,createRenderState:Bh,onMount:function(t,e,i){var r=i.renderState,n=i.latestValues;try{r.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(o){r.dimensions={x:0,y:0,width:0,height:0}}Oh(r,n,{enableHardwareAcceleration:!1},t.transformTemplate),Hh(e,r)}})},rd={useVisualState:Qh({scrapeMotionValuesFromProps:Gh,createRenderState:Ch})};function nd(t,e,i,r){return void 0===r&&(r={passive:!0}),t.addEventListener(e,i,r),function(){return t.removeEventListener(e,i)}}function od(t,e,i,r){(0,o.useEffect)((function(){var n=t.current;if(i&&n)return nd(n,e,i,r)}),[t,e,i,r])}function ad(t){return"undefined"!==typeof PointerEvent&&t instanceof PointerEvent?!("mouse"!==t.pointerType):t instanceof MouseEvent}function sd(t){return!!t.touches}!function(t){t.Animate="animate",t.Hover="whileHover",t.Tap="whileTap",t.Drag="whileDrag",t.Focus="whileFocus",t.InView="whileInView",t.Exit="exit"}(ed||(ed={}));var ld={pageX:0,pageY:0};function cd(t,e){void 0===e&&(e="page");var i=t.touches[0]||t.changedTouches[0]||ld;return{x:i[e+"X"],y:i[e+"Y"]}}function ud(t,e){return void 0===e&&(e="page"),{x:t[e+"X"],y:t[e+"Y"]}}function hd(t,e){return void 0===e&&(e="page"),{point:sd(t)?cd(t,e):ud(t,e)}}var dd=function(t,e){void 0===e&&(e=!1);var i,r=function(e){return t(e,hd(e))};return e?(i=r,function(t){var e=t instanceof MouseEvent;(!e||e&&0===t.button)&&i(t)}):r},pd=function(){return Su&&null===window.onpointerdown},fd=function(){return Su&&null===window.ontouchstart},md=function(){return Su&&null===window.onmousedown},gd={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},yd={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function vd(t){return pd()?t:fd()?yd[t]:md()?gd[t]:t}function xd(t,e,i,r){return nd(t,vd(e),dd(i,"pointerdown"===e),r)}function _d(t,e,i,r){return od(t,vd(e),i&&dd(i,"pointerdown"===e),r)}function bd(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var wd=bd("dragHorizontal"),Sd=bd("dragVertical");function kd(t){var e=!1;if("y"===t)e=Sd();else if("x"===t)e=wd();else{var i=wd(),r=Sd();i&&r?e=function(){i(),r()}:(i&&i(),r&&r())}return e}function Cd(){var t=kd(!0);return!t||(t(),!1)}function Td(t,e,i){return function(r,n){var o;ad(r)&&!Cd()&&(null===(o=t.animationState)||void 0===o||o.setActive(ed.Hover,e),null===i||void 0===i||i(r,n))}}var Ad=function(t,e){return!!e&&(t===e||Ad(t,e.parentElement))};function Pd(t){return(0,o.useEffect)((function(){return function(){return t()}}),[])}const Md=(t,e)=>i=>e(t(i)),Ed=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce(Md)};var Id=new Set;var zd=new WeakMap,Ld=new WeakMap,Dd=function(t){var e;null===(e=zd.get(t.target))||void 0===e||e(t)},Rd=function(t){t.forEach(Dd)};function Od(t,e,i){var r=function(t){var e=t.root,i=cu(t,["root"]),r=e||document;Ld.has(r)||Ld.set(r,{});var n=Ld.get(r),o=JSON.stringify(i);return n[o]||(n[o]=new IntersectionObserver(Rd,lu({root:e},i))),n[o]}(e);return zd.set(t,i),r.observe(t),function(){zd.delete(t),r.unobserve(t)}}var Bd={some:0,all:1};function Fd(t,e,i,r){var n=r.root,a=r.margin,s=r.amount,l=void 0===s?"some":s,c=r.once;(0,o.useEffect)((function(){if(t){var r={root:null===n||void 0===n?void 0:n.current,rootMargin:a,threshold:"number"===typeof l?l:Bd[l]};return Od(i.getInstance(),r,(function(t){var r,n=t.isIntersecting;if(e.isInView!==n&&(e.isInView=n,!c||n||!e.hasEnteredView)){n&&(e.hasEnteredView=!0),null===(r=i.animationState)||void 0===r||r.setActive(ed.InView,n);var o=i.getProps(),a=n?o.onViewportEnter:o.onViewportLeave;null===a||void 0===a||a(t)}}))}}),[t,n,a,l])}function jd(t,e,i,r){var n=r.fallback,a=void 0===n||n;(0,o.useEffect)((function(){var r,n;t&&a&&("production"!==pu&&(r="IntersectionObserver not available on this device. whileInView animations will trigger on mount.",!1||Id.has(r)||(console.warn(r),n&&console.warn(n),Id.add(r))),requestAnimationFrame((function(){var t;e.hasEnteredView=!0;var r=i.getProps().onViewportEnter;null===r||void 0===r||r(null),null===(t=i.animationState)||void 0===t||t.setActive(ed.InView,!0)})))}),[t])}var Nd=function(t){return function(e){return t(e),null}},Vd={inView:Nd((function(t){var e=t.visualElement,i=t.whileInView,r=t.onViewportEnter,n=t.onViewportLeave,a=t.viewport,s=void 0===a?{}:a,l=(0,o.useRef)({hasEnteredView:!1,isInView:!1}),c=Boolean(i||r||n);s.once&&l.current.hasEnteredView&&(c=!1),("undefined"===typeof IntersectionObserver?jd:Fd)(c,l.current,e,s)})),tap:Nd((function(t){var e=t.onTap,i=t.onTapStart,r=t.onTapCancel,n=t.whileTap,a=t.visualElement,s=e||i||r||n,l=(0,o.useRef)(!1),c=(0,o.useRef)(null),u={passive:!(i||e||r||m)};function h(){var t;null===(t=c.current)||void 0===t||t.call(c),c.current=null}function d(){var t;return h(),l.current=!1,null===(t=a.animationState)||void 0===t||t.setActive(ed.Tap,!1),!Cd()}function p(t,i){d()&&(Ad(a.getInstance(),t.target)?null===e||void 0===e||e(t,i):null===r||void 0===r||r(t,i))}function f(t,e){d()&&(null===r||void 0===r||r(t,e))}function m(t,e){var r;h(),l.current||(l.current=!0,c.current=Ed(xd(window,"pointerup",p,u),xd(window,"pointercancel",f,u)),null===(r=a.animationState)||void 0===r||r.setActive(ed.Tap,!0),null===i||void 0===i||i(t,e))}_d(a,"pointerdown",s?m:void 0,u),Pd(h)})),focus:Nd((function(t){var e=t.whileFocus,i=t.visualElement;od(i,"focus",e?function(){var t;null===(t=i.animationState)||void 0===t||t.setActive(ed.Focus,!0)}:void 0),od(i,"blur",e?function(){var t;null===(t=i.animationState)||void 0===t||t.setActive(ed.Focus,!1)}:void 0)})),hover:Nd((function(t){var e=t.onHoverStart,i=t.onHoverEnd,r=t.whileHover,n=t.visualElement;_d(n,"pointerenter",e||r?Td(n,!0,e):void 0,{passive:!e}),_d(n,"pointerleave",i||r?Td(n,!1,i):void 0,{passive:!i})}))};function Ud(t,e){if(!Array.isArray(e))return!1;var i=e.length;if(i!==t.length)return!1;for(var r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}const Wd=(t,e,i)=>Math.min(Math.max(i,t),e),Hd=.001,Gd=.01,qd=10,Zd=.05,Xd=1;function Yd(t){let e,i,{duration:r=800,bounce:n=.25,velocity:o=0,mass:a=1}=t;gu(r<=1e3*qd,"Spring duration must be 10 seconds or less");let s=1-n;s=Wd(Zd,Xd,s),r=Wd(Gd,qd,r/1e3),s<1?(e=t=>{const e=t*s,i=e*r,n=e-o,a=$d(t,s),l=Math.exp(-i);return Hd-n/a*l},i=t=>{const i=t*s*r,n=i*o+o,a=Math.pow(s,2)*Math.pow(t,2)*r,l=Math.exp(-i),c=$d(Math.pow(t,2),s);return(-e(t)+Hd>0?-1:1)*((n-a)*l)/c}):(e=t=>Math.exp(-t*r)*((t-o)*r+1)-Hd,i=t=>Math.exp(-t*r)*(r*r*(o-t)));const l=function(t,e,i){let r=i;for(let n=1;n<Kd;n++)r-=t(r)/e(r);return r}(e,i,5/r);if(r*=1e3,isNaN(l))return{stiffness:100,damping:10,duration:r};{const t=Math.pow(l,2)*a;return{stiffness:t,damping:2*s*Math.sqrt(a*t),duration:r}}}const Kd=12;function $d(t,e){return t*Math.sqrt(1-e*e)}const Jd=["duration","bounce"],Qd=["stiffness","damping","mass"];function tp(t,e){return e.some((e=>void 0!==t[e]))}function ep(t){var{from:e=0,to:i=1,restSpeed:r=2,restDelta:n}=t,o=cu(t,["from","to","restSpeed","restDelta"]);const a={done:!1,value:e};let{stiffness:s,damping:l,mass:c,velocity:u,duration:h,isResolvedFromDuration:d}=function(t){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!tp(t,Qd)&&tp(t,Jd)){const i=Yd(t);e=Object.assign(Object.assign(Object.assign({},e),i),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}(o),p=ip,f=ip;function m(){const t=u?-u/1e3:0,r=i-e,o=l/(2*Math.sqrt(s*c)),a=Math.sqrt(s/c)/1e3;if(void 0===n&&(n=Math.min(Math.abs(i-e)/100,.4)),o<1){const e=$d(a,o);p=n=>{const s=Math.exp(-o*a*n);return i-s*((t+o*a*r)/e*Math.sin(e*n)+r*Math.cos(e*n))},f=i=>{const n=Math.exp(-o*a*i);return o*a*n*(Math.sin(e*i)*(t+o*a*r)/e+r*Math.cos(e*i))-n*(Math.cos(e*i)*(t+o*a*r)-e*r*Math.sin(e*i))}}else if(1===o)p=e=>i-Math.exp(-a*e)*(r+(t+a*r)*e);else{const e=a*Math.sqrt(o*o-1);p=n=>{const s=Math.exp(-o*a*n),l=Math.min(e*n,300);return i-s*((t+o*a*r)*Math.sinh(l)+e*r*Math.cosh(l))/e}}}return m(),{next:t=>{const e=p(t);if(d)a.done=t>=h;else{const o=1e3*f(t),s=Math.abs(o)<=r,l=Math.abs(i-e)<=n;a.done=s&&l}return a.value=a.done?i:e,a},flipTarget:()=>{u=-u,[e,i]=[i,e],m()}}}ep.needsInterpolation=(t,e)=>"string"===typeof t||"string"===typeof e;const ip=t=>0,rp=(t,e,i)=>{const r=e-t;return 0===r?1:(i-t)/r},np=(t,e,i)=>-i*t+i*e+t,op=(t,e)=>i=>Boolean(hh(i)&&uh.test(i)&&i.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(i,e)),ap=(t,e,i)=>r=>{if(!hh(r))return r;const[n,o,a,s]=r.match(lh);return{[t]:parseFloat(n),[e]:parseFloat(o),[i]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},sp=ah(0,255),lp=Object.assign(Object.assign({},xh),{transform:t=>Math.round(sp(t))}),cp={test:op("rgb","red"),parse:ap("red","green","blue"),transform:t=>{let{red:e,green:i,blue:r,alpha:n=1}=t;return"rgba("+lp.transform(e)+", "+lp.transform(i)+", "+lp.transform(r)+", "+sh(_h.transform(n))+")"}};const up={test:op("#"),parse:function(t){let e="",i="",r="",n="";return t.length>5?(e=t.substr(1,2),i=t.substr(3,2),r=t.substr(5,2),n=t.substr(7,2)):(e=t.substr(1,1),i=t.substr(2,1),r=t.substr(3,1),n=t.substr(4,1),e+=e,i+=i,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}},transform:cp.transform},hp={test:op("hsl","hue"),parse:ap("hue","saturation","lightness"),transform:t=>{let{hue:e,saturation:i,lightness:r,alpha:n=1}=t;return"hsla("+Math.round(e)+", "+fh.transform(sh(i))+", "+fh.transform(sh(r))+", "+sh(_h.transform(n))+")"}};function dp(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function pp(t){let{hue:e,saturation:i,lightness:r,alpha:n}=t;e/=360,i/=100,r/=100;let o=0,a=0,s=0;if(i){const t=r<.5?r*(1+i):r+i-r*i,n=2*r-t;o=dp(n,t,e+1/3),a=dp(n,t,e),s=dp(n,t,e-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:n}}const fp=(t,e,i)=>{const r=t*t,n=e*e;return Math.sqrt(Math.max(0,i*(n-r)+r))},mp=[up,cp,hp],gp=t=>mp.find((e=>e.test(t))),yp=t=>"'".concat(t,"' is not an animatable color. Use the equivalent color code instead."),vp=(t,e)=>{let i=gp(t),r=gp(e);yu(!!i,yp(t)),yu(!!r,yp(e));let n=i.parse(t),o=r.parse(e);i===hp&&(n=pp(n),i=cp),r===hp&&(o=pp(o),r=cp);const a=Object.assign({},n);return t=>{for(const e in a)"alpha"!==e&&(a[e]=fp(n[e],o[e],t));return a.alpha=np(n.alpha,o.alpha,t),i.transform(a)}},xp={test:t=>cp.test(t)||up.test(t)||hp.test(t),parse:t=>cp.test(t)?cp.parse(t):hp.test(t)?hp.parse(t):up.parse(t),transform:t=>hh(t)?t:t.hasOwnProperty("red")?cp.transform(t):hp.transform(t)},_p="${c}",bp="${n}";function wp(t){"number"===typeof t&&(t="".concat(t));const e=[];let i=0;const r=t.match(ch);r&&(i=r.length,t=t.replace(ch,_p),e.push(...r.map(xp.parse)));const n=t.match(lh);return n&&(t=t.replace(lh,bp),e.push(...n.map(xh.parse))),{values:e,numColors:i,tokenised:t}}function Sp(t){return wp(t).values}function kp(t){const{values:e,numColors:i,tokenised:r}=wp(t),n=e.length;return t=>{let e=r;for(let r=0;r<n;r++)e=e.replace(r<i?_p:bp,r<i?xp.transform(t[r]):sh(t[r]));return e}}const Cp=t=>"number"===typeof t?0:t;const Tp={test:function(t){var e,i,r,n;return isNaN(t)&&hh(t)&&(null!==(i=null===(e=t.match(lh))||void 0===e?void 0:e.length)&&void 0!==i?i:0)+(null!==(n=null===(r=t.match(ch))||void 0===r?void 0:r.length)&&void 0!==n?n:0)>0},parse:Sp,createTransformer:kp,getAnimatableNone:function(t){const e=Sp(t);return kp(t)(e.map(Cp))}},Ap=t=>"number"===typeof t;function Pp(t,e){return Ap(t)?i=>np(t,e,i):xp.test(t)?vp(t,e):zp(t,e)}const Mp=(t,e)=>{const i=[...t],r=i.length,n=t.map(((t,i)=>Pp(t,e[i])));return t=>{for(let e=0;e<r;e++)i[e]=n[e](t);return i}},Ep=(t,e)=>{const i=Object.assign(Object.assign({},t),e),r={};for(const n in i)void 0!==t[n]&&void 0!==e[n]&&(r[n]=Pp(t[n],e[n]));return t=>{for(const e in r)i[e]=r[e](t);return i}};function Ip(t){const e=Tp.parse(t),i=e.length;let r=0,n=0,o=0;for(let a=0;a<i;a++)r||"number"===typeof e[a]?r++:void 0!==e[a].hue?o++:n++;return{parsed:e,numNumbers:r,numRGB:n,numHSL:o}}const zp=(t,e)=>{const i=Tp.createTransformer(e),r=Ip(t),n=Ip(e);return r.numHSL===n.numHSL&&r.numRGB===n.numRGB&&r.numNumbers>=n.numNumbers?Ed(Mp(r.parsed,n.parsed),i):(gu(!0,"Complex values '".concat(t,"' and '").concat(e,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),i=>"".concat(i>0?e:t))},Lp=(t,e)=>i=>np(t,e,i);function Dp(t,e,i){const r=[],n=i||("number"===typeof(o=t[0])?Lp:"string"===typeof o?xp.test(o)?vp:zp:Array.isArray(o)?Mp:"object"===typeof o?Ep:void 0);var o;const a=t.length-1;for(let s=0;s<a;s++){let i=n(t[s],t[s+1]);if(e){const t=Array.isArray(e)?e[s]:e;i=Ed(t,i)}r.push(i)}return r}function Rp(t,e){let{clamp:i=!0,ease:r,mixer:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.length;yu(o===e.length,"Both input and output ranges must be the same length"),yu(!r||!Array.isArray(r)||r.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),t[0]>t[o-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());const a=Dp(e,r,n),s=2===o?function(t,e){let[i,r]=t,[n]=e;return t=>n(rp(i,r,t))}(t,a):function(t,e){const i=t.length,r=i-1;return n=>{let o=0,a=!1;if(n<=t[0]?a=!0:n>=t[r]&&(o=r-1,a=!0),!a){let e=1;for(;e<i&&!(t[e]>n||e===r);e++);o=e-1}const s=rp(t[o],t[o+1],n);return e[o](s)}}(t,a);return i?e=>s(Wd(t[0],t[o-1],e)):s}const Op=t=>e=>1-t(1-e),Bp=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Fp=t=>e=>e*e*((t+1)*e-t),jp=4/11,Np=8/11,Vp=t=>t,Up=(Wp=2,t=>Math.pow(t,Wp));var Wp;const Hp=Op(Up),Gp=Bp(Up),qp=t=>1-Math.sin(Math.acos(t)),Zp=Op(qp),Xp=Bp(Zp),Yp=Fp(1.525),Kp=Op(Yp),$p=Bp(Yp),Jp=(t=>{const e=Fp(t);return t=>(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))})(1.525),Qp=4356/361,tf=35442/1805,ef=16061/1805,rf=t=>{if(1===t||0===t)return t;const e=t*t;return t<jp?7.5625*e:t<Np?9.075*e-9.9*t+3.4:t<.9?Qp*e-tf*t+ef:10.8*t*t-20.52*t+10.72},nf=Op(rf);function of(t,e){return t.map((()=>e||Gp)).splice(0,t.length-1)}function af(t){let{from:e=0,to:i=1,ease:r,offset:n,duration:o=300}=t;const a={done:!1,value:e},s=Array.isArray(i)?i:[e,i],l=function(t,e){return t.map((t=>t*e))}(n&&n.length===s.length?n:function(t){const e=t.length;return t.map(((t,i)=>0!==i?i/(e-1):0))}(s),o);function c(){return Rp(l,s,{ease:Array.isArray(r)?r:of(s,r)})}let u=c();return{next:t=>(a.value=u(t),a.done=t>=o,a),flipTarget:()=>{s.reverse(),u=c()}}}const sf={keyframes:af,spring:ep,decay:function(t){let{velocity:e=0,from:i=0,power:r=.8,timeConstant:n=350,restDelta:o=.5,modifyTarget:a}=t;const s={done:!1,value:i};let l=r*e;const c=i+l,u=void 0===a?c:a(c);return u!==c&&(l=u-i),{next:t=>{const e=-l*Math.exp(-t/n);return s.done=!(e>o||e<-o),s.value=s.done?u:u+e,s},flipTarget:()=>{}}}};const lf=1/60*1e3,cf="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),uf="undefined"!==typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(cf())),lf);let hf=!0,df=!1,pf=!1;const ff={delta:0,timestamp:0},mf=["read","update","preRender","render","postRender"],gf=mf.reduce(((t,e)=>(t[e]=function(t){let e=[],i=[],r=0,n=!1,o=!1;const a=new WeakSet,s={schedule:function(t){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n,s=o?e:i;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(t),-1===s.indexOf(t)&&(s.push(t),o&&n&&(r=e.length)),t},cancel:t=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1),a.delete(t)},process:l=>{if(n)o=!0;else{if(n=!0,[e,i]=[i,e],i.length=0,r=e.length,r)for(let i=0;i<r;i++){const r=e[i];r(l),a.has(r)&&(s.schedule(r),t())}n=!1,o&&(o=!1,s.process(l))}}};return s}((()=>df=!0)),t)),{}),yf=mf.reduce(((t,e)=>{const i=gf[e];return t[e]=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return df||bf(),i.schedule(t,e,r)},t}),{}),vf=mf.reduce(((t,e)=>(t[e]=gf[e].cancel,t)),{}),xf=(mf.reduce(((t,e)=>(t[e]=()=>gf[e].process(ff),t)),{}),t=>gf[t].process(ff)),_f=t=>{df=!1,ff.delta=hf?lf:Math.max(Math.min(t-ff.timestamp,40),1),ff.timestamp=t,pf=!0,mf.forEach(xf),pf=!1,df&&(hf=!1,uf(_f))},bf=()=>{df=!0,hf=!0,pf||uf(_f)},wf=()=>ff,Sf=yf;function kf(t,e){return t-e-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}const Cf=t=>{const e=e=>{let{delta:i}=e;return t(i)};return{start:()=>Sf.update(e,!0),stop:()=>vf.update(e)}};function Tf(t){var e,i,{from:r,autoplay:n=!0,driver:o=Cf,elapsed:a=0,repeat:s=0,repeatType:l="loop",repeatDelay:c=0,onPlay:u,onStop:h,onComplete:d,onRepeat:p,onUpdate:f}=t,m=cu(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,y,v,{to:x}=m,_=0,b=m.duration,w=!1,S=!0;const k=function(t){if(Array.isArray(t.to))return af;if(sf[t.type])return sf[t.type];const e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?af:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?ep:af}(m);(null===(i=(e=k).needsInterpolation)||void 0===i?void 0:i.call(e,r,x))&&(v=Rp([0,100],[r,x],{clamp:!1}),r=0,x=100);const C=k(Object.assign(Object.assign({},m),{from:r,to:x}));function T(){_++,"reverse"===l?(S=_%2===0,a=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?e-(t-e)+i:kf(e+-t,e,i)}(a,b,c,S)):(a=kf(a,b,c),"mirror"===l&&C.flipTarget()),w=!1,p&&p()}function A(t){if(S||(t=-t),a+=t,!w){const t=C.next(Math.max(0,a));y=t.value,v&&(y=v(y)),w=S?t.done:a<=0}null===f||void 0===f||f(y),w&&(0===_&&(null!==b&&void 0!==b||(b=a)),_<s?function(t,e,i,r){return r?t>=e+i:t<=-i}(a,b,c,S)&&T():(g.stop(),d&&d()))}return n&&(null===u||void 0===u||u(),g=o(A),g.start()),{stop:()=>{null===h||void 0===h||h(),g.stop()}}}function Af(t,e){return e?t*(1e3/e):0}var Pf=function(t){return 1e3*t};const Mf=(t,e)=>1-3*e+3*t,Ef=(t,e)=>3*e-6*t,If=t=>3*t,zf=(t,e,i)=>((Mf(e,i)*t+Ef(e,i))*t+If(e))*t,Lf=(t,e,i)=>3*Mf(e,i)*t*t+2*Ef(e,i)*t+If(e),Df=1e-7,Rf=10;const Of=8;const Bf=.1;function Ff(t,e,i,r){if(t===e&&i===r)return Vp;const n=new Float32Array(11);for(let a=0;a<11;++a)n[a]=zf(a*Bf,t,i);function o(e){let r=0,o=1;for(;10!==o&&n[o]<=e;++o)r+=Bf;--o;const a=r+(e-n[o])/(n[o+1]-n[o])*Bf,s=Lf(a,t,i);return s>=.001?function(t,e,i,r){for(let n=0;n<Of;++n){const n=Lf(e,i,r);if(0===n)return e;e-=(zf(e,i,r)-t)/n}return e}(e,a,t,i):0===s?a:function(t,e,i,r,n){let o,a,s=0;do{a=e+(i-e)/2,o=zf(a,r,n)-t,o>0?i=a:e=a}while(Math.abs(o)>Df&&++s<Rf);return a}(e,r,r+Bf,t,i)}return t=>0===t||1===t?t:zf(o(t),e,r)}var jf={linear:Vp,easeIn:Up,easeInOut:Gp,easeOut:Hp,circIn:qp,circInOut:Xp,circOut:Zp,backIn:Yp,backInOut:$p,backOut:Kp,anticipate:Jp,bounceIn:nf,bounceInOut:t=>t<.5?.5*(1-rf(1-2*t)):.5*rf(2*t-1)+.5,bounceOut:rf},Nf=function(t){if(Array.isArray(t)){yu(4===t.length,"Cubic bezier arrays must contain four numerical values.");var e=hu(t,4);return Ff(e[0],e[1],e[2],e[3])}return"string"===typeof t?(yu(void 0!==jf[t],"Invalid easing type '".concat(t,"'")),jf[t]):t},Vf=function(t){return Array.isArray(t)&&"number"!==typeof t[0]},Uf=function(t,e){return"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Tp.test(e)||e.startsWith("url(")))},Wf=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},Hf=function(t){return{type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restSpeed:10}},Gf=function(){return{type:"keyframes",ease:"linear",duration:.3}},qf=function(t){return{type:"keyframes",duration:.8,values:t}},Zf={x:Wf,y:Wf,z:Wf,rotate:Wf,rotateX:Wf,rotateY:Wf,rotateZ:Wf,scaleX:Hf,scaleY:Hf,scale:Hf,opacity:Gf,backgroundColor:Gf,color:Gf,default:Hf},Xf=function(t,e){var i;return i=Xh(e)?qf:Zf[t]||Zf.default,lu({to:e},i(e))};const Yf=new Set(["brightness","contrast","saturate","opacity"]);function Kf(t){let[e,i]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=i.match(lh)||[];if(!r)return t;const n=i.replace(r,"");let o=Yf.has(e)?1:0;return r!==i&&(o*=100),e+"("+o+n+")"}const $f=/([a-z-]*)\(.*?\)/g,Jf=Object.assign(Object.assign({},Tp),{getAnimatableNone:t=>{const e=t.match($f);return e?e.map(Kf).join(" "):t}});var Qf=lu(lu({},Sh),{color:xp,backgroundColor:xp,outlineColor:xp,fill:xp,stroke:xp,borderColor:xp,borderTopColor:xp,borderRightColor:xp,borderBottomColor:xp,borderLeftColor:xp,filter:Jf,WebkitFilter:Jf}),tm=function(t){return Qf[t]};function em(t,e){var i,r=tm(t);return r!==Jf&&(r=Tp),null===(i=r.getAnimatableNone)||void 0===i?void 0:i.call(r,e)}var im={current:!1};var rm=!1;function nm(t,e,i){var r;return Array.isArray(e.to)&&(null!==(r=t.duration)&&void 0!==r||(t.duration=.8)),function(t){Array.isArray(t.to)&&null===t.to[0]&&(t.to=du([],hu(t.to),!1),t.to[0]=t.from)}(e),function(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from;var e=cu(t,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(e).length}(t)||(t=lu(lu({},t),Xf(i,e.to))),lu(lu({},e),function(t){var e=t.ease,i=t.times,r=t.yoyo,n=t.flip,o=t.loop,a=cu(t,["ease","times","yoyo","flip","loop"]),s=lu({},a);return i&&(s.offset=i),a.duration&&(s.duration=Pf(a.duration)),a.repeatDelay&&(s.repeatDelay=Pf(a.repeatDelay)),e&&(s.ease=Vf(e)?e.map(Nf):Nf(e)),"tween"===a.type&&(s.type="keyframes"),(r||o||n)&&(gu(!rm,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),rm=!0,r?s.repeatType="reverse":o?s.repeatType="loop":n&&(s.repeatType="mirror"),s.repeat=o||r||n||a.repeat),"spring"!==a.type&&(s.type="keyframes"),s}(t))}function om(t,e,i,r,n){var o,a=lm(r,t),s=null!==(o=a.from)&&void 0!==o?o:e.get(),l=Uf(t,i);"none"===s&&l&&"string"===typeof i?s=em(t,i):am(s)&&"string"===typeof i?s=sm(i):!Array.isArray(i)&&am(i)&&"string"===typeof s&&(i=sm(s));var c=Uf(t,s);return gu(c===l,"You are trying to animate ".concat(t,' from "').concat(s,'" to "').concat(i,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(i," via the `style` property.")),c&&l&&!1!==a.type?function(){var r={from:s,to:i,velocity:e.getVelocity(),onComplete:n,onUpdate:function(t){return e.set(t)}};return"inertia"===a.type||"decay"===a.type?function(t){let e,{from:i=0,velocity:r=0,min:n,max:o,power:a=.8,timeConstant:s=750,bounceStiffness:l=500,bounceDamping:c=10,restDelta:u=1,modifyTarget:h,driver:d,onUpdate:p,onComplete:f,onStop:m}=t;function g(t){return void 0!==n&&t<n||void 0!==o&&t>o}function y(t){return void 0===n?o:void 0===o||Math.abs(n-t)<Math.abs(o-t)?n:o}function v(t){null===e||void 0===e||e.stop(),e=Tf(Object.assign(Object.assign({},t),{driver:d,onUpdate:e=>{var i;null===p||void 0===p||p(e),null===(i=t.onUpdate)||void 0===i||i.call(t,e)},onComplete:f,onStop:m}))}function x(t){v(Object.assign({type:"spring",stiffness:l,damping:c,restDelta:u},t))}if(g(i))x({from:i,velocity:r,to:y(i)});else{let t=a*r+i;"undefined"!==typeof h&&(t=h(t));const e=y(t),o=e===n?-1:1;let l,c;const d=t=>{l=c,c=t,r=Af(t-l,wf().delta),(1===o&&t>e||-1===o&&t<e)&&x({from:t,to:e,velocity:r})};v({type:"decay",from:i,velocity:r,timeConstant:s,power:a,restDelta:u,modifyTarget:h,onUpdate:g(t)?d:void 0})}return{stop:()=>null===e||void 0===e?void 0:e.stop()}}(lu(lu({},r),a)):Tf(lu(lu({},nm(a,r,t)),{onUpdate:function(t){var e;r.onUpdate(t),null===(e=a.onUpdate)||void 0===e||e.call(a,t)},onComplete:function(){var t;r.onComplete(),null===(t=a.onComplete)||void 0===t||t.call(a)}}))}:function(){var t,r,o=Kh(i);return e.set(o),n(),null===(t=null===a||void 0===a?void 0:a.onUpdate)||void 0===t||t.call(a,o),null===(r=null===a||void 0===a?void 0:a.onComplete)||void 0===r||r.call(a),{stop:function(){}}}}function am(t){return 0===t||"string"===typeof t&&0===parseFloat(t)&&-1===t.indexOf(" ")}function sm(t){return"number"===typeof t?0:em("",t)}function lm(t,e){return t[e]||t.default||t}function cm(t,e,i,r){return void 0===r&&(r={}),im.current&&(r={type:!1}),e.start((function(n){var o,a,s=om(t,e,i,r,n),l=function(t,e){var i,r;return null!==(r=null!==(i=(lm(t,e)||{}).delay)&&void 0!==i?i:t.delay)&&void 0!==r?r:0}(r,t),c=function(){return a=s()};return l?o=window.setTimeout(c,Pf(l)):c(),function(){clearTimeout(o),null===a||void 0===a||a.stop()}}))}var um=function(t){return/^0[^.\s]+$/.test(t)};const hm=1/60*1e3,dm="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),pm="undefined"!==typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(dm())),hm);let fm=!0,mm=!1,gm=!1;const ym={delta:0,timestamp:0},vm=["read","update","preRender","render","postRender"],xm=vm.reduce(((t,e)=>(t[e]=function(t){let e=[],i=[],r=0,n=!1,o=!1;const a=new WeakSet,s={schedule:function(t){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n,s=o?e:i;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(t),-1===s.indexOf(t)&&(s.push(t),o&&n&&(r=e.length)),t},cancel:t=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1),a.delete(t)},process:l=>{if(n)o=!0;else{if(n=!0,[e,i]=[i,e],i.length=0,r=e.length,r)for(let i=0;i<r;i++){const r=e[i];r(l),a.has(r)&&(s.schedule(r),t())}n=!1,o&&(o=!1,s.process(l))}}};return s}((()=>mm=!0)),t)),{}),_m=vm.reduce(((t,e)=>{const i=xm[e];return t[e]=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return mm||Cm(),i.schedule(t,e,r)},t}),{}),bm=vm.reduce(((t,e)=>(t[e]=xm[e].cancel,t)),{}),wm=vm.reduce(((t,e)=>(t[e]=()=>xm[e].process(ym),t)),{}),Sm=t=>xm[t].process(ym),km=t=>{mm=!1,ym.delta=fm?hm:Math.max(Math.min(t-ym.timestamp,40),1),ym.timestamp=t,gm=!0,vm.forEach(Sm),gm=!1,mm&&(fm=!1,pm(km))},Cm=()=>{mm=!0,fm=!0,gm||pm(km)},Tm=()=>ym,Am=_m;function Pm(t,e){-1===t.indexOf(e)&&t.push(e)}function Mm(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}var Em=function(){function t(){this.subscriptions=[]}return t.prototype.add=function(t){var e=this;return Pm(this.subscriptions,t),function(){return Mm(e.subscriptions,t)}},t.prototype.notify=function(t,e,i){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,i);else for(var n=0;n<r;n++){var o=this.subscriptions[n];o&&o(t,e,i)}},t.prototype.getSize=function(){return this.subscriptions.length},t.prototype.clear=function(){this.subscriptions.length=0},t}(),Im=function(){function t(t){var e,i=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Em,this.velocityUpdateSubscribers=new Em,this.renderSubscribers=new Em,this.canTrackVelocity=!1,this.updateAndNotify=function(t,e){void 0===e&&(e=!0),i.prev=i.current,i.current=t;var r=Tm(),n=r.delta,o=r.timestamp;i.lastUpdated!==o&&(i.timeDelta=n,i.lastUpdated=o,Am.postRender(i.scheduleVelocityCheck)),i.prev!==i.current&&i.updateSubscribers.notify(i.current),i.velocityUpdateSubscribers.getSize()&&i.velocityUpdateSubscribers.notify(i.getVelocity()),e&&i.renderSubscribers.notify(i.current)},this.scheduleVelocityCheck=function(){return Am.postRender(i.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==i.lastUpdated&&(i.prev=i.current,i.velocityUpdateSubscribers.notify(i.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e)))}return t.prototype.onChange=function(t){return this.updateSubscribers.add(t)},t.prototype.clearListeners=function(){this.updateSubscribers.clear()},t.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},t.prototype.attach=function(t){this.passiveEffect=t},t.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},t.prototype.get=function(){return this.current},t.prototype.getPrevious=function(){return this.prev},t.prototype.getVelocity=function(){return this.canTrackVelocity?Af(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},t.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(i){e.hasAnimated=!0,e.stopAnimation=t(i)})).then((function(){return e.clearAnimation()}))},t.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},t.prototype.isAnimating=function(){return!!this.stopAnimation},t.prototype.clearAnimation=function(){this.stopAnimation=null},t.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},t}();function zm(t){return new Im(t)}var Lm=function(t){return function(e){return e.test(t)}},Dm=[xh,mh,fh,ph,yh,gh,{test:function(t){return"auto"===t},parse:function(t){return t}}],Rm=function(t){return Dm.find(Lm(t))},Om=du(du([],hu(Dm),!1),[xp,Tp],!1),Bm=function(t){return Om.find(Lm(t))};function Fm(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,zm(i))}function jm(t,e){var i=Lu(t,e),r=i?t.makeTargetAnimatable(i,!1):{},n=r.transitionEnd,o=void 0===n?{}:n;r.transition;var a=cu(r,["transitionEnd","transition"]);for(var s in a=lu(lu({},a),o)){Fm(t,s,Kh(a[s]))}}function Nm(t,e){if(e)return(e[t]||e.default||e).from}function Vm(t,e,i){var r;void 0===i&&(i={});var n=Lu(t,e,i.custom),o=(n||{}).transition,a=void 0===o?t.getDefaultTransition()||{}:o;i.transitionOverride&&(a=i.transitionOverride);var s=n?function(){return Um(t,n,i)}:function(){return Promise.resolve()},l=(null===(r=t.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var n=a.delayChildren,o=void 0===n?0:n,s=a.staggerChildren,l=a.staggerDirection;return function(t,e,i,r,n,o){void 0===i&&(i=0);void 0===r&&(r=0);void 0===n&&(n=1);var a=[],s=(t.variantChildren.size-1)*r,l=1===n?function(t){return void 0===t&&(t=0),t*r}:function(t){return void 0===t&&(t=0),s-t*r};return Array.from(t.variantChildren).sort(Wm).forEach((function(t,r){a.push(Vm(t,e,lu(lu({},o),{delay:i+l(r)})).then((function(){return t.notifyAnimationComplete(e)})))})),Promise.all(a)}(t,e,o+r,s,l,i)}:function(){return Promise.resolve()},c=a.when;if(c){var u=hu("beforeChildren"===c?[s,l]:[l,s],2),h=u[0],d=u[1];return h().then(d)}return Promise.all([s(),l(i.delay)])}function Um(t,e,i){var r,n=void 0===i?{}:i,o=n.delay,a=void 0===o?0:o,s=n.transitionOverride,l=n.type,c=t.makeTargetAnimatable(e),u=c.transition,h=void 0===u?t.getDefaultTransition():u,d=c.transitionEnd,p=cu(c,["transition","transitionEnd"]);s&&(h=s);var f=[],m=l&&(null===(r=t.animationState)||void 0===r?void 0:r.getState()[l]);for(var g in p){var y=t.getValue(g),v=p[g];if(!(!y||void 0===v||m&&Hm(m,g))){var x=lu({delay:a},h);t.shouldReduceMotion&&Ju(g)&&(x=lu(lu({},x),{type:!1,delay:0}));var _=cm(g,y,v,x);f.push(_)}}return Promise.all(f).then((function(){d&&jm(t,d)}))}function Wm(t,e){return t.sortNodePosition(e)}function Hm(t,e){var i=t.protectedKeys,r=t.needsAnimating,n=i.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,n}var Gm=[ed.Animate,ed.InView,ed.Focus,ed.Hover,ed.Tap,ed.Drag,ed.Exit],qm=du([],hu(Gm),!1).reverse(),Zm=Gm.length;function Xm(t){return function(e){return Promise.all(e.map((function(e){var i=e.animation,r=e.options;return function(t,e,i){var r;if(void 0===i&&(i={}),t.notifyAnimationStart(e),Array.isArray(e)){var n=e.map((function(e){return Vm(t,e,i)}));r=Promise.all(n)}else if("string"===typeof e)r=Vm(t,e,i);else{var o="function"===typeof e?Lu(t,e,i.custom):e;r=Um(t,o,i)}return r.then((function(){return t.notifyAnimationComplete(e)}))}(t,i,r)})))}}function Ym(t){var e=Xm(t),i=function(){var t;return t={},t[ed.Animate]=Km(!0),t[ed.InView]=Km(),t[ed.Hover]=Km(),t[ed.Tap]=Km(),t[ed.Drag]=Km(),t[ed.Focus]=Km(),t[ed.Exit]=Km(),t}(),r={},n=!0,o=function(e,i){var r=Lu(t,i);if(r){r.transition;var n=r.transitionEnd,o=cu(r,["transition","transitionEnd"]);e=lu(lu(lu({},e),o),n)}return e};function a(a,s){for(var l,c=t.getProps(),u=t.getVariantContext(!0)||{},h=[],d=new Set,p={},f=1/0,m=function(e){var r=qm[e],m=i[r],g=null!==(l=c[r])&&void 0!==l?l:u[r],y=Iu(g),v=r===s?m.isActive:null;!1===v&&(f=e);var x=g===u[r]&&g!==c[r]&&y;if(x&&n&&t.manuallyAnimateOnMount&&(x=!1),m.protectedKeys=lu({},p),!m.isActive&&null===v||!g&&!m.prevProp||Zh(g)||"boolean"===typeof g)return"continue";var _=function(t,e){if("string"===typeof e)return e!==t;if(Eu(e))return!Ud(e,t);return!1}(m.prevProp,g),b=_||r===s&&m.isActive&&!x&&y||e>f&&y,w=Array.isArray(g)?g:[g],S=w.reduce(o,{});!1===v&&(S={});var k=m.prevResolvedValues,C=void 0===k?{}:k,T=lu(lu({},C),S),A=function(t){b=!0,d.delete(t),m.needsAnimating[t]=!0};for(var P in T){var M=S[P],E=C[P];p.hasOwnProperty(P)||(M!==E?Xh(M)&&Xh(E)?!Ud(M,E)||_?A(P):m.protectedKeys[P]=!0:void 0!==M?A(P):d.add(P):void 0!==M&&d.has(P)?A(P):m.protectedKeys[P]=!0)}m.prevProp=g,m.prevResolvedValues=S,m.isActive&&(p=lu(lu({},p),S)),n&&t.blockInitialAnimation&&(b=!1),b&&!x&&h.push.apply(h,du([],hu(w.map((function(t){return{animation:t,options:lu({type:r},a)}}))),!1))},g=0;g<Zm;g++)m(g);if(r=lu({},p),d.size){var y={};d.forEach((function(e){var i=t.getBaseTarget(e);void 0!==i&&(y[e]=i)})),h.push({animation:y})}var v=Boolean(h.length);return n&&!1===c.initial&&!t.manuallyAnimateOnMount&&(v=!1),n=!1,v?e(h):Promise.resolve()}return{isAnimated:function(t){return void 0!==r[t]},animateChanges:a,setActive:function(e,r,n){var o;if(i[e].isActive===r)return Promise.resolve();null===(o=t.variantChildren)||void 0===o||o.forEach((function(t){var i;return null===(i=t.animationState)||void 0===i?void 0:i.setActive(e,r)})),i[e].isActive=r;var s=a(n,e);for(var l in i)i[l].protectedKeys={};return s},setAnimateFunction:function(i){e=i(t)},getState:function(){return i}}}function Km(t){return void 0===t&&(t=!1),{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var $m={animation:Nd((function(t){var e=t.visualElement,i=t.animate;e.animationState||(e.animationState=Ym(e)),Zh(i)&&(0,o.useEffect)((function(){return i.subscribe(e)}),[i])})),exit:Nd((function(t){var e=t.custom,i=t.visualElement,r=hu(nu(),2),n=r[0],a=r[1],s=(0,o.useContext)(Qc);(0,o.useEffect)((function(){var t,r;i.isPresent=n;var o=null===(t=i.animationState)||void 0===t?void 0:t.setActive(ed.Exit,!n,{custom:null!==(r=null===s||void 0===s?void 0:s.custom)&&void 0!==r?r:e});!n&&(null===o||void 0===o||o.then(a))}),[n])}))};const Jm=t=>t.hasOwnProperty("x")&&t.hasOwnProperty("y"),Qm=t=>Jm(t)&&t.hasOwnProperty("z"),tg=(t,e)=>Math.abs(t-e);function eg(t,e){if(Ap(t)&&Ap(e))return tg(t,e);if(Jm(t)&&Jm(e)){const i=tg(t.x,e.x),r=tg(t.y,e.y),n=Qm(t)&&Qm(e)?tg(t.z,e.z):0;return Math.sqrt(Math.pow(i,2)+Math.pow(r,2)+Math.pow(n,2))}}var ig=function(){function t(t,e,i){var r=this,n=(void 0===i?{}:i).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var t=og(r.lastMoveEventInfo,r.history),e=null!==r.startEvent,i=eg(t.offset,{x:0,y:0})>=3;if(e||i){var n=t.point,o=Tm().timestamp;r.history.push(lu(lu({},n),{timestamp:o}));var a=r.handlers,s=a.onStart,l=a.onMove;e||(s&&s(r.lastMoveEvent,t),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){r.lastMoveEvent=t,r.lastMoveEventInfo=rg(e,r.transformPagePoint),ad(t)&&0===t.buttons?r.handlePointerUp(t,e):Am.update(r.updatePoint,!0)},this.handlePointerUp=function(t,e){r.end();var i=r.handlers,n=i.onEnd,o=i.onSessionEnd,a=og(rg(e,r.transformPagePoint),r.history);r.startEvent&&n&&n(t,a),o&&o(t,a)},!(sd(t)&&t.touches.length>1)){this.handlers=e,this.transformPagePoint=n;var o=rg(hd(t),this.transformPagePoint),a=o.point,s=Tm().timestamp;this.history=[lu(lu({},a),{timestamp:s})];var l=e.onSessionStart;l&&l(t,og(o,this.history)),this.removeListeners=Ed(xd(window,"pointermove",this.handlePointerMove),xd(window,"pointerup",this.handlePointerUp),xd(window,"pointercancel",this.handlePointerUp))}}return t.prototype.updateHandlers=function(t){this.handlers=t},t.prototype.end=function(){this.removeListeners&&this.removeListeners(),bm.update(this.updatePoint)},t}();function rg(t,e){return e?{point:e(t.point)}:t}function ng(t,e){return{x:t.x-e.x,y:t.y-e.y}}function og(t,e){var i=t.point;return{point:i,delta:ng(i,sg(e)),offset:ng(i,ag(e)),velocity:lg(e,.1)}}function ag(t){return t[0]}function sg(t){return t[t.length-1]}function lg(t,e){if(t.length<2)return{x:0,y:0};for(var i=t.length-1,r=null,n=sg(t);i>=0&&(r=t[i],!(n.timestamp-r.timestamp>Pf(e)));)i--;if(!r)return{x:0,y:0};var o=(n.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var a={x:(n.x-r.x)/o,y:(n.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function cg(t){return t.max-t.min}function ug(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=.01),eg(t,e)<i}function hg(t,e,i,r){void 0===r&&(r=.5),t.origin=r,t.originPoint=np(e.min,e.max,t.origin),t.scale=cg(i)/cg(e),(ug(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=np(i.min,i.max,t.origin)-t.originPoint,(ug(t.translate)||isNaN(t.translate))&&(t.translate=0)}function dg(t,e,i,r){hg(t.x,e.x,i.x,null===r||void 0===r?void 0:r.originX),hg(t.y,e.y,i.y,null===r||void 0===r?void 0:r.originY)}function pg(t,e,i){t.min=i.min+e.min,t.max=t.min+cg(e)}function fg(t,e,i){t.min=e.min-i.min,t.max=t.min+cg(e)}function mg(t,e,i){fg(t.x,e.x,i.x),fg(t.y,e.y,i.y)}function gg(t,e,i){return{min:void 0!==e?t.min+e:void 0,max:void 0!==i?t.max+i-(t.max-t.min):void 0}}function yg(t,e){var i,r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&(r=(i=hu([n,r],2))[0],n=i[1]),{min:r,max:n}}var vg=.35;function xg(t,e,i){return{min:_g(t,e),max:_g(t,i)}}function _g(t,e){var i;return"number"===typeof t?t:null!==(i=t[e])&&void 0!==i?i:0}var bg=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},wg=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function Sg(t){return[t("x"),t("y")]}function kg(t){var e=t.top;return{x:{min:t.left,max:t.right},y:{min:e,max:t.bottom}}}function Cg(t){return void 0===t||1===t}function Tg(t){var e=t.scale,i=t.scaleX,r=t.scaleY;return!Cg(e)||!Cg(i)||!Cg(r)}function Ag(t){return Tg(t)||Pg(t.x)||Pg(t.y)||t.z||t.rotate||t.rotateX||t.rotateY}function Pg(t){return t&&"0%"!==t}function Mg(t,e,i){return i+e*(t-i)}function Eg(t,e,i,r,n){return void 0!==n&&(t=Mg(t,n,r)),Mg(t,i,r)+e}function Ig(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=1),t.min=Eg(t.min,e,i,r,n),t.max=Eg(t.max,e,i,r,n)}function zg(t,e){var i=e.x,r=e.y;Ig(t.x,i.translate,i.scale,i.originPoint),Ig(t.y,r.translate,r.scale,r.originPoint)}function Lg(t,e){t.min=t.min+e,t.max=t.max+e}function Dg(t,e,i){var r=hu(i,3),n=r[0],o=r[1],a=r[2],s=void 0!==e[a]?e[a]:.5,l=np(t.min,t.max,s);Ig(t,e[n],e[o],l,e.scale)}var Rg=["x","scaleX","originX"],Og=["y","scaleY","originY"];function Bg(t,e){Dg(t.x,e,Rg),Dg(t.y,e,Og)}function Fg(t,e){return kg(function(t,e){if(!e)return t;var i=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}var jg=new WeakMap,Ng=function(){function t(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wg(),this.visualElement=t}return t.prototype.start=function(t,e){var i=this,r=(void 0===e?{}:e).snapToCursor,n=void 0!==r&&r;if(!1!==this.visualElement.isPresent){this.panSession=new ig(t,{onSessionStart:function(t){i.stopAnimation(),n&&i.snapToCursor(hd(t,"page").point)},onStart:function(t,e){var r,n=i.getProps(),o=n.drag,a=n.dragPropagation,s=n.onDragStart;(!o||a||(i.openGlobalLock&&i.openGlobalLock(),i.openGlobalLock=kd(o),i.openGlobalLock))&&(i.isDragging=!0,i.currentDirection=null,i.resolveConstraints(),i.visualElement.projection&&(i.visualElement.projection.isAnimationBlocked=!0,i.visualElement.projection.target=void 0),Sg((function(t){var e,r,n=i.getAxisMotionValue(t).get()||0;if(fh.test(n)){var o=null===(r=null===(e=i.visualElement.projection)||void 0===e?void 0:e.layout)||void 0===r?void 0:r.actual[t];if(o)n=cg(o)*(parseFloat(n)/100)}i.originPoint[t]=n})),null===s||void 0===s||s(t,e),null===(r=i.visualElement.animationState)||void 0===r||r.setActive(ed.Drag,!0))},onMove:function(t,e){var r=i.getProps(),n=r.dragPropagation,o=r.dragDirectionLock,a=r.onDirectionLock,s=r.onDrag;if(n||i.openGlobalLock){var l=e.offset;if(o&&null===i.currentDirection)return i.currentDirection=function(t,e){void 0===e&&(e=10);var i=null;Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x");return i}(l),void(null!==i.currentDirection&&(null===a||void 0===a||a(i.currentDirection)));i.updateAxis("x",e.point,l),i.updateAxis("y",e.point,l),i.visualElement.syncRender(),null===s||void 0===s||s(t,e)}},onSessionEnd:function(t,e){return i.stop(t,e)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},t.prototype.stop=function(t,e){var i=this.isDragging;if(this.cancel(),i){var r=e.velocity;this.startAnimation(r);var n=this.getProps().onDragEnd;null===n||void 0===n||n(t,e)}},t.prototype.cancel=function(){var t,e;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(t=this.panSession)||void 0===t||t.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(e=this.visualElement.animationState)||void 0===e||e.setActive(ed.Drag,!1)},t.prototype.updateAxis=function(t,e,i){var r=this.getProps().drag;if(i&&Vg(t,r,this.currentDirection)){var n=this.getAxisMotionValue(t),o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=function(t,e,i){var r=e.min,n=e.max;return void 0!==r&&t<r?t=i?np(r,t,i.min):Math.max(t,r):void 0!==n&&t>n&&(t=i?np(n,t,i.max):Math.min(t,n)),t}(o,this.constraints[t],this.elastic[t])),n.set(o)}},t.prototype.resolveConstraints=function(){var t=this,e=this.getProps(),i=e.dragConstraints,r=e.dragElastic,n=(this.visualElement.projection||{}).layout,o=this.constraints;i&&Mu(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!i||!n)&&function(t,e){var i=e.top,r=e.left,n=e.bottom,o=e.right;return{x:gg(t.x,r,o),y:gg(t.y,i,n)}}(n.actual,i),this.elastic=function(t){return void 0===t&&(t=vg),!1===t?t=0:!0===t&&(t=vg),{x:xg(t,"left","right"),y:xg(t,"top","bottom")}}(r),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Sg((function(e){t.getAxisMotionValue(e)&&(t.constraints[e]=function(t,e){var i={};return void 0!==e.min&&(i.min=e.min-t.min),void 0!==e.max&&(i.max=e.max-t.min),i}(n.actual[e],t.constraints[e]))}))},t.prototype.resolveRefConstraints=function(){var t=this.getProps(),e=t.dragConstraints,i=t.onMeasureDragConstraints;if(!e||!Mu(e))return!1;var r=e.current;yu(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var n=this.visualElement.projection;if(!n||!n.layout)return!1;var o=function(t,e,i){var r=Fg(t,i),n=e.scroll;return n&&(Lg(r.x,n.x),Lg(r.y,n.y)),r}(r,n.root,this.visualElement.getTransformPagePoint()),a=function(t,e){return{x:yg(t.x,e.x),y:yg(t.y,e.y)}}(n.layout.actual,o);if(i){var s=i(function(t){var e=t.x,i=t.y;return{top:i.min,right:e.max,bottom:i.max,left:e.min}}(a));this.hasMutatedConstraints=!!s,s&&(a=kg(s))}return a},t.prototype.startAnimation=function(t){var e=this,i=this.getProps(),r=i.drag,n=i.dragMomentum,o=i.dragElastic,a=i.dragTransition,s=i.dragSnapToOrigin,l=i.onDragTransitionEnd,c=this.constraints||{},u=Sg((function(i){var l;if(Vg(i,r,e.currentDirection)){var u=null!==(l=null===c||void 0===c?void 0:c[i])&&void 0!==l?l:{};s&&(u={min:0,max:0});var h=o?200:1e6,d=o?40:1e7,p=lu(lu({type:"inertia",velocity:n?t[i]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},a),u);return e.startAxisValueAnimation(i,p)}}));return Promise.all(u).then(l)},t.prototype.startAxisValueAnimation=function(t,e){return cm(t,this.getAxisMotionValue(t),0,e)},t.prototype.stopAnimation=function(){var t=this;Sg((function(e){return t.getAxisMotionValue(e).stop()}))},t.prototype.getAxisMotionValue=function(t){var e,i,r="_drag"+t.toUpperCase(),n=this.visualElement.getProps()[r];return n||this.visualElement.getValue(t,null!==(i=null===(e=this.visualElement.getProps().initial)||void 0===e?void 0:e[t])&&void 0!==i?i:0)},t.prototype.snapToCursor=function(t){var e=this;Sg((function(i){if(Vg(i,e.getProps().drag,e.currentDirection)){var r=e.visualElement.projection,n=e.getAxisMotionValue(i);if(r&&r.layout){var o=r.layout.actual[i],a=o.min,s=o.max;n.set(t[i]-np(a,s,.5))}}}))},t.prototype.scalePositionWithinConstraints=function(){var t,e=this,i=this.getProps(),r=i.drag,n=i.dragConstraints,o=this.visualElement.projection;if(Mu(n)&&o&&this.constraints){this.stopAnimation();var a={x:0,y:0};Sg((function(t){var i=e.getAxisMotionValue(t);if(i){var r=i.get();a[t]=function(t,e){var i=.5,r=cg(t),n=cg(e);return n>r?i=rp(e.min,e.max-r,t.min):r>n&&(i=rp(t.min,t.max-n,e.min)),Wd(0,1,i)}({min:r,max:r},e.constraints[t])}}));var s=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=s?s({},""):"none",null===(t=o.root)||void 0===t||t.updateScroll(),o.updateLayout(),this.resolveConstraints(),Sg((function(t){if(Vg(t,r,null)){var i=e.getAxisMotionValue(t),n=e.constraints[t],o=n.min,s=n.max;i.set(np(o,s,a[t]))}}))}},t.prototype.addListeners=function(){var t,e=this;jg.set(this.visualElement,this);var i=xd(this.visualElement.getInstance(),"pointerdown",(function(t){var i=e.getProps(),r=i.drag,n=i.dragListener;r&&(void 0===n||n)&&e.start(t)})),r=function(){Mu(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},n=this.visualElement.projection,o=n.addEventListener("measure",r);n&&!n.layout&&(null===(t=n.root)||void 0===t||t.updateScroll(),n.updateLayout()),r();var a=nd(window,"resize",(function(){return e.scalePositionWithinConstraints()}));return n.addEventListener("didUpdate",(function(t){var i=t.delta,r=t.hasLayoutChanged;e.isDragging&&r&&(Sg((function(t){var r=e.getAxisMotionValue(t);r&&(e.originPoint[t]+=i[t].translate,r.set(r.get()+i[t].translate))})),e.visualElement.syncRender())})),function(){a(),i(),o()}},t.prototype.getProps=function(){var t=this.visualElement.getProps(),e=t.drag,i=void 0!==e&&e,r=t.dragDirectionLock,n=void 0!==r&&r,o=t.dragPropagation,a=void 0!==o&&o,s=t.dragConstraints,l=void 0!==s&&s,c=t.dragElastic,u=void 0===c?vg:c,h=t.dragMomentum,d=void 0===h||h;return lu(lu({},t),{drag:i,dragDirectionLock:n,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:d})},t}();function Vg(t,e,i){return(!0===e||e===t)&&(null===i||i===t)}var Ug={pan:Nd((function(t){var e=t.onPan,i=t.onPanStart,r=t.onPanEnd,n=t.onPanSessionStart,a=t.visualElement,s=e||i||r||n,l=(0,o.useRef)(null),c=(0,o.useContext)(bu).transformPagePoint,u={onSessionStart:n,onStart:i,onMove:e,onEnd:function(t,e){l.current=null,r&&r(t,e)}};(0,o.useEffect)((function(){null!==l.current&&l.current.updateHandlers(u)})),_d(a,"pointerdown",s&&function(t){l.current=new ig(t,u,{transformPagePoint:c})}),Pd((function(){return l.current&&l.current.end()}))})),drag:Nd((function(t){var e=t.dragControls,i=t.visualElement,r=tu((function(){return new Ng(i)}));(0,o.useEffect)((function(){return e&&e.subscribe(r)}),[r,e]),(0,o.useEffect)((function(){return r.addListeners()}),[r])}))},Wg=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];var Hg=function(t){var e=t.treeType,i=void 0===e?"":e,r=t.build,n=t.getBaseTarget,o=t.makeTargetAnimatable,a=t.measureViewportBox,s=t.render,l=t.readValueFromInstance,c=t.removeValueFromRenderState,u=t.sortNodePosition,h=t.scrapeMotionValuesFromProps;return function(t,e){var d=t.parent,p=t.props,f=t.presenceId,m=t.blockInitialAnimation,g=t.visualState,y=t.shouldReduceMotion;void 0===e&&(e={});var v,x,_=!1,b=g.latestValues,w=g.renderState,S=function(){var t=Wg.map((function(){return new Em})),e={},i={clearAllListeners:function(){return t.forEach((function(t){return t.clear()}))},updatePropListeners:function(t){Wg.forEach((function(r){var n,o="on"+r,a=t[o];null===(n=e[r])||void 0===n||n.call(e),a&&(e[r]=i[o](a))}))}};return t.forEach((function(t,e){i["on"+Wg[e]]=function(e){return t.add(e)},i["notify"+Wg[e]]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.notify.apply(t,du([],hu(e),!1))}})),i}(),k=new Map,C=new Map,T={},A=lu({},b);function P(){v&&_&&(M(),s(v,w,p.style,B.projection))}function M(){r(B,w,b,e,p)}function E(){S.notifyUpdate(b)}function I(t,e){var i=e.onChange((function(e){b[t]=e,p.onUpdate&&Am.update(E,!1,!0)})),r=e.onRenderRequest(B.scheduleRender);C.set(t,(function(){i(),r()}))}var z=h(p);for(var L in z){var D=z[L];void 0!==b[L]&&ih(D)&&D.set(b[L],!1)}var R=Du(p),O=Ru(p),B=lu(lu({treeType:i,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:f,shouldReduceMotion:y,variantChildren:O?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===d||void 0===d?void 0:d.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(v)},mount:function(t){_=!0,v=B.current=t,B.projection&&B.projection.mount(t),O&&d&&!R&&(x=null===d||void 0===d?void 0:d.addVariantChild(B)),k.forEach((function(t,e){return I(e,t)})),null===d||void 0===d||d.children.add(B),B.setProps(p)},unmount:function(){var t;null===(t=B.projection)||void 0===t||t.unmount(),bm.update(E),bm.render(P),C.forEach((function(t){return t()})),null===x||void 0===x||x(),null===d||void 0===d||d.children.delete(B),S.clearAllListeners(),v=void 0,_=!1},addVariantChild:function(t){var e,i=B.getClosestVariantNode();if(i)return null===(e=i.variantChildren)||void 0===e||e.add(t),function(){return i.variantChildren.delete(t)}},sortNodePosition:function(t){return u&&i===t.treeType?u(B.getInstance(),t.getInstance()):0},getClosestVariantNode:function(){return O?B:null===d||void 0===d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return p.layoutId},getInstance:function(){return v},getStaticValue:function(t){return b[t]},setStaticValue:function(t,e){return b[t]=e},getLatestValues:function(){return b},setVisibility:function(t){B.isVisible!==t&&(B.isVisible=t,B.scheduleRender())},makeTargetAnimatable:function(t,e){return void 0===e&&(e=!0),o(B,t,p,e)},measureViewportBox:function(){return a(v,p)},addValue:function(t,e){B.hasValue(t)&&B.removeValue(t),k.set(t,e),b[t]=e.get(),I(t,e)},removeValue:function(t){var e;k.delete(t),null===(e=C.get(t))||void 0===e||e(),C.delete(t),delete b[t],c(t,w)},hasValue:function(t){return k.has(t)},getValue:function(t,e){var i=k.get(t);return void 0===i&&void 0!==e&&(i=zm(e),B.addValue(t,i)),i},forEachValue:function(t){return k.forEach(t)},readValue:function(t){var i;return null!==(i=b[t])&&void 0!==i?i:l(v,t,e)},setBaseTarget:function(t,e){A[t]=e},getBaseTarget:function(t){if(n){var e=n(p,t);if(void 0!==e&&!ih(e))return e}return A[t]}},S),{build:function(){return M(),w},scheduleRender:function(){Am.render(P,!1,!0)},syncRender:P,setProps:function(t){(t.transformTemplate||p.transformTemplate)&&B.scheduleRender(),p=t,S.updatePropListeners(t),T=function(t,e,i){var r;for(var n in e){var o=e[n],a=i[n];if(ih(o))t.addValue(n,o);else if(ih(a))t.addValue(n,zm(o));else if(a!==o)if(t.hasValue(n)){var s=t.getValue(n);!s.hasAnimated&&s.set(o)}else t.addValue(n,zm(null!==(r=t.getStaticValue(n))&&void 0!==r?r:o))}for(var n in i)void 0===e[n]&&t.removeValue(n);return e}(B,h(p),T)},getProps:function(){return p},getVariant:function(t){var e;return null===(e=p.variants)||void 0===e?void 0:e[t]},getDefaultTransition:function(){return p.transition},getTransformPagePoint:function(){return p.transformPagePoint},getVariantContext:function(t){if(void 0===t&&(t=!1),t)return null===d||void 0===d?void 0:d.getVariantContext();if(!R){var e=(null===d||void 0===d?void 0:d.getVariantContext())||{};return void 0!==p.initial&&(e.initial=p.initial),e}for(var i={},r=0;r<qg;r++){var n=Gg[r],o=p[n];(Iu(o)||!1===o)&&(i[n]=o)}return i}});return B}},Gg=du(["initial"],hu(Gm),!1),qg=Gg.length;function Zg(t){return"string"===typeof t&&t.startsWith("var(--")}var Xg=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var Yg=4;function Kg(t,e,i){void 0===i&&(i=1),yu(i<=Yg,'Max CSS variable fallback depth detected in property "'.concat(t,'". This may indicate a circular fallback dependency.'));var r=hu(function(t){var e=Xg.exec(t);if(!e)return[,];var i=hu(e,3);return[i[1],i[2]]}(t),2),n=r[0],o=r[1];if(n){var a=window.getComputedStyle(e).getPropertyValue(n);return a?a.trim():Zg(o)?Kg(o,e,i+1):o}}var $g,Jg=new Set(["width","height","top","left","right","bottom","x","y"]),Qg=function(t){return Jg.has(t)},ty=function(t,e){t.set(e,!1),t.set(e)},ey=function(t){return t===xh||t===mh};!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}($g||($g={}));var iy=function(t,e){return parseFloat(t.split(", ")[e])},ry=function(t,e){return function(i,r){var n=r.transform;if("none"===n||!n)return 0;var o=n.match(/^matrix3d\((.+)\)$/);if(o)return iy(o[1],e);var a=n.match(/^matrix\((.+)\)$/);return a?iy(a[1],t):0}},ny=new Set(["x","y","z"]),oy=Yu.filter((function(t){return!ny.has(t)}));var ay={width:function(t,e){var i=t.x,r=e.paddingLeft,n=void 0===r?"0":r,o=e.paddingRight,a=void 0===o?"0":o;return i.max-i.min-parseFloat(n)-parseFloat(a)},height:function(t,e){var i=t.y,r=e.paddingTop,n=void 0===r?"0":r,o=e.paddingBottom,a=void 0===o?"0":o;return i.max-i.min-parseFloat(n)-parseFloat(a)},top:function(t,e){var i=e.top;return parseFloat(i)},left:function(t,e){var i=e.left;return parseFloat(i)},bottom:function(t,e){var i=t.y,r=e.top;return parseFloat(r)+(i.max-i.min)},right:function(t,e){var i=t.x,r=e.left;return parseFloat(r)+(i.max-i.min)},x:ry(4,13),y:ry(5,14)},sy=function(t,e,i,r){void 0===i&&(i={}),void 0===r&&(r={}),e=lu({},e),r=lu({},r);var n=Object.keys(e).filter(Qg),o=[],a=!1,s=[];if(n.forEach((function(n){var l=t.getValue(n);if(t.hasValue(n)){var c,u=i[n],h=Rm(u),d=e[n];if(Xh(d)){var p=d.length,f=null===d[0]?1:0;u=d[f],h=Rm(u);for(var m=f;m<p;m++)c?yu(Rm(d[m])===c,"All keyframes must be of the same type"):(c=Rm(d[m]),yu(c===h||ey(h)&&ey(c),"Keyframes must be of the same dimension as the current value"))}else c=Rm(d);if(h!==c)if(ey(h)&&ey(c)){var g=l.get();"string"===typeof g&&l.set(parseFloat(g)),"string"===typeof d?e[n]=parseFloat(d):Array.isArray(d)&&c===mh&&(e[n]=d.map(parseFloat))}else(null===h||void 0===h?void 0:h.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===u||0===d)?0===u?l.set(c.transform(u)):e[n]=h.transform(d):(a||(o=function(t){var e=[];return oy.forEach((function(i){var r=t.getValue(i);void 0!==r&&(e.push([i,r.get()]),r.set(i.startsWith("scale")?1:0))})),e.length&&t.syncRender(),e}(t),a=!0),s.push(n),r[n]=void 0!==r[n]?r[n]:e[n],ty(l,d))}})),s.length){var l=s.indexOf("height")>=0?window.pageYOffset:null,c=function(t,e,i){var r=e.measureViewportBox(),n=e.getInstance(),o=getComputedStyle(n),a=o.display,s={};"none"===a&&e.setStaticValue("display",t.display||"block"),i.forEach((function(t){s[t]=ay[t](r,o)})),e.syncRender();var l=e.measureViewportBox();return i.forEach((function(i){var r=e.getValue(i);ty(r,s[i]),t[i]=ay[i](l,o)})),t}(e,t,s);return o.length&&o.forEach((function(e){var i=hu(e,2),r=i[0],n=i[1];t.getValue(r).set(n)})),t.syncRender(),null!==l&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}return{target:e,transitionEnd:r}};function ly(t,e,i,r){return function(t){return Object.keys(t).some(Qg)}(e)?sy(t,e,i,r):{target:e,transitionEnd:r}}var cy=function(t,e,i,r){var n=function(t,e,i){var r,n=cu(e,[]),o=t.getInstance();if(!(o instanceof Element))return{target:n,transitionEnd:i};for(var a in i&&(i=lu({},i)),t.forEachValue((function(t){var e=t.get();if(Zg(e)){var i=Kg(e,o);i&&t.set(i)}})),n){var s=n[a];if(Zg(s)){var l=Kg(s,o);l&&(n[a]=l,i&&(null!==(r=i[a])&&void 0!==r||(i[a]=s)))}}return{target:n,transitionEnd:i}}(t,e,r);return ly(t,e=n.target,i,r=n.transitionEnd)};var uy={treeType:"dom",readValueFromInstance:function(t,e){if(Ju(e)){var i=tm(e);return i&&i.default||0}var r,n=(r=t,window.getComputedStyle(r));return(nh(e)?n.getPropertyValue(e):n[e])||0},sortNodePosition:function(t,e){return 2&t.compareDocumentPosition(e)?1:-1},getBaseTarget:function(t,e){var i;return null===(i=t.style)||void 0===i?void 0:i[e]},measureViewportBox:function(t,e){return Fg(t,e.transformPagePoint)},resetTransform:function(t,e,i){var r=i.transformTemplate;e.style.transform=r?r({},""):"none",t.scheduleRender()},restoreTransform:function(t,e){t.style.transform=e.style.transform},removeValueFromRenderState:function(t,e){var i=e.vars,r=e.style;delete i[t],delete r[t]},makeTargetAnimatable:function(t,e,i,r){var n=i.transformValues;void 0===r&&(r=!0);var o=e.transition,a=e.transitionEnd,s=cu(e,["transition","transitionEnd"]),l=function(t,e,i){var r,n,o={};for(var a in t)o[a]=null!==(r=Nm(a,e))&&void 0!==r?r:null===(n=i.getValue(a))||void 0===n?void 0:n.get();return o}(s,o||{},t);if(n&&(a&&(a=n(a)),s&&(s=n(s)),l&&(l=n(l))),r){!function(t,e,i){var r,n,o,a,s=Object.keys(e).filter((function(e){return!t.hasValue(e)})),l=s.length;if(l)for(var c=0;c<l;c++){var u=s[c],h=e[u],d=null;Array.isArray(h)&&(d=h[0]),null===d&&(d=null!==(n=null!==(r=i[u])&&void 0!==r?r:t.readValue(u))&&void 0!==n?n:e[u]),void 0!==d&&null!==d&&("string"===typeof d&&(/^\-?\d*\.?\d+$/.test(d)||um(d))?d=parseFloat(d):!Bm(d)&&Tp.test(h)&&(d=em(u,h)),t.addValue(u,zm(d)),null!==(o=(a=i)[u])&&void 0!==o||(a[u]=d),t.setBaseTarget(u,d))}}(t,s,l);var c=cy(t,s,l,a);a=c.transitionEnd,s=c.target}return lu({transition:o,transitionEnd:a},s)},scrapeMotionValuesFromProps:Gh,build:function(t,e,i,r,n){void 0!==t.isVisible&&(e.style.visibility=t.isVisible?"visible":"hidden"),kh(e,i,r,n.transformTemplate)},render:Uh},hy=Hg(uy),dy=Hg(lu(lu({},uy),{getBaseTarget:function(t,e){return t[e]},readValueFromInstance:function(t,e){var i;return Ju(e)?(null===(i=tm(e))||void 0===i?void 0:i.default)||0:(e=Wh.has(e)?e:Vh(e),t.getAttribute(e))},scrapeMotionValuesFromProps:qh,build:function(t,e,i,r,n){Oh(e,i,r,n.transformTemplate)},render:Hh})),py=function(t,e){return qu(t)?dy(e,{enableHardwareAcceleration:!1}):hy(e,{enableHardwareAcceleration:!0})};function fy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}var my={correct:function(t,e){if(!e.target)return t;if("string"===typeof t){if(!mh.test(t))return t;t=parseFloat(t)}var i=fy(t,e.target.x),r=fy(t,e.target.y);return"".concat(i,"% ").concat(r,"%")}},gy="_$css",yy={correct:function(t,e){var i=e.treeScale,r=e.projectionDelta,n=t,o=t.includes("var("),a=[];o&&(t=t.replace(Xg,(function(t){return a.push(t),gy})));var s=Tp.parse(t);if(s.length>5)return n;var l=Tp.createTransformer(t),c="number"!==typeof s[0]?1:0,u=r.x.scale*i.x,h=r.y.scale*i.y;s[0+c]/=u,s[1+c]/=h;var d=np(u,h,.5);"number"===typeof s[2+c]&&(s[2+c]/=d),"number"===typeof s[3+c]&&(s[3+c]/=d);var p=l(s);if(o){var f=0;p=p.replace(gy,(function(){var t=a[f];return f++,t}))}return p}},vy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return su(e,t),e.prototype.componentDidMount=function(){var t,e=this,i=this.props,r=i.visualElement,n=i.layoutGroup,o=i.switchLayoutGroup,a=i.layoutId,s=r.projection;t=xy,Object.assign(Zu,t),s&&((null===n||void 0===n?void 0:n.group)&&n.group.add(s),(null===o||void 0===o?void 0:o.register)&&a&&o.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){e.safeToRemove()})),s.setOptions(lu(lu({},s.options),{onExitComplete:function(){return e.safeToRemove()}}))),Fu.hasEverUpdated=!0},e.prototype.getSnapshotBeforeUpdate=function(t){var e=this,i=this.props,r=i.layoutDependency,n=i.visualElement,o=i.drag,a=i.isPresent,s=n.projection;return s?(s.isPresent=a,o||t.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||Am.postRender((function(){var t;(null===(t=s.getStack())||void 0===t?void 0:t.members.length)||e.safeToRemove()}))),null):null},e.prototype.componentDidUpdate=function(){var t=this.props.visualElement.projection;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())},e.prototype.componentWillUnmount=function(){var t=this.props,e=t.visualElement,i=t.layoutGroup,r=t.switchLayoutGroup,n=e.projection;n&&(n.scheduleCheckAfterUnmount(),(null===i||void 0===i?void 0:i.group)&&i.group.remove(n),(null===r||void 0===r?void 0:r.deregister)&&r.deregister(n))},e.prototype.safeToRemove=function(){var t=this.props.safeToRemove;null===t||void 0===t||t()},e.prototype.render=function(){return null},e}(o.Component);var xy={borderRadius:lu(lu({},my),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:my,borderTopRightRadius:my,borderBottomLeftRadius:my,borderBottomRightRadius:my,boxShadow:yy},_y={measureLayout:function(t){var e=hu(nu(),2),i=e[0],r=e[1],n=(0,o.useContext)(Nu);return o.createElement(vy,lu({},t,{layoutGroup:n,switchLayoutGroup:(0,o.useContext)(Vu),isPresent:i,safeToRemove:r}))}};var by=["TopLeft","TopRight","BottomLeft","BottomRight"],wy=by.length,Sy=function(t){return"string"===typeof t?parseFloat(t):t},ky=function(t){return"number"===typeof t||mh.test(t)};function Cy(t,e){var i;return null!==(i=t[e])&&void 0!==i?i:t.borderRadius}var Ty=Py(0,.5,Zp),Ay=Py(.5,.95,Vp);function Py(t,e,i){return function(r){return r<t?0:r>e?1:i(rp(t,e,r))}}function My(t,e){t.min=e.min,t.max=e.max}function Ey(t,e){My(t.x,e.x),My(t.y,e.y)}function Iy(t,e,i,r,n){return t=Mg(t-=e,1/i,r),void 0!==n&&(t=Mg(t,1/n,r)),t}function zy(t,e,i,r,n){var o=hu(i,3),a=o[0],s=o[1],l=o[2];!function(t,e,i,r,n,o,a){if(void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=.5),void 0===o&&(o=t),void 0===a&&(a=t),fh.test(e)&&(e=parseFloat(e),e=np(a.min,a.max,e/100)-a.min),"number"===typeof e){var s=np(o.min,o.max,r);t===o&&(s-=e),t.min=Iy(t.min,e,i,s,n),t.max=Iy(t.max,e,i,s,n)}}(t,e[a],e[s],e[l],e.scale,r,n)}var Ly=["x","scaleX","originX"],Dy=["y","scaleY","originY"];function Ry(t,e,i,r){zy(t.x,e,Ly,null===i||void 0===i?void 0:i.x,null===r||void 0===r?void 0:r.x),zy(t.y,e,Dy,null===i||void 0===i?void 0:i.y,null===r||void 0===r?void 0:r.y)}function Oy(t){return 0===t.translate&&1===t.scale}function By(t){return Oy(t.x)&&Oy(t.y)}function Fy(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}var jy=function(){function t(){this.members=[]}return t.prototype.add=function(t){Pm(this.members,t),t.scheduleRender()},t.prototype.remove=function(t){if(Mm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){var e=this.members[this.members.length-1];e&&this.promote(e)}},t.prototype.relegate=function(t){var e,i=this.members.findIndex((function(e){return t===e}));if(0===i)return!1;for(var r=i;r>=0;r--){var n=this.members[r];if(!1!==n.isPresent){e=n;break}}return!!e&&(this.promote(e),!0)},t.prototype.promote=function(t,e){var i,r=this.lead;t!==r&&(this.prevLead=r,this.lead=t,t.show(),r&&(r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues,t.snapshot.isShared=!0),(null===(i=t.root)||void 0===i?void 0:i.isUpdating)&&(t.isLayoutDirty=!0),!1===t.options.crossfade&&r.hide()))},t.prototype.exitAnimationComplete=function(){this.members.forEach((function(t){var e,i,r,n,o;null===(i=(e=t.options).onExitComplete)||void 0===i||i.call(e),null===(o=null===(r=t.resumingFrom)||void 0===r?void 0:(n=r.options).onExitComplete)||void 0===o||o.call(n)}))},t.prototype.scheduleRender=function(){this.members.forEach((function(t){t.instance&&t.scheduleRender(!1)}))},t.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},t}(),Ny="translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)";function Vy(t,e,i){var r=t.x.translate/e.x,n=t.y.translate/e.y,o="translate3d(".concat(r,"px, ").concat(n,"px, 0) ");if(o+="scale(".concat(1/e.x,", ").concat(1/e.y,") "),i){var a=i.rotate,s=i.rotateX,l=i.rotateY;a&&(o+="rotate(".concat(a,"deg) ")),s&&(o+="rotateX(".concat(s,"deg) ")),l&&(o+="rotateY(".concat(l,"deg) "))}var c=t.x.scale*e.x,u=t.y.scale*e.y;return(o+="scale(".concat(c,", ").concat(u,")"))===Ny?"none":o}var Uy=function(t,e){return t.depth-e.depth},Wy=function(){function t(){this.children=[],this.isDirty=!1}return t.prototype.add=function(t){Pm(this.children,t),this.isDirty=!0},t.prototype.remove=function(t){Mm(this.children,t),this.isDirty=!0},t.prototype.forEach=function(t){this.isDirty&&this.children.sort(Uy),this.isDirty=!1,this.children.forEach(t)},t}();function Hy(t){var e=t.attachResizeListener,i=t.defaultParent,r=t.measureScroll,n=t.checkIsScrollRoot,o=t.resetTransform;return function(){function t(t,e,r){var n=this;void 0===e&&(e={}),void 0===r&&(r=null===i||void 0===i?void 0:i()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){n.isUpdating&&(n.isUpdating=!1,n.clearAllSnapshots())},this.updateProjection=function(){n.nodes.forEach($y),n.nodes.forEach(Jy)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=t,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?du(du([],hu(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,t&&this.root.registerPotentialNode(t,this);for(var o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new Wy)}return t.prototype.addEventListener=function(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new Em),this.eventHandlers.get(t).add(e)},t.prototype.notifyListeners=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=this.eventHandlers.get(t);null===r||void 0===r||r.notify.apply(r,du([],hu(e),!1))},t.prototype.hasListeners=function(t){return this.eventHandlers.has(t)},t.prototype.registerPotentialNode=function(t,e){this.potentialNodes.set(t,e)},t.prototype.mount=function(t,i){var r,n=this;if(void 0===i&&(i=!1),!this.instance){this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;var o=this.options,a=o.layoutId,s=o.layout,l=o.visualElement;if(l&&!l.getInstance()&&l.mount(t),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),i&&(s||a)&&(this.isLayoutDirty=!0),e){var c,u=function(){return n.root.updateBlockedByResize=!1};e(t,(function(){n.root.updateBlockedByResize=!0,clearTimeout(c),c=window.setTimeout(u,250),Fu.hasAnimatedSinceResize&&(Fu.hasAnimatedSinceResize=!1,n.nodes.forEach(Ky))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&l&&(a||s)&&this.addEventListener("didUpdate",(function(t){var e,i,r,o,a,s=t.delta,c=t.hasLayoutChanged,u=t.hasRelativeTargetChanged,h=t.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var d=null!==(i=null!==(e=n.options.transition)&&void 0!==e?e:l.getDefaultTransition())&&void 0!==i?i:nv,p=l.getProps(),f=p.onLayoutAnimationStart,m=p.onLayoutAnimationComplete,g=!n.targetLayout||!Fy(n.targetLayout,h)||u,y=!c&&u;if((null===(r=n.resumeFrom)||void 0===r?void 0:r.instance)||y||c&&(g||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(s,y);var v=lu(lu({},lm(d,"layout")),{onPlay:f,onComplete:m});l.shouldReduceMotion&&(v.delay=0,v.type=!1),n.startAnimation(v)}else c||0!==n.animationProgress||n.finishAnimation(),n.isLead()&&(null===(a=(o=n.options).onExitComplete)||void 0===a||a.call(o));n.targetLayout=h}))}},t.prototype.unmount=function(){var t,e;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(t=this.getStack())||void 0===t||t.remove(this),null===(e=this.parent)||void 0===e||e.children.delete(this),this.instance=void 0,bm.preRender(this.updateProjection)},t.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},t.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},t.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},t.prototype.isTreeAnimationBlocked=function(){var t;return this.isAnimationBlocked||(null===(t=this.parent)||void 0===t?void 0:t.isTreeAnimationBlocked())||!1},t.prototype.startUpdate=function(){var t;this.isUpdateBlocked()||(this.isUpdating=!0,null===(t=this.nodes)||void 0===t||t.forEach(Qy))},t.prototype.willUpdate=function(t){var e,i,r;if(void 0===t&&(t=!0),this.root.isUpdateBlocked())null===(i=(e=this.options).onExitComplete)||void 0===i||i.call(e);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var n=0;n<this.path.length;n++){var o=this.path[n];o.shouldResetTransform=!0,o.updateScroll()}var a=this.options,s=a.layoutId,l=a.layout;if(void 0!==s||l){var c=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null===c||void 0===c?void 0:c(this.latestValues,""),this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}}},t.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Xy);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(ov),this.potentialNodes.clear()),this.nodes.forEach(Yy),this.nodes.forEach(Gy),this.nodes.forEach(qy),this.clearAllSnapshots(),wm.update(),wm.preRender(),wm.render())},t.prototype.clearAllSnapshots=function(){this.nodes.forEach(Zy),this.sharedNodes.forEach(tv)},t.prototype.scheduleUpdateProjection=function(){Am.preRender(this.updateProjection,!1,!0)},t.prototype.scheduleCheckAfterUnmount=function(){var t=this;Am.postRender((function(){t.isLayoutDirty?t.root.didUpdate():t.root.checkUpdateFailed()}))},t.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var t=this.measure(),e=this.removeTransform(this.removeElementScroll(t));sv(e),this.snapshot={measured:t,layout:e,latestValues:{}}}},t.prototype.updateLayout=function(){var t;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var i=this.measure();sv(i);var r=this.layout;this.layout={measured:i,actual:this.removeElementScroll(i)},this.layoutCorrected=wg(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(t=this.options.visualElement)||void 0===t||t.notifyLayoutMeasure(this.layout.actual,null===r||void 0===r?void 0:r.actual)}},t.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=n(this.instance),this.scroll=r(this.instance))},t.prototype.resetTransform=function(){var t;if(o){var e=this.isLayoutDirty||this.shouldResetTransform,i=this.projectionDelta&&!By(this.projectionDelta),r=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate,n=null===r||void 0===r?void 0:r(this.latestValues,""),a=n!==this.prevTransformTemplateValue;e&&(i||Ag(this.latestValues)||a)&&(o(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}},t.prototype.measure=function(){var t=this.options.visualElement;if(!t)return wg();var e=t.measureViewportBox(),i=this.root.scroll;return i&&(Lg(e.x,i.x),Lg(e.y,i.y)),e},t.prototype.removeElementScroll=function(t){var e=wg();Ey(e,t);for(var i=0;i<this.path.length;i++){var r=this.path[i],n=r.scroll,o=r.options,a=r.isScrollRoot;if(r!==this.root&&n&&o.layoutScroll){if(a){Ey(e,t);var s=this.root.scroll;s&&(Lg(e.x,-s.x),Lg(e.y,-s.y))}Lg(e.x,n.x),Lg(e.y,n.y)}}return e},t.prototype.applyTransform=function(t,e){void 0===e&&(e=!1);var i=wg();Ey(i,t);for(var r=0;r<this.path.length;r++){var n=this.path[r];!e&&n.options.layoutScroll&&n.scroll&&n!==n.root&&Bg(i,{x:-n.scroll.x,y:-n.scroll.y}),Ag(n.latestValues)&&Bg(i,n.latestValues)}return Ag(this.latestValues)&&Bg(i,this.latestValues),i},t.prototype.removeTransform=function(t){var e,i=wg();Ey(i,t);for(var r=0;r<this.path.length;r++){var n=this.path[r];if(n.instance&&Ag(n.latestValues)){Tg(n.latestValues)&&n.updateSnapshot();var o=wg();Ey(o,n.measure()),Ry(i,n.latestValues,null===(e=n.snapshot)||void 0===e?void 0:e.layout,o)}}return Ag(this.latestValues)&&Ry(i,this.latestValues),i},t.prototype.setTargetDelta=function(t){this.targetDelta=t,this.root.scheduleUpdateProjection()},t.prototype.setOptions=function(t){var e;this.options=lu(lu(lu({},this.options),t),{crossfade:null===(e=t.crossfade)||void 0===e||e})},t.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},t.prototype.resolveTargetDelta=function(){var t,e,i,r,n=this.options,o=n.layout,a=n.layoutId;this.layout&&(o||a)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=wg(),this.relativeTargetOrigin=wg(),mg(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),Ey(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target=wg(),this.targetWithTransforms=wg()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(t=this.relativeParent)||void 0===t?void 0:t.target)?(e=this.target,i=this.relativeTarget,r=this.relativeParent.target,pg(e.x,i.x,r.x),pg(e.y,i.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):Ey(this.target,this.layout.actual),zg(this.target,this.targetDelta)):Ey(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=wg(),this.relativeTargetOrigin=wg(),mg(this.relativeTargetOrigin,this.target,this.relativeParent.target),Ey(this.relativeTarget,this.relativeTargetOrigin)))))},t.prototype.getClosestProjectingParent=function(){if(this.parent&&!Ag(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},t.prototype.calcProjection=function(){var t,e=this.options,i=e.layout,r=e.layoutId;if(this.isTreeAnimating=Boolean((null===(t=this.parent)||void 0===t?void 0:t.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(i||r)){var n=this.getLead();Ey(this.layoutCorrected,this.layout.actual),function(t,e,i,r){var n,o;void 0===r&&(r=!1);var a=i.length;if(a){var s,l;e.x=e.y=1;for(var c=0;c<a;c++)l=(s=i[c]).projectionDelta,"contents"!==(null===(o=null===(n=s.instance)||void 0===n?void 0:n.style)||void 0===o?void 0:o.display)&&(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bg(t,{x:-s.scroll.x,y:-s.scroll.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,zg(t,l)),r&&Ag(s.latestValues)&&Bg(t,s.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==n);var o=n.target;if(o){this.projectionDelta||(this.projectionDelta=bg(),this.projectionDeltaWithTransform=bg());var a=this.treeScale.x,s=this.treeScale.y,l=this.projectionTransform;dg(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.projectionTransform=Vy(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===a&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}}},t.prototype.hide=function(){this.isVisible=!1},t.prototype.show=function(){this.isVisible=!0},t.prototype.scheduleRender=function(t){var e,i,r;void 0===t&&(t=!0),null===(i=(e=this.options).scheduleRender)||void 0===i||i.call(e),t&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},t.prototype.setAnimationOrigin=function(t,e){var i,r=this;void 0===e&&(e=!1);var n=this.snapshot,o=(null===n||void 0===n?void 0:n.latestValues)||{},a=lu({},this.latestValues),s=bg();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!e;var l=wg(),c=null===n||void 0===n?void 0:n.isShared,u=((null===(i=this.getStack())||void 0===i?void 0:i.members.length)||0)<=1,h=Boolean(c&&!u&&!0===this.options.crossfade&&!this.path.some(rv));this.animationProgress=0,this.mixTargetDelta=function(e){var i,n=e/1e3;ev(s.x,t.x,n),ev(s.y,t.y,n),r.setTargetDelta(s),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(i=r.relativeParent)||void 0===i?void 0:i.layout)&&(mg(l,r.layout.actual,r.relativeParent.layout.actual),function(t,e,i,r){iv(t.x,e.x,i.x,r),iv(t.y,e.y,i.y,r)}(r.relativeTarget,r.relativeTargetOrigin,l,n)),c&&(r.animationValues=a,function(t,e,i,r,n,o){var a,s,l,c;n?(t.opacity=np(0,null!==(a=i.opacity)&&void 0!==a?a:1,Ty(r)),t.opacityExit=np(null!==(s=e.opacity)&&void 0!==s?s:1,0,Ay(r))):o&&(t.opacity=np(null!==(l=e.opacity)&&void 0!==l?l:1,null!==(c=i.opacity)&&void 0!==c?c:1,r));for(var u=0;u<wy;u++){var h="border".concat(by[u],"Radius"),d=Cy(e,h),p=Cy(i,h);void 0===d&&void 0===p||(d||(d=0),p||(p=0),0===d||0===p||ky(d)===ky(p)?(t[h]=Math.max(np(Sy(d),Sy(p),r),0),(fh.test(p)||fh.test(d))&&(t[h]+="%")):t[h]=p)}(e.rotate||i.rotate)&&(t.rotate=np(e.rotate||0,i.rotate||0,r))}(a,o,r.latestValues,n,h,u)),r.root.scheduleUpdateProjection(),r.scheduleRender(),r.animationProgress=n},this.mixTargetDelta(0)},t.prototype.startAnimation=function(t){var e,i,r=this;this.notifyListeners("animationStart"),null===(e=this.currentAnimation)||void 0===e||e.stop(),this.resumingFrom&&(null===(i=this.resumingFrom.currentAnimation)||void 0===i||i.stop()),this.pendingAnimation&&(bm.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Am.update((function(){Fu.hasAnimatedSinceResize=!0,r.currentAnimation=function(t,e,i){void 0===i&&(i={});var r=ih(t)?t:zm(t);return cm("",r,e,i),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,1e3,lu(lu({},t),{onUpdate:function(e){var i;r.mixTargetDelta(e),null===(i=t.onUpdate)||void 0===i||i.call(t,e)},onComplete:function(){var e;null===(e=t.onComplete)||void 0===e||e.call(t),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},t.prototype.completeAnimation=function(){var t;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(t=this.getStack())||void 0===t||t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},t.prototype.finishAnimation=function(){var t;this.currentAnimation&&(null===(t=this.mixTargetDelta)||void 0===t||t.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},t.prototype.applyTransformsToTarget=function(){var t=this.getLead(),e=t.targetWithTransforms,i=t.target,r=t.layout,n=t.latestValues;e&&i&&r&&(Ey(e,i),Bg(e,n),dg(this.projectionDeltaWithTransform,this.layoutCorrected,e,n))},t.prototype.registerSharedNode=function(t,e){var i,r,n;this.sharedNodes.has(t)||this.sharedNodes.set(t,new jy),this.sharedNodes.get(t).add(e),e.promote({transition:null===(i=e.options.initialPromotionConfig)||void 0===i?void 0:i.transition,preserveFollowOpacity:null===(n=null===(r=e.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===n?void 0:n.call(r,e)})},t.prototype.isLead=function(){var t=this.getStack();return!t||t.lead===this},t.prototype.getLead=function(){var t;return this.options.layoutId&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this},t.prototype.getPrevLead=function(){var t;return this.options.layoutId?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0},t.prototype.getStack=function(){var t=this.options.layoutId;if(t)return this.root.sharedNodes.get(t)},t.prototype.promote=function(t){var e=void 0===t?{}:t,i=e.needsReset,r=e.transition,n=e.preserveFollowOpacity,o=this.getStack();o&&o.promote(this,n),i&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},t.prototype.relegate=function(){var t=this.getStack();return!!t&&t.relegate(this)},t.prototype.resetRotation=function(){var t=this.options.visualElement;if(t){for(var e=!1,i={},r=0;r<Xu.length;r++){var n="rotate"+Xu[r];t.getStaticValue(n)&&(e=!0,i[n]=t.getStaticValue(n),t.setStaticValue(n,0))}if(e){for(var n in null===t||void 0===t||t.syncRender(),i)t.setStaticValue(n,i[n]);t.scheduleRender()}}},t.prototype.getProjectionStyles=function(t){var e,i,r,n,o,a;void 0===t&&(t={});var s={};if(!this.instance||this.isSVG)return s;if(!this.isVisible)return{visibility:"hidden"};s.visibility="";var l=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=$h(t.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none",s;var c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){var u={};return this.options.layoutId&&(u.opacity=null!==(i=this.latestValues.opacity)&&void 0!==i?i:1,u.pointerEvents=$h(t.pointerEvents)||""),this.hasProjected&&!Ag(this.latestValues)&&(u.transform=l?l({},""):"none",this.hasProjected=!1),u}var h=c.animationValues||c.latestValues;this.applyTransformsToTarget(),s.transform=Vy(this.projectionDeltaWithTransform,this.treeScale,h),l&&(s.transform=l(h,s.transform));var d=this.projectionDelta,p=d.x,f=d.y;for(var m in s.transformOrigin="".concat(100*p.origin,"% ").concat(100*f.origin,"% 0"),c.animationValues?s.opacity=c===this?null!==(n=null!==(r=h.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:s.opacity=c===this?null!==(o=h.opacity)&&void 0!==o?o:"":null!==(a=h.opacityExit)&&void 0!==a?a:0,Zu)if(void 0!==h[m]){var g=Zu[m],y=g.correct,v=g.applyTo,x=y(h[m],c);if(v)for(var _=v.length,b=0;b<_;b++)s[v[b]]=x;else s[m]=x}return this.options.layoutId&&(s.pointerEvents=c===this?$h(t.pointerEvents)||"":"none"),s},t.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},t.prototype.resetTree=function(){this.root.nodes.forEach((function(t){var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(Xy),this.root.sharedNodes.clear()},t}()}function Gy(t){t.updateLayout()}function qy(t){var e,i,r,n,o=null!==(i=null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)&&void 0!==i?i:t.snapshot;if(t.isLead()&&t.layout&&o&&t.hasListeners("didUpdate")){var a=t.layout,s=a.actual,l=a.measured;"size"===t.options.animationType?Sg((function(t){var e=o.isShared?o.measured[t]:o.layout[t],i=cg(e);e.min=s[t].min,e.max=e.min+i})):"position"===t.options.animationType&&Sg((function(t){var e=o.isShared?o.measured[t]:o.layout[t],i=cg(s[t]);e.max=e.min+i}));var c=bg();dg(c,s,o.layout);var u=bg();o.isShared?dg(u,t.applyTransform(l,!0),o.measured):dg(u,s,o.layout);var h=!By(c),d=!1;if(!t.resumeFrom&&(t.relativeParent=t.getClosestProjectingParent(),t.relativeParent&&!t.relativeParent.resumeFrom)){var p=t.relativeParent,f=p.snapshot,m=p.layout;if(f&&m){var g=wg();mg(g,o.layout,f.layout);var y=wg();mg(y,s,m.actual),Fy(g,y)||(d=!0)}}t.notifyListeners("didUpdate",{layout:s,snapshot:o,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:d})}else t.isLead()&&(null===(n=(r=t.options).onExitComplete)||void 0===n||n.call(r));t.options.transition=void 0}function Zy(t){t.clearSnapshot()}function Xy(t){t.clearMeasurements()}function Yy(t){var e=t.options.visualElement;(null===e||void 0===e?void 0:e.getProps().onBeforeLayoutMeasure)&&e.notifyBeforeLayoutMeasure(),t.resetTransform()}function Ky(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0}function $y(t){t.resolveTargetDelta()}function Jy(t){t.calcProjection()}function Qy(t){t.resetRotation()}function tv(t){t.removeLeadSnapshot()}function ev(t,e,i){t.translate=np(e.translate,0,i),t.scale=np(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function iv(t,e,i,r){t.min=np(e.min,i.min,r),t.max=np(e.max,i.max,r)}function rv(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}var nv={duration:.45,ease:[.4,0,.1,1]};function ov(t,e){for(var i=t.root,r=t.path.length-1;r>=0;r--)if(Boolean(t.path[r].instance)){i=t.path[r];break}var n=(i&&i!==t.root?i.instance:document).querySelector('[data-projection-id="'.concat(e,'"]'));n&&t.mount(n,!0)}function av(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function sv(t){av(t.x),av(t.y)}var lv=Hy({attachResizeListener:function(t,e){return nd(t,"resize",e)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),cv={current:void 0},uv=Hy({measureScroll:function(t){return{x:t.scrollLeft,y:t.scrollTop}},defaultParent:function(){if(!cv.current){var t=new lv(0,{});t.mount(window),t.setOptions({layoutScroll:!0}),cv.current=t}return cv.current},resetTransform:function(t,e){t.style.transform=null!==e&&void 0!==e?e:"none"},checkIsScrollRoot:function(t){return Boolean("fixed"===window.getComputedStyle(t).position)}}),hv=lu(lu(lu(lu({},$m),Vd),Ug),_y),dv=Hu((function(t,e){return function(t,e,i,r,n){var o=e.forwardMotionProps,a=void 0!==o&&o,s=qu(t)?id:rd;return lu(lu({},s),{preloadedFeatures:i,useRender:jh(a),createVisualElement:r,projectionNodeConstructor:n,Component:t})}(t,e,hv,py,uv)}));var pv=new Set([...Pi,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),fv=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function mv(t){return fv.has(t)||!pv.has(t)}var gv,yv=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vv=ft((function(t){return yv.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),xv=function(t){return"theme"!==t},_v=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?vv:xv},bv=function(t,e,i){var r;if(e){var n=e.shouldForwardProp;r=t.__emotion_forwardProp&&n?function(e){return t.__emotion_forwardProp(e)&&n(e)}:n}return"function"!==typeof r&&i&&(r=t.__emotion_forwardProp),r},wv=function(t){var e=t.cache,i=t.serialized,r=t.isStringTag;return Lt(e,i,r),Tt((function(){return Dt(e,i,r)})),null},Sv=function t(e,i){var r,n,a=e.__emotion_real===e,s=a&&e.__emotion_base||e;void 0!==i&&(r=i.label,n=i.target);var l=bv(e,i,a),c=l||_v(s),u=!c("as");return function(){var h=arguments,d=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{0,d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)d.push(h[f],h[0][f])}var m=Mt((function(t,e,i){var r=u&&t.as||s,a="",h=[],p=t;if(null==t.theme){for(var f in p={},t)p[f]=t[f];p.theme=o.useContext(Et)}"string"===typeof t.className?a=function(t,e,i){var r="";return i.split(" ").forEach((function(i){void 0!==t[i]?e.push(t[i]+";"):r+=i+" "})),r}(e.registered,h,t.className):null!=t.className&&(a=t.className+" ");var m=kt(d.concat(h),e.registered,p);a+=e.key+"-"+m.name,void 0!==n&&(a+=" "+n);var g=u&&void 0===l?_v(r):c,y={};for(var v in t)u&&"as"===v||g(v)&&(y[v]=t[v]);return y.className=a,y.ref=i,o.createElement(o.Fragment,null,o.createElement(wv,{cache:e,serialized:m,isStringTag:"string"===typeof r}),o.createElement(r,y))}));return m.displayName=void 0!==r?r:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+n}}),m.withComponent=function(e,r){return t(e,ht({},i,r,{shouldForwardProp:bv(m,r,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){Sv[t]=Sv(t)}));var kv=null!=(gv=Sv.default)?gv:Sv,Cv=t=>{let{baseStyle:e}=t;return t=>{const{theme:i,css:r,__css:n,sx:o,...a}=t,s=Ni(a,((t,e)=>Ei(e))),l=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const e={...t};for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];for(const o of r)if(null!=o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(t in e&&delete e[t],e[t]=o[t]);return e}({},n,Ui(e,t),Vi(s),o),c=Di(l)(t.theme);return r?[c,r]:c}};function Tv(t,e){const{baseStyle:i,...r}=null!=e?e:{};r.shouldForwardProp||(r.shouldForwardProp=mv);const n=Cv({baseStyle:i}),a=kv(t,r)(n);return o.forwardRef((function(t,e){const{colorMode:i,forced:r}=Xt();return o.createElement(a,{ref:e,"data-theme":r?i:void 0,...t})}))}var Av=function(){const t=new Map;return new Proxy(Tv,{apply:(t,e,i)=>Tv(...i),get:(e,i)=>(t.has(i)||t.set(i,Tv(i)),t.get(i))})}(),Pv={initial:t=>{const{position:e}=t,i=["top","bottom"].includes(e)?"y":"x";let r=["top-right","bottom-right"].includes(e)?1:-1;return"bottom"===e&&(r=1),{opacity:0,[i]:24*r}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},Mv=(0,o.memo)((e=>{const{id:i,message:r,onCloseComplete:n,onRequestRemove:a,requestClose:s=!1,position:l="bottom",duration:c=5e3,containerStyle:u,motionVariants:h=Pv,toastSpacing:d="0.5rem"}=e,[p,f]=(0,o.useState)(c),m=ou();Jc((()=>{m||null==n||n()}),[m]),Jc((()=>{f(c)}),[c]);const g=()=>{m&&a()};(0,o.useEffect)((()=>{m&&s&&a()}),[m,s,a]),$c(g,p);const y=(0,o.useMemo)((()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:d,...u})),[u,d]),v=(0,o.useMemo)((()=>function(t){let e="center";return t.includes("right")&&(e="flex-end"),t.includes("left")&&(e="flex-start"),{display:"flex",flexDirection:"column",alignItems:e}}(l)),[l]);return(0,t.jsx)(dv.div,{layout:!0,className:"chakra-toast",variants:h,initial:"initial",animate:"animate",exit:"exit",onHoverStart:()=>f(null),onHoverEnd:()=>f(c),custom:{position:l},style:v,children:(0,t.jsx)(Av.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:$t(r,{id:i,onClose:g})})})}));function Ev(t){return(0,o.forwardRef)(t)}function Iv(){return{...Xt(),theme:function(){const t=(0,o.useContext)(Et);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}()}}Mv.displayName="ToastComponent";var zv=i(366);function Lv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;const{styleConfig:r,...n}=e,{theme:a,colorMode:s}=Iv(),l=t?ji(a,"components.".concat(t)):void 0,c=r||l,u=Qt({theme:a,colorMode:s},null!=(i=null==c?void 0:c.defaultProps)?i:{},Vi(function(t,e){const i={};return Object.keys(t).forEach((r=>{e.includes(r)||(i[r]=t[r])})),i}(n,["children"]))),h=(0,o.useRef)({});if(c){const t=function(t){return e=>{var i;const{variant:r,size:n,theme:o}=e,a=Bi(o);return Qt({},$t(null!=(i=t.baseStyle)?i:{},e),a(t,"sizes",n,e),a(t,"variants",r,e))}}(c),e=t(u);zv(h.current,e)||(h.current=e)}return h.current}function Dv(t){return Lv(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var Rv={path:(0,t.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,t.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,t.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,t.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Ov=Ev(((e,i)=>{const{as:r,viewBox:n,color:o="currentColor",focusable:a=!1,children:s,className:l,__css:c,...u}=e,h={ref:i,focusable:a,className:Yt("chakra-icon",l),__css:{w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:o,...c,...Dv("Icon",e)}},d=null!=n?n:Rv.viewBox;if(r&&"string"!==typeof r)return(0,t.jsx)(Av.svg,{as:r,...h,...u});const p=null!=s?s:Rv.path;return(0,t.jsx)(Av.svg,{verticalAlign:"middle",viewBox:d,...h,...u,children:p})}));Ov.displayName="Icon";function Bv(e){return(0,t.jsx)(Ov,{viewBox:"0 0 24 24",...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var Fv=function(){var t=Ot.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),jv=Ev(((e,i)=>{const r=Dv("Spinner",e),{label:n="Loading...",thickness:o="2px",speed:a="0.45s",emptyColor:s="transparent",className:l,...c}=Fi(e),u=Yt("chakra-spinner",l),h={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:o,borderBottomColor:s,borderLeftColor:s,animation:"".concat(Fv," ").concat(a," linear infinite"),...r};return(0,t.jsx)(Av.div,{ref:i,__css:h,className:u,...c,children:n&&(0,t.jsx)(Av.span,{srOnly:!0,children:n})})}));jv.displayName="Spinner";var[Nv,Vv]=Wt({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Uv,Wv]=Wt({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),Hv={info:{icon:function(e){return(0,t.jsx)(Ov,{viewBox:"0 0 24 24",...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:Bv,colorScheme:"orange"},success:{icon:function(e){return(0,t.jsx)(Ov,{viewBox:"0 0 24 24",...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:Bv,colorScheme:"red"},loading:{icon:jv,colorScheme:"blue"}};var Gv=Ev((function(e,i){var r;const{status:n="info",addRole:o=!0,...a}=Fi(e),s=null!=(r=e.colorScheme)?r:function(t){return Hv[t].colorScheme}(n),l=function(t){return Lv(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}("Alert",{...e,colorScheme:s}),c={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return(0,t.jsx)(Nv,{value:{status:n},children:(0,t.jsx)(Uv,{value:l,children:(0,t.jsx)(Av.div,{"data-status":n,role:o?"alert":void 0,ref:i,...a,className:Yt("chakra-alert",e.className),__css:c})})})}));function qv(e){const{status:i}=Vv(),r=function(t){return Hv[t].icon}(i),n=Wv(),o="loading"===i?n.spinner:n.icon;return(0,t.jsx)(Av.span,{display:"inherit","data-status":i,...e,className:Yt("chakra-alert__icon",e.className),__css:o,children:e.children||(0,t.jsx)(r,{h:"100%",w:"100%"})})}Gv.displayName="Alert",qv.displayName="AlertIcon";var Zv=Ev((function(e,i){const r=Wv(),{status:n}=Vv();return(0,t.jsx)(Av.div,{ref:i,"data-status":n,...e,className:Yt("chakra-alert__title",e.className),__css:r.title})}));Zv.displayName="AlertTitle";var Xv=Ev((function(e,i){const r=Wv(),{status:n}=Vv(),o={display:"inline",...r.description};return(0,t.jsx)(Av.div,{ref:i,"data-status":n,...e,className:Yt("chakra-alert__desc",e.className),__css:o})}));function Yv(e){return(0,t.jsx)(Ov,{focusable:"false","aria-hidden":!0,...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}Xv.displayName="AlertDescription";var Kv=Ev((function(e,i){const r=Dv("CloseButton",e),{children:n,isDisabled:o,__css:a,...s}=Fi(e);return(0,t.jsx)(Av.button,{type:"button","aria-label":"Close",ref:i,disabled:o,__css:{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r,...a},...s,children:n||(0,t.jsx)(Yv,{width:"1em",height:"1em"})})}));Kv.displayName="CloseButton";var $v=function(t){let e=t;const i=new Set,r=t=>{e=t(e),i.forEach((t=>t()))};return{getState:()=>e,subscribe:e=>(i.add(e),()=>{r((()=>t)),i.delete(e)}),removeToast:(t,e)=>{r((i=>({...i,[e]:i[e].filter((e=>e.id!=t))})))},notify:(t,e)=>{const i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,r;Jv+=1;const n=null!=(i=e.id)?i:Jv,o=null!=(r=e.position)?r:"bottom";return{id:n,message:t,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>$v.removeToast(String(n),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}(t,e),{position:n,id:o}=i;return r((t=>{var e,r;const o=n.includes("top")?[i,...null!=(e=t[n])?e:[]]:[...null!=(r=t[n])?r:[],i];return{...t,[n]:o}})),o},update:(t,e)=>{t&&r((i=>{const r={...i},{position:n,index:o}=Xc(r,t);return n&&-1!==o&&(r[n][o]={...r[n][o],...e,message:tx(e)}),r}))},closeAll:function(){let{positions:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r((e=>(null!=t?t:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(((t,i)=>(t[i]=e[i].map((t=>({...t,requestClose:!0}))),t)),{...e})))},close:t=>{r((e=>{const i=Yc(e,t);return i?{...e,[i]:e[i].map((e=>e.id==t?{...e,requestClose:!0}:e))}:e}))},isActive:t=>Boolean(Xc($v.getState(),t).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var Jv=0;var Qv=e=>{const{status:i,variant:r="solid",id:n,title:o,isClosable:a,onClose:s,description:l,colorScheme:c,icon:u}=e,h=n?{root:"toast-".concat(n),title:"toast-".concat(n,"-title"),description:"toast-".concat(n,"-description")}:void 0;return(0,t.jsxs)(Gv,{addRole:!1,status:i,variant:r,id:null==h?void 0:h.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:c,children:[(0,t.jsx)(qv,{children:u}),(0,t.jsxs)(Av.div,{flex:"1",maxWidth:"100%",children:[o&&(0,t.jsx)(Zv,{id:null==h?void 0:h.title,children:o}),l&&(0,t.jsx)(Xv,{id:null==h?void 0:h.description,display:"block",children:l})]}),a&&(0,t.jsx)(Kv,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function tx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{render:i,toastComponent:r=Qv}=e;return n=>"function"===typeof i?i({...n,...e}):(0,t.jsx)(r,{...n,...e})}function ex(){var t=(0,o.useRef)(!1);return ku((function(){return t.current=!0,function(){t.current=!1}}),[]),t}var ix=function(t){var e=t.children,i=t.initial,r=t.isPresent,n=t.onExitComplete,a=t.custom,s=t.presenceAffectsLayout,l=tu(rx),c=ru(),u=(0,o.useMemo)((function(){return{id:c,initial:i,isPresent:r,custom:a,onExitComplete:function(t){var e,i;l.set(t,!0);try{for(var r=uu(l.values()),o=r.next();!o.done;o=r.next()){if(!o.value)return}}catch(a){e={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}null===n||void 0===n||n()},register:function(t){return l.set(t,!1),function(){return l.delete(t)}}}}),s?void 0:[r]);return(0,o.useMemo)((function(){l.forEach((function(t,e){return l.set(e,!1)}))}),[r]),o.useEffect((function(){!r&&!l.size&&(null===n||void 0===n||n())}),[r]),o.createElement(Qc.Provider,{value:u},e)};function rx(){return new Map}var nx=function(t){return t.key||""};var ox=function(t){var e=t.children,i=t.custom,r=t.initial,n=void 0===r||r,a=t.onExitComplete,s=t.exitBeforeEnter,l=t.presenceAffectsLayout,c=void 0===l||l,u=hu(function(){var t=ex(),e=hu((0,o.useState)(0),2),i=e[0],r=e[1],n=(0,o.useCallback)((function(){t.current&&r(i+1)}),[i]);return[(0,o.useCallback)((function(){return Am.postRender(n)}),[n]),i]}(),1),h=u[0],d=(0,o.useContext)(Nu).forceRender;d&&(h=d);var p=ex(),f=function(t){var e=[];return o.Children.forEach(t,(function(t){(0,o.isValidElement)(t)&&e.push(t)})),e}(e),m=f,g=new Set,y=(0,o.useRef)(m),v=(0,o.useRef)(new Map).current,x=(0,o.useRef)(!0);if(ku((function(){x.current=!1,function(t,e){t.forEach((function(t){var i=nx(t);e.set(i,t)}))}(f,v),y.current=m})),Pd((function(){x.current=!0,v.clear(),g.clear()})),x.current)return o.createElement(o.Fragment,null,m.map((function(t){return o.createElement(ix,{key:nx(t),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:c},t)})));m=du([],hu(m),!1);for(var _=y.current.map(nx),b=f.map(nx),w=_.length,S=0;S<w;S++){var k=_[S];-1===b.indexOf(k)&&g.add(k)}return s&&g.size&&(m=[]),g.forEach((function(t){if(-1===b.indexOf(t)){var e=v.get(t);if(e){var r=_.indexOf(t);m.splice(r,0,o.createElement(ix,{key:nx(e),isPresent:!1,onExitComplete:function(){v.delete(t),g.delete(t);var e=y.current.findIndex((function(e){return e.key===t}));if(y.current.splice(e,1),!g.size){if(y.current=f,!1===p.current)return;h(),a&&a()}},custom:i,presenceAffectsLayout:c},e))}}})),m=m.map((function(t){var e=t.key;return g.has(e)?t:o.createElement(ix,{key:nx(t),isPresent:!0,presenceAffectsLayout:c},t)})),"production"!==pu&&s&&m.length>1&&console.warn("You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour."),o.createElement(o.Fragment,null,g.size?m:m.map((function(t){return(0,o.cloneElement)(t)})))},ax=i(950),[sx,lx]=Wt({strict:!1,name:"PortalContext"}),cx="chakra-portal",ux=e=>(0,t.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),hx=e=>{const{appendToParentPortal:i,children:r}=e,[n,a]=(0,o.useState)(null),s=(0,o.useRef)(null),[,l]=(0,o.useState)({});(0,o.useEffect)((()=>l({})),[]);const c=lx(),u=Gt();tr((()=>{if(!n)return;const t=n.ownerDocument,e=i&&null!=c?c:t.body;if(!e)return;s.current=t.createElement("div"),s.current.className=cx,e.appendChild(s.current),l({});const r=s.current;return()=>{e.contains(r)&&e.removeChild(r)}}),[n]);const h=(null==u?void 0:u.zIndex)?(0,t.jsx)(ux,{zIndex:null==u?void 0:u.zIndex,children:r}):r;return s.current?(0,ax.createPortal)((0,t.jsx)(sx,{value:s.current,children:h}),s.current):(0,t.jsx)("span",{ref:t=>{t&&a(t)}})},dx=e=>{const{children:i,containerRef:r,appendToParentPortal:n}=e,a=r.current,s=null!=a?a:"undefined"!==typeof window?document.body:void 0,l=(0,o.useMemo)((()=>{const t=null==a?void 0:a.ownerDocument.createElement("div");return t&&(t.className=cx),t}),[a]),[,c]=(0,o.useState)({});return tr((()=>c({})),[]),tr((()=>{if(l&&s)return s.appendChild(l),()=>{s.removeChild(l)}}),[l,s]),s&&l?(0,ax.createPortal)((0,t.jsx)(sx,{value:n?l:null,children:i}),l):null};function px(e){const i={appendToParentPortal:!0,...e},{containerRef:r,...n}=i;return r?(0,t.jsx)(dx,{containerRef:r,...n}):(0,t.jsx)(hx,{...n})}px.className=cx,px.selector=".chakra-portal",px.displayName="Portal";var[fx,mx]=Wt({name:"ToastOptionsContext",strict:!1}),gx=e=>{const i=(0,o.useSyncExternalStore)($v.subscribe,$v.getState,$v.getState),{motionVariants:r,component:n=Mv,portalProps:a}=e,s=Object.keys(i).map((e=>{const o=i[e];return(0,t.jsx)("div",{role:"region","aria-live":"polite","aria-label":"Notifications-".concat(e),id:"chakra-toast-manager-".concat(e),style:Kc(e),children:(0,t.jsx)(ox,{initial:!1,children:o.map((e=>(0,t.jsx)(n,{motionVariants:r,...e},e.id)))})},e)}));return(0,t.jsx)(px,{...a,children:s})},yx=e=>function(i){let{children:r,theme:n=e,toastOptions:o,...a}=i;return(0,t.jsxs)(ar,{theme:n,...a,children:[(0,t.jsx)(fx,{value:null==o?void 0:o.defaultOptions,children:r}),(0,t.jsx)(gx,{...o})]})},vx=yx(Gc),xx=(yx(qc),Av("div"));xx.displayName="Box";var _x=Ev((function(e,i){const{size:r,centerContent:n=!0,...o}=e,a=n?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return(0,t.jsx)(xx,{ref:i,boxSize:r,__css:{...a,flexShrink:0,flexGrow:0},...o})}));_x.displayName="Square";var bx=Ev((function(e,i){const{size:r,...n}=e;return(0,t.jsx)(_x,{size:r,ref:i,borderRadius:"9999px",...n})}));bx.displayName="Circle";var wx=Ev((function(e,i){const{direction:r,align:n,justify:o,wrap:a,basis:s,grow:l,shrink:c,...u}=e,h={display:"flex",flexDirection:r,alignItems:n,justifyContent:o,flexWrap:a,flexBasis:s,flexGrow:l,flexShrink:c};return(0,t.jsx)(Av.div,{ref:i,__css:h,...u})}));wx.displayName="Flex";const Sx=o.createContext(null);function kx(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!kx(t[i],e[i]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const n of i){if(!e.hasOwnProperty(n))return!1;if(!kx(t[n],e[n]))return!1}return!0}return!1}function Cx(t,e){if(!t.getProjection)return;const i=t.getProjection();kx(i,e.getProjection())||e.setProjection(i)}function Tx(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function Ax(t,e){const i=e.viewState||e;let r=!1;if("longitude"in i&&"latitude"in i){const e=t.center;t.center=new e.constructor(i.longitude,i.latitude),r=r||e!==t.center}if("zoom"in i){const e=t.zoom;t.zoom=i.zoom,r=r||e!==t.zoom}if("bearing"in i){const e=t.bearing;t.bearing=i.bearing,r=r||e!==t.bearing}if("pitch"in i){const e=t.pitch;t.pitch=i.pitch,r=r||e!==t.pitch}return i.padding&&!t.isPaddingEqual(i.padding)&&(r=!0,t.padding=i.padding),r}const Px=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mx(t){if(!t)return null;if("string"===typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const e={};for(const r of t.layers)e[r.id]=r;const i=t.layers.map((t=>{let i=null;"interactive"in t&&(i=Object.assign({},t),delete i.interactive);const r=e[t.ref];if(r){i=i||Object.assign({},t),delete i.ref;for(const t of Px)t in r&&(i[t]=r[t])}return i||t}));return{...t,layers:i}}const Ex={version:8,sources:{},layers:[]},Ix={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},zx={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Lx={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Dx=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Rx=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ox{constructor(t,e,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{const e=this.props[Lx[t.type]];e?e(t):"error"===t.type&&console.error(t.error)},this._onPointerEvent=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this._updateHover(t);const e=this.props[Ix[t.type]];e&&(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type&&(t.features=this._hoveredFeatures||this._queryRenderedFeatures(t.point)),e(t),delete t.features)},this._onCameraEvent=t=>{if(!this._internalUpdate){const e=this.props[zx[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const e=this.props;this.props=t;const i=this._updateSettings(t,e);i&&this._createShadowTransform(this._map);const r=this._updateSize(t),n=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(i||r||n&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){const i=Ox.savedMaps.pop();if(!i)return null;const r=i.map,n=r.getContainer();for(e.className=n.className;n.childNodes.length>0;)e.appendChild(n.childNodes[0]);r._container=e;const o=r._resizeObserver;o&&(o.disconnect(),o.observe(e)),i.setProps({...t,styleDiffing:!1}),r.resize();const{initialViewState:a}=t;return a&&(a.bounds?r.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):i._updateViewState(a,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),r._update(),i}_initialize(t){const{props:e}=this,{mapStyle:i=Ex}=e,r={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||Bx()||null,container:t,style:Mx(i)},n=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[n.longitude||0,n.latitude||0],zoom:n.zoom||0,pitch:n.pitch||0,bearing:n.bearing||0}),e.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}const o=new this._MapClass(r);n.padding&&o.setPadding(n.padding),e.cursor&&(o.getCanvas().style.cursor=e.cursor),this._createShadowTransform(o);const a=o._render;o._render=t=>{this._inRender=!0,a.call(o,t),this._inRender=!1};const s=o._renderTaskQueue.run;o._renderTaskQueue.run=t=>{s.call(o._renderTaskQueue,t),this._onBeforeRepaint()},o.on("render",(()=>this._onAfterRepaint()));const l=o.fire;o.fire=this._fireEvent.bind(this,l),o.on("resize",(()=>{this._renderTransform.resize(o.transform.width,o.transform.height)})),o.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),Cx(o.transform,this._renderTransform)})),o.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const c in Ix)o.on(c,this._onPointerEvent);for(const c in zx)o.on(c,this._onCameraEvent);for(const c in Lx)o.on(c,this._onEvent);this._map=o}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");null===t||void 0===t||t.remove(),Ox.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const e=function(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e,this._renderTransform=e}_updateSize(t){const{viewState:e}=t;if(e){const t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;const i=this._map,r=this._renderTransform,{zoom:n,pitch:o,bearing:a}=r,s=i.isMoving();s&&(r.cameraElevationReference="sea");const l=Ax(r,{...Tx(i.transform),...t});if(s&&(r.cameraElevationReference="ground"),l&&e){const t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=n!==r.zoom),t.rotate||(t.rotate=a!==r.bearing),t.pitch||(t.pitch=o!==r.pitch)}return s||Ax(i.transform,t),l}_updateSettings(t,e){const i=this._map;let r=!1;for(const n of Dx)if(n in t&&!kx(t[n],e[n])){r=!0;const e=i["set".concat(n[0].toUpperCase()).concat(n.slice(1))];null===e||void 0===e||e.call(i,t[n])}return r}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==e.mapStyle){const{mapStyle:e=Ex,styleDiffing:i=!0}=t,r={diff:i};return"localIdeographFontFamily"in t&&(r.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Mx(e),r),!0}return!1}_updateStyleComponents(t,e){const i=this._map;let r=!1;return i.isStyleLoaded()&&("light"in t&&i.setLight&&!kx(t.light,e.light)&&(r=!0,i.setLight(t.light)),"fog"in t&&i.setFog&&!kx(t.fog,e.fog)&&(r=!0,i.setFog(t.fog)),"terrain"in t&&i.setTerrain&&!kx(t.terrain,e.terrain)&&(t.terrain&&!i.getSource(t.terrain.source)||(r=!0,i.setTerrain(t.terrain)))),r}_updateHandlers(t,e){var i,r;const n=this._map;let o=!1;for(const a of Rx){const s=null===(i=t[a])||void 0===i||i;kx(s,null===(r=e[a])||void 0===r||r)||(o=!0,s?n[a].enable(s):n[a].disable())}return o}_queryRenderedFeatures(t){const e=this._map,i=e.transform,{interactiveLayerIds:r=[]}=this.props;try{return e.transform=this._renderTransform,e.queryRenderedFeatures(t,{layers:r.filter(e.getLayer.bind(e))})}catch(Zo){return[]}finally{e.transform=i}}_updateHover(t){var e;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const i=t.type,r=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0,n=this._queryRenderedFeatures(t.point),o=n.length>0;!o&&r&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=n,o&&!r&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=i}else this._hoveredFeatures=null}_fireEvent(t,e,i){const r=this._map,n=r.transform,o="string"===typeof e?e:e.type;return"move"===o&&this._updateViewState(this.props,!1),o in zx&&("object"===typeof e&&(e.viewState=Tx(n)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,i),r.transform=n,r):(t.call(r,e,i),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;const e=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{Cx(this._renderTransform,e),t.transform=e}}}function Bx(){let t=null;if("undefined"!==typeof location){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"/react-maplibre-highcharts",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(Zo){}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"/react-maplibre-highcharts",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(Yo){}return t}Ox.savedMaps=[];const Fx=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function jx(t){if(!t)return null;const e=t.map,i={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>{const r=e.transform;e.transform=t.transform;const n=e.project(i);return e.transform=r,n},unproject:i=>{const r=e.transform;e.transform=t.transform;const n=e.unproject(i);return e.transform=r,n},queryTerrainElevation:(i,r)=>{const n=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(i,r);return e.transform=n,o},queryRenderedFeatures:(i,r)=>{const n=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(i,r);return e.transform=n,o}};for(const r of function(t){const e=new Set;let i=t;for(;i;){for(const r of Object.getOwnPropertyNames(i))"_"!==r[0]&&"function"===typeof t[r]&&"fire"!==r&&"setEventedParent"!==r&&e.add(r);i=Object.getPrototypeOf(i)}return Array.from(e)}(e))r in i||Fx.includes(r)||(i[r]=e[r].bind(e));return i}const Nx="undefined"!==typeof document?o.useLayoutEffect:o.useEffect,Vx=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const Ux=o.createContext(null);function Wx(t,e,i){const r=(0,o.useContext)(Sx),[n,a]=(0,o.useState)(null),s=(0,o.useRef)(),{current:l}=(0,o.useRef)({mapLib:null,map:null});(0,o.useEffect)((()=>{const e=t.mapLib;let n,o=!0;return Promise.resolve(e||i).then((e=>{if(!o)return;if(!e)throw new Error("Invalid mapLib");const i="Map"in e?e:e.default;if(!i.Map)throw new Error("Invalid mapLib");if(function(t,e){for(const r of Vx)r in e&&(t[r]=e[r]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;i&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(i,(t=>{t&&console.error(t)}),!0)}(i,t),i.supported&&!i.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(n=Ox.reuse(t,s.current)),n||(n=new Ox(i.Map,t,s.current)),l.map=jx(n),l.mapLib=i,a(n),null===r||void 0===r||r.onMapMount(l.map,t.id)})).catch((e=>{const{onError:i}=t;i?i({type:"error",target:null,originalEvent:null,error:e}):console.error(e)})),()=>{o=!1,n&&(null===r||void 0===r||r.onMapUnmount(t.id),t.reuseMaps?n.recycle():n.destroy())}}),[]),Nx((()=>{n&&n.setProps(t)})),(0,o.useImperativeHandle)(e,(()=>l.map),[n]);const c=(0,o.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return o.createElement("div",{id:t.id,ref:s,style:c},n&&o.createElement(Ux.Provider,{value:l},o.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}const Hx=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Gx(t,e){if(!t||!e)return;const i=t.style;for(const r in e){const t=e[r];Number.isFinite(t)&&!Hx.test(r)?i[r]="".concat(t,"px"):i[r]=t}}(0,o.memo)((0,o.forwardRef)((function(t,e){const{map:i,mapLib:r}=(0,o.useContext)(Ux),n=(0,o.useRef)({props:t});n.current.props=t;const a=(0,o.useMemo)((()=>{let e=!1;o.Children.forEach(t.children,(t=>{t&&(e=!0)}));const i={...t,element:e?document.createElement("div"):null},s=new r.Marker(i);return s.setLngLat([t.longitude,t.latitude]),s.getElement().addEventListener("click",(t=>{var e,i;null===(i=(e=n.current.props).onClick)||void 0===i||i.call(e,{type:"click",target:s,originalEvent:t})})),s.on("dragstart",(t=>{var e,i;const r=t;r.lngLat=a.getLngLat(),null===(i=(e=n.current.props).onDragStart)||void 0===i||i.call(e,r)})),s.on("drag",(t=>{var e,i;const r=t;r.lngLat=a.getLngLat(),null===(i=(e=n.current.props).onDrag)||void 0===i||i.call(e,r)})),s.on("dragend",(t=>{var e,i;const r=t;r.lngLat=a.getLngLat(),null===(i=(e=n.current.props).onDragEnd)||void 0===i||i.call(e,r)})),s}),[]);(0,o.useEffect)((()=>(a.addTo(i.getMap()),()=>{a.remove()})),[]);const{longitude:s,latitude:l,offset:c,style:u,draggable:h=!1,popup:d=null,rotation:p=0,rotationAlignment:f="auto",pitchAlignment:m="auto"}=t;return(0,o.useEffect)((()=>{Gx(a.getElement(),u)}),[u]),(0,o.useImperativeHandle)(e,(()=>a),[]),a.getLngLat().lng===s&&a.getLngLat().lat===l||a.setLngLat([s,l]),c&&!function(t,e){const i=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,n=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return i===n&&r===o}(a.getOffset(),c)&&a.setOffset(c),a.isDraggable()!==h&&a.setDraggable(h),a.getRotation()!==p&&a.setRotation(p),a.getRotationAlignment()!==f&&a.setRotationAlignment(f),a.getPitchAlignment()!==m&&a.setPitchAlignment(m),a.getPopup()!==d&&a.setPopup(d),(0,ax.createPortal)(t.children,a.getElement())})));function qx(t){return new Set(t?t.trim().split(/\s+/):[])}(0,o.memo)((0,o.forwardRef)((function(t,e){const{map:i,mapLib:r}=(0,o.useContext)(Ux),n=(0,o.useMemo)((()=>document.createElement("div")),[]),a=(0,o.useRef)({props:t});a.current.props=t;const s=(0,o.useMemo)((()=>{const e={...t},i=new r.Popup(e);return i.setLngLat([t.longitude,t.latitude]),i.once("open",(t=>{var e,i;null===(i=(e=a.current.props).onOpen)||void 0===i||i.call(e,t)})),i}),[]);if((0,o.useEffect)((()=>{const t=t=>{var e,i;null===(i=(e=a.current.props).onClose)||void 0===i||i.call(e,t)};return s.on("close",t),s.setDOMContent(n).addTo(i.getMap()),()=>{s.off("close",t),s.isOpen()&&s.remove()}}),[]),(0,o.useEffect)((()=>{Gx(s.getElement(),t.style)}),[t.style]),(0,o.useImperativeHandle)(e,(()=>s),[]),s.isOpen()&&(s.getLngLat().lng===t.longitude&&s.getLngLat().lat===t.latitude||s.setLngLat([t.longitude,t.latitude]),t.offset&&!kx(s.options.offset,t.offset)&&s.setOffset(t.offset),s.options.anchor===t.anchor&&s.options.maxWidth===t.maxWidth||(s.options.anchor=t.anchor,s.setMaxWidth(t.maxWidth)),s.options.className!==t.className)){const e=qx(s.options.className),i=qx(t.className);for(const t of e)i.has(t)||s.removeClassName(t);for(const t of i)e.has(t)||s.addClassName(t);s.options.className=t.className}return(0,ax.createPortal)(t.children,n)})));const Zx=function(t,e,i,r){const n=(0,o.useContext)(Ux),a=(0,o.useMemo)((()=>t(n)),[]);return(0,o.useEffect)((()=>{const t=r||i||e,o="function"===typeof e&&"function"===typeof i?e:null,s="function"===typeof i?i:"function"===typeof e?e:null,{map:l}=n;return l.hasControl(a)||(l.addControl(a,null===t||void 0===t?void 0:t.position),o&&o(n)),()=>{s&&s(n),l.hasControl(a)&&l.removeControl(a)}}),[]),a};(0,o.memo)((function(t){const e=Zx((e=>{let{mapLib:i}=e;return new i.AttributionControl(t)}),{position:t.position});return(0,o.useEffect)((()=>{Gx(e._container,t.style)}),[t.style]),null}));(0,o.memo)((function(t){const e=Zx((e=>{let{mapLib:i}=e;return new i.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,o.useEffect)((()=>{Gx(e._controlContainer,t.style)}),[t.style]),null}));(0,o.memo)((0,o.forwardRef)((function(t,e){const i=(0,o.useRef)({props:t}),r=Zx((e=>{let{mapLib:r}=e;const n=new r.GeolocateControl(t),o=n._setupUI;return n._setupUI=t=>{n._container.hasChildNodes()||o(t)},n.on("geolocate",(t=>{var e,r;null===(r=(e=i.current.props).onGeolocate)||void 0===r||r.call(e,t)})),n.on("error",(t=>{var e,r;null===(r=(e=i.current.props).onError)||void 0===r||r.call(e,t)})),n.on("outofmaxbounds",(t=>{var e,r;null===(r=(e=i.current.props).onOutOfMaxBounds)||void 0===r||r.call(e,t)})),n.on("trackuserlocationstart",(t=>{var e,r;null===(r=(e=i.current.props).onTrackUserLocationStart)||void 0===r||r.call(e,t)})),n.on("trackuserlocationend",(t=>{var e,r;null===(r=(e=i.current.props).onTrackUserLocationEnd)||void 0===r||r.call(e,t)})),n}),{position:t.position});return i.current.props=t,(0,o.useImperativeHandle)(e,(()=>r),[]),(0,o.useEffect)((()=>{Gx(r._container,t.style)}),[t.style]),null})));(0,o.memo)((function(t){const e=Zx((e=>{let{mapLib:i}=e;return new i.NavigationControl(t)}),{position:t.position});return(0,o.useEffect)((()=>{Gx(e._container,t.style)}),[t.style]),null}));(0,o.memo)((function(t){const e=Zx((e=>{let{mapLib:i}=e;return new i.ScaleControl(t)}),{position:t.position}),i=(0,o.useRef)(t),r=i.current;i.current=t;const{style:n}=t;return void 0!==t.maxWidth&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==r.unit&&e.setUnit(t.unit),(0,o.useEffect)((()=>{Gx(e._container,n)}),[n]),null}));function Xx(){return function(){var t;const e=null===(t=(0,o.useContext)(Sx))||void 0===t?void 0:t.maps,i=(0,o.useContext)(Ux);return(0,o.useMemo)((()=>({...e,current:null===i||void 0===i?void 0:i.map})),[e,i])}()}const Yx=Promise.resolve().then(i.t.bind(i,66,23)),Kx=o.forwardRef((function(t,e){return Wx(t,e,Yx)}));var $x=Ev((function(e,i){const{htmlWidth:r,htmlHeight:n,alt:o,...a}=e;return(0,t.jsx)("img",{width:r,height:n,ref:i,alt:o,...a})}));$x.displayName="NativeImage";function Jx(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=Object.assign({},t);for(const r of e)r in i&&delete i[r];return i}var Qx=Ev((function(e,i){const{fallbackSrc:r,fallback:n,src:a,srcSet:s,align:l,fit:c,loading:u,ignoreFallback:h,crossOrigin:d,fallbackStrategy:p="beforeLoadOrError",referrerPolicy:f,...m}=e,g=null!=u||h||!(void 0!==r||void 0!==n),y=function(t){const{loading:e,src:i,srcSet:r,onLoad:n,onError:a,crossOrigin:s,sizes:l,ignoreFallback:c}=t,[u,h]=(0,o.useState)("pending");(0,o.useEffect)((()=>{h(i?"loading":"pending")}),[i]);const d=(0,o.useRef)(),p=(0,o.useCallback)((()=>{if(!i)return;f();const t=new Image;t.src=i,s&&(t.crossOrigin=s),r&&(t.srcset=r),l&&(t.sizes=l),e&&(t.loading=e),t.onload=t=>{f(),h("loaded"),null==n||n(t)},t.onerror=t=>{f(),h("failed"),null==a||a(t)},d.current=t}),[i,s,r,l,n,a,e]),f=()=>{d.current&&(d.current.onload=null,d.current.onerror=null,d.current=null)};return tr((()=>{if(!c)return"loading"===u&&p(),()=>{f()}}),[u,p,c]),c?"loaded":u}({...e,crossOrigin:d,ignoreFallback:g}),v=((t,e)=>"loaded"!==t&&"beforeLoadOrError"===e||"failed"===t&&"onError"===e)(y,p),x={ref:i,objectFit:c,objectPosition:l,...g?m:Jx(m,["onError","onLoad"])};return v?n||(0,t.jsx)(Av.img,{as:$x,className:"chakra-image__placeholder",src:r,...x}):(0,t.jsx)(Av.img,{as:$x,src:a,srcSet:s,crossOrigin:d,loading:u,referrerPolicy:f,className:"chakra-image",...x})}));Qx.displayName="Image";var t_=Ev((function(e,i){const r=Dv("Text",e),{className:n,align:o,decoration:a,casing:s,...l}=Fi(e),c=function(t){const e=Object.assign({},t);for(let i in e)void 0===e[i]&&delete e[i];return e}({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,t.jsx)(Av.p,{ref:i,className:Yt("chakra-text",e.className),...c,...l,__css:r})}));t_.displayName="Text";var e_=i(488),i_=i.n(e_),r_=i(999),n_=i.n(r_);function o_(e){return i_().setOptions(a_),(0,t.jsx)("div",{children:(0,t.jsx)(n_(),{highcharts:i_(),options:e.options})})}const a_={colors:["#A9CF54","#C23C2A","#FFFFFF","#979797","#FBB829"],chart:{backgroundColor:"var(--chakra-colors-chakra-body-bg)",style:{color:"white"}},legend:{enabled:!0,align:"right",verticalAlign:"bottom",itemStyle:{color:"#C0C0C0"},itemHoverStyle:{color:"#C0C0C0"},itemHiddenStyle:{color:"#444444"}},title:{style:{color:"#FFFFFF"}},tooltip:{backgroundColor:"#1C242D",borderColor:"#1C242D",borderWidth:1,borderRadius:0,style:{color:"#FFFFFF"}},subtitle:{style:{color:"#666666"}}};function s_(){const e={title:{text:"A line chart"},series:[{type:"line",data:[1,2,3]}]};return(0,t.jsxs)(wx,{flexDir:"column",justifyContent:"space-between",h:"100%",children:[(0,t.jsx)(xx,{p:3,bgColor:"gray.700",children:(0,t.jsx)(t_,{fontSize:"3xl",fontWeight:"bold",children:"Dashboard"})}),(0,t.jsxs)(xx,{maxH:"100%",overflowY:"auto",children:[(0,t.jsx)(o_,{options:e}),(0,t.jsx)(o_,{options:e}),(0,t.jsx)(o_,{options:e})]}),(0,t.jsxs)(wx,{p:3,bgColor:"gray.700",flexDir:"row",alignItems:"center",justifyContent:"center",children:[(0,t.jsx)(t_,{fontSize:"sm",children:"Powered by "})," \xa0",(0,t.jsx)(Qx,{src:"/favicon.png",alt:"Logo",h:10})]})]})}var l_=i(66),c_=i.n(l_);const u_=(0,o.createContext)({mapRef:null});const h_=()=>(0,o.useContext)(u_);function d_(){const{mapRef:e}=h_(),[i,r]=(0,o.useState)({longitude:-62.648736376081786,latitude:-25.63613760812686,zoom:2.6090850674385604,pitch:0,bearing:0,padding:{top:0,bottom:0,left:0,right:0}});return(0,t.jsx)(Kx,{...i,ref:e,mapLib:c_(),onMove:t=>r(t.viewState),style:{width:"100%",height:"100%"},mapStyle:"https://s3.amazonaws.com/cdn.brianbancroft.io/assets/osmstyle.json"})}function p_(){const{current:e}=Xx();return console.log(e),(0,t.jsx)(vx,{theme:Gc,children:(0,t.jsx)(xx,{textAlign:"center",fontSize:"xl",children:(0,t.jsxs)(wx,{minH:"100vh",flexDir:"row",minW:"100vw",justifyContent:"space-between",zIndex:1,maxH:"100vh",children:[(0,t.jsx)(xx,{flex:1,children:(0,t.jsx)(d_,{})}),(0,t.jsx)(xx,{borderRadius:"5px 0 0 5px",boxShadow:"-12px 0px 5px -3px rgba(0,0,0,0.25);",maxW:"400px",flex:1,zIndex:2,children:(0,t.jsx)(s_,{})})]})})})}const f_=t=>{t&&t instanceof Function&&i.e(453).then(i.bind(i,453)).then((e=>{let{getCLS:i,getFID:r,getFCP:n,getLCP:o,getTTFB:a}=e;i(t),r(t),n(t),o(t),a(t)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));const m_=document.getElementById("root");if(!m_)throw new Error("Failed to find the root element");s.H(m_).render((0,t.jsxs)(o.StrictMode,{children:[(0,t.jsx)(n,{initialColorMode:"dark"}),(0,t.jsx)(p_,{})]})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((t=>{t.unregister()})).catch((t=>{console.error(t.message)})),f_()})()})();
//# sourceMappingURL=main.021bf106.js.map